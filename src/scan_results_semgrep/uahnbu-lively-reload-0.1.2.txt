<?xml version="1.0" ?>
<testsuites disabled="0" errors="0" failures="2" tests="2" time="0.0">
	<testsuite disabled="0" errors="0" failures="2" name="semgrep results" skipped="0" tests="2" time="0">
		<testcase name="javascript.lang.security.audit.unsafe-formatstring.unsafe-formatstring" classname="/Users/zta/Documents/EC521/src/unzipped/uahnbu-lively-reload-0.1.2/extension/out/static/lively_script.js" file="/Users/zta/Documents/EC521/src/unzipped/uahnbu-lively-reload-0.1.2/extension/out/static/lively_script.js" line="1">
			<failure type="INFO" message="Detected string concatenation with a non-literal variable in a util.format / console.log function. If an attacker injects a format specifier in the string, it will forge the log message. Try to use constant values for the format string.">!function(e,t){if(&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module)module.exports=t();else if(&quot;function&quot;==typeof define&amp;&amp;define.amd)define([],t);else{var o=t();for(var n in o)(&quot;object&quot;==typeof exports?exports:e)[n]=o[n]}}(self,(function(){return(()=&gt;{&quot;use strict&quot;;var e={270:(e,t,o)=&gt;{function n(e,t,o){let s;return&quot;#text&quot;===e.nodeName?s=o.document.createTextNode(e.data):&quot;#comment&quot;===e.nodeName?s=o.document.createComment(e.data):(t?s=o.document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,e.nodeName):&quot;svg&quot;===e.nodeName.toLowerCase()?(s=o.document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,&quot;svg&quot;),t=!0):s=o.document.createElement(e.nodeName),e.attributes&amp;&amp;Object.entries(e.attributes).forEach((([e,t])=&gt;s.setAttribute(e,t))),e.childNodes&amp;&amp;e.childNodes.forEach((e=&gt;s.appendChild(n(e,t,o)))),o.valueDiffing&amp;&amp;(e.value&amp;&amp;(s.value=e.value),e.checked&amp;&amp;(s.checked=e.checked),e.selected&amp;&amp;(s.selected=e.selected))),s}function s(e,t){for(t=t.slice();t.length&gt;0;){if(!e.childNodes)return!1;const o=t.splice(0,1)[0];e=e.childNodes[o]}return e}function i(e,t,o){let i,a,l,c,r,d=s(e,t[o._const.route]);const u={diff:t,node:d};if(o.preDiffApply(u))return!0;switch(t[o._const.action]){case o._const.addAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(t[o._const.name],t[o._const.value]);break;case o._const.modifyAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(t[o._const.name],t[o._const.newValue]),&quot;INPUT&quot;===d.nodeName&amp;&amp;&quot;value&quot;===t[o._const.name]&amp;&amp;(d.value=t[o._const.newValue]);break;case o._const.removeAttribute:if(!d||!d.removeAttribute)return!1;d.removeAttribute(t[o._const.name]);break;case o._const.modifyTextElement:if(!d||3!==d.nodeType)return!1;o.textDiff(d,d.data,t[o._const.oldValue],t[o._const.newValue]);break;case o._const.modifyValue:if(!d||void 0===d.value)return!1;d.value=t[o._const.newValue];break;case o._const.modifyComment:if(!d||void 0===d.data)return!1;o.textDiff(d,d.data,t[o._const.oldValue],t[o._const.newValue]);break;case o._const.modifyChecked:if(!d||void 0===d.checked)return!1;d.checked=t[o._const.newValue];break;case o._const.modifySelected:if(!d||void 0===d.selected)return!1;d.selected=t[o._const.newValue];break;case o._const.replaceElement:d.parentNode.replaceChild(n(t[o._const.newValue],&quot;http://www.w3.org/2000/svg&quot;===d.namespaceURI,o),d);break;case o._const.relocateGroup:c=Array(...new Array(t.groupLength)).map((()=&gt;d.removeChild(d.childNodes[t[o._const.from]]))),c.forEach(((e,n)=&gt;{0===n&amp;&amp;(a=d.childNodes[t[o._const.to]]),d.insertBefore(e,a||null)}));break;case o._const.removeElement:d.parentNode.removeChild(d);break;case o._const.addElement:l=t[o._const.route].slice(),r=l.splice(l.length-1,1)[0],d=s(e,l),d.insertBefore(n(t[o._const.element],&quot;http://www.w3.org/2000/svg&quot;===d.namespaceURI,o),d.childNodes[r]||null);break;case o._const.removeTextElement:if(!d||3!==d.nodeType)return!1;d.parentNode.removeChild(d);break;case o._const.addTextElement:if(l=t[o._const.route].slice(),r=l.splice(l.length-1,1)[0],i=o.document.createTextNode(t[o._const.value]),d=s(e,l),!d||!d.childNodes)return!1;d.insertBefore(i,d.childNodes[r]||null);break;default:console.log(&quot;unknown action&quot;)}return u.newNode=i,o.postDiffApply(u),!0}function a(e,t,o){const n=e[t];e[t]=e[o],e[o]=n}o.r(t),o.d(t,{DiffDOM:()=&gt;O,TraceLogger:()=&gt;S,nodeToObj:()=&gt;v,stringToObj:()=&gt;A});class l{constructor(e={}){Object.entries(e).forEach((([e,t])=&gt;this[e]=t))}toString(){return JSON.stringify(this)}setValue(e,t){return this[e]=t,this}}function c(e){const t=[];return t.push(e.nodeName),&quot;#text&quot;!==e.nodeName&amp;&amp;&quot;#comment&quot;!==e.nodeName&amp;&amp;e.attributes&amp;&amp;(e.attributes.class&amp;&amp;t.push(`${e.nodeName}.${e.attributes.class.replace(/ /g,&quot;.&quot;)}`),e.attributes.id&amp;&amp;t.push(`${e.nodeName}#${e.attributes.id}`)),t}function r(e){const t={},o={};return e.forEach((e=&gt;{c(e).forEach((e=&gt;{const n=e in t;n||e in o?n&amp;&amp;(delete t[e],o[e]=!0):t[e]=!0}))})),t}function d(e,t){const o=r(e),n=r(t),s={};return Object.keys(o).forEach((e=&gt;{n[e]&amp;&amp;(s[e]=!0)})),s}function u(e){return delete e.outerDone,delete e.innerDone,delete e.valueDone,!e.childNodes||e.childNodes.every(u)}function h(e,t){if(![&quot;nodeName&quot;,&quot;value&quot;,&quot;checked&quot;,&quot;selected&quot;,&quot;data&quot;].every((o=&gt;e[o]===t[o])))return!1;if(Boolean(e.attributes)!==Boolean(t.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(t.childNodes))return!1;if(e.attributes){const o=Object.keys(e.attributes),n=Object.keys(t.attributes);if(o.length!==n.length)return!1;if(!o.every((o=&gt;e.attributes[o]===t.attributes[o])))return!1}if(e.childNodes){if(e.childNodes.length!==t.childNodes.length)return!1;if(!e.childNodes.every(((e,o)=&gt;h(e,t.childNodes[o]))))return!1}return!0}function f(e,t,o,n,s){if(!e||!t)return!1;if(e.nodeName!==t.nodeName)return!1;if(&quot;#text&quot;===e.nodeName)return!!s||e.data===t.data;if(e.nodeName in o)return!0;if(e.attributes&amp;&amp;t.attributes){if(e.attributes.id){if(e.attributes.id!==t.attributes.id)return!1;if(`${e.nodeName}#${e.attributes.id}`in o)return!0}if(e.attributes.class&amp;&amp;e.attributes.class===t.attributes.class&amp;&amp;`${e.nodeName}.${e.attributes.class.replace(/ /g,&quot;.&quot;)}`in o)return!0}if(n)return!0;const i=e.childNodes?e.childNodes.slice().reverse():[],a=t.childNodes?t.childNodes.slice().reverse():[];if(i.length!==a.length)return!1;if(s)return i.every(((e,t)=&gt;e.nodeName===a[t].nodeName));{const e=d(i,a);return i.every(((t,o)=&gt;f(t,a[o],e,!0,!0)))}}function p(e){return JSON.parse(JSON.stringify(e))}function m(e,t,o,n){let s=0,i=[];const a=e.length,l=t.length,r=Array(...new Array(a+1)).map((()=&gt;[])),u=d(e,t);let h=a===l;h&amp;&amp;e.some(((e,o)=&gt;{const n=c(e),s=c(t[o]);return n.length!==s.length?(h=!1,!0):(n.some(((e,t)=&gt;{if(e!==s[t])return h=!1,!0})),!h||void 0)}));for(let c=0;c&lt;a;c++){const a=e[c];for(let e=0;e&lt;l;e++){const l=t[e];o[c]||n[e]||!f(a,l,u,h)?r[c+1][e+1]=0:(r[c+1][e+1]=r[c][e]?r[c][e]+1:1,r[c+1][e+1]&gt;=s&amp;&amp;(s=r[c+1][e+1],i=[c+1,e+1]))}}return 0!==s&amp;&amp;{oldValue:i[0]-s,newValue:i[1]-s,length:s}}function g(e,t){return Array(...new Array(e)).map((()=&gt;t))}class _{constructor(){this.list=[]}add(e){this.list.push(...e)}forEach(e){this.list.forEach((t=&gt;e(t)))}}function b(e,t){let o,n,s=e;for(t=t.slice();t.length&gt;0;){if(!s.childNodes)return!1;n=t.splice(0,1)[0],o=s,s=s.childNodes[n]}return{node:s,parentNode:o,nodeIndex:n}}function y(e,t,o){return t.forEach((t=&gt;{!function(e,t,o){const n=b(e,t[o._const.route]);let s=n.node;const i=n.parentNode,a=n.nodeIndex,l=[],c={diff:t,node:s};if(o.preVirtualDiffApply(c))return!0;let r,d,u,h;switch(t[o._const.action]){case o._const.addAttribute:s.attributes||(s.attributes={}),s.attributes[t[o._const.name]]=t[o._const.value],&quot;checked&quot;===t[o._const.name]?s.checked=!0:&quot;selected&quot;===t[o._const.name]?s.selected=!0:&quot;INPUT&quot;===s.nodeName&amp;&amp;&quot;value&quot;===t[o._const.name]&amp;&amp;(s.value=t[o._const.value]);break;case o._const.modifyAttribute:s.attributes[t[o._const.name]]=t[o._const.newValue];break;case o._const.removeAttribute:delete s.attributes[t[o._const.name]],0===Object.keys(s.attributes).length&amp;&amp;delete s.attributes,&quot;checked&quot;===t[o._const.name]?s.checked=!1:&quot;selected&quot;===t[o._const.name]?delete s.selected:&quot;INPUT&quot;===s.nodeName&amp;&amp;&quot;value&quot;===t[o._const.name]&amp;&amp;delete s.value;break;case o._const.modifyTextElement:s.data=t[o._const.newValue];break;case o._const.modifyValue:s.value=t[o._const.newValue];break;case o._const.modifyComment:s.data=t[o._const.newValue];break;case o._const.modifyChecked:s.checked=t[o._const.newValue];break;case o._const.modifySelected:s.selected=t[o._const.newValue];break;case o._const.replaceElement:r=p(t[o._const.newValue]),r.outerDone=!0,r.innerDone=!0,r.valueDone=!0,i.childNodes[a]=r;break;case o._const.relocateGroup:d=s.childNodes.splice(t[o._const.from],t.groupLength).reverse(),d.forEach((e=&gt;s.childNodes.splice(t[o._const.to],0,e))),s.subsets&amp;&amp;s.subsets.forEach((e=&gt;{if(t[o._const.from]&lt;t[o._const.to]&amp;&amp;e.oldValue&lt;=t[o._const.to]&amp;&amp;e.oldValue&gt;t[o._const.from]){e.oldValue-=t.groupLength;const n=e.oldValue+e.length-t[o._const.to];n&gt;0&amp;&amp;(l.push({oldValue:t[o._const.to]+t.groupLength,newValue:e.newValue+e.length-n,length:n}),e.length-=n)}else if(t[o._const.from]&gt;t[o._const.to]&amp;&amp;e.oldValue&gt;t[o._const.to]&amp;&amp;e.oldValue&lt;t[o._const.from]){e.oldValue+=t.groupLength;const n=e.oldValue+e.length-t[o._const.to];n&gt;0&amp;&amp;(l.push({oldValue:t[o._const.to]+t.groupLength,newValue:e.newValue+e.length-n,length:n}),e.length-=n)}else e.oldValue===t[o._const.from]&amp;&amp;(e.oldValue=t[o._const.to])}));break;case o._const.removeElement:i.childNodes.splice(a,1),i.subsets&amp;&amp;i.subsets.forEach((e=&gt;{e.oldValue&gt;a?e.oldValue-=1:e.oldValue===a?e.delete=!0:e.oldValue&lt;a&amp;&amp;e.oldValue+e.length&gt;a&amp;&amp;(e.oldValue+e.length-1===a?e.length--:(l.push({newValue:e.newValue+a-e.oldValue,oldValue:a,length:e.length-a+e.oldValue-1}),e.length=a-e.oldValue))})),s=i;break;case o._const.addElement:u=t[o._const.route].slice(),h=u.splice(u.length-1,1)[0],s=b(e,u).node,r=p(t[o._const.element]),r.outerDone=!0,r.innerDone=!0,r.valueDone=!0,s.childNodes||(s.childNodes=[]),h&gt;=s.childNodes.length?s.childNodes.push(r):s.childNodes.splice(h,0,r),s.subsets&amp;&amp;s.subsets.forEach((e=&gt;{if(e.oldValue&gt;=h)e.oldValue+=1;else if(e.oldValue&lt;h&amp;&amp;e.oldValue+e.length&gt;h){const t=e.oldValue+e.length-h;l.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}}));break;case o._const.removeTextElement:i.childNodes.splice(a,1),&quot;TEXTAREA&quot;===i.nodeName&amp;&amp;delete i.value,i.subsets&amp;&amp;i.subsets.forEach((e=&gt;{e.oldValue&gt;a?e.oldValue-=1:e.oldValue===a?e.delete=!0:e.oldValue&lt;a&amp;&amp;e.oldValue+e.length&gt;a&amp;&amp;(e.oldValue+e.length-1===a?e.length--:(l.push({newValue:e.newValue+a-e.oldValue,oldValue:a,length:e.length-a+e.oldValue-1}),e.length=a-e.oldValue))})),s=i;break;case o._const.addTextElement:u=t[o._const.route].slice(),h=u.splice(u.length-1,1)[0],r={},r.nodeName=&quot;#text&quot;,r.data=t[o._const.value],s=b(e,u).node,s.childNodes||(s.childNodes=[]),h&gt;=s.childNodes.length?s.childNodes.push(r):s.childNodes.splice(h,0,r),&quot;TEXTAREA&quot;===s.nodeName&amp;&amp;(s.value=t[o._const.newValue]),s.subsets&amp;&amp;s.subsets.forEach((e=&gt;{if(e.oldValue&gt;=h&amp;&amp;(e.oldValue+=1),e.oldValue&lt;h&amp;&amp;e.oldValue+e.length&gt;h){const t=e.oldValue+e.length-h;l.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}}));break;default:console.log(&quot;unknown action&quot;)}s.subsets&amp;&amp;(s.subsets=s.subsets.filter((e=&gt;!e.delete&amp;&amp;e.oldValue!==e.newValue)),l.length&amp;&amp;(s.subsets=s.subsets.concat(l))),c.newNode=r,o.postVirtualDiffApply(c)}(e,t,o)})),!0}function v(e,t={}){const o={};return o.nodeName=e.nodeName,&quot;#text&quot;===o.nodeName||&quot;#comment&quot;===o.nodeName?o.data=e.data:(e.attributes&amp;&amp;e.attributes.length&gt;0&amp;&amp;(o.attributes={},Array.prototype.slice.call(e.attributes).forEach((e=&gt;o.attributes[e.name]=e.value))),&quot;TEXTAREA&quot;===o.nodeName?o.value=e.value:e.childNodes&amp;&amp;e.childNodes.length&gt;0&amp;&amp;(o.childNodes=[],Array.prototype.slice.call(e.childNodes).forEach((e=&gt;o.childNodes.push(v(e,t))))),t.valueDiffing&amp;&amp;(void 0!==e.checked&amp;&amp;e.type&amp;&amp;[&quot;radio&quot;,&quot;checkbox&quot;].includes(e.type.toLowerCase())?o.checked=e.checked:void 0!==e.value&amp;&amp;(o.value=e.value),void 0!==e.selected&amp;&amp;(o.selected=e.selected))),o}const V=/&lt;(?:&quot;[^&quot;]*&quot;['&quot;]*|'[^']*'['&quot;]*|[^'&quot;&gt;])+&gt;/g,N=Object.create?Object.create(null):{},w=/\s([^'&quot;/\s&gt;&lt;]+?)[\s/&gt;]|([^\s=]+)=\s?(&quot;.*?&quot;|'.*?')/g;function x(e){return e.replace(/&amp;lt;/g,&quot;&lt;&quot;).replace(/&amp;gt;/g,&quot;&gt;&quot;).replace(/&amp;amp;/g,&quot;&amp;&quot;)}const E={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function k(e){const t={nodeName:&quot;&quot;,attributes:{}};let o=e.match(/&lt;\/?([^\s]+?)[/\s&gt;]/);if(o&amp;&amp;(t.nodeName=o[1].toUpperCase(),(E[o[1].toLowerCase()]||&quot;/&quot;===e.charAt(e.length-2))&amp;&amp;(t.voidElement=!0),t.nodeName.startsWith(&quot;!--&quot;))){const t=e.indexOf(&quot;--\x3e&quot;);return{type:&quot;comment&quot;,data:-1!==t?e.slice(4,t):&quot;&quot;}}let n=new RegExp(w),s=null,i=!1;for(;!i;)if(s=n.exec(e),null===s)i=!0;else if(s[0].trim())if(s[1]){let e=s[1].trim(),o=[e,&quot;&quot;];e.indexOf(&quot;=&quot;)&gt;-1&amp;&amp;(o=e.split(&quot;=&quot;)),t.attributes[o[0]]=o[1],n.lastIndex--}else s[2]&amp;&amp;(t.attributes[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}function T(e){return delete e.voidElement,e.childNodes&amp;&amp;e.childNodes.forEach((e=&gt;T(e))),e}function A(e){return T(function(e,t={components:N}){const o=[];let n,s=-1;const i=[];let a=!1;return e.replace(V,((l,c)=&gt;{if(a){if(l!==`&lt;/${n.nodeName}&gt;`)return;a=!1}const r=&quot;/&quot;!==l.charAt(1),d=l.startsWith(&quot;\x3c!--&quot;),u=c+l.length,h=e.charAt(u);let f;if(d){const e=k(l);return s&lt;0?(o.push(e),o):(f=i[s],f&amp;&amp;(f.childNodes||(f.childNodes=[]),f.childNodes.push(e)),o)}if(r&amp;&amp;(n=k(l),s++,&quot;tag&quot;===n.type&amp;&amp;t.components[n.nodeName]&amp;&amp;(n.type=&quot;component&quot;,a=!0),n.voidElement||a||!h||&quot;&lt;&quot;===h||(n.childNodes||(n.childNodes=[]),n.childNodes.push({nodeName:&quot;#text&quot;,data:x(e.slice(u,e.indexOf(&quot;&lt;&quot;,u)))})),0===s&amp;&amp;o.push(n),f=i[s-1],f&amp;&amp;(f.childNodes||(f.childNodes=[]),f.childNodes.push(n)),i[s]=n),(!r||n.voidElement)&amp;&amp;(s--,!a&amp;&amp;&quot;&lt;&quot;!==h&amp;&amp;h)){f=-1===s?o:i[s].childNodes||[];const t=e.indexOf(&quot;&lt;&quot;,u),n=x(e.slice(u,-1===t?void 0:t));f.push({nodeName:&quot;#text&quot;,data:n})}})),o[0]}(e))}class D{constructor(e,t,o){this.options=o,this.t1=e instanceof HTMLElement?v(e,this.options):&quot;string&quot;==typeof e?A(e,this.options):JSON.parse(JSON.stringify(e)),this.t2=t instanceof HTMLElement?v(t,this.options):&quot;string&quot;==typeof t?A(t,this.options):JSON.parse(JSON.stringify(t)),this.diffcount=0,this.foundAll=!1,this.debug&amp;&amp;(this.t1Orig=v(e,this.options),this.t2Orig=v(t,this.options)),this.tracker=new _}init(){return this.findDiffs(this.t1,this.t2)}findDiffs(e,t){let o;do{if(this.options.debug&amp;&amp;(this.diffcount+=1,this.diffcount&gt;this.options.diffcap))throw window.diffError=[this.t1Orig,this.t2Orig],new Error(`surpassed diffcap:${JSON.stringify(this.t1Orig)} -&gt; ${JSON.stringify(this.t2Orig)}`);o=this.findNextDiff(e,t,[]),0===o.length&amp;&amp;(h(e,t)||(this.foundAll?console.error(&quot;Could not find remaining diffs!&quot;):(this.foundAll=!0,u(e),o=this.findNextDiff(e,t,[])))),o.length&gt;0&amp;&amp;(this.foundAll=!1,this.tracker.add(o),y(e,o,this.options))}while(o.length&gt;0);return this.tracker.list}findNextDiff(e,t,o){let n,s;if(this.options.maxDepth&amp;&amp;o.length&gt;this.options.maxDepth)return[];if(!e.outerDone){if(n=this.findOuterDiff(e,t,o),this.options.filterOuterDiff&amp;&amp;(s=this.options.filterOuterDiff(e,t,n),s&amp;&amp;(n=s)),n.length&gt;0)return e.outerDone=!0,n;e.outerDone=!0}if(!e.innerDone){if(n=this.findInnerDiff(e,t,o),n.length&gt;0)return n;e.innerDone=!0}if(this.options.valueDiffing&amp;&amp;!e.valueDone){if(n=this.findValueDiff(e,t,o),n.length&gt;0)return e.valueDone=!0,n;e.valueDone=!0}return[]}findOuterDiff(e,t,o){const n=[];let s,i,a,c,r,d;if(e.nodeName!==t.nodeName){if(!o.length)throw new Error(&quot;Top level nodes have to be of the same kind.&quot;);return[(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(e)).setValue(this.options._const.newValue,p(t)).setValue(this.options._const.route,o)]}if(o.length&amp;&amp;this.options.maxNodeDiffCount&lt;Math.abs((e.childNodes||[]).length-(t.childNodes||[]).length))return[(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(e)).setValue(this.options._const.newValue,p(t)).setValue(this.options._const.route,o)];if(e.data!==t.data)return&quot;#text&quot;===e.nodeName?[(new l).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,o).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[(new l).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,o).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(i=e.attributes?Object.keys(e.attributes).sort():[],a=t.attributes?Object.keys(t.attributes).sort():[],c=i.length,d=0;d&lt;c;d++)s=i[d],r=a.indexOf(s),-1===r?n.push((new l).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.value,e.attributes[s])):(a.splice(r,1),e.attributes[s]!==t.attributes[s]&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.oldValue,e.attributes[s]).setValue(this.options._const.newValue,t.attributes[s])));for(c=a.length,d=0;d&lt;c;d++)s=a[d],n.push((new l).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.value,t.attributes[s]));return n}findInnerDiff(e,t,o){const n=e.childNodes?e.childNodes.slice():[],s=t.childNodes?t.childNodes.slice():[],i=Math.max(n.length,s.length);let a=Math.abs(n.length-s.length),c=[],r=0;if(!this.options.maxChildCount||i&lt;this.options.maxChildCount){const n=e.subsets&amp;&amp;e.subsetsAge--?e.subsets:e.childNodes&amp;&amp;t.childNodes?function(e,t){const o=e.childNodes?e.childNodes:[],n=t.childNodes?t.childNodes:[],s=g(o.length,!1),i=g(n.length,!1),a=[];let l=!0;const c=function(){return arguments[1]};for(;l;)l=m(o,n,s,i),l&amp;&amp;(a.push(l),Array(...new Array(l.length)).map(c).forEach((e=&gt;{return t=e,s[l.oldValue+t]=!0,void(i[l.newValue+t]=!0);var t})));return e.subsets=a,e.subsetsAge=100,a}(e,t):[];if(n.length&gt;0&amp;&amp;(c=this.attemptGroupRelocation(e,t,n,o),c.length&gt;0))return c}for(let e=0;e&lt;i;e+=1){const t=n[e],d=s[e];a&amp;&amp;(t&amp;&amp;!d?&quot;#text&quot;===t.nodeName?(c.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.value,t.data)),r-=1):(c.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.element,p(t))),r-=1):d&amp;&amp;!t&amp;&amp;(&quot;#text&quot;===d.nodeName?c.push((new l).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.value,d.data)):c.push((new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.element,p(d))))),t&amp;&amp;d&amp;&amp;(!this.options.maxChildCount||i&lt;this.options.maxChildCount?c=c.concat(this.findNextDiff(t,d,o.concat(r))):h(t,d)||(n.length&gt;s.length?(&quot;#text&quot;===t.nodeName?c.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.value,t.data)):c.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,p(t)).setValue(this.options._const.route,o.concat(r))),n.splice(e,1),e-=1,r-=1,a-=1):n.length&lt;s.length?(c=c.concat([(new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,p(d)).setValue(this.options._const.route,o.concat(r))]),n.splice(e,0,{}),a-=1):c=c.concat([(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(t)).setValue(this.options._const.newValue,p(d)).setValue(this.options._const.route,o.concat(r))]))),r+=1}return e.innerDone=!0,c}attemptGroupRelocation(e,t,o,n){const s=function(e,t,o){const n=e.childNodes?g(e.childNodes.length,!0):[],s=t.childNodes?g(t.childNodes.length,!0):[];let i=0;return o.forEach((e=&gt;{const t=e.oldValue+e.length,o=e.newValue+e.length;for(let o=e.oldValue;o&lt;t;o+=1)n[o]=i;for(let t=e.newValue;t&lt;o;t+=1)s[t]=i;i+=1})),{gaps1:n,gaps2:s}}(e,t,o),i=s.gaps1,a=s.gaps2;let c,r,d,u,h,m,_=Math.min(i.length,a.length);const b=[];for(let s=0,g=0;s&lt;_;g+=1,s+=1)if(!0===i[s])if(u=e.childNodes[g],&quot;#text&quot;===u.nodeName)if(&quot;#text&quot;===t.childNodes[s].nodeName){if(u.data!==t.childNodes[s].data){for(m=g;e.childNodes.length&gt;m+1&amp;&amp;&quot;#text&quot;===e.childNodes[m+1].nodeName;)if(m+=1,t.childNodes[s].data===e.childNodes[m].data){h=!0;break}if(!h)return b.push((new l).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.oldValue,u.data).setValue(this.options._const.newValue,t.childNodes[s].data)),b}}else b.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.value,u.data)),i.splice(s,1),_=Math.min(i.length,a.length),s-=1;else b.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.element,p(u))),i.splice(s,1),_=Math.min(i.length,a.length),s-=1;else if(!0===a[s])u=t.childNodes[s],&quot;#text&quot;===u.nodeName?(b.push((new l).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.value,u.data)),i.splice(s,0,!0),_=Math.min(i.length,a.length),g-=1):(b.push((new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.element,p(u))),i.splice(s,0,!0),_=Math.min(i.length,a.length),g-=1);else if(i[s]!==a[s]){if(b.length&gt;0)return b;if(d=o[i[s]],r=Math.min(d.newValue,e.childNodes.length-d.length),r!==d.oldValue){c=!1;for(let t=0;t&lt;d.length;t+=1)f(e.childNodes[r+t],e.childNodes[d.oldValue+t],[],!1,!0)||(c=!0);if(c)return[(new l).setValue(this.options._const.action,this.options._const.relocateGroup).setValue(&quot;groupLength&quot;,d.length).setValue(this.options._const.from,d.oldValue).setValue(this.options._const.to,r).setValue(this.options._const.route,n)]}}return b}findValueDiff(e,t,o){const n=[];return e.selected!==t.selected&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,o)),(e.value||t.value)&amp;&amp;e.value!==t.value&amp;&amp;&quot;OPTION&quot;!==e.nodeName&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||&quot;&quot;).setValue(this.options._const.newValue,t.value||&quot;&quot;).setValue(this.options._const.route,o)),e.checked!==t.checked&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,o)),n}}const M={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff(e,t,o,n){e.data=n},preVirtualDiffApply(){},postVirtualDiffApply(){},preDiffApply(){},postDiffApply(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(!window||!window.document)&amp;&amp;window.document};class O{constructor(e={}){if(this.options=e,Object.entries(M).forEach((([e,t])=&gt;{Object.prototype.hasOwnProperty.call(this.options,e)||(this.options[e]=t)})),!this.options._const){const e=[&quot;addAttribute&quot;,&quot;modifyAttribute&quot;,&quot;removeAttribute&quot;,&quot;modifyTextElement&quot;,&quot;relocateGroup&quot;,&quot;removeElement&quot;,&quot;addElement&quot;,&quot;removeTextElement&quot;,&quot;addTextElement&quot;,&quot;replaceElement&quot;,&quot;modifyValue&quot;,&quot;modifyChecked&quot;,&quot;modifySelected&quot;,&quot;modifyComment&quot;,&quot;action&quot;,&quot;route&quot;,&quot;oldValue&quot;,&quot;newValue&quot;,&quot;element&quot;,&quot;group&quot;,&quot;from&quot;,&quot;to&quot;,&quot;name&quot;,&quot;value&quot;,&quot;data&quot;,&quot;attributes&quot;,&quot;nodeName&quot;,&quot;childNodes&quot;,&quot;checked&quot;,&quot;selected&quot;];this.options._const={},this.options.compress?e.forEach(((e,t)=&gt;this.options._const[e]=t)):e.forEach((e=&gt;this.options._const[e]=e))}this.DiffFinder=D}apply(e,t){return function(e,t,o){return t.every((t=&gt;i(e,t,o)))}(e,t,this.options)}undo(e,t){return function(e,t,o){t.length||(t=[t]),(t=t.slice()).reverse(),t.forEach((t=&gt;{!function(e,t,o){switch(t[o._const.action]){case o._const.addAttribute:t[o._const.action]=o._const.removeAttribute,i(e,t,o);break;case o._const.modifyAttribute:a(t,o._const.oldValue,o._const.newValue),i(e,t,o);break;case o._const.removeAttribute:t[o._const.action]=o._const.addAttribute,i(e,t,o);break;case o._const.modifyTextElement:case o._const.modifyValue:case o._const.modifyComment:case o._const.modifyChecked:case o._const.modifySelected:case o._const.replaceElement:a(t,o._const.oldValue,o._const.newValue),i(e,t,o);break;case o._const.relocateGroup:a(t,o._const.from,o._const.to),i(e,t,o);break;case o._const.removeElement:t[o._const.action]=o._const.addElement,i(e,t,o);break;case o._const.addElement:t[o._const.action]=o._const.removeElement,i(e,t,o);break;case o._const.removeTextElement:t[o._const.action]=o._const.addTextElement,i(e,t,o);break;case o._const.addTextElement:t[o._const.action]=o._const.removeTextElement,i(e,t,o);break;default:console.log(&quot;unknown action&quot;)}}(e,t,o)}))}(e,t,this.options)}diff(e,t){return new this.DiffFinder(e,t,this.options).init()}}class S{constructor(e={}){this.pad=&quot;│   &quot;,this.padding=&quot;&quot;,this.tick=1,this.messages=[];const t=(e,t)=&gt;{const o=e[t];e[t]=(...n)=&gt;{this.fin(t,Array.prototype.slice.call(n));const s=o.apply(e,n);return this.fout(t,s),s}};for(let o in e)&quot;function&quot;==typeof e[o]&amp;&amp;t(e,o);this.log(&quot;┌ TRACELOG START&quot;)}fin(e,t){this.padding+=this.pad,this.log(`├─&gt; entering ${e}`,t)}fout(e,t){this.log(&quot;│&lt;──┘ generated return value&quot;,t),this.padding=this.padding.substring(0,this.padding.length-this.pad.length)}format(e,t){return`${function(e){for(e=`${e}`;e.length&lt;4;)e=`0${e}`;return e}(t)}&gt; ${this.padding}${e}`}log(){let e=Array.prototype.slice.call(arguments);const t=function(e){return e?&quot;string&quot;==typeof e?e:e instanceof HTMLElement?e.outerHTML||&quot;&lt;empty&gt;&quot;:e instanceof Array?`[${e.map(t).join(&quot;,&quot;)}]`:e.toString()||e.valueOf()||&quot;&lt;unknown&gt;&quot;:&quot;&lt;falsey&gt;&quot;};e=e.map(t).join(&quot;, &quot;),this.messages.push(this.format(e,this.tick++))}toString(){let e=&quot;└───&quot;;for(;e.length&lt;=this.padding.length+this.pad.length;)e+=&quot;×   &quot;;let t=this.padding;return this.padding=&quot;&quot;,e=this.format(e,this.tick),this.padding=t,`${this.messages.join(&quot;\n&quot;)}\n${e}`}}},471:function(e,t,o){var n=this&amp;&amp;this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.yamlify=t.MIN_BOX_SIZE=void 0;const s=o(54),i=o(627),a=o(838),l=o(271);t.MIN_BOX_SIZE=144;const c=document.querySelector(&quot;#lively-pane&quot;),r=new s.Interact(&quot;interactive&quot;,&quot;graspable&quot;,t.MIN_BOX_SIZE);document.addEventListener(&quot;mousedown&quot;,(e=&gt;{const{state:o}=r.mouseDown(e)||{};o&amp;&amp;c.originalSize&amp;&amp;l.maximizeMessagePane(t.MIN_BOX_SIZE,t.MIN_BOX_SIZE)})),document.addEventListener(&quot;mouseup&quot;,r.mouseUp.bind(r)),document.addEventListener(&quot;mousemove&quot;,r.mouseMove.bind(r));const d=new i.YAML;t.yamlify=d.yamlify.bind(d);const u={};let h,f;function p(){h.events={},h.on=(e,t)=&gt;h.events[e]=t,h.addEventListener(&quot;message&quot;,(({data:e})=&gt;{const{task:t,data:o}=JSON.parse(e);h.events[t]&amp;&amp;h.events[t](o)})),h.send(&quot;connect&quot;),document.querySelector(&quot;#initMessage&quot;).textContent=&quot;Connection established. Open a .html/.pug file to begin.&quot;,h.on(&quot;switchHTML&quot;,(({filePath:e,content:t,messages:o})=&gt;n(this,void 0,void 0,(function*(){const n=document.querySelector(&quot;#initMessage&quot;);n&amp;&amp;document.body.removeChild(n),l.showMessage([{msg:e,type:&quot;info&quot;}].concat(o)),u[e]&amp;&amp;l.showIframe(u[e]),null!=t&amp;&amp;(u[e]||(u[e]=yield a.createIframe(t)))})))),h.on(&quot;editHTML&quot;,(({filePath:e,content:t,messages:o})=&gt;(l.showMessage(o),null!=t&amp;&amp;a.modifyHTML(u[e],t)))),h.on(&quot;injectCSS&quot;,(({fileRel:e,content:t})=&gt;{for(const o in u)a.writeStyle(u[o].head,e,t)})),h.on(&quot;reloadJS&quot;,(e=&gt;n(this,void 0,void 0,(function*(){for(const t in u){const o=u[t];[...o.querySelectorAll(&quot;script&quot;)].find((t=&gt;t.src.startsWith(location.href)&amp;&amp;t.src.slice(location.href.length)===e))&amp;&amp;(l.log(&quot;Reloading a document containing the saved script...&quot;,&quot;info&quot;),document.body.removeChild(o.iframe),u[t]=yield a.createIframe(o.oldHTML))}})))),h.on(&quot;reloadFull&quot;,(()=&gt;location.reload())),h.on(&quot;alive&quot;,(({debug:e})=&gt;(l.setDebug(e),clearTimeout(f),f=setTimeout((()=&gt;l.showMessage(&quot;Server disconnected.&quot;,&quot;error&quot;)),500)))),h.on(&quot;showMessage&quot;,(e=&gt;l.showMessage(e)))}h=new WebSocket(&quot;wss://&quot;+location.host),h.addEventListener(&quot;open&quot;,p),h.addEventListener(&quot;error&quot;,(()=&gt;{h=new WebSocket(&quot;ws://&quot;+location.host),h.addEventListener(&quot;open&quot;,p),console.log(&quot;WSS unavailable.&quot;)}))},54:(e,t)=&gt;{Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.Interact=void 0;const o=[&quot;drag&quot;,&quot;resizeHorizontal&quot;,&quot;resizeDiagonal2&quot;,&quot;resizeVertical&quot;,&quot;resizeDiagonal1&quot;].map((e=&gt;&quot;interact-&quot;+e)),n=[&quot;move&quot;,&quot;w-resize&quot;,&quot;nesw-resize&quot;,&quot;s-resize&quot;,&quot;nwse-resize&quot;];t.Interact=class{constructor(e,t,s=64,i=32){this.interact=null;const a=document.createElement(&quot;style&quot;);a.innerHTML=o.map(((e,t)=&gt;`body.${e}{cursor:${n[t]}}`)).join(&quot;&quot;)+&quot;body.interact-drag{cursor:move;cursor:grab}body.interact-drag:active{cursor:grabbing}&quot;,a.classList.add(&quot;interact-cursors&quot;),document.head.appendChild(a);const l=document.querySelectorAll(&quot;.&quot;+e);this.boxes=[...l],this.topBox=this.boxes.reverse()[0],this.graspClassName=t,this.minSize=s,this.snapDist=i}mouseMove(e){const{clientX:t,clientY:n}=e;if(this.interact){const{box:o,x:s,y:i,w:a,h:l}=this.interact;return this.resizeAxe(o,t,s,a,&quot;left&quot;,&quot;width&quot;),this.resizeAxe(o,n,i,l,&quot;top&quot;,&quot;height&quot;),e.preventDefault(),{element:o,state:(6*+!!i-3*+!!l+2*+!!s-+!!a)%8}}const s=document.body;s.classList.remove(...o);for(const i of this.boxes){const{offsetLeft:a,offsetWidth:l,offsetTop:c,offsetHeight:r}=i,d=this.mouseEdge(t,n,a,c,l,r,16);if(d)return s.classList.add(o[Math.abs(d)]),e.preventDefault(),{element:i,state:d};if(this.mouseIsInside(t,n,a,c,l,r))return this.mouseIsGraspable(t,n,i)&amp;&amp;s.classList.add(o[0]),e.preventDefault(),{element:i,state:0}}return null}mouseDown({clientX:e,clientY:t}){for(const o of this.boxes){const{offsetLeft:n,offsetWidth:s,offsetTop:i,offsetHeight:a}=o,l=this.mouseEdge(e,t,n,i,s,a,16);if(l){const c=this.interact={box:o};return(l-1)%3==0&amp;&amp;(c.x=e-n,c.w=e+s),(l+1)%3==0&amp;&amp;(c.w=e-s),l&gt;1&amp;&amp;(c.y=t-i,c.h=t+a),l&lt;-1&amp;&amp;(c.h=t-a),{element:o,state:l}}if(this.mouseIsInside(e,t,n,i,s,a))return this.mouseIsGraspable(e,t,o)?(this.topBox!==o&amp;&amp;(o.style.zIndex=this.topBox.style.zIndex+1,this.topBox=o,this.boxes.sort(((e,t)=&gt;+t.style.zIndex-+e.style.zIndex))),this.interact={box:o,x:e-n,y:t-i},{element:o,state:0}):null}return null}mouseUp(){this.interact=null}resizeAxe(e,t,o,n,s,i){const a=&quot;offset&quot;+s[0].toUpperCase()+s.slice(1),l=i[0].toUpperCase()+i.slice(1),c=Math.abs,r=this.minSize,d=this.snapDist;if(!n){if(!o)return;const n=[].concat.apply([],this.boxes.map((t=&gt;t===e?[0,window[&quot;inner&quot;+l]]:[t[a],t[a]+t[&quot;offset&quot;+l]])));let i=n.find((e=&gt;c(t-o-e)&lt;d));if(!isNaN(i))return void(e.style[s]=i+&quot;px&quot;);const r=e[&quot;offset&quot;+l];return i=n.find((e=&gt;c(t-o+r-e)&lt;d)),isNaN(i)?void(e.style[s]=t-o+&quot;px&quot;):void(e.style[s]=i-r+&quot;px&quot;)}if(o){let u=n-t;const h=[].concat.apply([],this.boxes.map((t=&gt;t===e?0:[t[a],t[a]+t[&quot;offset&quot;+l]]))).find((e=&gt;c(t-o-e)&lt;d));if(!isNaN(h)&amp;&amp;(u=n-o-h),u&gt;r)return e.style[s]=n-o-u+&quot;px&quot;,void(e.style[i]=u+&quot;px&quot;)}if(!o){let o=t-n;const s=e[a],u=[].concat.apply([],this.boxes.map((t=&gt;t===e?window[&quot;inner&quot;+l]:[t[a],t[a]+t[&quot;offset&quot;+l]]))).find((e=&gt;c(t-e)&lt;d));if(!isNaN(u)&amp;&amp;(o=u-s),o&gt;r)return void(e.style[i]=o+&quot;px&quot;)}o&amp;&amp;(e.style[s]=n-o-r+&quot;px&quot;),e.style[i]=r+&quot;px&quot;}mouseIsInside(e,t,o,n,s,i){return e&gt;o&amp;&amp;e&lt;o+s&amp;&amp;t&gt;n&amp;&amp;t&lt;n+i}mouseEdge(e,t,o,n,s,i,a){const l=Math.abs;return+this.mouseIsInside(e,t,o-a,n-a,s+2*a,i+2*a)*(3*+(l(n-t)&lt;a)-3*+(l(n+i-t)&lt;a)+ +(l(o-e)&lt;a)-+(l(o+s-e)&lt;a))}mouseIsGraspable(e,t,o){const n=[...o.querySelectorAll(&quot;*&quot;)].reverse();for(const o of n){const{x:n,y:s,width:i,height:a}=o.getBoundingClientRect();if(this.mouseIsInside(e,t,n,s,i,a))return o.classList.contains(this.graspClassName)}return!0}}},838:function(e,t,o){var n=this&amp;&amp;this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.writeStyle=t.modifyHTML=t.createIframe=void 0;const s=o(270),i=o(627),a=o(271),l=new i.YAMLDOM,c=l.yamlify.bind(l),r=new s.DiffDOM,d={};function u(e){return n(this,void 0,void 0,(function*(){const t=[...e.querySelectorAll(&quot;script&quot;)];a.log(&quot;Loading &quot;+t.length+&quot; script(s)...&quot;,&quot;info&quot;);try{yield Promise.all(t.map((t=&gt;function(e,t){return new Promise(((o,n)=&gt;{const s=e.ownerDocument.createElement(&quot;script&quot;),{src:i,textContent:a}=t;i&amp;&amp;(s.src=i.startsWith(location.href)&amp;&amp;i.slice(location.href.length)||i),s.textContent=a,s.onload=o,s.onerror=n,e.removeChild(t),e.appendChild(s)}))}(e,t))))}catch(e){throw Error(e)}}))}function h(e,t,o){let n=[...e.querySelectorAll(&quot;link&quot;)];if(t){const i=s(t);if(d[i]=o,n=n.filter((e=&gt;e.href.startsWith(location.href)&amp;&amp;e.href.slice(location.href.length)===t)),!n.length){a.log('Updating style tag id &quot;'+i+'&quot;...',&quot;info&quot;);const t=e.querySelector(&quot;#&quot;+i);return void(t&amp;&amp;(t.textContent=o))}}function s(e){return&quot;lively-style-&quot;+btoa(encodeURIComponent(e)).replace(/[+/=]/g,&quot;_&quot;)}n.forEach((t=&gt;{const n=s(t.href.startsWith(location.href)&amp;&amp;t.href.slice(location.href.length)||t.href);if(o?d[n]=o:o=d[n],!o)return;const i=document.createElement(&quot;style&quot;);i.id=n,i.textContent=o,e.insertBefore(i,t),e.removeChild(t),a.log('Replacing link tag with style tag id &quot;'+n+'&quot;...',&quot;info&quot;)}))}function f(e,t){if(&quot;body&quot;===t){const t=e.match(/(?&lt;=&lt;body&gt;).*(?=&lt;\/body&gt;)/i);return t?t[0]:e.replace(/.*&lt;html&gt;(.*)&lt;\/html&gt;.*/i,&quot;$1&quot;).replace(/&lt;(head|style|title).*&gt;.*?&lt;\/\1&gt;|&lt;(link|meta).*?&gt;/gi,&quot;&quot;)}if(&quot;head&quot;===t){const t=e.match(/(?&lt;=&lt;head&gt;).*(?=&lt;\/head&gt;)/i);if(t)return t[0];const o=e.match(/&lt;(style|title).*&gt;.*?&lt;\/\1&gt;|&lt;(link|meta).*?&gt;/gi);return(null==o?void 0:o.join(&quot;&quot;))||&quot;&quot;}return&quot;&lt;head&gt;&quot;+f(e,&quot;head&quot;)+&quot;&lt;/head&gt;&lt;body&gt;&quot;+f(e,&quot;body&quot;)+&quot;&lt;/body&gt;&quot;}function p(e,t,o,n,s){const i=t.length-+!s;e.forEach((({route:e})=&gt;{if(!(e.length&lt;i+1)){for(let o=0;o&lt;i;++o)if(e[o]!==t[o])return;if(n){if(e[i]&gt;=n){if(e[i]&lt;n+o)return void(e[i]+=s-n);e[i]-=o}e[i]&gt;=s&amp;&amp;(e[i]+=o)}else{if(e[i]&lt;t[i])return;e[i]+=o}}}))}t.createIframe=function(e){return n(this,void 0,void 0,(function*(){const t=document.createElement(&quot;iframe&quot;);document.body.appendChild(t),&quot;complete&quot;!==t.contentDocument.readyState&amp;&amp;(yield new Promise((e=&gt;t.addEventListener(&quot;load&quot;,e))));const o=t.contentDocument;return a.log(&quot;Opening a new HTML/Pug file...&quot;,&quot;info&quot;),o.iframe=t,a.showIframe(o),function(e,t){n(this,void 0,void 0,(function*(){const o=f(t,&quot;head&quot;);a.log(o,&quot;Head Tag&quot;),o&amp;&amp;(e.head.innerHTML=o,h(e.head),yield u(e.head)),a.log(e.body.innerHTML=f(t,&quot;body&quot;),&quot;Body Tag&quot;),e.oldHTML=e.documentElement.outerHTML,e.oldDOM=s.nodeToObj(e.documentElement),u(e.body)}))}(o,e),o}))},t.modifyHTML=function(e,t){const o=document.implementation.createHTMLDocument(),n=o.documentElement;a.log(&quot;Changing HTML content...&quot;,&quot;info&quot;),n.innerHTML=f(t,&quot;html&quot;),h(o.head),function(e,t){const o=e.documentElement,n=s.nodeToObj(o),i=e.oldDOM,l=s.nodeToObj(t);a.log([i,c(i)],&quot;Raw HTML (1)&quot;),a.log([n,c(n)],&quot;Js-altered HTML (2)&quot;),a.log([l,c(l)],&quot;Editor-modified HTML (3)&quot;);const d=r.diff(n,l),u=r.diff(i,n);var h;h=u,d.forEach((({action:e,route:t,groupLength:o,from:n,to:s})=&gt;{&quot;addElement&quot;===e&amp;&amp;p(h,t,1),&quot;removeElement&quot;===e&amp;&amp;p(h,t,-1),&quot;relocateGroup&quot;===e&amp;&amp;p(h,t,o,n,s)})),a.log([d,c(d)],&quot;2 → 3&quot;),a.log([u,c(u)],&quot;1 → 2&quot;),r.apply(o,d),r.apply(o,u),e.oldHTML=t.outerHTML,e.oldDOM=l}(e,n)},t.writeStyle=h},271:(e,t,o)=&gt;{Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.maximizeMessagePane=t.showIframe=t.log=t.showMessage=t.setDebug=void 0;const n=o(471),s=document.querySelector(&quot;#lively-pane&quot;),i=document.querySelector(&quot;#lively-center&quot;),a=document.querySelector(&quot;#lively-error&quot;),l=document.querySelector(&quot;#lively-warning&quot;),c=document.querySelector(&quot;#lively-minimize&quot;);let r=!1;function d(e,t){!t&amp;&amp;([e,t]=s.originalSize),s.style.width=e+&quot;px&quot;,s.style.height=t+&quot;px&quot;,s.style.top=s.offsetTop+n.MIN_BOX_SIZE-t+&quot;px&quot;,s.originalSize=null,c.animate({transform:&quot;rotate(0deg)&quot;},{duration:100,fill:&quot;forwards&quot;})}t.setDebug=function(e){r=e},t.showMessage=function(e,t=&quot;info&quot;){let o=0,n=0;if(i.textContent=&quot;&quot;,&quot;string&quot;==typeof e&amp;&amp;(e=[{msg:e,type:t}]),0===e.length)return s.hidden=!0,void(a.dataset.indicator=l.dataset.indicator=&quot;0&quot;);s.hidden=!1,e.forEach((({msg:e,type:t})=&gt;{const s=document.createElement(&quot;div&quot;);s.classList.add(&quot;lively-message&quot;,&quot;graspable&quot;),&quot;error&quot;===t&amp;&amp;(++o,s.classList.add(&quot;lively-error&quot;)),&quot;warn&quot;===t&amp;&amp;(++n,s.classList.add(&quot;lively-warning&quot;)),s.textContent=e,i.appendChild(s)})),a.dataset.indicator=&quot;&quot;+o,l.dataset.indicator=&quot;&quot;+n},t.log=function(e,t){r&amp;&amp;(&quot;info&quot;!==t?(console.groupCollapsed(t),&quot;string&quot;==typeof e?console.log(e):e.forEach((e=&gt;console.log(e))),console.groupEnd()):console.info(&quot;%c&quot;+e,&quot;color: #c83&quot;))},t.showIframe=function(e){const t=[...document.querySelectorAll(&quot;iframe&quot;)],o=e.iframe;t.forEach((e=&gt;e!==o&amp;&amp;e.animate({opacity:0,zIndex:0},{duration:500,fill:&quot;forwards&quot;}))),o.animate({opacity:1,zIndex:1},{duration:500,fill:&quot;forwards&quot;})},a.addEventListener(&quot;click&quot;,(()=&gt;{s.classList.toggle(&quot;error-hidden&quot;)})),l.addEventListener(&quot;click&quot;,(()=&gt;{s.classList.toggle(&quot;warning-hidden&quot;)})),c.addEventListener(&quot;mousedown&quot;,(()=&gt;{s.holdTimer=setTimeout((()=&gt;document.body.removeChild(s)),500)})),c.addEventListener(&quot;mouseup&quot;,(()=&gt;{clearTimeout(s.holdTimer)})),c.addEventListener(&quot;click&quot;,(function(){if(s.originalSize)return void d();const{offsetWidth:e,offsetHeight:t,offsetTop:o}=s;s.style.width=s.style.height=n.MIN_BOX_SIZE+&quot;px&quot;,s.style.top=o+t-n.MIN_BOX_SIZE+&quot;px&quot;,s.originalSize=[e,t],this.animate({transform:&quot;rotate(180deg)&quot;},{duration:100,fill:&quot;forwards&quot;})})),t.maximizeMessagePane=d},627:(e,t)=&gt;{Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.YAMLDOM=t.YAML=void 0;class o{constructor(){this.tab=2,this.seen=new Set}yamlify(e,t){return this.tab=t||2,this.seen=new Set,this.dfs(e,0,!1)}dfs(e,t,o){const n=o?&quot; &quot;:&quot;&quot;;return this.seen.has(e)?n+&quot;{circular}&quot;:this.isSpecialString(e)?n+&quot;'&quot;+e+&quot;'&quot;:void 0===e?n+&quot;null&quot;:this.isLeaf(e)?n+e:(this.seen.add(e),Array.isArray(e)?this.handleArray(e,t,o):this.handleObject(e,t,o))}isSpecialString(e){return&quot;string&quot;==typeof e&amp;&amp;/[[\]{}:',-]/.test(e)}isLeaf(e){return&quot;boolean&quot;==typeof e||&quot;string&quot;==typeof e||&quot;number&quot;==typeof e||&quot;bigint&quot;==typeof e||null==e}handleArray(e,t,o){const n=o?&quot; &quot;:&quot;&quot;;if(0===e.length)return n+&quot;[]&quot;;const s=e.every((e=&gt;this.isLeaf(e)));let i=&quot;&quot;,a=&quot;, &quot;;!s&amp;&amp;(i=&quot;- &quot;,a=&quot;\n&quot;+&quot; &quot;.repeat(this.tab*t)+i,o&amp;&amp;(i=a)),i+=this.dfs(e[0],++t,!1);for(let o=1;o&lt;e.length;o++)i+=a+this.dfs(e[o],t,!1);return s?n+&quot;[&quot;+i+&quot;]&quot;:i}handleObject(e,t,o){const n=o?&quot; &quot;:&quot;&quot;;let s=0;for(const t in e)void 0!==e[t]&amp;&amp;++s;if(0===s)return n+&quot;{}&quot;;const i=&quot;\n&quot;+&quot; &quot;.repeat(this.tab*t++);let a=&quot;&quot;;for(const n in e)a+=o||&quot;&quot;!==a?this.handleProp(e,n,i,t):this.handleProp(e,n,&quot;&quot;,t);return a}handleProp(e,t,o,n){return void 0===e[t]?&quot;&quot;:o+t+&quot;:&quot;+this.dfs(e[t],n,!0)}}t.YAML=o,t.YAMLDOM=class extends o{handleProp(e,t,o,n){if(&quot;toString&quot;===t||&quot;setValue&quot;===t)return&quot;&quot;;if(&quot;attributes&quot;===t){const t=e.attributes;let s=0;for(const e in t)++s;if(1===s&amp;&amp;(t.id||t.class))return&quot;&quot;;if(2===s&amp;&amp;t.id&amp;&amp;t.class)return&quot;&quot;;let i=&quot;&quot;;for(const e in t)&quot;id&quot;!==e&amp;&amp;&quot;class&quot;!==e&amp;&amp;(i+=o+&quot;[35m&quot;+e+&quot;[39m:&quot;+this.dfs(t[e],n,!0));return i}const s=o+&quot;[35m&quot;+t+&quot;[39m:&quot;;if(&quot;nodeName&quot;===t){const{nodeName:t,attributes:o}=e;let n=s+&quot; &quot;+t;return(null==o?void 0:o.class)&amp;&amp;(n+=&quot;.&quot;+o.class.replace(/\s/g,&quot;.&quot;)),(null==o?void 0:o.id)&amp;&amp;(n+=&quot;#&quot;+o.id),n}return&quot;childNodes&quot;===t&amp;&amp;1===e.childNodes.length&amp;&amp;&quot;#text&quot;===e.childNodes[0].nodeName?o+&quot;[35mdata[39m: &quot;+e.childNodes[0].data:s+this.dfs(e[t],n,!0)}}}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}return o.d=(e,t)=&gt;{for(var n in t)o.o(t,n)&amp;&amp;!o.o(e,n)&amp;&amp;Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=&gt;Object.prototype.hasOwnProperty.call(e,t),o.r=e=&gt;{&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(e,Symbol.toStringTag,{value:&quot;Module&quot;}),Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},o(471)})()}));</failure>
		</testcase>
		<testcase name="javascript.lang.security.detect-insecure-websocket.detect-insecure-websocket" classname="/Users/zta/Documents/EC521/src/unzipped/uahnbu-lively-reload-0.1.2/extension/out/static/lively_script.js" file="/Users/zta/Documents/EC521/src/unzipped/uahnbu-lively-reload-0.1.2/extension/out/static/lively_script.js" line="1">
			<failure type="ERROR" message="Insecure WebSocket Detected. WebSocket Secure (wss) should be used for all WebSocket connections.">!function(e,t){if(&quot;object&quot;==typeof exports&amp;&amp;&quot;object&quot;==typeof module)module.exports=t();else if(&quot;function&quot;==typeof define&amp;&amp;define.amd)define([],t);else{var o=t();for(var n in o)(&quot;object&quot;==typeof exports?exports:e)[n]=o[n]}}(self,(function(){return(()=&gt;{&quot;use strict&quot;;var e={270:(e,t,o)=&gt;{function n(e,t,o){let s;return&quot;#text&quot;===e.nodeName?s=o.document.createTextNode(e.data):&quot;#comment&quot;===e.nodeName?s=o.document.createComment(e.data):(t?s=o.document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,e.nodeName):&quot;svg&quot;===e.nodeName.toLowerCase()?(s=o.document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;,&quot;svg&quot;),t=!0):s=o.document.createElement(e.nodeName),e.attributes&amp;&amp;Object.entries(e.attributes).forEach((([e,t])=&gt;s.setAttribute(e,t))),e.childNodes&amp;&amp;e.childNodes.forEach((e=&gt;s.appendChild(n(e,t,o)))),o.valueDiffing&amp;&amp;(e.value&amp;&amp;(s.value=e.value),e.checked&amp;&amp;(s.checked=e.checked),e.selected&amp;&amp;(s.selected=e.selected))),s}function s(e,t){for(t=t.slice();t.length&gt;0;){if(!e.childNodes)return!1;const o=t.splice(0,1)[0];e=e.childNodes[o]}return e}function i(e,t,o){let i,a,l,c,r,d=s(e,t[o._const.route]);const u={diff:t,node:d};if(o.preDiffApply(u))return!0;switch(t[o._const.action]){case o._const.addAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(t[o._const.name],t[o._const.value]);break;case o._const.modifyAttribute:if(!d||!d.setAttribute)return!1;d.setAttribute(t[o._const.name],t[o._const.newValue]),&quot;INPUT&quot;===d.nodeName&amp;&amp;&quot;value&quot;===t[o._const.name]&amp;&amp;(d.value=t[o._const.newValue]);break;case o._const.removeAttribute:if(!d||!d.removeAttribute)return!1;d.removeAttribute(t[o._const.name]);break;case o._const.modifyTextElement:if(!d||3!==d.nodeType)return!1;o.textDiff(d,d.data,t[o._const.oldValue],t[o._const.newValue]);break;case o._const.modifyValue:if(!d||void 0===d.value)return!1;d.value=t[o._const.newValue];break;case o._const.modifyComment:if(!d||void 0===d.data)return!1;o.textDiff(d,d.data,t[o._const.oldValue],t[o._const.newValue]);break;case o._const.modifyChecked:if(!d||void 0===d.checked)return!1;d.checked=t[o._const.newValue];break;case o._const.modifySelected:if(!d||void 0===d.selected)return!1;d.selected=t[o._const.newValue];break;case o._const.replaceElement:d.parentNode.replaceChild(n(t[o._const.newValue],&quot;http://www.w3.org/2000/svg&quot;===d.namespaceURI,o),d);break;case o._const.relocateGroup:c=Array(...new Array(t.groupLength)).map((()=&gt;d.removeChild(d.childNodes[t[o._const.from]]))),c.forEach(((e,n)=&gt;{0===n&amp;&amp;(a=d.childNodes[t[o._const.to]]),d.insertBefore(e,a||null)}));break;case o._const.removeElement:d.parentNode.removeChild(d);break;case o._const.addElement:l=t[o._const.route].slice(),r=l.splice(l.length-1,1)[0],d=s(e,l),d.insertBefore(n(t[o._const.element],&quot;http://www.w3.org/2000/svg&quot;===d.namespaceURI,o),d.childNodes[r]||null);break;case o._const.removeTextElement:if(!d||3!==d.nodeType)return!1;d.parentNode.removeChild(d);break;case o._const.addTextElement:if(l=t[o._const.route].slice(),r=l.splice(l.length-1,1)[0],i=o.document.createTextNode(t[o._const.value]),d=s(e,l),!d||!d.childNodes)return!1;d.insertBefore(i,d.childNodes[r]||null);break;default:console.log(&quot;unknown action&quot;)}return u.newNode=i,o.postDiffApply(u),!0}function a(e,t,o){const n=e[t];e[t]=e[o],e[o]=n}o.r(t),o.d(t,{DiffDOM:()=&gt;O,TraceLogger:()=&gt;S,nodeToObj:()=&gt;v,stringToObj:()=&gt;A});class l{constructor(e={}){Object.entries(e).forEach((([e,t])=&gt;this[e]=t))}toString(){return JSON.stringify(this)}setValue(e,t){return this[e]=t,this}}function c(e){const t=[];return t.push(e.nodeName),&quot;#text&quot;!==e.nodeName&amp;&amp;&quot;#comment&quot;!==e.nodeName&amp;&amp;e.attributes&amp;&amp;(e.attributes.class&amp;&amp;t.push(`${e.nodeName}.${e.attributes.class.replace(/ /g,&quot;.&quot;)}`),e.attributes.id&amp;&amp;t.push(`${e.nodeName}#${e.attributes.id}`)),t}function r(e){const t={},o={};return e.forEach((e=&gt;{c(e).forEach((e=&gt;{const n=e in t;n||e in o?n&amp;&amp;(delete t[e],o[e]=!0):t[e]=!0}))})),t}function d(e,t){const o=r(e),n=r(t),s={};return Object.keys(o).forEach((e=&gt;{n[e]&amp;&amp;(s[e]=!0)})),s}function u(e){return delete e.outerDone,delete e.innerDone,delete e.valueDone,!e.childNodes||e.childNodes.every(u)}function h(e,t){if(![&quot;nodeName&quot;,&quot;value&quot;,&quot;checked&quot;,&quot;selected&quot;,&quot;data&quot;].every((o=&gt;e[o]===t[o])))return!1;if(Boolean(e.attributes)!==Boolean(t.attributes))return!1;if(Boolean(e.childNodes)!==Boolean(t.childNodes))return!1;if(e.attributes){const o=Object.keys(e.attributes),n=Object.keys(t.attributes);if(o.length!==n.length)return!1;if(!o.every((o=&gt;e.attributes[o]===t.attributes[o])))return!1}if(e.childNodes){if(e.childNodes.length!==t.childNodes.length)return!1;if(!e.childNodes.every(((e,o)=&gt;h(e,t.childNodes[o]))))return!1}return!0}function f(e,t,o,n,s){if(!e||!t)return!1;if(e.nodeName!==t.nodeName)return!1;if(&quot;#text&quot;===e.nodeName)return!!s||e.data===t.data;if(e.nodeName in o)return!0;if(e.attributes&amp;&amp;t.attributes){if(e.attributes.id){if(e.attributes.id!==t.attributes.id)return!1;if(`${e.nodeName}#${e.attributes.id}`in o)return!0}if(e.attributes.class&amp;&amp;e.attributes.class===t.attributes.class&amp;&amp;`${e.nodeName}.${e.attributes.class.replace(/ /g,&quot;.&quot;)}`in o)return!0}if(n)return!0;const i=e.childNodes?e.childNodes.slice().reverse():[],a=t.childNodes?t.childNodes.slice().reverse():[];if(i.length!==a.length)return!1;if(s)return i.every(((e,t)=&gt;e.nodeName===a[t].nodeName));{const e=d(i,a);return i.every(((t,o)=&gt;f(t,a[o],e,!0,!0)))}}function p(e){return JSON.parse(JSON.stringify(e))}function m(e,t,o,n){let s=0,i=[];const a=e.length,l=t.length,r=Array(...new Array(a+1)).map((()=&gt;[])),u=d(e,t);let h=a===l;h&amp;&amp;e.some(((e,o)=&gt;{const n=c(e),s=c(t[o]);return n.length!==s.length?(h=!1,!0):(n.some(((e,t)=&gt;{if(e!==s[t])return h=!1,!0})),!h||void 0)}));for(let c=0;c&lt;a;c++){const a=e[c];for(let e=0;e&lt;l;e++){const l=t[e];o[c]||n[e]||!f(a,l,u,h)?r[c+1][e+1]=0:(r[c+1][e+1]=r[c][e]?r[c][e]+1:1,r[c+1][e+1]&gt;=s&amp;&amp;(s=r[c+1][e+1],i=[c+1,e+1]))}}return 0!==s&amp;&amp;{oldValue:i[0]-s,newValue:i[1]-s,length:s}}function g(e,t){return Array(...new Array(e)).map((()=&gt;t))}class _{constructor(){this.list=[]}add(e){this.list.push(...e)}forEach(e){this.list.forEach((t=&gt;e(t)))}}function b(e,t){let o,n,s=e;for(t=t.slice();t.length&gt;0;){if(!s.childNodes)return!1;n=t.splice(0,1)[0],o=s,s=s.childNodes[n]}return{node:s,parentNode:o,nodeIndex:n}}function y(e,t,o){return t.forEach((t=&gt;{!function(e,t,o){const n=b(e,t[o._const.route]);let s=n.node;const i=n.parentNode,a=n.nodeIndex,l=[],c={diff:t,node:s};if(o.preVirtualDiffApply(c))return!0;let r,d,u,h;switch(t[o._const.action]){case o._const.addAttribute:s.attributes||(s.attributes={}),s.attributes[t[o._const.name]]=t[o._const.value],&quot;checked&quot;===t[o._const.name]?s.checked=!0:&quot;selected&quot;===t[o._const.name]?s.selected=!0:&quot;INPUT&quot;===s.nodeName&amp;&amp;&quot;value&quot;===t[o._const.name]&amp;&amp;(s.value=t[o._const.value]);break;case o._const.modifyAttribute:s.attributes[t[o._const.name]]=t[o._const.newValue];break;case o._const.removeAttribute:delete s.attributes[t[o._const.name]],0===Object.keys(s.attributes).length&amp;&amp;delete s.attributes,&quot;checked&quot;===t[o._const.name]?s.checked=!1:&quot;selected&quot;===t[o._const.name]?delete s.selected:&quot;INPUT&quot;===s.nodeName&amp;&amp;&quot;value&quot;===t[o._const.name]&amp;&amp;delete s.value;break;case o._const.modifyTextElement:s.data=t[o._const.newValue];break;case o._const.modifyValue:s.value=t[o._const.newValue];break;case o._const.modifyComment:s.data=t[o._const.newValue];break;case o._const.modifyChecked:s.checked=t[o._const.newValue];break;case o._const.modifySelected:s.selected=t[o._const.newValue];break;case o._const.replaceElement:r=p(t[o._const.newValue]),r.outerDone=!0,r.innerDone=!0,r.valueDone=!0,i.childNodes[a]=r;break;case o._const.relocateGroup:d=s.childNodes.splice(t[o._const.from],t.groupLength).reverse(),d.forEach((e=&gt;s.childNodes.splice(t[o._const.to],0,e))),s.subsets&amp;&amp;s.subsets.forEach((e=&gt;{if(t[o._const.from]&lt;t[o._const.to]&amp;&amp;e.oldValue&lt;=t[o._const.to]&amp;&amp;e.oldValue&gt;t[o._const.from]){e.oldValue-=t.groupLength;const n=e.oldValue+e.length-t[o._const.to];n&gt;0&amp;&amp;(l.push({oldValue:t[o._const.to]+t.groupLength,newValue:e.newValue+e.length-n,length:n}),e.length-=n)}else if(t[o._const.from]&gt;t[o._const.to]&amp;&amp;e.oldValue&gt;t[o._const.to]&amp;&amp;e.oldValue&lt;t[o._const.from]){e.oldValue+=t.groupLength;const n=e.oldValue+e.length-t[o._const.to];n&gt;0&amp;&amp;(l.push({oldValue:t[o._const.to]+t.groupLength,newValue:e.newValue+e.length-n,length:n}),e.length-=n)}else e.oldValue===t[o._const.from]&amp;&amp;(e.oldValue=t[o._const.to])}));break;case o._const.removeElement:i.childNodes.splice(a,1),i.subsets&amp;&amp;i.subsets.forEach((e=&gt;{e.oldValue&gt;a?e.oldValue-=1:e.oldValue===a?e.delete=!0:e.oldValue&lt;a&amp;&amp;e.oldValue+e.length&gt;a&amp;&amp;(e.oldValue+e.length-1===a?e.length--:(l.push({newValue:e.newValue+a-e.oldValue,oldValue:a,length:e.length-a+e.oldValue-1}),e.length=a-e.oldValue))})),s=i;break;case o._const.addElement:u=t[o._const.route].slice(),h=u.splice(u.length-1,1)[0],s=b(e,u).node,r=p(t[o._const.element]),r.outerDone=!0,r.innerDone=!0,r.valueDone=!0,s.childNodes||(s.childNodes=[]),h&gt;=s.childNodes.length?s.childNodes.push(r):s.childNodes.splice(h,0,r),s.subsets&amp;&amp;s.subsets.forEach((e=&gt;{if(e.oldValue&gt;=h)e.oldValue+=1;else if(e.oldValue&lt;h&amp;&amp;e.oldValue+e.length&gt;h){const t=e.oldValue+e.length-h;l.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}}));break;case o._const.removeTextElement:i.childNodes.splice(a,1),&quot;TEXTAREA&quot;===i.nodeName&amp;&amp;delete i.value,i.subsets&amp;&amp;i.subsets.forEach((e=&gt;{e.oldValue&gt;a?e.oldValue-=1:e.oldValue===a?e.delete=!0:e.oldValue&lt;a&amp;&amp;e.oldValue+e.length&gt;a&amp;&amp;(e.oldValue+e.length-1===a?e.length--:(l.push({newValue:e.newValue+a-e.oldValue,oldValue:a,length:e.length-a+e.oldValue-1}),e.length=a-e.oldValue))})),s=i;break;case o._const.addTextElement:u=t[o._const.route].slice(),h=u.splice(u.length-1,1)[0],r={},r.nodeName=&quot;#text&quot;,r.data=t[o._const.value],s=b(e,u).node,s.childNodes||(s.childNodes=[]),h&gt;=s.childNodes.length?s.childNodes.push(r):s.childNodes.splice(h,0,r),&quot;TEXTAREA&quot;===s.nodeName&amp;&amp;(s.value=t[o._const.newValue]),s.subsets&amp;&amp;s.subsets.forEach((e=&gt;{if(e.oldValue&gt;=h&amp;&amp;(e.oldValue+=1),e.oldValue&lt;h&amp;&amp;e.oldValue+e.length&gt;h){const t=e.oldValue+e.length-h;l.push({newValue:e.newValue+e.length-t,oldValue:h+1,length:t}),e.length-=t}}));break;default:console.log(&quot;unknown action&quot;)}s.subsets&amp;&amp;(s.subsets=s.subsets.filter((e=&gt;!e.delete&amp;&amp;e.oldValue!==e.newValue)),l.length&amp;&amp;(s.subsets=s.subsets.concat(l))),c.newNode=r,o.postVirtualDiffApply(c)}(e,t,o)})),!0}function v(e,t={}){const o={};return o.nodeName=e.nodeName,&quot;#text&quot;===o.nodeName||&quot;#comment&quot;===o.nodeName?o.data=e.data:(e.attributes&amp;&amp;e.attributes.length&gt;0&amp;&amp;(o.attributes={},Array.prototype.slice.call(e.attributes).forEach((e=&gt;o.attributes[e.name]=e.value))),&quot;TEXTAREA&quot;===o.nodeName?o.value=e.value:e.childNodes&amp;&amp;e.childNodes.length&gt;0&amp;&amp;(o.childNodes=[],Array.prototype.slice.call(e.childNodes).forEach((e=&gt;o.childNodes.push(v(e,t))))),t.valueDiffing&amp;&amp;(void 0!==e.checked&amp;&amp;e.type&amp;&amp;[&quot;radio&quot;,&quot;checkbox&quot;].includes(e.type.toLowerCase())?o.checked=e.checked:void 0!==e.value&amp;&amp;(o.value=e.value),void 0!==e.selected&amp;&amp;(o.selected=e.selected))),o}const V=/&lt;(?:&quot;[^&quot;]*&quot;['&quot;]*|'[^']*'['&quot;]*|[^'&quot;&gt;])+&gt;/g,N=Object.create?Object.create(null):{},w=/\s([^'&quot;/\s&gt;&lt;]+?)[\s/&gt;]|([^\s=]+)=\s?(&quot;.*?&quot;|'.*?')/g;function x(e){return e.replace(/&amp;lt;/g,&quot;&lt;&quot;).replace(/&amp;gt;/g,&quot;&gt;&quot;).replace(/&amp;amp;/g,&quot;&amp;&quot;)}const E={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function k(e){const t={nodeName:&quot;&quot;,attributes:{}};let o=e.match(/&lt;\/?([^\s]+?)[/\s&gt;]/);if(o&amp;&amp;(t.nodeName=o[1].toUpperCase(),(E[o[1].toLowerCase()]||&quot;/&quot;===e.charAt(e.length-2))&amp;&amp;(t.voidElement=!0),t.nodeName.startsWith(&quot;!--&quot;))){const t=e.indexOf(&quot;--\x3e&quot;);return{type:&quot;comment&quot;,data:-1!==t?e.slice(4,t):&quot;&quot;}}let n=new RegExp(w),s=null,i=!1;for(;!i;)if(s=n.exec(e),null===s)i=!0;else if(s[0].trim())if(s[1]){let e=s[1].trim(),o=[e,&quot;&quot;];e.indexOf(&quot;=&quot;)&gt;-1&amp;&amp;(o=e.split(&quot;=&quot;)),t.attributes[o[0]]=o[1],n.lastIndex--}else s[2]&amp;&amp;(t.attributes[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}function T(e){return delete e.voidElement,e.childNodes&amp;&amp;e.childNodes.forEach((e=&gt;T(e))),e}function A(e){return T(function(e,t={components:N}){const o=[];let n,s=-1;const i=[];let a=!1;return e.replace(V,((l,c)=&gt;{if(a){if(l!==`&lt;/${n.nodeName}&gt;`)return;a=!1}const r=&quot;/&quot;!==l.charAt(1),d=l.startsWith(&quot;\x3c!--&quot;),u=c+l.length,h=e.charAt(u);let f;if(d){const e=k(l);return s&lt;0?(o.push(e),o):(f=i[s],f&amp;&amp;(f.childNodes||(f.childNodes=[]),f.childNodes.push(e)),o)}if(r&amp;&amp;(n=k(l),s++,&quot;tag&quot;===n.type&amp;&amp;t.components[n.nodeName]&amp;&amp;(n.type=&quot;component&quot;,a=!0),n.voidElement||a||!h||&quot;&lt;&quot;===h||(n.childNodes||(n.childNodes=[]),n.childNodes.push({nodeName:&quot;#text&quot;,data:x(e.slice(u,e.indexOf(&quot;&lt;&quot;,u)))})),0===s&amp;&amp;o.push(n),f=i[s-1],f&amp;&amp;(f.childNodes||(f.childNodes=[]),f.childNodes.push(n)),i[s]=n),(!r||n.voidElement)&amp;&amp;(s--,!a&amp;&amp;&quot;&lt;&quot;!==h&amp;&amp;h)){f=-1===s?o:i[s].childNodes||[];const t=e.indexOf(&quot;&lt;&quot;,u),n=x(e.slice(u,-1===t?void 0:t));f.push({nodeName:&quot;#text&quot;,data:n})}})),o[0]}(e))}class D{constructor(e,t,o){this.options=o,this.t1=e instanceof HTMLElement?v(e,this.options):&quot;string&quot;==typeof e?A(e,this.options):JSON.parse(JSON.stringify(e)),this.t2=t instanceof HTMLElement?v(t,this.options):&quot;string&quot;==typeof t?A(t,this.options):JSON.parse(JSON.stringify(t)),this.diffcount=0,this.foundAll=!1,this.debug&amp;&amp;(this.t1Orig=v(e,this.options),this.t2Orig=v(t,this.options)),this.tracker=new _}init(){return this.findDiffs(this.t1,this.t2)}findDiffs(e,t){let o;do{if(this.options.debug&amp;&amp;(this.diffcount+=1,this.diffcount&gt;this.options.diffcap))throw window.diffError=[this.t1Orig,this.t2Orig],new Error(`surpassed diffcap:${JSON.stringify(this.t1Orig)} -&gt; ${JSON.stringify(this.t2Orig)}`);o=this.findNextDiff(e,t,[]),0===o.length&amp;&amp;(h(e,t)||(this.foundAll?console.error(&quot;Could not find remaining diffs!&quot;):(this.foundAll=!0,u(e),o=this.findNextDiff(e,t,[])))),o.length&gt;0&amp;&amp;(this.foundAll=!1,this.tracker.add(o),y(e,o,this.options))}while(o.length&gt;0);return this.tracker.list}findNextDiff(e,t,o){let n,s;if(this.options.maxDepth&amp;&amp;o.length&gt;this.options.maxDepth)return[];if(!e.outerDone){if(n=this.findOuterDiff(e,t,o),this.options.filterOuterDiff&amp;&amp;(s=this.options.filterOuterDiff(e,t,n),s&amp;&amp;(n=s)),n.length&gt;0)return e.outerDone=!0,n;e.outerDone=!0}if(!e.innerDone){if(n=this.findInnerDiff(e,t,o),n.length&gt;0)return n;e.innerDone=!0}if(this.options.valueDiffing&amp;&amp;!e.valueDone){if(n=this.findValueDiff(e,t,o),n.length&gt;0)return e.valueDone=!0,n;e.valueDone=!0}return[]}findOuterDiff(e,t,o){const n=[];let s,i,a,c,r,d;if(e.nodeName!==t.nodeName){if(!o.length)throw new Error(&quot;Top level nodes have to be of the same kind.&quot;);return[(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(e)).setValue(this.options._const.newValue,p(t)).setValue(this.options._const.route,o)]}if(o.length&amp;&amp;this.options.maxNodeDiffCount&lt;Math.abs((e.childNodes||[]).length-(t.childNodes||[]).length))return[(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(e)).setValue(this.options._const.newValue,p(t)).setValue(this.options._const.route,o)];if(e.data!==t.data)return&quot;#text&quot;===e.nodeName?[(new l).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,o).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)]:[(new l).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,o).setValue(this.options._const.oldValue,e.data).setValue(this.options._const.newValue,t.data)];for(i=e.attributes?Object.keys(e.attributes).sort():[],a=t.attributes?Object.keys(t.attributes).sort():[],c=i.length,d=0;d&lt;c;d++)s=i[d],r=a.indexOf(s),-1===r?n.push((new l).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.value,e.attributes[s])):(a.splice(r,1),e.attributes[s]!==t.attributes[s]&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.oldValue,e.attributes[s]).setValue(this.options._const.newValue,t.attributes[s])));for(c=a.length,d=0;d&lt;c;d++)s=a[d],n.push((new l).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,o).setValue(this.options._const.name,s).setValue(this.options._const.value,t.attributes[s]));return n}findInnerDiff(e,t,o){const n=e.childNodes?e.childNodes.slice():[],s=t.childNodes?t.childNodes.slice():[],i=Math.max(n.length,s.length);let a=Math.abs(n.length-s.length),c=[],r=0;if(!this.options.maxChildCount||i&lt;this.options.maxChildCount){const n=e.subsets&amp;&amp;e.subsetsAge--?e.subsets:e.childNodes&amp;&amp;t.childNodes?function(e,t){const o=e.childNodes?e.childNodes:[],n=t.childNodes?t.childNodes:[],s=g(o.length,!1),i=g(n.length,!1),a=[];let l=!0;const c=function(){return arguments[1]};for(;l;)l=m(o,n,s,i),l&amp;&amp;(a.push(l),Array(...new Array(l.length)).map(c).forEach((e=&gt;{return t=e,s[l.oldValue+t]=!0,void(i[l.newValue+t]=!0);var t})));return e.subsets=a,e.subsetsAge=100,a}(e,t):[];if(n.length&gt;0&amp;&amp;(c=this.attemptGroupRelocation(e,t,n,o),c.length&gt;0))return c}for(let e=0;e&lt;i;e+=1){const t=n[e],d=s[e];a&amp;&amp;(t&amp;&amp;!d?&quot;#text&quot;===t.nodeName?(c.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.value,t.data)),r-=1):(c.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.element,p(t))),r-=1):d&amp;&amp;!t&amp;&amp;(&quot;#text&quot;===d.nodeName?c.push((new l).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.value,d.data)):c.push((new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.element,p(d))))),t&amp;&amp;d&amp;&amp;(!this.options.maxChildCount||i&lt;this.options.maxChildCount?c=c.concat(this.findNextDiff(t,d,o.concat(r))):h(t,d)||(n.length&gt;s.length?(&quot;#text&quot;===t.nodeName?c.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,o.concat(r)).setValue(this.options._const.value,t.data)):c.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,p(t)).setValue(this.options._const.route,o.concat(r))),n.splice(e,1),e-=1,r-=1,a-=1):n.length&lt;s.length?(c=c.concat([(new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,p(d)).setValue(this.options._const.route,o.concat(r))]),n.splice(e,0,{}),a-=1):c=c.concat([(new l).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,p(t)).setValue(this.options._const.newValue,p(d)).setValue(this.options._const.route,o.concat(r))]))),r+=1}return e.innerDone=!0,c}attemptGroupRelocation(e,t,o,n){const s=function(e,t,o){const n=e.childNodes?g(e.childNodes.length,!0):[],s=t.childNodes?g(t.childNodes.length,!0):[];let i=0;return o.forEach((e=&gt;{const t=e.oldValue+e.length,o=e.newValue+e.length;for(let o=e.oldValue;o&lt;t;o+=1)n[o]=i;for(let t=e.newValue;t&lt;o;t+=1)s[t]=i;i+=1})),{gaps1:n,gaps2:s}}(e,t,o),i=s.gaps1,a=s.gaps2;let c,r,d,u,h,m,_=Math.min(i.length,a.length);const b=[];for(let s=0,g=0;s&lt;_;g+=1,s+=1)if(!0===i[s])if(u=e.childNodes[g],&quot;#text&quot;===u.nodeName)if(&quot;#text&quot;===t.childNodes[s].nodeName){if(u.data!==t.childNodes[s].data){for(m=g;e.childNodes.length&gt;m+1&amp;&amp;&quot;#text&quot;===e.childNodes[m+1].nodeName;)if(m+=1,t.childNodes[s].data===e.childNodes[m].data){h=!0;break}if(!h)return b.push((new l).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.oldValue,u.data).setValue(this.options._const.newValue,t.childNodes[s].data)),b}}else b.push((new l).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.value,u.data)),i.splice(s,1),_=Math.min(i.length,a.length),s-=1;else b.push((new l).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.element,p(u))),i.splice(s,1),_=Math.min(i.length,a.length),s-=1;else if(!0===a[s])u=t.childNodes[s],&quot;#text&quot;===u.nodeName?(b.push((new l).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.value,u.data)),i.splice(s,0,!0),_=Math.min(i.length,a.length),g-=1):(b.push((new l).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(s)).setValue(this.options._const.element,p(u))),i.splice(s,0,!0),_=Math.min(i.length,a.length),g-=1);else if(i[s]!==a[s]){if(b.length&gt;0)return b;if(d=o[i[s]],r=Math.min(d.newValue,e.childNodes.length-d.length),r!==d.oldValue){c=!1;for(let t=0;t&lt;d.length;t+=1)f(e.childNodes[r+t],e.childNodes[d.oldValue+t],[],!1,!0)||(c=!0);if(c)return[(new l).setValue(this.options._const.action,this.options._const.relocateGroup).setValue(&quot;groupLength&quot;,d.length).setValue(this.options._const.from,d.oldValue).setValue(this.options._const.to,r).setValue(this.options._const.route,n)]}}return b}findValueDiff(e,t,o){const n=[];return e.selected!==t.selected&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,e.selected).setValue(this.options._const.newValue,t.selected).setValue(this.options._const.route,o)),(e.value||t.value)&amp;&amp;e.value!==t.value&amp;&amp;&quot;OPTION&quot;!==e.nodeName&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,e.value||&quot;&quot;).setValue(this.options._const.newValue,t.value||&quot;&quot;).setValue(this.options._const.route,o)),e.checked!==t.checked&amp;&amp;n.push((new l).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,e.checked).setValue(this.options._const.newValue,t.checked).setValue(this.options._const.route,o)),n}}const M={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff(e,t,o,n){e.data=n},preVirtualDiffApply(){},postVirtualDiffApply(){},preDiffApply(){},postDiffApply(){},filterOuterDiff:null,compress:!1,_const:!1,document:!(!window||!window.document)&amp;&amp;window.document};class O{constructor(e={}){if(this.options=e,Object.entries(M).forEach((([e,t])=&gt;{Object.prototype.hasOwnProperty.call(this.options,e)||(this.options[e]=t)})),!this.options._const){const e=[&quot;addAttribute&quot;,&quot;modifyAttribute&quot;,&quot;removeAttribute&quot;,&quot;modifyTextElement&quot;,&quot;relocateGroup&quot;,&quot;removeElement&quot;,&quot;addElement&quot;,&quot;removeTextElement&quot;,&quot;addTextElement&quot;,&quot;replaceElement&quot;,&quot;modifyValue&quot;,&quot;modifyChecked&quot;,&quot;modifySelected&quot;,&quot;modifyComment&quot;,&quot;action&quot;,&quot;route&quot;,&quot;oldValue&quot;,&quot;newValue&quot;,&quot;element&quot;,&quot;group&quot;,&quot;from&quot;,&quot;to&quot;,&quot;name&quot;,&quot;value&quot;,&quot;data&quot;,&quot;attributes&quot;,&quot;nodeName&quot;,&quot;childNodes&quot;,&quot;checked&quot;,&quot;selected&quot;];this.options._const={},this.options.compress?e.forEach(((e,t)=&gt;this.options._const[e]=t)):e.forEach((e=&gt;this.options._const[e]=e))}this.DiffFinder=D}apply(e,t){return function(e,t,o){return t.every((t=&gt;i(e,t,o)))}(e,t,this.options)}undo(e,t){return function(e,t,o){t.length||(t=[t]),(t=t.slice()).reverse(),t.forEach((t=&gt;{!function(e,t,o){switch(t[o._const.action]){case o._const.addAttribute:t[o._const.action]=o._const.removeAttribute,i(e,t,o);break;case o._const.modifyAttribute:a(t,o._const.oldValue,o._const.newValue),i(e,t,o);break;case o._const.removeAttribute:t[o._const.action]=o._const.addAttribute,i(e,t,o);break;case o._const.modifyTextElement:case o._const.modifyValue:case o._const.modifyComment:case o._const.modifyChecked:case o._const.modifySelected:case o._const.replaceElement:a(t,o._const.oldValue,o._const.newValue),i(e,t,o);break;case o._const.relocateGroup:a(t,o._const.from,o._const.to),i(e,t,o);break;case o._const.removeElement:t[o._const.action]=o._const.addElement,i(e,t,o);break;case o._const.addElement:t[o._const.action]=o._const.removeElement,i(e,t,o);break;case o._const.removeTextElement:t[o._const.action]=o._const.addTextElement,i(e,t,o);break;case o._const.addTextElement:t[o._const.action]=o._const.removeTextElement,i(e,t,o);break;default:console.log(&quot;unknown action&quot;)}}(e,t,o)}))}(e,t,this.options)}diff(e,t){return new this.DiffFinder(e,t,this.options).init()}}class S{constructor(e={}){this.pad=&quot;│   &quot;,this.padding=&quot;&quot;,this.tick=1,this.messages=[];const t=(e,t)=&gt;{const o=e[t];e[t]=(...n)=&gt;{this.fin(t,Array.prototype.slice.call(n));const s=o.apply(e,n);return this.fout(t,s),s}};for(let o in e)&quot;function&quot;==typeof e[o]&amp;&amp;t(e,o);this.log(&quot;┌ TRACELOG START&quot;)}fin(e,t){this.padding+=this.pad,this.log(`├─&gt; entering ${e}`,t)}fout(e,t){this.log(&quot;│&lt;──┘ generated return value&quot;,t),this.padding=this.padding.substring(0,this.padding.length-this.pad.length)}format(e,t){return`${function(e){for(e=`${e}`;e.length&lt;4;)e=`0${e}`;return e}(t)}&gt; ${this.padding}${e}`}log(){let e=Array.prototype.slice.call(arguments);const t=function(e){return e?&quot;string&quot;==typeof e?e:e instanceof HTMLElement?e.outerHTML||&quot;&lt;empty&gt;&quot;:e instanceof Array?`[${e.map(t).join(&quot;,&quot;)}]`:e.toString()||e.valueOf()||&quot;&lt;unknown&gt;&quot;:&quot;&lt;falsey&gt;&quot;};e=e.map(t).join(&quot;, &quot;),this.messages.push(this.format(e,this.tick++))}toString(){let e=&quot;└───&quot;;for(;e.length&lt;=this.padding.length+this.pad.length;)e+=&quot;×   &quot;;let t=this.padding;return this.padding=&quot;&quot;,e=this.format(e,this.tick),this.padding=t,`${this.messages.join(&quot;\n&quot;)}\n${e}`}}},471:function(e,t,o){var n=this&amp;&amp;this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.yamlify=t.MIN_BOX_SIZE=void 0;const s=o(54),i=o(627),a=o(838),l=o(271);t.MIN_BOX_SIZE=144;const c=document.querySelector(&quot;#lively-pane&quot;),r=new s.Interact(&quot;interactive&quot;,&quot;graspable&quot;,t.MIN_BOX_SIZE);document.addEventListener(&quot;mousedown&quot;,(e=&gt;{const{state:o}=r.mouseDown(e)||{};o&amp;&amp;c.originalSize&amp;&amp;l.maximizeMessagePane(t.MIN_BOX_SIZE,t.MIN_BOX_SIZE)})),document.addEventListener(&quot;mouseup&quot;,r.mouseUp.bind(r)),document.addEventListener(&quot;mousemove&quot;,r.mouseMove.bind(r));const d=new i.YAML;t.yamlify=d.yamlify.bind(d);const u={};let h,f;function p(){h.events={},h.on=(e,t)=&gt;h.events[e]=t,h.addEventListener(&quot;message&quot;,(({data:e})=&gt;{const{task:t,data:o}=JSON.parse(e);h.events[t]&amp;&amp;h.events[t](o)})),h.send(&quot;connect&quot;),document.querySelector(&quot;#initMessage&quot;).textContent=&quot;Connection established. Open a .html/.pug file to begin.&quot;,h.on(&quot;switchHTML&quot;,(({filePath:e,content:t,messages:o})=&gt;n(this,void 0,void 0,(function*(){const n=document.querySelector(&quot;#initMessage&quot;);n&amp;&amp;document.body.removeChild(n),l.showMessage([{msg:e,type:&quot;info&quot;}].concat(o)),u[e]&amp;&amp;l.showIframe(u[e]),null!=t&amp;&amp;(u[e]||(u[e]=yield a.createIframe(t)))})))),h.on(&quot;editHTML&quot;,(({filePath:e,content:t,messages:o})=&gt;(l.showMessage(o),null!=t&amp;&amp;a.modifyHTML(u[e],t)))),h.on(&quot;injectCSS&quot;,(({fileRel:e,content:t})=&gt;{for(const o in u)a.writeStyle(u[o].head,e,t)})),h.on(&quot;reloadJS&quot;,(e=&gt;n(this,void 0,void 0,(function*(){for(const t in u){const o=u[t];[...o.querySelectorAll(&quot;script&quot;)].find((t=&gt;t.src.startsWith(location.href)&amp;&amp;t.src.slice(location.href.length)===e))&amp;&amp;(l.log(&quot;Reloading a document containing the saved script...&quot;,&quot;info&quot;),document.body.removeChild(o.iframe),u[t]=yield a.createIframe(o.oldHTML))}})))),h.on(&quot;reloadFull&quot;,(()=&gt;location.reload())),h.on(&quot;alive&quot;,(({debug:e})=&gt;(l.setDebug(e),clearTimeout(f),f=setTimeout((()=&gt;l.showMessage(&quot;Server disconnected.&quot;,&quot;error&quot;)),500)))),h.on(&quot;showMessage&quot;,(e=&gt;l.showMessage(e)))}h=new WebSocket(&quot;wss://&quot;+location.host),h.addEventListener(&quot;open&quot;,p),h.addEventListener(&quot;error&quot;,(()=&gt;{h=new WebSocket(&quot;ws://&quot;+location.host),h.addEventListener(&quot;open&quot;,p),console.log(&quot;WSS unavailable.&quot;)}))},54:(e,t)=&gt;{Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.Interact=void 0;const o=[&quot;drag&quot;,&quot;resizeHorizontal&quot;,&quot;resizeDiagonal2&quot;,&quot;resizeVertical&quot;,&quot;resizeDiagonal1&quot;].map((e=&gt;&quot;interact-&quot;+e)),n=[&quot;move&quot;,&quot;w-resize&quot;,&quot;nesw-resize&quot;,&quot;s-resize&quot;,&quot;nwse-resize&quot;];t.Interact=class{constructor(e,t,s=64,i=32){this.interact=null;const a=document.createElement(&quot;style&quot;);a.innerHTML=o.map(((e,t)=&gt;`body.${e}{cursor:${n[t]}}`)).join(&quot;&quot;)+&quot;body.interact-drag{cursor:move;cursor:grab}body.interact-drag:active{cursor:grabbing}&quot;,a.classList.add(&quot;interact-cursors&quot;),document.head.appendChild(a);const l=document.querySelectorAll(&quot;.&quot;+e);this.boxes=[...l],this.topBox=this.boxes.reverse()[0],this.graspClassName=t,this.minSize=s,this.snapDist=i}mouseMove(e){const{clientX:t,clientY:n}=e;if(this.interact){const{box:o,x:s,y:i,w:a,h:l}=this.interact;return this.resizeAxe(o,t,s,a,&quot;left&quot;,&quot;width&quot;),this.resizeAxe(o,n,i,l,&quot;top&quot;,&quot;height&quot;),e.preventDefault(),{element:o,state:(6*+!!i-3*+!!l+2*+!!s-+!!a)%8}}const s=document.body;s.classList.remove(...o);for(const i of this.boxes){const{offsetLeft:a,offsetWidth:l,offsetTop:c,offsetHeight:r}=i,d=this.mouseEdge(t,n,a,c,l,r,16);if(d)return s.classList.add(o[Math.abs(d)]),e.preventDefault(),{element:i,state:d};if(this.mouseIsInside(t,n,a,c,l,r))return this.mouseIsGraspable(t,n,i)&amp;&amp;s.classList.add(o[0]),e.preventDefault(),{element:i,state:0}}return null}mouseDown({clientX:e,clientY:t}){for(const o of this.boxes){const{offsetLeft:n,offsetWidth:s,offsetTop:i,offsetHeight:a}=o,l=this.mouseEdge(e,t,n,i,s,a,16);if(l){const c=this.interact={box:o};return(l-1)%3==0&amp;&amp;(c.x=e-n,c.w=e+s),(l+1)%3==0&amp;&amp;(c.w=e-s),l&gt;1&amp;&amp;(c.y=t-i,c.h=t+a),l&lt;-1&amp;&amp;(c.h=t-a),{element:o,state:l}}if(this.mouseIsInside(e,t,n,i,s,a))return this.mouseIsGraspable(e,t,o)?(this.topBox!==o&amp;&amp;(o.style.zIndex=this.topBox.style.zIndex+1,this.topBox=o,this.boxes.sort(((e,t)=&gt;+t.style.zIndex-+e.style.zIndex))),this.interact={box:o,x:e-n,y:t-i},{element:o,state:0}):null}return null}mouseUp(){this.interact=null}resizeAxe(e,t,o,n,s,i){const a=&quot;offset&quot;+s[0].toUpperCase()+s.slice(1),l=i[0].toUpperCase()+i.slice(1),c=Math.abs,r=this.minSize,d=this.snapDist;if(!n){if(!o)return;const n=[].concat.apply([],this.boxes.map((t=&gt;t===e?[0,window[&quot;inner&quot;+l]]:[t[a],t[a]+t[&quot;offset&quot;+l]])));let i=n.find((e=&gt;c(t-o-e)&lt;d));if(!isNaN(i))return void(e.style[s]=i+&quot;px&quot;);const r=e[&quot;offset&quot;+l];return i=n.find((e=&gt;c(t-o+r-e)&lt;d)),isNaN(i)?void(e.style[s]=t-o+&quot;px&quot;):void(e.style[s]=i-r+&quot;px&quot;)}if(o){let u=n-t;const h=[].concat.apply([],this.boxes.map((t=&gt;t===e?0:[t[a],t[a]+t[&quot;offset&quot;+l]]))).find((e=&gt;c(t-o-e)&lt;d));if(!isNaN(h)&amp;&amp;(u=n-o-h),u&gt;r)return e.style[s]=n-o-u+&quot;px&quot;,void(e.style[i]=u+&quot;px&quot;)}if(!o){let o=t-n;const s=e[a],u=[].concat.apply([],this.boxes.map((t=&gt;t===e?window[&quot;inner&quot;+l]:[t[a],t[a]+t[&quot;offset&quot;+l]]))).find((e=&gt;c(t-e)&lt;d));if(!isNaN(u)&amp;&amp;(o=u-s),o&gt;r)return void(e.style[i]=o+&quot;px&quot;)}o&amp;&amp;(e.style[s]=n-o-r+&quot;px&quot;),e.style[i]=r+&quot;px&quot;}mouseIsInside(e,t,o,n,s,i){return e&gt;o&amp;&amp;e&lt;o+s&amp;&amp;t&gt;n&amp;&amp;t&lt;n+i}mouseEdge(e,t,o,n,s,i,a){const l=Math.abs;return+this.mouseIsInside(e,t,o-a,n-a,s+2*a,i+2*a)*(3*+(l(n-t)&lt;a)-3*+(l(n+i-t)&lt;a)+ +(l(o-e)&lt;a)-+(l(o+s-e)&lt;a))}mouseIsGraspable(e,t,o){const n=[...o.querySelectorAll(&quot;*&quot;)].reverse();for(const o of n){const{x:n,y:s,width:i,height:a}=o.getBoundingClientRect();if(this.mouseIsInside(e,t,n,s,i,a))return o.classList.contains(this.graspClassName)}return!0}}},838:function(e,t,o){var n=this&amp;&amp;this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(s,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function l(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.writeStyle=t.modifyHTML=t.createIframe=void 0;const s=o(270),i=o(627),a=o(271),l=new i.YAMLDOM,c=l.yamlify.bind(l),r=new s.DiffDOM,d={};function u(e){return n(this,void 0,void 0,(function*(){const t=[...e.querySelectorAll(&quot;script&quot;)];a.log(&quot;Loading &quot;+t.length+&quot; script(s)...&quot;,&quot;info&quot;);try{yield Promise.all(t.map((t=&gt;function(e,t){return new Promise(((o,n)=&gt;{const s=e.ownerDocument.createElement(&quot;script&quot;),{src:i,textContent:a}=t;i&amp;&amp;(s.src=i.startsWith(location.href)&amp;&amp;i.slice(location.href.length)||i),s.textContent=a,s.onload=o,s.onerror=n,e.removeChild(t),e.appendChild(s)}))}(e,t))))}catch(e){throw Error(e)}}))}function h(e,t,o){let n=[...e.querySelectorAll(&quot;link&quot;)];if(t){const i=s(t);if(d[i]=o,n=n.filter((e=&gt;e.href.startsWith(location.href)&amp;&amp;e.href.slice(location.href.length)===t)),!n.length){a.log('Updating style tag id &quot;'+i+'&quot;...',&quot;info&quot;);const t=e.querySelector(&quot;#&quot;+i);return void(t&amp;&amp;(t.textContent=o))}}function s(e){return&quot;lively-style-&quot;+btoa(encodeURIComponent(e)).replace(/[+/=]/g,&quot;_&quot;)}n.forEach((t=&gt;{const n=s(t.href.startsWith(location.href)&amp;&amp;t.href.slice(location.href.length)||t.href);if(o?d[n]=o:o=d[n],!o)return;const i=document.createElement(&quot;style&quot;);i.id=n,i.textContent=o,e.insertBefore(i,t),e.removeChild(t),a.log('Replacing link tag with style tag id &quot;'+n+'&quot;...',&quot;info&quot;)}))}function f(e,t){if(&quot;body&quot;===t){const t=e.match(/(?&lt;=&lt;body&gt;).*(?=&lt;\/body&gt;)/i);return t?t[0]:e.replace(/.*&lt;html&gt;(.*)&lt;\/html&gt;.*/i,&quot;$1&quot;).replace(/&lt;(head|style|title).*&gt;.*?&lt;\/\1&gt;|&lt;(link|meta).*?&gt;/gi,&quot;&quot;)}if(&quot;head&quot;===t){const t=e.match(/(?&lt;=&lt;head&gt;).*(?=&lt;\/head&gt;)/i);if(t)return t[0];const o=e.match(/&lt;(style|title).*&gt;.*?&lt;\/\1&gt;|&lt;(link|meta).*?&gt;/gi);return(null==o?void 0:o.join(&quot;&quot;))||&quot;&quot;}return&quot;&lt;head&gt;&quot;+f(e,&quot;head&quot;)+&quot;&lt;/head&gt;&lt;body&gt;&quot;+f(e,&quot;body&quot;)+&quot;&lt;/body&gt;&quot;}function p(e,t,o,n,s){const i=t.length-+!s;e.forEach((({route:e})=&gt;{if(!(e.length&lt;i+1)){for(let o=0;o&lt;i;++o)if(e[o]!==t[o])return;if(n){if(e[i]&gt;=n){if(e[i]&lt;n+o)return void(e[i]+=s-n);e[i]-=o}e[i]&gt;=s&amp;&amp;(e[i]+=o)}else{if(e[i]&lt;t[i])return;e[i]+=o}}}))}t.createIframe=function(e){return n(this,void 0,void 0,(function*(){const t=document.createElement(&quot;iframe&quot;);document.body.appendChild(t),&quot;complete&quot;!==t.contentDocument.readyState&amp;&amp;(yield new Promise((e=&gt;t.addEventListener(&quot;load&quot;,e))));const o=t.contentDocument;return a.log(&quot;Opening a new HTML/Pug file...&quot;,&quot;info&quot;),o.iframe=t,a.showIframe(o),function(e,t){n(this,void 0,void 0,(function*(){const o=f(t,&quot;head&quot;);a.log(o,&quot;Head Tag&quot;),o&amp;&amp;(e.head.innerHTML=o,h(e.head),yield u(e.head)),a.log(e.body.innerHTML=f(t,&quot;body&quot;),&quot;Body Tag&quot;),e.oldHTML=e.documentElement.outerHTML,e.oldDOM=s.nodeToObj(e.documentElement),u(e.body)}))}(o,e),o}))},t.modifyHTML=function(e,t){const o=document.implementation.createHTMLDocument(),n=o.documentElement;a.log(&quot;Changing HTML content...&quot;,&quot;info&quot;),n.innerHTML=f(t,&quot;html&quot;),h(o.head),function(e,t){const o=e.documentElement,n=s.nodeToObj(o),i=e.oldDOM,l=s.nodeToObj(t);a.log([i,c(i)],&quot;Raw HTML (1)&quot;),a.log([n,c(n)],&quot;Js-altered HTML (2)&quot;),a.log([l,c(l)],&quot;Editor-modified HTML (3)&quot;);const d=r.diff(n,l),u=r.diff(i,n);var h;h=u,d.forEach((({action:e,route:t,groupLength:o,from:n,to:s})=&gt;{&quot;addElement&quot;===e&amp;&amp;p(h,t,1),&quot;removeElement&quot;===e&amp;&amp;p(h,t,-1),&quot;relocateGroup&quot;===e&amp;&amp;p(h,t,o,n,s)})),a.log([d,c(d)],&quot;2 → 3&quot;),a.log([u,c(u)],&quot;1 → 2&quot;),r.apply(o,d),r.apply(o,u),e.oldHTML=t.outerHTML,e.oldDOM=l}(e,n)},t.writeStyle=h},271:(e,t,o)=&gt;{Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.maximizeMessagePane=t.showIframe=t.log=t.showMessage=t.setDebug=void 0;const n=o(471),s=document.querySelector(&quot;#lively-pane&quot;),i=document.querySelector(&quot;#lively-center&quot;),a=document.querySelector(&quot;#lively-error&quot;),l=document.querySelector(&quot;#lively-warning&quot;),c=document.querySelector(&quot;#lively-minimize&quot;);let r=!1;function d(e,t){!t&amp;&amp;([e,t]=s.originalSize),s.style.width=e+&quot;px&quot;,s.style.height=t+&quot;px&quot;,s.style.top=s.offsetTop+n.MIN_BOX_SIZE-t+&quot;px&quot;,s.originalSize=null,c.animate({transform:&quot;rotate(0deg)&quot;},{duration:100,fill:&quot;forwards&quot;})}t.setDebug=function(e){r=e},t.showMessage=function(e,t=&quot;info&quot;){let o=0,n=0;if(i.textContent=&quot;&quot;,&quot;string&quot;==typeof e&amp;&amp;(e=[{msg:e,type:t}]),0===e.length)return s.hidden=!0,void(a.dataset.indicator=l.dataset.indicator=&quot;0&quot;);s.hidden=!1,e.forEach((({msg:e,type:t})=&gt;{const s=document.createElement(&quot;div&quot;);s.classList.add(&quot;lively-message&quot;,&quot;graspable&quot;),&quot;error&quot;===t&amp;&amp;(++o,s.classList.add(&quot;lively-error&quot;)),&quot;warn&quot;===t&amp;&amp;(++n,s.classList.add(&quot;lively-warning&quot;)),s.textContent=e,i.appendChild(s)})),a.dataset.indicator=&quot;&quot;+o,l.dataset.indicator=&quot;&quot;+n},t.log=function(e,t){r&amp;&amp;(&quot;info&quot;!==t?(console.groupCollapsed(t),&quot;string&quot;==typeof e?console.log(e):e.forEach((e=&gt;console.log(e))),console.groupEnd()):console.info(&quot;%c&quot;+e,&quot;color: #c83&quot;))},t.showIframe=function(e){const t=[...document.querySelectorAll(&quot;iframe&quot;)],o=e.iframe;t.forEach((e=&gt;e!==o&amp;&amp;e.animate({opacity:0,zIndex:0},{duration:500,fill:&quot;forwards&quot;}))),o.animate({opacity:1,zIndex:1},{duration:500,fill:&quot;forwards&quot;})},a.addEventListener(&quot;click&quot;,(()=&gt;{s.classList.toggle(&quot;error-hidden&quot;)})),l.addEventListener(&quot;click&quot;,(()=&gt;{s.classList.toggle(&quot;warning-hidden&quot;)})),c.addEventListener(&quot;mousedown&quot;,(()=&gt;{s.holdTimer=setTimeout((()=&gt;document.body.removeChild(s)),500)})),c.addEventListener(&quot;mouseup&quot;,(()=&gt;{clearTimeout(s.holdTimer)})),c.addEventListener(&quot;click&quot;,(function(){if(s.originalSize)return void d();const{offsetWidth:e,offsetHeight:t,offsetTop:o}=s;s.style.width=s.style.height=n.MIN_BOX_SIZE+&quot;px&quot;,s.style.top=o+t-n.MIN_BOX_SIZE+&quot;px&quot;,s.originalSize=[e,t],this.animate({transform:&quot;rotate(180deg)&quot;},{duration:100,fill:&quot;forwards&quot;})})),t.maximizeMessagePane=d},627:(e,t)=&gt;{Object.defineProperty(t,&quot;__esModule&quot;,{value:!0}),t.YAMLDOM=t.YAML=void 0;class o{constructor(){this.tab=2,this.seen=new Set}yamlify(e,t){return this.tab=t||2,this.seen=new Set,this.dfs(e,0,!1)}dfs(e,t,o){const n=o?&quot; &quot;:&quot;&quot;;return this.seen.has(e)?n+&quot;{circular}&quot;:this.isSpecialString(e)?n+&quot;'&quot;+e+&quot;'&quot;:void 0===e?n+&quot;null&quot;:this.isLeaf(e)?n+e:(this.seen.add(e),Array.isArray(e)?this.handleArray(e,t,o):this.handleObject(e,t,o))}isSpecialString(e){return&quot;string&quot;==typeof e&amp;&amp;/[[\]{}:',-]/.test(e)}isLeaf(e){return&quot;boolean&quot;==typeof e||&quot;string&quot;==typeof e||&quot;number&quot;==typeof e||&quot;bigint&quot;==typeof e||null==e}handleArray(e,t,o){const n=o?&quot; &quot;:&quot;&quot;;if(0===e.length)return n+&quot;[]&quot;;const s=e.every((e=&gt;this.isLeaf(e)));let i=&quot;&quot;,a=&quot;, &quot;;!s&amp;&amp;(i=&quot;- &quot;,a=&quot;\n&quot;+&quot; &quot;.repeat(this.tab*t)+i,o&amp;&amp;(i=a)),i+=this.dfs(e[0],++t,!1);for(let o=1;o&lt;e.length;o++)i+=a+this.dfs(e[o],t,!1);return s?n+&quot;[&quot;+i+&quot;]&quot;:i}handleObject(e,t,o){const n=o?&quot; &quot;:&quot;&quot;;let s=0;for(const t in e)void 0!==e[t]&amp;&amp;++s;if(0===s)return n+&quot;{}&quot;;const i=&quot;\n&quot;+&quot; &quot;.repeat(this.tab*t++);let a=&quot;&quot;;for(const n in e)a+=o||&quot;&quot;!==a?this.handleProp(e,n,i,t):this.handleProp(e,n,&quot;&quot;,t);return a}handleProp(e,t,o,n){return void 0===e[t]?&quot;&quot;:o+t+&quot;:&quot;+this.dfs(e[t],n,!0)}}t.YAML=o,t.YAMLDOM=class extends o{handleProp(e,t,o,n){if(&quot;toString&quot;===t||&quot;setValue&quot;===t)return&quot;&quot;;if(&quot;attributes&quot;===t){const t=e.attributes;let s=0;for(const e in t)++s;if(1===s&amp;&amp;(t.id||t.class))return&quot;&quot;;if(2===s&amp;&amp;t.id&amp;&amp;t.class)return&quot;&quot;;let i=&quot;&quot;;for(const e in t)&quot;id&quot;!==e&amp;&amp;&quot;class&quot;!==e&amp;&amp;(i+=o+&quot;[35m&quot;+e+&quot;[39m:&quot;+this.dfs(t[e],n,!0));return i}const s=o+&quot;[35m&quot;+t+&quot;[39m:&quot;;if(&quot;nodeName&quot;===t){const{nodeName:t,attributes:o}=e;let n=s+&quot; &quot;+t;return(null==o?void 0:o.class)&amp;&amp;(n+=&quot;.&quot;+o.class.replace(/\s/g,&quot;.&quot;)),(null==o?void 0:o.id)&amp;&amp;(n+=&quot;#&quot;+o.id),n}return&quot;childNodes&quot;===t&amp;&amp;1===e.childNodes.length&amp;&amp;&quot;#text&quot;===e.childNodes[0].nodeName?o+&quot;[35mdata[39m: &quot;+e.childNodes[0].data:s+this.dfs(e[t],n,!0)}}}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}return o.d=(e,t)=&gt;{for(var n in t)o.o(t,n)&amp;&amp;!o.o(e,n)&amp;&amp;Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=&gt;Object.prototype.hasOwnProperty.call(e,t),o.r=e=&gt;{&quot;undefined&quot;!=typeof Symbol&amp;&amp;Symbol.toStringTag&amp;&amp;Object.defineProperty(e,Symbol.toStringTag,{value:&quot;Module&quot;}),Object.defineProperty(e,&quot;__esModule&quot;,{value:!0})},o(471)})()}));</failure>
		</testcase>
	</testsuite>
</testsuites>

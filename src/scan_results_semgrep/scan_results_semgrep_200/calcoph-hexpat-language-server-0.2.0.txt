<?xml version="1.0" ?>
<testsuites disabled="0" errors="0" failures="10" tests="10" time="0.0">
	<testsuite disabled="0" errors="0" failures="10" name="semgrep results" skipped="0" tests="10" time="0">
		<testcase name="javascript.lang.security.audit.path-traversal.path-join-resolve-traversal.path-join-resolve-traversal" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="39">
			<failure type="WARNING" message="Detected possible user input going into a `path.join` or `path.resolve` function. This could possibly lead to a path traversal vulnerability,  where the attacker can access arbitrary files stored in the file system. Instead, be sure to sanitize or validate user input first.">`+t.data.toString():&quot;&quot;}`}return e instanceof Error?De.string(e.stack)?e.stack:e.message:De.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Info&amp;&amp;this.showNotificationMessage(y.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Warn&amp;&amp;this.showNotificationMessage(y.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),(r===&quot;force&quot;||r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Error)&amp;&amp;this.showNotificationMessage(y.MessageType.Error,e)}showNotificationMessage(e,t){t=t??&quot;A request has failed. See the output for more information.&quot;,(e===y.MessageType.Error?K.window.showErrorMessage:e===y.MessageType.Warning?K.window.showWarningMessage:K.window.showInformationMessage)(t,&quot;Go to output&quot;).then(i=&gt;{i!==void 0&amp;&amp;this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&amp;&amp;this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&amp;&amp;e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&amp;&amp;this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===qe.Initial||this.state===qe.Stopping||this.state===qe.Stopped}needsStop(){return this.state===qe.Starting||this.state===qe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===qe.Running&amp;&amp;!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&amp;&amp;(this._onReady=new Promise((e,t)=&gt;{this._onReadyCallbacks=new ao(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?K.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):K.languages.createDiagnosticCollection()),this.state=qe.Starting,this.resolveConnection().then(e=&gt;(e.onLogMessage(t=&gt;{switch(t.type){case y.MessageType.Error:this.error(t.message,void 0,!1);break;case y.MessageType.Warning:this.warn(t.message,void 0,!1);break;case y.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=&gt;{switch(t.type){case y.MessageType.Error:K.window.showErrorMessage(t.message);break;case y.MessageType.Warning:K.window.showWarningMessage(t.message);break;case y.MessageType.Info:K.window.showInformationMessage(t.message);break;default:K.window.showInformationMessage(t.message)}}),e.onRequest(y.ShowMessageRequest.type,t=&gt;{let r;switch(t.type){case y.MessageType.Error:r=K.window.showErrorMessage;break;case y.MessageType.Warning:r=K.window.showWarningMessage;break;case y.MessageType.Info:r=K.window.showInformationMessage;break;default:r=K.window.showInformationMessage}let i=t.actions||[];return r(t.message,...i)}),e.onTelemetry(t=&gt;{this._telemetryEmitter.fire(t)}),e.onRequest(y.ShowDocumentRequest.type,async t=&gt;{let r=async o=&gt;{let s=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await K.env.openExternal(s)};{let a={};return o.selection!==void 0&amp;&amp;(a.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?a.preserveFocus=!0:o.takeFocus===!0&amp;&amp;(a.preserveFocus=!1),await K.window.showTextDocument(s,a),{success:!0}}}catch{return{success:!0}}},i=this._clientOptions.middleware.window?.showDocument;return i!==void 0?i(t,r):r(t)}),e.listen(),this.initialize(e))).catch(e=&gt;{this.state=qe.StartFailed,this._onReadyCallbacks.reject(e),this.error(`${this._name} client: couldn't create connection to server`,e,&quot;force&quot;)}),new K.Disposable(()=&gt;{this.needsStop()&amp;&amp;this.stop().catch(e=&gt;{this.error(&quot;Stopping server failed.&quot;,e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:K.env.appName,version:K.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(K.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:De.func(t)?t():t,trace:y.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=Se.generateUuid(),a=new lD.ProgressPart(e,s);return o.workDoneToken=s,this.doInitialize(e,o).then(u=&gt;(a.done(),u),u=&gt;{throw a.cancel(),u})}else return this.doInitialize(e,o)}doInitialize(e,t){return e.initialize(t).then(r=&gt;{this._resolvedConnection=e,this._initializeResult=r,this.state=qe.Running;let i;return De.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===y.TextDocumentSyncKind.None?i={openClose:!1,change:y.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&amp;&amp;r.capabilities.textDocumentSync!==null&amp;&amp;(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=&gt;this.handleDiagnostics(o)),e.onRequest(y.RegistrationRequest.type,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(&quot;client/registerFeature&quot;,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(y.UnregistrationRequest.type,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(&quot;client/unregisterFeature&quot;,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(y.ApplyWorkspaceEditRequest.type,o=&gt;this.handleApplyWorkspaceEdit(o)),e.sendNotification(y.InitializedNotification.type,{}).then(()=&gt;(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r))}).then(void 0,r=&gt;{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof y.ResponseError&amp;&amp;r.data&amp;&amp;r.data.retry?K.window.showErrorMessage(r.message,{title:&quot;Retry&quot;,id:&quot;retry&quot;}).then(i=&gt;{i&amp;&amp;i.id===&quot;retry&quot;?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&amp;&amp;r.message&amp;&amp;K.window.showErrorMessage(r.message),this.error(&quot;Server initialization failed.&quot;,r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=K.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}async stop(e=2e3){if(await this.onReady(),this._initializeResult=void 0,!this._connectionPromise)return this.state=qe.Stopped,Promise.resolve();if(this.state===qe.Stopping&amp;&amp;this._onStop)return this._onStop;this.state=qe.Stopping,this.cleanUp(!1);let t=new Promise(i=&gt;{(0,y.RAL)().timer.setTimeout(i,e)}),r=this.resolveConnection().then(i=&gt;i.shutdown().then(()=&gt;i.exit().then(()=&gt;i)));return this._onStop=Promise.race([t,r]).then(i=&gt;{if(i!==void 0)i.end(),i.dispose();else throw this.error(&quot;Stopping server timed out&quot;,void 0,!1),new Error(&quot;Stopping the server timed out&quot;)},i=&gt;{throw this.error(&quot;Stopping server failed&quot;,i,!1),i}).finally(()=&gt;{this.state=qe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})}cleanUp(e=!0,t=!0){this._fileEvents=[],this._fileEventDelayer.cancel(),this._listeners&amp;&amp;(this._listeners.forEach(r=&gt;r.dispose()),this._listeners=void 0),this._providers&amp;&amp;(this._providers.forEach(r=&gt;r.dispose()),this._providers=void 0),this._syncedDocuments&amp;&amp;this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=&gt;i[1]).reverse())r.dispose();e&amp;&amp;this.cleanUpChannel(),t&amp;&amp;this._diagnostics&amp;&amp;(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&amp;&amp;this._disposeOutputChannel&amp;&amp;(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=&gt;{await t.onReady();let s=await t.resolveConnection(),a=Promise.resolve();return t.isConnectionActive()&amp;&amp;(t.forceDocumentSync(),a=s.didChangeWatchedFiles({changes:t._fileEvents})),t._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=&gt;{t.error(&quot;Notify file events failed.&quot;,o)})}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&amp;&amp;(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(y.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,r,(o,s)=&gt;this.setDiagnostics(o,s)):this.setDiagnostics(t,r)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(r,i,o)=&gt;{this.handleConnectionError(r,i,o)},t=()=&gt;{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||&quot;utf8&quot;).then(r=&gt;dD(r.reader,r.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===qe.Stopped)return;try{this._resolvedConnection&amp;&amp;this._resolvedConnection.dispose()}catch{}let e={action:sr.DoNotRestart};if(this.state!==qe.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e.action===sr.DoNotRestart?(this.error(e.message??&quot;Connection to server got closed. Server will not be restarted.&quot;,void 0,&quot;force&quot;),this.state===qe.Starting?(this._onReadyCallbacks.reject(new Error(&quot;Connection to server got closed. Server will not be restarted.&quot;)),this.state=qe.StartFailed):this.state=qe.Stopped,this.cleanUp(!1,!0)):e.action===sr.Restart&amp;&amp;(this.info(e.message??&quot;Connection to server got closed. Server will restart.&quot;),this.cleanUp(!1,!1),this.state=qe.Initial,this.start())}handleConnectionError(e,t,r){let i=this._clientOptions.errorHandler.error(e,t,r);i.action===so.Shutdown&amp;&amp;(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,&quot;force&quot;),this.stop().catch(o=&gt;{this.error(&quot;Stopping server failed&quot;,o,!1)}))}hookConfigurationChanged(e){K.workspace.onDidChangeConfiguration(()=&gt;{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let r=K.workspace.getConfiguration(this._id),i=y.Trace.Off,o=y.TraceFormat.Text;if(r){let s=r.get(&quot;trace.server&quot;,&quot;off&quot;);typeof s==&quot;string&quot;?i=y.Trace.fromString(s):(i=y.Trace.fromString(r.get(&quot;trace.server.verbosity&quot;,&quot;off&quot;)),o=y.TraceFormat.fromString(r.get(&quot;trace.server.format&quot;,&quot;text&quot;)))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;De.array(t)?r=t:r=[t],r&amp;&amp;this._dynamicFeatures.get(y.DidChangeWatchedFilesNotification.type.method).registerRaw(Se.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),rc.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Pc(this)),this.registerFeature(new ic(this,this._syncedDocuments)),this.registerFeature(new sc(this)),this.registerFeature(new ac(this)),this.registerFeature(new cc(this)),this.registerFeature(new uc(this)),this.registerFeature(new oc(this,this._syncedDocuments)),this.registerFeature(new lc(this,e=&gt;this.notifyFileEvent(e))),this.registerFeature(new fc(this)),this.registerFeature(new hc(this)),this.registerFeature(new pc(this)),this.registerFeature(new gc(this)),this.registerFeature(new mc(this)),this.registerFeature(new vc(this)),this.registerFeature(new yc(this)),this.registerFeature(new Cc(this)),this.registerFeature(new Rc(this)),this.registerFeature(new Dc(this)),this.registerFeature(new Sc(this)),this.registerFeature(new wc(this)),this.registerFeature(new bc(this)),this.registerFeature(new _c(this)),this.registerFeature(new Tc(this)),this.registerFeature(new qc(this))}fillInitializeParams(e){for(let t of this._features)De.func(t.fillInitializeParams)&amp;&amp;t.fillInitializeParams(e)}computeClientCapabilities(){let e={};V(e,&quot;workspace&quot;).applyEdit=!0;let t=V(V(e,&quot;workspace&quot;),&quot;workspaceEdit&quot;);t.documentChanges=!0,t.resourceOperations=[y.ResourceOperationKind.Create,y.ResourceOperationKind.Rename,y.ResourceOperationKind.Delete],t.failureHandling=y.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=V(V(e,&quot;textDocument&quot;),&quot;publishDiagnostics&quot;);r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[y.DiagnosticTag.Unnecessary,y.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=V(e,&quot;window&quot;),o=V(i,&quot;showMessage&quot;);o.messageActionItem={additionalPropertiesSupport:!0};let s=V(i,&quot;showDocument&quot;);s.support=!0;let a=V(e,&quot;general&quot;);a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ar.RequestsToCancelOnContentModified)},a.regularExpressions={engine:&quot;ECMAScript&quot;,version:&quot;ES2020&quot;},a.markdown={parser:&quot;marked&quot;,version:&quot;1.1.0&quot;},this._clientOptions.markdown.supportHtml&amp;&amp;(a.markdown.allowedTags=[&quot;ul&quot;,&quot;li&quot;,&quot;p&quot;,&quot;code&quot;,&quot;blockquote&quot;,&quot;ol&quot;,&quot;h1&quot;,&quot;h2&quot;,&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;hr&quot;,&quot;em&quot;,&quot;pre&quot;,&quot;table&quot;,&quot;thead&quot;,&quot;tbody&quot;,&quot;tr&quot;,&quot;th&quot;,&quot;td&quot;,&quot;div&quot;,&quot;del&quot;,&quot;a&quot;,&quot;strong&quot;,&quot;br&quot;,&quot;img&quot;,&quot;span&quot;]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(o===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let s=i.registerOptions??{};s.documentSelector=s.documentSelector??this._clientOptions.documentSelector;let a={id:i.id,registerOptions:s};try{o.register(a)}catch(u){r(u);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,r=new Map;K.workspace.textDocuments.forEach(o=&gt;r.set(o.uri.toString(),o));let i=!1;if(t.documentChanges){for(let o of t.documentChanges)if(y.TextDocumentEdit.is(o)&amp;&amp;o.textDocument.version&amp;&amp;o.textDocument.version&gt;=0){let s=r.get(o.textDocument.uri);if(s&amp;&amp;s.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):De.asPromise(K.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=&gt;({applied:o})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof y.ResponseError){if(r.code===y.LSPErrorCodes.RequestCancelled||r.code===y.LSPErrorCodes.ServerCancelled){if(t!==void 0&amp;&amp;t.isCancellationRequested)return i;throw r.data!==void 0?new co(r.data):new K.CancellationError}else if(r.code===y.LSPErrorCodes.ContentModified){if(ar.RequestsToCancelOnContentModified.has(e.method))throw new K.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};ye.BaseLanguageClient=ar;ar.RequestsToCancelOnContentModified=new Set([y.SemanticTokensRequest.method,y.SemanticTokensRangeRequest.method,y.SemanticTokensDeltaRequest.method])});var Ph=q(lo=&gt;{&quot;use strict&quot;;Object.defineProperty(lo,&quot;__esModule&quot;,{value:!0});lo.ColorProviderFeature=void 0;var uo=require(&quot;vscode&quot;),mi=Ce(),Ec=it();function Th(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kc=class extends Ec.TextDocumentFeature{constructor(e){super(e,mi.DocumentColorRequest.type)}fillClientCapabilities(e){Th(Th(e,&quot;textDocument&quot;),&quot;colorProvider&quot;).dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=&gt;{let a=this._client,u=(g,p,C)=&gt;{let R={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p.document),range:a.code2ProtocolConverter.asRange(p.range)};return a.sendRequest(mi.ColorPresentationRequest.type,R,C).then(this.asColorPresentations.bind(this),E=&gt;a.handleFailedRequest(mi.ColorPresentationRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,o,s,u):u(i,o,s)},provideDocumentColors:(i,o)=&gt;{if(Ec.$DocumentSelector.skipCellTextDocument(t,i))return;let s=this._client,a=(h,g)=&gt;{let p={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(h)};return s.sendRequest(mi.DocumentColorRequest.type,p,g).then(this.asColorInformations.bind(this),C=&gt;s.handleFailedRequest(mi.ColorPresentationRequest.type,g,C,null))},u=s.clientOptions.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,o,a):a(i,o)}};return[uo.languages.registerColorProvider(Ec.$DocumentSelector.asTextDocumentFilters(t),r),r]}asColor(e){return new uo.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=&gt;new uo.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=&gt;{let r=new uo.ColorPresentation(t.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),r}):[]}};lo.ColorProviderFeature=kc});var Eh=q(fo=&gt;{&quot;use strict&quot;;Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0});fo.ImplementationFeature=void 0;var gD=require(&quot;vscode&quot;),Oc=Ce(),xc=it();function qh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Nc=class extends xc.TextDocumentFeature{constructor(e){super(e,Oc.ImplementationRequest.type)}fillClientCapabilities(e){let t=qh(qh(e,&quot;textDocument&quot;),&quot;implementation&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=&gt;{if(xc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Oc.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Oc.ImplementationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideImplementation?h.provideImplementation(i,o,s,u):u(i,o,s)}};return[gD.languages.registerImplementationProvider(xc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};fo.ImplementationFeature=Nc});var kh=q(po=&gt;{&quot;use strict&quot;;Object.defineProperty(po,&quot;__esModule&quot;,{value:!0});po.TypeDefinitionFeature=void 0;var mD=require(&quot;vscode&quot;),Ic=Ce(),Fc=it();function ho(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Lc=class extends Fc.TextDocumentFeature{constructor(e){super(e,Ic.TypeDefinitionRequest.type)}fillClientCapabilities(e){ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;).dynamicRegistration=!0;let t=ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=&gt;{if(Fc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Ic.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Ic.TypeDefinitionRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,o,s,u):u(i,o,s)}};return[mD.languages.registerTypeDefinitionProvider(Fc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};po.TypeDefinitionFeature=Lc});var Oh=q(xr=&gt;{&quot;use strict&quot;;Object.defineProperty(xr,&quot;__esModule&quot;,{value:!0});xr.WorkspaceFoldersFeature=xr.arrayDiff=void 0;var vD=Or(),go=require(&quot;vscode&quot;),vi=Ce();function Ac(n,e){if(n!==void 0)return n[e]}function Mc(n,e){return n.filter(t=&gt;e.indexOf(t)&lt;0)}xr.arrayDiff=Mc;var jc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return vi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=go.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=&gt;this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(vi.WorkspaceFoldersRequest.type,o=&gt;{let s=()=&gt;{let u=go.workspace.workspaceFolders;return u===void 0?null:u.map(g=&gt;this.asProtocol(g))},a=t.clientOptions.middleware.workspace;return a&amp;&amp;a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Ac(Ac(Ac(e,&quot;workspace&quot;),&quot;workspaceFolders&quot;),&quot;changeNotifications&quot;),i;typeof r==&quot;string&quot;?i=r:r===!0&amp;&amp;(i=vD.generateUuid()),i&amp;&amp;this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&amp;&amp;e){let r=Mc(this._initialFolders,e),i=Mc(e,this._initialFolders);(i.length&gt;0||r.length&gt;0)&amp;&amp;(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&amp;&amp;(t=this.doSendEvent(e,[]));t!==void 0&amp;&amp;t.catch(r=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=&gt;this.asProtocol(i)),removed:t.map(i=&gt;this.asProtocol(i))}};return this._client.sendNotification(vi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=go.workspace.onDidChangeWorkspaceFolders(o=&gt;{let s=h=&gt;this.doSendEvent(h.added,h.removed),a=r.clientOptions.middleware.workspace;(a&amp;&amp;a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(h=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(go.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&amp;&amp;(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};xr.WorkspaceFoldersFeature=jc});var Nh=q(mo=&gt;{&quot;use strict&quot;;Object.defineProperty(mo,&quot;__esModule&quot;,{value:!0});mo.FoldingRangeFeature=void 0;var yi=require(&quot;vscode&quot;),Nr=Ce(),$c=it();function xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Ir=class extends $c.TextDocumentFeature{constructor(e){super(e,Nr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=xh(xh(e,&quot;textDocument&quot;),&quot;foldingRange&quot;);t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=&gt;{if($c.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g)};return a.sendRequest(Nr.FoldingRangeRequest.type,R,C).then(Ir.asFoldingRanges,E=&gt;a.handleFailedRequest(Nr.FoldingRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,o,s,u):u(i,o,s)}};return[yi.languages.registerFoldingRangeProvider($c.$DocumentSelector.asTextDocumentFilters(t),r),r]}static asFoldingRangeKind(e){if(e)switch(e){case Nr.FoldingRangeKind.Comment:return yi.FoldingRangeKind.Comment;case Nr.FoldingRangeKind.Imports:return yi.FoldingRangeKind.Imports;case Nr.FoldingRangeKind.Region:return yi.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=&gt;new yi.FoldingRange(t.startLine,t.endLine,Ir.asFoldingRangeKind(t.kind))):[]}};mo.FoldingRangeFeature=Ir});var Fh=q(vo=&gt;{&quot;use strict&quot;;Object.defineProperty(vo,&quot;__esModule&quot;,{value:!0});vo.DeclarationFeature=void 0;var yD=require(&quot;vscode&quot;),Hc=Ce(),Wc=it();function Ih(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Kc=class extends Wc.TextDocumentFeature{constructor(e){super(e,Hc.DeclarationRequest.type)}fillClientCapabilities(e){let t=Ih(Ih(e,&quot;textDocument&quot;),&quot;declaration&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=&gt;{if(Wc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Hc.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDeclarationResult,R=&gt;a.handleFailedRequest(Hc.DeclarationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDeclaration?h.provideDeclaration(i,o,s,u):u(i,o,s)}};return[yD.languages.registerDeclarationProvider(Wc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};vo.DeclarationFeature=Kc});var Ah=q(yo=&gt;{&quot;use strict&quot;;Object.defineProperty(yo,&quot;__esModule&quot;,{value:!0});yo.SelectionRangeFeature=void 0;var CD=require(&quot;vscode&quot;),Uc=Ce(),zc=it();function Lh(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Vc=class extends zc.TextDocumentFeature{constructor(e){super(e,Uc.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Lh(Lh(e,&quot;textDocument&quot;),&quot;selectionRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=&gt;{if(zc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositions(p)};return a.sendRequest(Uc.SelectionRangeRequest.type,R,C).then(E=&gt;a.protocol2CodeConverter.asSelectionRanges(E),E=&gt;a.handleFailedRequest(Uc.SelectionRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,o,s,u):u(i,o,s)}};return[CD.languages.registerSelectionRangeProvider(zc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};yo.SelectionRangeFeature=Vc});var Mh=q(Co=&gt;{&quot;use strict&quot;;Object.defineProperty(Co,&quot;__esModule&quot;,{value:!0});Co.ProgressFeature=void 0;var RD=Ce(),DD=ec();function SD(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Gc=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){SD(e,&quot;window&quot;).workDoneProgress=!0}initialize(){let e=this._client,t=i=&gt;{this.activeParts.delete(i)},r=i=&gt;{this.activeParts.add(new DD.ProgressPart(this._client,i.token,t))};e.onRequest(RD.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Co.ProgressFeature=Gc});var $h=q(Ro=&gt;{&quot;use strict&quot;;Object.defineProperty(Ro,&quot;__esModule&quot;,{value:!0});Ro.CallHierarchyFeature=void 0;var wD=require(&quot;vscode&quot;),cr=Ce(),Bc=it();function jh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Xc=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{if(Bc.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,a))return;let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(cr.CallHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asCallHierarchyItems(p),p=&gt;i.handleFailedRequest(cr.CallHierarchyPrepareRequest.type,h,p,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},Jc=class extends Bc.TextDocumentFeature{constructor(e){super(e,cr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=jh(jh(e,&quot;textDocument&quot;),&quot;callHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Xc(t,e);return[wD.languages.registerCallHierarchyProvider(Bc.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};Ro.CallHierarchyFeature=Jc});var Hh=q(bo=&gt;{&quot;use strict&quot;;Object.defineProperty(bo,&quot;__esModule&quot;,{value:!0});bo.SemanticTokensFeature=void 0;var Do=require(&quot;vscode&quot;),ee=Ce(),So=it(),bD=yn();function wo(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Qc=class extends So.TextDocumentFeature{constructor(e){super(e,ee.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=wo(wo(e,&quot;textDocument&quot;),&quot;semanticTokens&quot;);t.dynamicRegistration=!0,t.tokenTypes=[ee.SemanticTokenTypes.namespace,ee.SemanticTokenTypes.type,ee.SemanticTokenTypes.class,ee.SemanticTokenTypes.enum,ee.SemanticTokenTypes.interface,ee.SemanticTokenTypes.struct,ee.SemanticTokenTypes.typeParameter,ee.SemanticTokenTypes.parameter,ee.SemanticTokenTypes.variable,ee.SemanticTokenTypes.property,ee.SemanticTokenTypes.enumMember,ee.SemanticTokenTypes.event,ee.SemanticTokenTypes.function,ee.SemanticTokenTypes.method,ee.SemanticTokenTypes.macro,ee.SemanticTokenTypes.keyword,ee.SemanticTokenTypes.modifier,ee.SemanticTokenTypes.comment,ee.SemanticTokenTypes.string,ee.SemanticTokenTypes.number,ee.SemanticTokenTypes.regexp,ee.SemanticTokenTypes.operator,ee.SemanticTokenTypes.decorator],t.tokenModifiers=[ee.SemanticTokenModifiers.declaration,ee.SemanticTokenModifiers.definition,ee.SemanticTokenModifiers.readonly,ee.SemanticTokenModifiers.static,ee.SemanticTokenModifiers.deprecated,ee.SemanticTokenModifiers.abstract,ee.SemanticTokenModifiers.async,ee.SemanticTokenModifiers.modification,ee.SemanticTokenModifiers.documentation,ee.SemanticTokenModifiers.defaultLibrary],t.formats=[ee.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,wo(wo(e,&quot;workspace&quot;),&quot;semanticTokens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(ee.SemanticTokensRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=bD.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&amp;&amp;typeof e.full!=&quot;boolean&quot;&amp;&amp;e.full.delta===!0,o=new Do.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(R,E)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let I=this._client,F=I.clientOptions.middleware,A=(N,L)=&gt;{let j={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(N)};return I.sendRequest(ee.SemanticTokensRequest.type,j,L).then(X=&gt;I.protocol2CodeConverter.asSemanticTokens(X),X=&gt;I.handleFailedRequest(ee.SemanticTokensRequest.type,L,X,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(R,E,A):A(R,E)},provideDocumentSemanticTokensEdits:i?(R,E,I)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),previousResultId:j};return F.sendRequest(ee.SemanticTokensDeltaRequest.type,Re,X).then(ne=&gt;ee.SemanticTokens.is(ne)?F.protocol2CodeConverter.asSemanticTokens(ne):F.protocol2CodeConverter.asSemanticTokensEdits(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensDeltaRequest.type,X,ne,null))};return A.provideDocumentSemanticTokensEdits?A.provideDocumentSemanticTokensEdits(R,E,I,N):N(R,E,I)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(R,E,I)=&gt;{let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),range:F.code2ProtocolConverter.asRange(j)};return F.sendRequest(ee.SemanticTokensRangeRequest.type,Re,X).then(ne=&gt;F.protocol2CodeConverter.asSemanticTokens(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensRangeRequest.type,X,ne,null))};return A.provideDocumentRangeSemanticTokens?A.provideDocumentRangeSemanticTokens(R,E,I,N):N(R,E,I)}}:void 0,h=[],p=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend),C=So.$DocumentSelector.asTextDocumentFilters(t);return s!==void 0&amp;&amp;h.push(Do.languages.registerDocumentSemanticTokensProvider(C,s,p)),u!==void 0&amp;&amp;h.push(Do.languages.registerDocumentRangeSemanticTokensProvider(C,u,p)),[new Do.Disposable(()=&gt;h.forEach(R=&gt;R.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}};bo.SemanticTokensFeature=Qc});var Uh=q(St=&gt;{&quot;use strict&quot;;Object.defineProperty(St,&quot;__esModule&quot;,{value:!0});St.WillDeleteFilesFeature=St.WillRenameFilesFeature=St.WillCreateFilesFeature=St.DidDeleteFilesFeature=St.DidRenameFilesFeature=St.DidCreateFilesFeature=void 0;var Wt=require(&quot;vscode&quot;),_D=Mi(),wn=Ce(),TD=Or();function Wh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}function PD(n,e){return n[e]}function Kh(n,e,t){n[e]=t}var bn=class{constructor(e,t,r,i,o){this._filters=new Map,this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Wh(Wh(e,&quot;workspace&quot;),&quot;fileOperations&quot;);Kh(t,&quot;dynamicRegistration&quot;,!0),Kh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?PD(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:TD.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=&gt;{let i=new _D.Minimatch(r.pattern.glob,bn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}getFileType(e){return bn.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=&gt;{let s=t(o),a=s.fsPath.replace(/\\/g,&quot;/&quot;);for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&amp;&amp;h.scheme!==s.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let g=await this.getFileType(s);if(g===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(g===Wt.FileType.File&amp;&amp;h.kind===wn.FileOperationPatternKind.file||g===Wt.FileType.Directory&amp;&amp;h.kind===wn.FileOperationPatternKind.folder)return!0}else if(h.kind===wn.FileOperationPatternKind.folder&amp;&amp;await bn.getFileType(s)===Wt.FileType.Directory&amp;&amp;h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=&gt;r[s]);return{...e,files:i}}static async getFileType(e){try{return(await Wt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&amp;&amp;e.ignoreCase===!0)return{nocase:!0}}},_o=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=&gt;this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},To=class extends _o{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await bn.getFileType(e);return r&amp;&amp;this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&amp;&amp;this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}},Yc=class extends _o{constructor(e){super(e,Wt.workspace.onDidCreateFiles,wn.DidCreateFilesNotification.type,&quot;didCreate&quot;,&quot;didCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};St.DidCreateFilesFeature=Yc;var Zc=class extends To{constructor(e){super(e,Wt.workspace.onDidRenameFiles,wn.DidRenameFilesNotification.type,&quot;didRename&quot;,&quot;didRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};St.DidRenameFilesFeature=Zc;var eu=class extends To{constructor(e){super(e,Wt.workspace.onDidDeleteFiles,wn.DidDeleteFilesNotification.type,&quot;didDelete&quot;,&quot;didDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};St.DidDeleteFilesFeature=eu;var Ci=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=&gt;this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},tu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillCreateFiles,wn.WillCreateFilesRequest.type,&quot;willCreate&quot;,&quot;willCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};St.WillCreateFilesFeature=tu;var nu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillRenameFiles,wn.WillRenameFilesRequest.type,&quot;willRename&quot;,&quot;willRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};St.WillRenameFilesFeature=nu;var ru=class extends Ci{constructor(e){super(e,Wt.workspace.onWillDeleteFiles,wn.WillDeleteFilesRequest.type,&quot;willDelete&quot;,&quot;willDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};St.WillDeleteFilesFeature=ru});var Vh=q(Po=&gt;{&quot;use strict&quot;;Object.defineProperty(Po,&quot;__esModule&quot;,{value:!0});Po.LinkedEditingFeature=void 0;var qD=require(&quot;vscode&quot;),iu=Ce(),ou=it();function zh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var su=class extends ou.TextDocumentFeature{constructor(e){super(e,iu.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=zh(zh(e,&quot;textDocument&quot;),&quot;linkedEditingRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=&gt;{if(ou.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(iu.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asLinkedEditingRanges,R=&gt;a.handleFailedRequest(iu.LinkedEditingRangeRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,o,s,u):u(i,o,s)}};return[qD.languages.registerLinkedEditingRangeProvider(ou.$DocumentSelector.asTextDocumentFilters(t),r),r]}};Po.LinkedEditingFeature=su});var Bh=q(ur=&gt;{&quot;use strict&quot;;Object.defineProperty(ur,&quot;__esModule&quot;,{value:!0});ur.DiagnosticFeature=ur.vsdiag=void 0;var He=require(&quot;vscode&quot;),$e=Ce(),ED=Or(),Fr=it();function Gh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var un;(function(n){let e;(function(t){t.full=&quot;full&quot;,t.unChanged=&quot;unChanged&quot;})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(un=ur.vsdiag||(ur.vsdiag={}));var ft;(function(n){n.active=&quot;open&quot;,n.reschedule=&quot;reschedule&quot;,n.outDated=&quot;drop&quot;})(ft||(ft={}));var au=class{constructor(){this.open=new Set;let e=()=&gt;{if(this.open.clear(),He.window.tabs!==void 0)for(let t of He.window.tabs)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString());else if(He.window.openEditors!==void 0)for(let t of He.window.openEditors)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString())};e(),He.window.onDidChangeTabs!==void 0?this.disposable=He.window.onDidChangeTabs(e):He.window.onDidChangeOpenEditors!==void 0?this.disposable=He.window.onDidChangeOpenEditors(e):this.disposable={dispose:()=&gt;{}}}dispose(){this.disposable.dispose()}isActive(e){return He.window.activeTextEditor?.document===e}isVisible(e){return this.open.has(e.uri.toString())}},Et;(function(n){n[n.document=1]=&quot;document&quot;,n[n.workspace=2]=&quot;workspace&quot;})(Et||(Et={}));var cu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===Et.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r]:[t.uri.toString(),t.uri,t.version],u=i.get(o);return u===void 0&amp;&amp;(u={document:s,pulledVersion:a,resultId:void 0},i.set(o,u)),u}update(e,t,r,i){let o=e===Et.document?this.documentPullStates:this.workspacePullStates,[s,a,u,h]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r,i]:[t.uri.toString(),t.uri,t.version,r],g=o.get(s);g===void 0?(g={document:a,pulledVersion:u,resultId:h},o.set(s,g)):(g.pulledVersion=u,g.resultId=h)}unTrack(e,t){(e===Et.document?this.documentPullStates:this.workspacePullStates).delete(t.uri.toString())}tracks(e,t){let r=typeof t==&quot;string&quot;?t:t.uri.toString();return(e===Et.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){return(e===Et.document?this.documentPullStates:this.workspacePullStates).get(t.uri.toString())?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&amp;&amp;(r=this.documentPullStates.get(t)),r.resultId!==void 0&amp;&amp;e.push({uri:t,value:r.resultId});return e}},uu=class{constructor(e,t,r){this.client=e,this.editorTracker=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new He.EventEmitter,this.provider=this.createProvider(),this.diagnostics=He.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new cu,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){this.pullAsync(e).then(()=&gt;{t&amp;&amp;t()},r=&gt;{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,r,!1)})}async pullAsync(e){let t=e.uri.toString(),r=e.version,i=this.openRequests.get(t),o=this.documentStates.track(Et.document,e);if(i===void 0){let s=new He.CancellationTokenSource;this.openRequests.set(t,{state:ft.active,version:r,textDocument:e,tokenSource:s});let a,u;try{a=await this.provider.provideDiagnostics(e,o.resultId,s.token)??{kind:un.DocumentDiagnosticReportKind.full,items:[]}}catch(h){if(h instanceof Fr.LSPCancellationError&amp;&amp;$e.Proposed.DiagnosticServerCancellationData.is(h.data)&amp;&amp;h.data.retriggerRequest===!1&amp;&amp;(u={state:ft.outDated,textDocument:e}),u===void 0&amp;&amp;h instanceof He.CancellationError)u={state:ft.reschedule,textDocument:e};else throw h}if(u=u??this.openRequests.get(t),u===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${t}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(t),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(Et.document,e);return}if(u.state===ft.outDated)return;a!==void 0&amp;&amp;(a.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;this.diagnostics.set(e.uri,a.items),o.pulledVersion=r,o.resultId=a.resultId),u.state===ft.reschedule&amp;&amp;this.pull(e)}else i.state===ft.active?(i.tokenSource.cancel(),this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})):i.state===ft.outDated&amp;&amp;this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})}cleanupPull(e){let t=e.uri.toString(),r=this.openRequests.get(t);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(t,{state:ft.reschedule,textDocument:e}):this.pull(e):(r!==void 0&amp;&amp;(r.state===ft.active&amp;&amp;r.tokenSource.cancel(),this.openRequests.set(t,{state:ft.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=&gt;{this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3)},e=&gt;{!(e instanceof Fr.LSPCancellationError)&amp;&amp;!$e.Proposed.DiagnosticServerCancellationData.is(e.data)&amp;&amp;(this.client.error(&quot;Workspace diagnostic pull failed.&quot;,e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter&lt;=5&amp;&amp;(this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&amp;&amp;(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new He.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=&gt;({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=&gt;{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;(this.documentStates.tracks(Et.document,r.uri.toString())||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(Et.workspace,r.uri.toString(),r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=&gt;{let o=(a,u,h)=&gt;{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a.uri)},previousResultId:u};return this.client.sendRequest($e.Proposed.DocumentDiagnosticRequest.type,g,h).then(p=&gt;p==null||this.isDisposed?{kind:un.DocumentDiagnosticReportKind.full,items:[]}:p.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,resultId:p.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(p.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,resultId:p.resultId},p=&gt;this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,h,p,{kind:un.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.clientOptions.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&amp;&amp;(e.provideWorkspaceDiagnostics=(t,r,i)=&gt;{let o=h=&gt;h.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:this.client.protocol2CodeConverter.asDiagnostics(h.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},s=h=&gt;{let g=[];for(let p of h)g.push({uri:this.client.code2ProtocolConverter.asUri(p.uri),value:p.value});return g},a=(h,g)=&gt;{let p=(0,ED.generateUuid)(),C=this.client.onProgress($e.Proposed.WorkspaceDiagnosticRequest.partialResult,p,E=&gt;{if(E==null){i(null);return}let I={items:[]};for(let F of E.items)I.items.push(o(F));i(I)}),R={identifier:this.options.identifier,previousResultIds:s(h),partialResultToken:p};return this.client.sendRequest($e.Proposed.WorkspaceDiagnosticRequest.type,R,g).then(E=&gt;{let I={items:[]};for(let F of E.items)I.items.push(o(F));return C.dispose(),i(I),{items:[]}},E=&gt;(C.dispose(),this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,g,E,{items:[]})))},u=this.client.clientOptions.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===ft.active&amp;&amp;t.tokenSource.cancel(),this.openRequests.set(e,{state:ft.outDated,textDocument:t.textDocument})}},lu=class{constructor(e){this.diagnosticRequestor=e,this.documents=new $e.LinkedMap}add(e){let t=e.uri.toString();this.documents.has(t)||(this.documents.set(e.uri.toString(),e,$e.Touch.Last),this.trigger())}remove(e){let t=e.uri.toString();this.documents.has(t)&amp;&amp;(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&amp;&amp;(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,$e.RAL)().timer.setInterval(()=&gt;{let e=this.documents.first;e!==void 0&amp;&amp;(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,$e.Touch.Last),e===this.endDocument&amp;&amp;this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},du=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=r.documentSelector,s=[],a=p=&gt;Fr.$DocumentSelector.matchForProvider(o,p)&amp;&amp;t.isVisible(p);this.diagnosticRequestor=new uu(e,t,r),this.backgroundScheduler=new lu(this.diagnosticRequestor);let u=p=&gt;{!a(p)||!r.interFileDependencies||this.activeTextDocument===p||this.backgroundScheduler.add(p)};this.activeTextDocument=He.window.activeTextEditor?.document,He.window.onDidChangeActiveTextEditor(p=&gt;{let C=this.activeTextDocument;this.activeTextDocument=p?.document,C!==void 0&amp;&amp;u(C),this.activeTextDocument!==void 0&amp;&amp;this.backgroundScheduler.remove(this.activeTextDocument)});let h=e.getFeature($e.DidOpenTextDocumentNotification.method);s.push(h.onNotificationSent(p=&gt;{let C=p.original;a(C)&amp;&amp;this.diagnosticRequestor.pull(C,()=&gt;{u(C)})}));for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p,()=&gt;{u(p)});if(i.onChange){let p=e.getFeature($e.DidChangeTextDocumentNotification.method);s.push(p.onNotificationSent(async C=&gt;{let R=C.original.document;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onType))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;C.original.contentChanges.length&gt;0&amp;&amp;this.diagnosticRequestor.pull(R,()=&gt;{this.backgroundScheduler.trigger()})}))}if(i.onSave){let p=e.getFeature($e.DidSaveTextDocumentNotification.method);s.push(p.onNotificationSent(C=&gt;{let R=C.original;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onSave))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;this.diagnosticRequestor.pull(C.original,()=&gt;{this.backgroundScheduler.trigger()})}))}let g=e.getFeature($e.DidCloseTextDocumentNotification.method);s.push(g.onNotificationSent(p=&gt;{let C=p.original;this.diagnosticRequestor.cleanupPull(C),this.backgroundScheduler.remove(C)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=&gt;{for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p)}),r.workspaceDiagnostics===!0&amp;&amp;r.identifier!==&quot;da348dc5-c30a-4515-9d98-31ff3be38d14&quot;&amp;&amp;this.diagnosticRequestor.pullWorkspace(),this.disposable=He.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},fu=class extends Fr.TextDocumentFeature{constructor(e){super(e,$e.Proposed.DocumentDiagnosticRequest.type),this.editorTracker=new au}fillClientCapabilities(e){let t=Gh(Gh(e,&quot;textDocument&quot;),&quot;diagnostic&quot;);t.dynamicRegistration=!0,t.relatedDocumentSupport=!1}initialize(e,t){this._client.onRequest($e.Proposed.DiagnosticRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let t=new du(this._client,this.editorTracker,e);return[t.disposable,t]}};ur.DiagnosticFeature=fu});var Jh=q(qo=&gt;{&quot;use strict&quot;;Object.defineProperty(qo,&quot;__esModule&quot;,{value:!0});qo.TypeHierarchyFeature=void 0;var kD=require(&quot;vscode&quot;),lr=Ce(),hu=it();function Xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var pu=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareTypeHierarchy(e,t,r){if(hu.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,e))return;let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asTypeHierarchyItems(p),p=&gt;i.handleFailedRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,h,p,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},gu=class extends hu.TextDocumentFeature{constructor(e){super(e,lr.Proposed.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=Xh(Xh(e,&quot;textDocument&quot;),&quot;typeHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new pu(t,e);return[kD.languages.registerTypeHierarchyProvider(hu.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};qo.TypeHierarchyFeature=gu});var Yh=q(Oo=&gt;{&quot;use strict&quot;;Object.defineProperty(Oo,&quot;__esModule&quot;,{value:!0});Oo.InlineValueFeature=void 0;var Qh=require(&quot;vscode&quot;),Eo=Ce(),mu=it();function ko(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var vu=class extends mu.TextDocumentFeature{constructor(e){super(e,Eo.Proposed.InlineValuesRequest.type)}fillClientCapabilities(e){ko(ko(e,&quot;textDocument&quot;),&quot;inlineValues&quot;).dynamicRegistration=!0,ko(ko(e,&quot;workspace&quot;),&quot;codeLens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(Eo.Proposed.InlineValuesRefreshRequest.type,async()=&gt;{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValuesProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Qh.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,u)=&gt;{if(mu.$DocumentSelector.skipCellTextDocument(t,o))return;let h=this._client,g=(C,R,E,I)=&gt;{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(C),viewPort:h.code2ProtocolConverter.asRange(R),context:h.code2ProtocolConverter.asInlineValuesContext(E)};return h.sendRequest(Eo.Proposed.InlineValuesRequest.type,F,I).then(A=&gt;h.protocol2CodeConverter.asInlineValues(A),A=&gt;h.handleFailedRequest(Eo.Proposed.InlineValuesRequest.type,I,A,null))},p=h.clientOptions.middleware;return p.provideInlineValues?p.provideInlineValues(o,s,a,u,g):g(o,s,a,u)}};return[Qh.languages.registerInlineValuesProvider(mu.$DocumentSelector.asTextDocumentFilters(t),i),{provider:i,onDidChangeInlineValues:r}]}};Oo.InlineValueFeature=vu});var tp=q(Lo=&gt;{&quot;use strict&quot;;Object.defineProperty(Lo,&quot;__esModule&quot;,{value:!0});Lo.NotebookDocumentSyncFeature=void 0;var ht=require(&quot;vscode&quot;),OD=Mi(),Kt=Ce(),ln=Ce(),yu=it(),xo=Or(),Zh=yn();function ep(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kt;(function(n){let e;(function(t){function r(p,C){return{version:p.version,uri:C.asUri(p.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(p,C,R){let E=Kt.Proposed.NotebookDocument.create(R.asUri(p.uri),p.notebookType,p.version,o(C,R));return Object.keys(p.metadata).length&gt;0&amp;&amp;(E.metadata=s(p.metadata)),E}t.asNotebookDocument=i;function o(p,C){return p.map(R=&gt;a(R,C))}t.asNotebookCells=o;function s(p){return h(new Set,p)}t.asMetadata=s;function a(p,C){let R=Kt.Proposed.NotebookCell.create(u(p.kind),C.asUri(p.document.uri));return Object.keys(p.metadata).length&gt;0&amp;&amp;(R.metadata=s(p.metadata)),p.executionSummary!==void 0&amp;&amp;Zh.number(p.executionSummary.executionOrder)&amp;&amp;Zh.boolean(p.executionSummary.success)&amp;&amp;(R.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),R}t.asNotebookCell=a;function u(p){switch(p){case ht.NotebookCellKind.Markup:return Kt.Proposed.NotebookCellKind.Markup;case ht.NotebookCellKind.Code:return Kt.Proposed.NotebookCellKind.Code}}function h(p,C){if(p.has(C))throw new Error(&quot;Can't deep copy cyclic structures.&quot;);if(Array.isArray(C)){let R=[];for(let E of C)if(E!==null&amp;&amp;typeof E==&quot;object&quot;||Array.isArray(E))R.push(h(p,E));else{if(E instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);R.push(E)}return R}else{let R=Object.keys(C),E=Object.create(null);for(let I of R){let F=C[I];if(F!==null&amp;&amp;typeof F==&quot;object&quot;||Array.isArray(F))E[I]=h(p,F);else{if(F instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);E[I]=F}}return E}}function g(p,C){let R=C.asChangeTextDocumentParams(p);return{document:R.textDocument,changes:R.contentChanges}}t.asTextContentChange=g})(e=n.c2p||(n.c2p={}))})(kt||(kt={}));var Cu;(function(n){function e(t,r,i){let o=t.length,s=r.length,a=0;for(;a&lt;s&amp;&amp;a&lt;o&amp;&amp;Kt.Proposed.NotebookCell.equals(t[a],r[a],i);)a++;if(a&lt;s&amp;&amp;a&lt;o){let u=o-1,h=s-1;for(;u&gt;=0&amp;&amp;h&gt;=0&amp;&amp;Kt.Proposed.NotebookCell.equals(t[u],r[h],i);)u--,h--;let g=u+1-a,p=a===h+1?void 0:r.slice(a,h+1);return p!==void 0?{start:a,deleteCount:g,cells:p}:{start:a,deleteCount:g}}else return a&lt;s?{start:a,deleteCount:0,cells:r.slice(a)}:a&lt;o?{start:a,deleteCount:o-a}:void 0}n.computeDiff=e})(Cu||(Cu={}));var No;(function(n){function e(t,r){if(t.notebookType!==void 0&amp;&amp;r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&amp;&amp;i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new OD.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(No||(No={}));var Io;(function(n){function e(t,r,i){if(i===&quot;cellContent&quot;&amp;&amp;!yu.$DocumentSelector.matchForDocumentSync(t.cellDocumentSelector,r.document)||i===&quot;notebook&quot;&amp;&amp;!yu.$DocumentSelector.matchForProvider(t.cellDocumentSelector,r.document))return!1;let o=r.notebook;for(let s of t.notebookDocumentSelector)if(s.notebookDocumentFilter!==void 0&amp;&amp;No.matchNotebook(s.notebookDocumentFilter,o))return!0;return!1}n.match=e})(Io||(Io={}));var Fo;(function(n){function e(t,r){return{cells:t,uris:new Set(r.map(i=&gt;i.document.uri.toString()))}}n.create=e})(Fo||(Fo={}));var Ri=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.cellExecutionState=new Map,this.notebookDidOpen=new Set,this.disposables=[],ht.workspace.onDidOpenNotebookDocument(r=&gt;{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ht.notebooks.onDidChangeNotebookDocumentMetadata(r=&gt;this.notebookDocumentMetadataChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCells(r=&gt;this.cellStructureChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeCellMetadata(r=&gt;this.cellMetaDataChanged(r.cell.notebook,r.cell),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCellExecutionState(r=&gt;this.cellExecutionStateChanged(r),void 0,this.disposables),this.options.save===!0&amp;&amp;ht.notebooks.onDidSaveNotebookDocument(r=&gt;this.didSave(r),void 0,this.disposables),ht.workspace.onDidCloseNotebookDocument(r=&gt;{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}get mode(){return&quot;notebook&quot;}handles(e){return Io.match(this.options,e,this.mode)}didOpenNotebookCellDocument(e,t){if(!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.getMatchingCells(e,[t]),o=i!==void 0&amp;&amp;i[0]===t;if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(o&amp;&amp;s)return;this.cellStructureChanged(e,r)}else{if(!o)return;this.cellStructureChanged(e,r)}}didChangeCellTextDocument(e,t){!yu.$DocumentSelector.matchForProvider(this.options.cellDocumentSelector,t.document)||this.doSendChange(e,{cells:{textContent:[kt.c2p.asTextContentChange(t,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=null,r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)this.cellStructureChanged(e,r);else{let i=t??this.getMatchingCells(e);if(i===void 0)return;this.doSendOpen(e,i,o=&gt;{this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o.cells,i))}).catch(()=&gt;{})}}notebookDocumentMetadataChanged(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendChange(e,{metadata:kt.c2p.asMetadata(e.metadata)}).catch(()=&gt;{})}cellStructureChanged(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0){let r=this.getMatchingCells(e);if(r===void 0)return;this.didOpen(e,r,t)}else{let r=this.getMatchingCells(e);if(r===void 0){this.didClose(e,t);return}let i=t.cells,o=kt.c2p.asNotebookCells(r,this.client.code2ProtocolConverter),s=Cu.computeDiff(t.cells,o,!1);if(s===void 0)return;let a=s.deleteCount===0?new Set:new Set(i.slice(s.start,s.start+s.deleteCount).map(p=&gt;p.document)),u=s.cells===void 0?new Set:new Set(s.cells.map(p=&gt;p.document));for(let p of Array.from(a.values()))u.has(p)&amp;&amp;(a.delete(p),u.delete(p));let h=[],g=[];if(a.size&gt;0||u.size&gt;0){let p=new Map(r.map(C=&gt;[this.client.code2ProtocolConverter.asUri(C.document.uri),C]));for(let C of u.values()){let R=p.get(C);R!==void 0&amp;&amp;h.push(this.client.code2ProtocolConverter.asTextDocumentItem(R.document))}for(let C of a.values())g.push({uri:C})}this.doSendChange(e,{cells:{structure:{array:s,didClose:g.length&gt;0?g:void 0,didOpen:h.length&gt;0?h:void 0}}}).catch(()=&gt;{}),this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o,r))}}cellMetaDataChanged(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0||!r.uris.has(t.document.uri.toString()))return;let i=kt.c2p.asNotebookCell(t,this.client.code2ProtocolConverter);this.doSendChange(e,{cells:{data:[i]}}).catch(()=&gt;{})}cellExecutionStateChanged(e){if(e.state===ht.NotebookCellExecutionState.Pending)return;let t=e.cell.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0)return;let i=e.cell.document.uri.toString();!r.uris.has(i)||(e.state===ht.NotebookCellExecutionState.Executing&amp;&amp;this.cellExecutionState.set(e.cell.document.uri.toString(),e.state),e.state===ht.NotebookCellExecutionState.Idle&amp;&amp;this.cellExecutionState.has(i)&amp;&amp;(this.cellExecutionState.delete(i),this.doSendChange(t,{cells:{data:[kt.c2p.asNotebookCell(e.cell,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})))}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendSave(e).catch(()=&gt;{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=&gt;t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=&gt;{}),this.notebookSyncInfo.delete(e.uri.toString())}getMatchingCells(e,t=e.getCells()){if(this.options.notebookDocumentSelector!==void 0){for(let r of this.options.notebookDocumentSelector)if(r.notebookDocumentFilter===void 0){if(r.cellSelector===void 0)return;let i=this.filterCells(t,r.cellSelector);return i.length===0?void 0:i}else if(No.matchNotebook(r.notebookDocumentFilter,e))return r.cellSelector===void 0?t:this.filterCells(t,r.cellSelector)}}filterCells(e,t){return e.filter(r=&gt;{let i=r.document.languageId;return t.some(o=&gt;i===o.language)})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t,r){let i=(s,a)=&gt;{let u=kt.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),h=a.map(p=&gt;this.client.code2ProtocolConverter.asTextDocumentItem(p.document)),g=this.client.sendNotification(Kt.Proposed.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:h}).catch(p=&gt;{throw this.client.error(&quot;Sending DidOpenNotebookDocumentNotification failed&quot;,p),p});return r&amp;&amp;r(u),g},o=this.client.clientOptions.middleware?.notebooks;return o?.didOpen!==void 0?o.didOpen(e,t,i):i(e,t)}async sendDidChangeNotebookDocument(e,t){let r=Object.create(null);if(t.metadata&amp;&amp;(r.metadata=kt.c2p.asMetadata(e.metadata)),t.cells!==void 0){let i=Object.create(null),o=t.cells;o.structure&amp;&amp;(i.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:o.structure.array.cells!==void 0?o.structure.array.cells.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter)):void 0},didOpen:o.structure.didOpen!==void 0?o.structure.didOpen.map(s=&gt;this.client.code2ProtocolConverter.asOpenTextDocumentParams(s.document).textDocument):void 0,didClose:o.structure.didClose!==void 0?o.structure.didClose.map(s=&gt;this.client.code2ProtocolConverter.asCloseTextDocumentParams(s.document).textDocument):void 0}),o.data!==void 0&amp;&amp;(i.data=o.data.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter))),o.textContent!==void 0&amp;&amp;(i.textContent=o.textContent.map(s=&gt;kt.c2p.asTextContentChange(s,this.client.code2ProtocolConverter))),Object.keys(i).length&gt;0&amp;&amp;(r.cells=i)}if(Object.keys(r).length&gt;0)return this.doSendChange(e,r)}async doSendChange(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidChangeNotebookDocumentNotification.type,{notebookDocument:kt.c2p.asVersionedNotebookDocumentIdentifier(o,this.client.code2ProtocolConverter),change:s}).catch(a=&gt;{this.client.error(&quot;Sending DidChangeNotebookDocumentNotification failed&quot;,a)}),i=this.client.clientOptions.middleware?.notebooks;return i?.didChange!==void 0?i?.didChange(e,t,r):r(e,t)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=i=&gt;this.client.sendNotification(Kt.Proposed.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}}).catch(o=&gt;{throw this.client.error(&quot;Sending DidSaveNotebookDocumentNotification failed&quot;,o),o}),r=this.client.clientOptions.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidSelectNotebookController(e,t,r){let i=(s,a,u)=&gt;this.client.sendNotification(Kt.Proposed.DidSelectNotebookControllerNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},controller:a,selected:u}).catch(h=&gt;{throw this.client.error(&quot;Sending DidSelectNotebookControllerNotification failed&quot;,h),h}),o=this.client.clientOptions.middleware?.notebooks;return o?.didSelectNotebookController!==void 0?o.didSelectNotebookController(e,t,r,i):i(e,t,r)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=&gt;this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))}).catch(a=&gt;{throw this.client.error(&quot;Sending DidCloseNotebookDocumentNotification failed&quot;,a),a}),i=this.client.clientOptions.middleware?.notebooks;return i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}},Ru=class{constructor(e,t){if(this.client=e,this.options=t,t.cellDocumentSelector.length&gt;0){let r=xo.generateUuid();this.client.getFeature(ln.DidOpenTextDocumentNotification.method).register({id:r,registerOptions:{documentSelector:t.cellDocumentSelector}});let i=xo.generateUuid();this.client.getFeature(ln.DidChangeTextDocumentNotification.method).register({id:i,registerOptions:{documentSelector:t.cellDocumentSelector,syncKind:ln.TextDocumentSyncKind.Incremental}});let o=xo.generateUuid();this.client.getFeature(ln.DidCloseTextDocumentNotification.method).register({id:o,registerOptions:{documentSelector:t.cellDocumentSelector}}),this.registrations={open:r,change:i,close:o}}}get mode(){return&quot;cellContent&quot;}handles(e){return Io.match(this.options,e,this.mode)}dispose(){this.registrations!==void 0&amp;&amp;(this.client.getFeature(ln.DidOpenTextDocumentNotification.method).unregister(this.registrations.open),this.client.getFeature(ln.DidChangeTextDocumentNotification.method).unregister(this.registrations.change),this.client.getFeature(ln.DidCloseTextDocumentNotification.method).unregister(this.registrations.close))}async sendDidOpenTextDocument(e){let t=this.client.getFeature(ln.DidOpenTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No open provider found for notebook cell document ${e.uri.toString()}`))}async sendDidChangeTextDocument(e){let t=this.client.getFeature(ln.DidChangeTextDocumentNotification.method).getProvider(e.document);return t!==void 0?t.send(e):Promise.reject(new Error(`No change provider found for notebook cell document ${e.document.uri.toString()}`))}async sendDidCloseTextDocument(e){let t=this.client.getFeature(ln.DidCloseTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No close provider found for notebook cell document ${e.uri.toString()}`))}},dr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Kt.Proposed.NotebookDocumentSyncRegistrationType.type,ht.workspace.onDidOpenTextDocument(t=&gt;{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.getNotebookDocument(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didOpenNotebookCellDocument(r,i)}),ht.workspace.onDidChangeTextDocument(t=&gt;{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==dr.CellScheme)return;let[i]=this.getNotebookDocument(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didChangeCellTextDocument(i,t)})}fillClientCapabilities(e){let t=ep(ep(e,&quot;notebookDocument&quot;),&quot;synchronization&quot;);t.dynamicRegistration=!0}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??xo.generateUuid();this.register({id:r,registerOptions:t})}register(e){if(e.registerOptions.mode===&quot;cellContent&quot;){let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions,!0)}),r=new Ru(this.client,t);this.registrations.set(e.id,r)}else{let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions)}),r=new Ri(this.client,t);this.registrations.set(e.id,r)}}unregister(e){let t=this.registrations.get(e);t&amp;&amp;t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}getProvider(e){for(let t of this.registrations.values())if(t.handles(e))return t}getNotebookDocument(e){let t=e.uri.toString();for(let r of ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}getNotebookCellTextDocumentFilter(e,t){let r=[];for(let i of e.notebookDocumentSelector){let o;if(i.notebookDocumentFilter!==void 0&amp;&amp;(o=t===!0?{notebookDocument:Object.assign({},i.notebookDocumentFilter,{sync:!0})}:{notebookDocument:Object.assign({},i.notebookDocumentFilter)}),i.cellSelector!==void 0){for(let s of i.cellSelector)o===void 0?r.push(t===!0?{cellLanguage:s.language,sync:!0}:{cellLanguage:s.language}):r.push(Object.assign({},o,{cellLanguage:s.language}));o=void 0}else o!==void 0&amp;&amp;r.push(o)}return r}};Lo.NotebookDocumentSyncFeature=dr;dr.CellScheme=&quot;vscode-notebook-cell&quot;});var Su=q(fr=&gt;{&quot;use strict&quot;;Object.defineProperty(fr,&quot;__esModule&quot;,{value:!0});fr.ProposedFeatures=fr.CommonLanguageClient=void 0;var xD=it(),ND=Ph(),ID=_a(),FD=Eh(),LD=kh(),AD=Oh(),MD=Nh(),jD=Fh(),$D=Ah(),HD=Mh(),WD=$h(),KD=Hh(),Lr=Uh(),UD=Vh(),Du=class extends xD.BaseLanguageClient{constructor(e,t,r){super(e,t,r)}registerProposedFeatures(){this.registerFeatures(sp.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new ID.ConfigurationFeature(this)),this.registerFeature(new LD.TypeDefinitionFeature(this)),this.registerFeature(new FD.ImplementationFeature(this)),this.registerFeature(new ND.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&amp;&amp;this.registerFeature(new AD.WorkspaceFoldersFeature(this)),this.registerFeature(new MD.FoldingRangeFeature(this)),this.registerFeature(new jD.DeclarationFeature(this)),this.registerFeature(new $D.SelectionRangeFeature(this)),this.registerFeature(new HD.ProgressFeature(this)),this.registerFeature(new WD.CallHierarchyFeature(this)),this.registerFeature(new KD.SemanticTokensFeature(this)),this.registerFeature(new UD.LinkedEditingFeature(this)),this.registerFeature(new Lr.DidCreateFilesFeature(this)),this.registerFeature(new Lr.DidRenameFilesFeature(this)),this.registerFeature(new Lr.DidDeleteFilesFeature(this)),this.registerFeature(new Lr.WillCreateFilesFeature(this)),this.registerFeature(new Lr.WillRenameFilesFeature(this)),this.registerFeature(new Lr.WillDeleteFilesFeature(this))}};fr.CommonLanguageClient=Du;var np=Bh(),rp=Jh(),ip=Yh(),op=tp(),sp;(function(n){function e(s){return[new np.DiagnosticFeature(s),new rp.TypeHierarchyFeature(s),new ip.InlineValueFeature(s),new op.NotebookDocumentSyncFeature(s)]}n.createAll=e;function t(s){return new np.DiagnosticFeature(s)}n.createDiagnosticFeature=t;function r(s){return new rp.TypeHierarchyFeature(s)}n.createTypeHierarchyFeature=r;function i(s){return new ip.InlineValueFeature(s)}n.createInlineValueFeature=i;function o(s){return new op.NotebookDocumentSyncFeature(s)}n.createNotebookDocumentSyncFeature=o})(sp=fr.ProposedFeatures||(fr.ProposedFeatures={}))});var cp=q(Ao=&gt;{&quot;use strict&quot;;Object.defineProperty(Ao,&quot;__esModule&quot;,{value:!0});Ao.terminate=void 0;var ap=require(&quot;child_process&quot;),zD=require(&quot;path&quot;),VD=process.platform===&quot;win32&quot;,GD=process.platform===&quot;darwin&quot;,BD=process.platform===&quot;linux&quot;;function XD(n,e){if(VD)try{let i={stdio:[&quot;pipe&quot;,&quot;pipe&quot;,&quot;ignore&quot;]};return e&amp;&amp;(i.cwd=e),ap.execFileSync(&quot;taskkill&quot;,[&quot;/T&quot;,&quot;/F&quot;,&quot;/PID&quot;,n.pid.toString()],i),!0}catch{return!1}else if(BD||GD)try{var t=(0,zD.join)(__dirname,&quot;terminateProcess.sh&quot;),r=ap.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill(&quot;SIGKILL&quot;),!0}Ao.terminate=XD});var wu=q((Sb,up)=&gt;{&quot;use strict&quot;;up.exports=Ce()});var lp=q(_n=&gt;{&quot;use strict&quot;;var JD=_n&amp;&amp;_n.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),bu=_n&amp;&amp;_n.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;JD(e,n,t)};Object.defineProperty(_n,&quot;__esModule&quot;,{value:!0});bu(Ce(),_n);bu(it(),_n);bu(Su(),_n)});var pp=q(vt=&gt;{&quot;use strict&quot;;var QD=vt&amp;&amp;vt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),hp=vt&amp;&amp;vt.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;QD(e,n,t)};Object.defineProperty(vt,&quot;__esModule&quot;,{value:!0});vt.SettingMonitor=vt.LanguageClient=vt.TransportKind=void 0;var Tn=require(&quot;child_process&quot;),_u=require(&quot;fs&quot;),Tu=require(&quot;path&quot;),dp=Ed(),jn=require(&quot;vscode&quot;),Ee=yn(),YD=Su(),ZD=it(),eS=cp(),xe=wu();hp(wu(),vt);hp(lp(),vt);var fp=&quot;^1.63.0&quot;,Le;(function(n){n[n.stdio=0]=&quot;stdio&quot;,n[n.ipc=1]=&quot;ipc&quot;,n[n.pipe=2]=&quot;pipe&quot;,n[n.socket=3]=&quot;socket&quot;})(Le=vt.TransportKind||(vt.TransportKind={}));var Mn;(function(n){function e(t){let r=t;return r&amp;&amp;r.kind===Le.socket&amp;&amp;Ee.number(r.port)}n.isSocket=e})(Mn||(Mn={}));var Pu;(function(n){function e(t){return Ee.string(t.command)}n.is=e})(Pu||(Pu={}));var qu;(function(n){function e(t){return Ee.string(t.module)}n.is=e})(qu||(qu={}));var Eu;(function(n){function e(t){let r=t;return r&amp;&amp;r.writer!==void 0&amp;&amp;r.reader!==void 0}n.is=e})(Eu||(Eu={}));var ku;(function(n){function e(t){let r=t;return r&amp;&amp;r.process!==void 0&amp;&amp;typeof r.detached==&quot;boolean&quot;}n.is=e})(ku||(ku={}));var Ou=class extends YD.CommonLanguageClient{constructor(e,t,r,i,o){let s,a,u,h,g;Ee.string(t)?(s=e,a=t,u=r,h=i,g=!!o):(s=e.toLowerCase(),a=e,u=t,h=r,g=i),g===void 0&amp;&amp;(g=!1),super(s,a,h),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(p){throw Ee.string(p.message)&amp;&amp;this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=dp.parse(jn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jn.version}`);if(e.prerelease&amp;&amp;e.prerelease.length&gt;0&amp;&amp;(e.prerelease=[]),!dp.satisfies(e,fp))throw new Error(`The language client requires VS Code version ${fp} but received version ${jn.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=&gt;setTimeout(e,1e3)),this.start()):this.start()}stop(e=2e3){return super.stop(e).finally(()=&gt;{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&amp;&amp;this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=&gt;{try{process.kill(e.pid,0),(0,eS.terminate)(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&amp;&amp;(e.processId=process.pid)}createMessageTransports(e){function t(g,p){if(!g&amp;&amp;!p)return;let C=Object.create(null);return Object.keys(process.env).forEach(R=&gt;C[R]=process.env[R]),p&amp;&amp;(C.ELECTRON_RUN_AS_NODE=&quot;1&quot;,C.ELECTRON_NO_ASAR=&quot;1&quot;),g&amp;&amp;Object.keys(g).forEach(R=&gt;C[R]=g[R]),C}let r=[&quot;--debug=&quot;,&quot;--debug-brk=&quot;,&quot;--inspect=&quot;,&quot;--inspect-brk=&quot;],i=[&quot;--debug&quot;,&quot;--debug-brk&quot;,&quot;--inspect&quot;,&quot;--inspect-brk&quot;];function o(){let g=process.execArgv;return g?g.some(p=&gt;r.some(C=&gt;p.startsWith(C))||i.some(C=&gt;p===C)):!1}function s(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error(&quot;Process created without stdio streams&quot;)}let a=this._serverOptions;if(Ee.func(a))return a().then(g=&gt;{if(ZD.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Eu.is(g))return this._isDetached=!!g.detached,{reader:new xe.StreamMessageReader(g.reader),writer:new xe.StreamMessageWriter(g.writer)};{let p;return ku.is(g)?(p=g.process,this._isDetached=g.detached):(p=g,this._isDetached=!1),p.stderr.on(&quot;data&quot;,C=&gt;this.outputChannel.append(Ee.string(C)?C:C.toString(e))),{reader:new xe.StreamMessageReader(p.stdout),writer:new xe.StreamMessageWriter(p.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||o()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(g=&gt;{if(qu.is(u)&amp;&amp;u.module){let p=u,C=p.transport||Le.stdio;if(p.runtime){let R=[],E=p.options??Object.create(null);E.execArgv&amp;&amp;E.execArgv.forEach(N=&gt;R.push(N)),R.push(p.module),p.args&amp;&amp;p.args.forEach(N=&gt;R.push(N));let I=Object.create(null);I.cwd=g,I.env=t(E.env,!1);let F=this._getRuntimePath(p.runtime,g),A;if(C===Le.ipc?(I.stdio=[null,null,null,&quot;ipc&quot;],R.push(&quot;--node-ipc&quot;)):C===Le.stdio?R.push(&quot;--stdio&quot;):C===Le.pipe?(A=(0,xe.generateRandomPipeName)(),R.push(`--pipe=${A}`)):Mn.isSocket(C)&amp;&amp;R.push(`--socket=${C.port}`),R.push(`--clientProcessId=${process.pid.toString()}`),C===Le.ipc||C===Le.stdio){let N=Tn.spawn(F,R,I);return!N||!N.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(N),writer:new xe.IPCMessageWriter(N)})):Promise.resolve({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)}))}else{if(C===Le.pipe)return(0,xe.createClientPipeTransport)(A).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))});if(Mn.isSocket(C))return(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))})}}else{let R;return new Promise((E,I)=&gt;{let F=(p.args&amp;&amp;p.args.slice())??[];C===Le.ipc?F.push(&quot;--node-ipc&quot;):C===Le.stdio?F.push(&quot;--stdio&quot;):C===Le.pipe?(R=(0,xe.generateRandomPipeName)(),F.push(`--pipe=${R}`)):Mn.isSocket(C)&amp;&amp;F.push(`--socket=${C.port}`),F.push(`--clientProcessId=${process.pid.toString()}`);let A=p.options??Object.create(null);if(A.env=t(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=g,A.silent=!0,C===Le.ipc||C===Le.stdio){let N=Tn.fork(p.module,F||[],A);s(N),this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),E({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):E({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)})}else C===Le.pipe?(0,xe.createClientPipeTransport)(R).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I):Mn.isSocket(C)&amp;&amp;(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I)})}}else if(Pu.is(u)&amp;&amp;u.command){let p=u,C=u.args!==void 0?u.args.slice(0):[],R,E=u.transport;if(E===Le.stdio)C.push(&quot;--stdio&quot;);else if(E===Le.pipe)R=(0,xe.generateRandomPipeName)(),C.push(`--pipe=${R}`);else if(Mn.isSocket(E))C.push(`--socket=${E.port}`);else if(E===Le.ipc)throw new Error(&quot;Transport kind ipc is not support for command executable&quot;);let I=Object.assign({},p.options);if(I.cwd=I.cwd||g,E===void 0||E===Le.stdio){let F=Tn.spawn(p.command,C,I);return!F||!F.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(F.stderr.on(&quot;data&quot;,A=&gt;this.outputChannel.append(Ee.string(A)?A:A.toString(e))),this._serverProcess=F,this._isDetached=!!I.detached,Promise.resolve({reader:new xe.StreamMessageReader(F.stdout),writer:new xe.StreamMessageWriter(F.stdin)}))}else{if(E===Le.pipe)return(0,xe.createClientPipeTransport)(R).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))});if(Mn.isSocket(E))return(0,xe.createClientSocketTransport)(E.port).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))})}}return Promise.reject(new Error(&quot;Unsupported server configuration &quot;+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Tu.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Tu.join(r,e);if(_u.existsSync(i))return i}if(t!==void 0){let i=Tu.join(t,e);if(_u.existsSync(i))return i}return e}_mainGetRootPath(){let e=jn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}_getServerWorkingDir(e){let t=e&amp;&amp;e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=&gt;{_u.lstat(t,(i,o)=&gt;{r(!i&amp;&amp;o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return&quot;en&quot;;let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!=&quot;string&quot;?&quot;en&quot;:t.locale}};vt.LanguageClient=Ou;var xu=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jn.Disposable(()=&gt;{this._client.needsStop()&amp;&amp;this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf(&quot;.&quot;),t=e&gt;=0?this._setting.substr(0,e):this._setting,r=e&gt;=0?this._setting.substr(e+1):void 0,i=r?jn.workspace.getConfiguration(t).get(r,!1):jn.workspace.getConfiguration(t);i&amp;&amp;this._client.needsStart()?this._client.start():!i&amp;&amp;this._client.needsStop()&amp;&amp;this._client.stop()}};vt.SettingMonitor=xu});var mp=q((_b,gp)=&gt;{&quot;use strict&quot;;gp.exports=pp()});var rS={};_p(rS,{activate:()=&gt;tS,activateInlayHints:()=&gt;yp,deactivate:()=&gt;nS});module.exports=Pp(rS);var Ut=require(&quot;vscode&quot;),vp=Tp(mp()),Di;async function tS(n){let e=Ut.window.createOutputChannel(&quot;Hexpat Language Server trace&quot;),r={command:process.env.HEXPAT_SERVER_PATH||&quot;hexpat-language-server&quot;,options:{env:{...process.env,RUST_LOG:&quot;debug&quot;}}},i={run:r,debug:r},o={documentSelector:[{scheme:&quot;file&quot;,language:&quot;hexpat&quot;}],synchronize:{fileEvents:Ut.workspace.createFileSystemWatcher(&quot;**/.clientrc&quot;)},traceOutputChannel:e};Di=new vp.LanguageClient(&quot;hexpat-language-server&quot;,&quot;hexpat language server&quot;,i,o),yp(n),Di.start()}function nS(){if(!!Di)return Di.stop()}function yp(n){let e={hintsProvider:null,updateHintsEventEmitter:new Ut.EventEmitter,async onConfigChange(){this.dispose();let t=this.updateHintsEventEmitter.event;this.hintsProvider=Ut.languages.registerInlayHintsProvider({scheme:&quot;file&quot;,language:&quot;hexpat&quot;},new class{constructor(){this.onDidChangeInlayHints=t}resolveInlayHint(r,i){return{label:r.label,...r}}async provideInlayHints(r,i,o){let s=await Di.sendRequest(&quot;custom/inlay_hint&quot;,{path:r.uri.toString()}).catch(a=&gt;null);return s==null?[]:s.map(a=&gt;{let[u,h,g]=a,p=r.positionAt(u);return{position:r.positionAt(h),paddingLeft:!0,label:[{value:g,location:new Ut.Location(r.uri,p)}]}})}})},onDidChangeTextDocument({contentChanges:t,document:r}){},dispose(){var t;(t=this.hintsProvider)==null||t.dispose(),this.hintsProvider=null,this.updateHintsEventEmitter.dispose()}};Ut.workspace.onDidChangeConfiguration(e.onConfigChange,e,n.subscriptions),Ut.workspace.onDidChangeTextDocument(e.onDidChangeTextDocument,e,n.subscriptions),e.onConfigChange().catch(console.error)}0&amp;&amp;(module.exports={activate,activateInlayHints,deactivate});
</failure>
		</testcase>
		<testcase name="javascript.lang.security.audit.path-traversal.path-join-resolve-traversal.path-join-resolve-traversal" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="39">
			<failure type="WARNING" message="Detected possible user input going into a `path.join` or `path.resolve` function. This could possibly lead to a path traversal vulnerability,  where the attacker can access arbitrary files stored in the file system. Instead, be sure to sanitize or validate user input first.">`+t.data.toString():&quot;&quot;}`}return e instanceof Error?De.string(e.stack)?e.stack:e.message:De.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Info&amp;&amp;this.showNotificationMessage(y.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Warn&amp;&amp;this.showNotificationMessage(y.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),(r===&quot;force&quot;||r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Error)&amp;&amp;this.showNotificationMessage(y.MessageType.Error,e)}showNotificationMessage(e,t){t=t??&quot;A request has failed. See the output for more information.&quot;,(e===y.MessageType.Error?K.window.showErrorMessage:e===y.MessageType.Warning?K.window.showWarningMessage:K.window.showInformationMessage)(t,&quot;Go to output&quot;).then(i=&gt;{i!==void 0&amp;&amp;this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&amp;&amp;this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&amp;&amp;e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&amp;&amp;this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===qe.Initial||this.state===qe.Stopping||this.state===qe.Stopped}needsStop(){return this.state===qe.Starting||this.state===qe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===qe.Running&amp;&amp;!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&amp;&amp;(this._onReady=new Promise((e,t)=&gt;{this._onReadyCallbacks=new ao(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?K.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):K.languages.createDiagnosticCollection()),this.state=qe.Starting,this.resolveConnection().then(e=&gt;(e.onLogMessage(t=&gt;{switch(t.type){case y.MessageType.Error:this.error(t.message,void 0,!1);break;case y.MessageType.Warning:this.warn(t.message,void 0,!1);break;case y.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=&gt;{switch(t.type){case y.MessageType.Error:K.window.showErrorMessage(t.message);break;case y.MessageType.Warning:K.window.showWarningMessage(t.message);break;case y.MessageType.Info:K.window.showInformationMessage(t.message);break;default:K.window.showInformationMessage(t.message)}}),e.onRequest(y.ShowMessageRequest.type,t=&gt;{let r;switch(t.type){case y.MessageType.Error:r=K.window.showErrorMessage;break;case y.MessageType.Warning:r=K.window.showWarningMessage;break;case y.MessageType.Info:r=K.window.showInformationMessage;break;default:r=K.window.showInformationMessage}let i=t.actions||[];return r(t.message,...i)}),e.onTelemetry(t=&gt;{this._telemetryEmitter.fire(t)}),e.onRequest(y.ShowDocumentRequest.type,async t=&gt;{let r=async o=&gt;{let s=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await K.env.openExternal(s)};{let a={};return o.selection!==void 0&amp;&amp;(a.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?a.preserveFocus=!0:o.takeFocus===!0&amp;&amp;(a.preserveFocus=!1),await K.window.showTextDocument(s,a),{success:!0}}}catch{return{success:!0}}},i=this._clientOptions.middleware.window?.showDocument;return i!==void 0?i(t,r):r(t)}),e.listen(),this.initialize(e))).catch(e=&gt;{this.state=qe.StartFailed,this._onReadyCallbacks.reject(e),this.error(`${this._name} client: couldn't create connection to server`,e,&quot;force&quot;)}),new K.Disposable(()=&gt;{this.needsStop()&amp;&amp;this.stop().catch(e=&gt;{this.error(&quot;Stopping server failed.&quot;,e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:K.env.appName,version:K.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(K.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:De.func(t)?t():t,trace:y.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=Se.generateUuid(),a=new lD.ProgressPart(e,s);return o.workDoneToken=s,this.doInitialize(e,o).then(u=&gt;(a.done(),u),u=&gt;{throw a.cancel(),u})}else return this.doInitialize(e,o)}doInitialize(e,t){return e.initialize(t).then(r=&gt;{this._resolvedConnection=e,this._initializeResult=r,this.state=qe.Running;let i;return De.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===y.TextDocumentSyncKind.None?i={openClose:!1,change:y.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&amp;&amp;r.capabilities.textDocumentSync!==null&amp;&amp;(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=&gt;this.handleDiagnostics(o)),e.onRequest(y.RegistrationRequest.type,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(&quot;client/registerFeature&quot;,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(y.UnregistrationRequest.type,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(&quot;client/unregisterFeature&quot;,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(y.ApplyWorkspaceEditRequest.type,o=&gt;this.handleApplyWorkspaceEdit(o)),e.sendNotification(y.InitializedNotification.type,{}).then(()=&gt;(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r))}).then(void 0,r=&gt;{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof y.ResponseError&amp;&amp;r.data&amp;&amp;r.data.retry?K.window.showErrorMessage(r.message,{title:&quot;Retry&quot;,id:&quot;retry&quot;}).then(i=&gt;{i&amp;&amp;i.id===&quot;retry&quot;?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&amp;&amp;r.message&amp;&amp;K.window.showErrorMessage(r.message),this.error(&quot;Server initialization failed.&quot;,r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=K.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}async stop(e=2e3){if(await this.onReady(),this._initializeResult=void 0,!this._connectionPromise)return this.state=qe.Stopped,Promise.resolve();if(this.state===qe.Stopping&amp;&amp;this._onStop)return this._onStop;this.state=qe.Stopping,this.cleanUp(!1);let t=new Promise(i=&gt;{(0,y.RAL)().timer.setTimeout(i,e)}),r=this.resolveConnection().then(i=&gt;i.shutdown().then(()=&gt;i.exit().then(()=&gt;i)));return this._onStop=Promise.race([t,r]).then(i=&gt;{if(i!==void 0)i.end(),i.dispose();else throw this.error(&quot;Stopping server timed out&quot;,void 0,!1),new Error(&quot;Stopping the server timed out&quot;)},i=&gt;{throw this.error(&quot;Stopping server failed&quot;,i,!1),i}).finally(()=&gt;{this.state=qe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})}cleanUp(e=!0,t=!0){this._fileEvents=[],this._fileEventDelayer.cancel(),this._listeners&amp;&amp;(this._listeners.forEach(r=&gt;r.dispose()),this._listeners=void 0),this._providers&amp;&amp;(this._providers.forEach(r=&gt;r.dispose()),this._providers=void 0),this._syncedDocuments&amp;&amp;this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=&gt;i[1]).reverse())r.dispose();e&amp;&amp;this.cleanUpChannel(),t&amp;&amp;this._diagnostics&amp;&amp;(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&amp;&amp;this._disposeOutputChannel&amp;&amp;(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=&gt;{await t.onReady();let s=await t.resolveConnection(),a=Promise.resolve();return t.isConnectionActive()&amp;&amp;(t.forceDocumentSync(),a=s.didChangeWatchedFiles({changes:t._fileEvents})),t._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=&gt;{t.error(&quot;Notify file events failed.&quot;,o)})}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&amp;&amp;(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(y.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,r,(o,s)=&gt;this.setDiagnostics(o,s)):this.setDiagnostics(t,r)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(r,i,o)=&gt;{this.handleConnectionError(r,i,o)},t=()=&gt;{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||&quot;utf8&quot;).then(r=&gt;dD(r.reader,r.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===qe.Stopped)return;try{this._resolvedConnection&amp;&amp;this._resolvedConnection.dispose()}catch{}let e={action:sr.DoNotRestart};if(this.state!==qe.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e.action===sr.DoNotRestart?(this.error(e.message??&quot;Connection to server got closed. Server will not be restarted.&quot;,void 0,&quot;force&quot;),this.state===qe.Starting?(this._onReadyCallbacks.reject(new Error(&quot;Connection to server got closed. Server will not be restarted.&quot;)),this.state=qe.StartFailed):this.state=qe.Stopped,this.cleanUp(!1,!0)):e.action===sr.Restart&amp;&amp;(this.info(e.message??&quot;Connection to server got closed. Server will restart.&quot;),this.cleanUp(!1,!1),this.state=qe.Initial,this.start())}handleConnectionError(e,t,r){let i=this._clientOptions.errorHandler.error(e,t,r);i.action===so.Shutdown&amp;&amp;(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,&quot;force&quot;),this.stop().catch(o=&gt;{this.error(&quot;Stopping server failed&quot;,o,!1)}))}hookConfigurationChanged(e){K.workspace.onDidChangeConfiguration(()=&gt;{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let r=K.workspace.getConfiguration(this._id),i=y.Trace.Off,o=y.TraceFormat.Text;if(r){let s=r.get(&quot;trace.server&quot;,&quot;off&quot;);typeof s==&quot;string&quot;?i=y.Trace.fromString(s):(i=y.Trace.fromString(r.get(&quot;trace.server.verbosity&quot;,&quot;off&quot;)),o=y.TraceFormat.fromString(r.get(&quot;trace.server.format&quot;,&quot;text&quot;)))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;De.array(t)?r=t:r=[t],r&amp;&amp;this._dynamicFeatures.get(y.DidChangeWatchedFilesNotification.type.method).registerRaw(Se.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),rc.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Pc(this)),this.registerFeature(new ic(this,this._syncedDocuments)),this.registerFeature(new sc(this)),this.registerFeature(new ac(this)),this.registerFeature(new cc(this)),this.registerFeature(new uc(this)),this.registerFeature(new oc(this,this._syncedDocuments)),this.registerFeature(new lc(this,e=&gt;this.notifyFileEvent(e))),this.registerFeature(new fc(this)),this.registerFeature(new hc(this)),this.registerFeature(new pc(this)),this.registerFeature(new gc(this)),this.registerFeature(new mc(this)),this.registerFeature(new vc(this)),this.registerFeature(new yc(this)),this.registerFeature(new Cc(this)),this.registerFeature(new Rc(this)),this.registerFeature(new Dc(this)),this.registerFeature(new Sc(this)),this.registerFeature(new wc(this)),this.registerFeature(new bc(this)),this.registerFeature(new _c(this)),this.registerFeature(new Tc(this)),this.registerFeature(new qc(this))}fillInitializeParams(e){for(let t of this._features)De.func(t.fillInitializeParams)&amp;&amp;t.fillInitializeParams(e)}computeClientCapabilities(){let e={};V(e,&quot;workspace&quot;).applyEdit=!0;let t=V(V(e,&quot;workspace&quot;),&quot;workspaceEdit&quot;);t.documentChanges=!0,t.resourceOperations=[y.ResourceOperationKind.Create,y.ResourceOperationKind.Rename,y.ResourceOperationKind.Delete],t.failureHandling=y.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=V(V(e,&quot;textDocument&quot;),&quot;publishDiagnostics&quot;);r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[y.DiagnosticTag.Unnecessary,y.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=V(e,&quot;window&quot;),o=V(i,&quot;showMessage&quot;);o.messageActionItem={additionalPropertiesSupport:!0};let s=V(i,&quot;showDocument&quot;);s.support=!0;let a=V(e,&quot;general&quot;);a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ar.RequestsToCancelOnContentModified)},a.regularExpressions={engine:&quot;ECMAScript&quot;,version:&quot;ES2020&quot;},a.markdown={parser:&quot;marked&quot;,version:&quot;1.1.0&quot;},this._clientOptions.markdown.supportHtml&amp;&amp;(a.markdown.allowedTags=[&quot;ul&quot;,&quot;li&quot;,&quot;p&quot;,&quot;code&quot;,&quot;blockquote&quot;,&quot;ol&quot;,&quot;h1&quot;,&quot;h2&quot;,&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;hr&quot;,&quot;em&quot;,&quot;pre&quot;,&quot;table&quot;,&quot;thead&quot;,&quot;tbody&quot;,&quot;tr&quot;,&quot;th&quot;,&quot;td&quot;,&quot;div&quot;,&quot;del&quot;,&quot;a&quot;,&quot;strong&quot;,&quot;br&quot;,&quot;img&quot;,&quot;span&quot;]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(o===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let s=i.registerOptions??{};s.documentSelector=s.documentSelector??this._clientOptions.documentSelector;let a={id:i.id,registerOptions:s};try{o.register(a)}catch(u){r(u);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,r=new Map;K.workspace.textDocuments.forEach(o=&gt;r.set(o.uri.toString(),o));let i=!1;if(t.documentChanges){for(let o of t.documentChanges)if(y.TextDocumentEdit.is(o)&amp;&amp;o.textDocument.version&amp;&amp;o.textDocument.version&gt;=0){let s=r.get(o.textDocument.uri);if(s&amp;&amp;s.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):De.asPromise(K.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=&gt;({applied:o})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof y.ResponseError){if(r.code===y.LSPErrorCodes.RequestCancelled||r.code===y.LSPErrorCodes.ServerCancelled){if(t!==void 0&amp;&amp;t.isCancellationRequested)return i;throw r.data!==void 0?new co(r.data):new K.CancellationError}else if(r.code===y.LSPErrorCodes.ContentModified){if(ar.RequestsToCancelOnContentModified.has(e.method))throw new K.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};ye.BaseLanguageClient=ar;ar.RequestsToCancelOnContentModified=new Set([y.SemanticTokensRequest.method,y.SemanticTokensRangeRequest.method,y.SemanticTokensDeltaRequest.method])});var Ph=q(lo=&gt;{&quot;use strict&quot;;Object.defineProperty(lo,&quot;__esModule&quot;,{value:!0});lo.ColorProviderFeature=void 0;var uo=require(&quot;vscode&quot;),mi=Ce(),Ec=it();function Th(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kc=class extends Ec.TextDocumentFeature{constructor(e){super(e,mi.DocumentColorRequest.type)}fillClientCapabilities(e){Th(Th(e,&quot;textDocument&quot;),&quot;colorProvider&quot;).dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=&gt;{let a=this._client,u=(g,p,C)=&gt;{let R={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p.document),range:a.code2ProtocolConverter.asRange(p.range)};return a.sendRequest(mi.ColorPresentationRequest.type,R,C).then(this.asColorPresentations.bind(this),E=&gt;a.handleFailedRequest(mi.ColorPresentationRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,o,s,u):u(i,o,s)},provideDocumentColors:(i,o)=&gt;{if(Ec.$DocumentSelector.skipCellTextDocument(t,i))return;let s=this._client,a=(h,g)=&gt;{let p={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(h)};return s.sendRequest(mi.DocumentColorRequest.type,p,g).then(this.asColorInformations.bind(this),C=&gt;s.handleFailedRequest(mi.ColorPresentationRequest.type,g,C,null))},u=s.clientOptions.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,o,a):a(i,o)}};return[uo.languages.registerColorProvider(Ec.$DocumentSelector.asTextDocumentFilters(t),r),r]}asColor(e){return new uo.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=&gt;new uo.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=&gt;{let r=new uo.ColorPresentation(t.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),r}):[]}};lo.ColorProviderFeature=kc});var Eh=q(fo=&gt;{&quot;use strict&quot;;Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0});fo.ImplementationFeature=void 0;var gD=require(&quot;vscode&quot;),Oc=Ce(),xc=it();function qh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Nc=class extends xc.TextDocumentFeature{constructor(e){super(e,Oc.ImplementationRequest.type)}fillClientCapabilities(e){let t=qh(qh(e,&quot;textDocument&quot;),&quot;implementation&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=&gt;{if(xc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Oc.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Oc.ImplementationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideImplementation?h.provideImplementation(i,o,s,u):u(i,o,s)}};return[gD.languages.registerImplementationProvider(xc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};fo.ImplementationFeature=Nc});var kh=q(po=&gt;{&quot;use strict&quot;;Object.defineProperty(po,&quot;__esModule&quot;,{value:!0});po.TypeDefinitionFeature=void 0;var mD=require(&quot;vscode&quot;),Ic=Ce(),Fc=it();function ho(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Lc=class extends Fc.TextDocumentFeature{constructor(e){super(e,Ic.TypeDefinitionRequest.type)}fillClientCapabilities(e){ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;).dynamicRegistration=!0;let t=ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=&gt;{if(Fc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Ic.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Ic.TypeDefinitionRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,o,s,u):u(i,o,s)}};return[mD.languages.registerTypeDefinitionProvider(Fc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};po.TypeDefinitionFeature=Lc});var Oh=q(xr=&gt;{&quot;use strict&quot;;Object.defineProperty(xr,&quot;__esModule&quot;,{value:!0});xr.WorkspaceFoldersFeature=xr.arrayDiff=void 0;var vD=Or(),go=require(&quot;vscode&quot;),vi=Ce();function Ac(n,e){if(n!==void 0)return n[e]}function Mc(n,e){return n.filter(t=&gt;e.indexOf(t)&lt;0)}xr.arrayDiff=Mc;var jc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return vi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=go.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=&gt;this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(vi.WorkspaceFoldersRequest.type,o=&gt;{let s=()=&gt;{let u=go.workspace.workspaceFolders;return u===void 0?null:u.map(g=&gt;this.asProtocol(g))},a=t.clientOptions.middleware.workspace;return a&amp;&amp;a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Ac(Ac(Ac(e,&quot;workspace&quot;),&quot;workspaceFolders&quot;),&quot;changeNotifications&quot;),i;typeof r==&quot;string&quot;?i=r:r===!0&amp;&amp;(i=vD.generateUuid()),i&amp;&amp;this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&amp;&amp;e){let r=Mc(this._initialFolders,e),i=Mc(e,this._initialFolders);(i.length&gt;0||r.length&gt;0)&amp;&amp;(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&amp;&amp;(t=this.doSendEvent(e,[]));t!==void 0&amp;&amp;t.catch(r=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=&gt;this.asProtocol(i)),removed:t.map(i=&gt;this.asProtocol(i))}};return this._client.sendNotification(vi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=go.workspace.onDidChangeWorkspaceFolders(o=&gt;{let s=h=&gt;this.doSendEvent(h.added,h.removed),a=r.clientOptions.middleware.workspace;(a&amp;&amp;a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(h=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(go.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&amp;&amp;(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};xr.WorkspaceFoldersFeature=jc});var Nh=q(mo=&gt;{&quot;use strict&quot;;Object.defineProperty(mo,&quot;__esModule&quot;,{value:!0});mo.FoldingRangeFeature=void 0;var yi=require(&quot;vscode&quot;),Nr=Ce(),$c=it();function xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Ir=class extends $c.TextDocumentFeature{constructor(e){super(e,Nr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=xh(xh(e,&quot;textDocument&quot;),&quot;foldingRange&quot;);t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=&gt;{if($c.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g)};return a.sendRequest(Nr.FoldingRangeRequest.type,R,C).then(Ir.asFoldingRanges,E=&gt;a.handleFailedRequest(Nr.FoldingRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,o,s,u):u(i,o,s)}};return[yi.languages.registerFoldingRangeProvider($c.$DocumentSelector.asTextDocumentFilters(t),r),r]}static asFoldingRangeKind(e){if(e)switch(e){case Nr.FoldingRangeKind.Comment:return yi.FoldingRangeKind.Comment;case Nr.FoldingRangeKind.Imports:return yi.FoldingRangeKind.Imports;case Nr.FoldingRangeKind.Region:return yi.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=&gt;new yi.FoldingRange(t.startLine,t.endLine,Ir.asFoldingRangeKind(t.kind))):[]}};mo.FoldingRangeFeature=Ir});var Fh=q(vo=&gt;{&quot;use strict&quot;;Object.defineProperty(vo,&quot;__esModule&quot;,{value:!0});vo.DeclarationFeature=void 0;var yD=require(&quot;vscode&quot;),Hc=Ce(),Wc=it();function Ih(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Kc=class extends Wc.TextDocumentFeature{constructor(e){super(e,Hc.DeclarationRequest.type)}fillClientCapabilities(e){let t=Ih(Ih(e,&quot;textDocument&quot;),&quot;declaration&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=&gt;{if(Wc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Hc.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDeclarationResult,R=&gt;a.handleFailedRequest(Hc.DeclarationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDeclaration?h.provideDeclaration(i,o,s,u):u(i,o,s)}};return[yD.languages.registerDeclarationProvider(Wc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};vo.DeclarationFeature=Kc});var Ah=q(yo=&gt;{&quot;use strict&quot;;Object.defineProperty(yo,&quot;__esModule&quot;,{value:!0});yo.SelectionRangeFeature=void 0;var CD=require(&quot;vscode&quot;),Uc=Ce(),zc=it();function Lh(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Vc=class extends zc.TextDocumentFeature{constructor(e){super(e,Uc.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Lh(Lh(e,&quot;textDocument&quot;),&quot;selectionRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=&gt;{if(zc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositions(p)};return a.sendRequest(Uc.SelectionRangeRequest.type,R,C).then(E=&gt;a.protocol2CodeConverter.asSelectionRanges(E),E=&gt;a.handleFailedRequest(Uc.SelectionRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,o,s,u):u(i,o,s)}};return[CD.languages.registerSelectionRangeProvider(zc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};yo.SelectionRangeFeature=Vc});var Mh=q(Co=&gt;{&quot;use strict&quot;;Object.defineProperty(Co,&quot;__esModule&quot;,{value:!0});Co.ProgressFeature=void 0;var RD=Ce(),DD=ec();function SD(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Gc=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){SD(e,&quot;window&quot;).workDoneProgress=!0}initialize(){let e=this._client,t=i=&gt;{this.activeParts.delete(i)},r=i=&gt;{this.activeParts.add(new DD.ProgressPart(this._client,i.token,t))};e.onRequest(RD.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Co.ProgressFeature=Gc});var $h=q(Ro=&gt;{&quot;use strict&quot;;Object.defineProperty(Ro,&quot;__esModule&quot;,{value:!0});Ro.CallHierarchyFeature=void 0;var wD=require(&quot;vscode&quot;),cr=Ce(),Bc=it();function jh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Xc=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{if(Bc.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,a))return;let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(cr.CallHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asCallHierarchyItems(p),p=&gt;i.handleFailedRequest(cr.CallHierarchyPrepareRequest.type,h,p,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},Jc=class extends Bc.TextDocumentFeature{constructor(e){super(e,cr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=jh(jh(e,&quot;textDocument&quot;),&quot;callHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Xc(t,e);return[wD.languages.registerCallHierarchyProvider(Bc.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};Ro.CallHierarchyFeature=Jc});var Hh=q(bo=&gt;{&quot;use strict&quot;;Object.defineProperty(bo,&quot;__esModule&quot;,{value:!0});bo.SemanticTokensFeature=void 0;var Do=require(&quot;vscode&quot;),ee=Ce(),So=it(),bD=yn();function wo(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Qc=class extends So.TextDocumentFeature{constructor(e){super(e,ee.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=wo(wo(e,&quot;textDocument&quot;),&quot;semanticTokens&quot;);t.dynamicRegistration=!0,t.tokenTypes=[ee.SemanticTokenTypes.namespace,ee.SemanticTokenTypes.type,ee.SemanticTokenTypes.class,ee.SemanticTokenTypes.enum,ee.SemanticTokenTypes.interface,ee.SemanticTokenTypes.struct,ee.SemanticTokenTypes.typeParameter,ee.SemanticTokenTypes.parameter,ee.SemanticTokenTypes.variable,ee.SemanticTokenTypes.property,ee.SemanticTokenTypes.enumMember,ee.SemanticTokenTypes.event,ee.SemanticTokenTypes.function,ee.SemanticTokenTypes.method,ee.SemanticTokenTypes.macro,ee.SemanticTokenTypes.keyword,ee.SemanticTokenTypes.modifier,ee.SemanticTokenTypes.comment,ee.SemanticTokenTypes.string,ee.SemanticTokenTypes.number,ee.SemanticTokenTypes.regexp,ee.SemanticTokenTypes.operator,ee.SemanticTokenTypes.decorator],t.tokenModifiers=[ee.SemanticTokenModifiers.declaration,ee.SemanticTokenModifiers.definition,ee.SemanticTokenModifiers.readonly,ee.SemanticTokenModifiers.static,ee.SemanticTokenModifiers.deprecated,ee.SemanticTokenModifiers.abstract,ee.SemanticTokenModifiers.async,ee.SemanticTokenModifiers.modification,ee.SemanticTokenModifiers.documentation,ee.SemanticTokenModifiers.defaultLibrary],t.formats=[ee.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,wo(wo(e,&quot;workspace&quot;),&quot;semanticTokens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(ee.SemanticTokensRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=bD.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&amp;&amp;typeof e.full!=&quot;boolean&quot;&amp;&amp;e.full.delta===!0,o=new Do.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(R,E)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let I=this._client,F=I.clientOptions.middleware,A=(N,L)=&gt;{let j={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(N)};return I.sendRequest(ee.SemanticTokensRequest.type,j,L).then(X=&gt;I.protocol2CodeConverter.asSemanticTokens(X),X=&gt;I.handleFailedRequest(ee.SemanticTokensRequest.type,L,X,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(R,E,A):A(R,E)},provideDocumentSemanticTokensEdits:i?(R,E,I)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),previousResultId:j};return F.sendRequest(ee.SemanticTokensDeltaRequest.type,Re,X).then(ne=&gt;ee.SemanticTokens.is(ne)?F.protocol2CodeConverter.asSemanticTokens(ne):F.protocol2CodeConverter.asSemanticTokensEdits(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensDeltaRequest.type,X,ne,null))};return A.provideDocumentSemanticTokensEdits?A.provideDocumentSemanticTokensEdits(R,E,I,N):N(R,E,I)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(R,E,I)=&gt;{let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),range:F.code2ProtocolConverter.asRange(j)};return F.sendRequest(ee.SemanticTokensRangeRequest.type,Re,X).then(ne=&gt;F.protocol2CodeConverter.asSemanticTokens(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensRangeRequest.type,X,ne,null))};return A.provideDocumentRangeSemanticTokens?A.provideDocumentRangeSemanticTokens(R,E,I,N):N(R,E,I)}}:void 0,h=[],p=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend),C=So.$DocumentSelector.asTextDocumentFilters(t);return s!==void 0&amp;&amp;h.push(Do.languages.registerDocumentSemanticTokensProvider(C,s,p)),u!==void 0&amp;&amp;h.push(Do.languages.registerDocumentRangeSemanticTokensProvider(C,u,p)),[new Do.Disposable(()=&gt;h.forEach(R=&gt;R.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}};bo.SemanticTokensFeature=Qc});var Uh=q(St=&gt;{&quot;use strict&quot;;Object.defineProperty(St,&quot;__esModule&quot;,{value:!0});St.WillDeleteFilesFeature=St.WillRenameFilesFeature=St.WillCreateFilesFeature=St.DidDeleteFilesFeature=St.DidRenameFilesFeature=St.DidCreateFilesFeature=void 0;var Wt=require(&quot;vscode&quot;),_D=Mi(),wn=Ce(),TD=Or();function Wh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}function PD(n,e){return n[e]}function Kh(n,e,t){n[e]=t}var bn=class{constructor(e,t,r,i,o){this._filters=new Map,this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Wh(Wh(e,&quot;workspace&quot;),&quot;fileOperations&quot;);Kh(t,&quot;dynamicRegistration&quot;,!0),Kh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?PD(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:TD.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=&gt;{let i=new _D.Minimatch(r.pattern.glob,bn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}getFileType(e){return bn.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=&gt;{let s=t(o),a=s.fsPath.replace(/\\/g,&quot;/&quot;);for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&amp;&amp;h.scheme!==s.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let g=await this.getFileType(s);if(g===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(g===Wt.FileType.File&amp;&amp;h.kind===wn.FileOperationPatternKind.file||g===Wt.FileType.Directory&amp;&amp;h.kind===wn.FileOperationPatternKind.folder)return!0}else if(h.kind===wn.FileOperationPatternKind.folder&amp;&amp;await bn.getFileType(s)===Wt.FileType.Directory&amp;&amp;h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=&gt;r[s]);return{...e,files:i}}static async getFileType(e){try{return(await Wt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&amp;&amp;e.ignoreCase===!0)return{nocase:!0}}},_o=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=&gt;this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},To=class extends _o{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await bn.getFileType(e);return r&amp;&amp;this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&amp;&amp;this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}},Yc=class extends _o{constructor(e){super(e,Wt.workspace.onDidCreateFiles,wn.DidCreateFilesNotification.type,&quot;didCreate&quot;,&quot;didCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};St.DidCreateFilesFeature=Yc;var Zc=class extends To{constructor(e){super(e,Wt.workspace.onDidRenameFiles,wn.DidRenameFilesNotification.type,&quot;didRename&quot;,&quot;didRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};St.DidRenameFilesFeature=Zc;var eu=class extends To{constructor(e){super(e,Wt.workspace.onDidDeleteFiles,wn.DidDeleteFilesNotification.type,&quot;didDelete&quot;,&quot;didDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};St.DidDeleteFilesFeature=eu;var Ci=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=&gt;this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},tu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillCreateFiles,wn.WillCreateFilesRequest.type,&quot;willCreate&quot;,&quot;willCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};St.WillCreateFilesFeature=tu;var nu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillRenameFiles,wn.WillRenameFilesRequest.type,&quot;willRename&quot;,&quot;willRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};St.WillRenameFilesFeature=nu;var ru=class extends Ci{constructor(e){super(e,Wt.workspace.onWillDeleteFiles,wn.WillDeleteFilesRequest.type,&quot;willDelete&quot;,&quot;willDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};St.WillDeleteFilesFeature=ru});var Vh=q(Po=&gt;{&quot;use strict&quot;;Object.defineProperty(Po,&quot;__esModule&quot;,{value:!0});Po.LinkedEditingFeature=void 0;var qD=require(&quot;vscode&quot;),iu=Ce(),ou=it();function zh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var su=class extends ou.TextDocumentFeature{constructor(e){super(e,iu.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=zh(zh(e,&quot;textDocument&quot;),&quot;linkedEditingRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=&gt;{if(ou.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(iu.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asLinkedEditingRanges,R=&gt;a.handleFailedRequest(iu.LinkedEditingRangeRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,o,s,u):u(i,o,s)}};return[qD.languages.registerLinkedEditingRangeProvider(ou.$DocumentSelector.asTextDocumentFilters(t),r),r]}};Po.LinkedEditingFeature=su});var Bh=q(ur=&gt;{&quot;use strict&quot;;Object.defineProperty(ur,&quot;__esModule&quot;,{value:!0});ur.DiagnosticFeature=ur.vsdiag=void 0;var He=require(&quot;vscode&quot;),$e=Ce(),ED=Or(),Fr=it();function Gh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var un;(function(n){let e;(function(t){t.full=&quot;full&quot;,t.unChanged=&quot;unChanged&quot;})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(un=ur.vsdiag||(ur.vsdiag={}));var ft;(function(n){n.active=&quot;open&quot;,n.reschedule=&quot;reschedule&quot;,n.outDated=&quot;drop&quot;})(ft||(ft={}));var au=class{constructor(){this.open=new Set;let e=()=&gt;{if(this.open.clear(),He.window.tabs!==void 0)for(let t of He.window.tabs)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString());else if(He.window.openEditors!==void 0)for(let t of He.window.openEditors)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString())};e(),He.window.onDidChangeTabs!==void 0?this.disposable=He.window.onDidChangeTabs(e):He.window.onDidChangeOpenEditors!==void 0?this.disposable=He.window.onDidChangeOpenEditors(e):this.disposable={dispose:()=&gt;{}}}dispose(){this.disposable.dispose()}isActive(e){return He.window.activeTextEditor?.document===e}isVisible(e){return this.open.has(e.uri.toString())}},Et;(function(n){n[n.document=1]=&quot;document&quot;,n[n.workspace=2]=&quot;workspace&quot;})(Et||(Et={}));var cu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===Et.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r]:[t.uri.toString(),t.uri,t.version],u=i.get(o);return u===void 0&amp;&amp;(u={document:s,pulledVersion:a,resultId:void 0},i.set(o,u)),u}update(e,t,r,i){let o=e===Et.document?this.documentPullStates:this.workspacePullStates,[s,a,u,h]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r,i]:[t.uri.toString(),t.uri,t.version,r],g=o.get(s);g===void 0?(g={document:a,pulledVersion:u,resultId:h},o.set(s,g)):(g.pulledVersion=u,g.resultId=h)}unTrack(e,t){(e===Et.document?this.documentPullStates:this.workspacePullStates).delete(t.uri.toString())}tracks(e,t){let r=typeof t==&quot;string&quot;?t:t.uri.toString();return(e===Et.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){return(e===Et.document?this.documentPullStates:this.workspacePullStates).get(t.uri.toString())?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&amp;&amp;(r=this.documentPullStates.get(t)),r.resultId!==void 0&amp;&amp;e.push({uri:t,value:r.resultId});return e}},uu=class{constructor(e,t,r){this.client=e,this.editorTracker=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new He.EventEmitter,this.provider=this.createProvider(),this.diagnostics=He.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new cu,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){this.pullAsync(e).then(()=&gt;{t&amp;&amp;t()},r=&gt;{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,r,!1)})}async pullAsync(e){let t=e.uri.toString(),r=e.version,i=this.openRequests.get(t),o=this.documentStates.track(Et.document,e);if(i===void 0){let s=new He.CancellationTokenSource;this.openRequests.set(t,{state:ft.active,version:r,textDocument:e,tokenSource:s});let a,u;try{a=await this.provider.provideDiagnostics(e,o.resultId,s.token)??{kind:un.DocumentDiagnosticReportKind.full,items:[]}}catch(h){if(h instanceof Fr.LSPCancellationError&amp;&amp;$e.Proposed.DiagnosticServerCancellationData.is(h.data)&amp;&amp;h.data.retriggerRequest===!1&amp;&amp;(u={state:ft.outDated,textDocument:e}),u===void 0&amp;&amp;h instanceof He.CancellationError)u={state:ft.reschedule,textDocument:e};else throw h}if(u=u??this.openRequests.get(t),u===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${t}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(t),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(Et.document,e);return}if(u.state===ft.outDated)return;a!==void 0&amp;&amp;(a.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;this.diagnostics.set(e.uri,a.items),o.pulledVersion=r,o.resultId=a.resultId),u.state===ft.reschedule&amp;&amp;this.pull(e)}else i.state===ft.active?(i.tokenSource.cancel(),this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})):i.state===ft.outDated&amp;&amp;this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})}cleanupPull(e){let t=e.uri.toString(),r=this.openRequests.get(t);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(t,{state:ft.reschedule,textDocument:e}):this.pull(e):(r!==void 0&amp;&amp;(r.state===ft.active&amp;&amp;r.tokenSource.cancel(),this.openRequests.set(t,{state:ft.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=&gt;{this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3)},e=&gt;{!(e instanceof Fr.LSPCancellationError)&amp;&amp;!$e.Proposed.DiagnosticServerCancellationData.is(e.data)&amp;&amp;(this.client.error(&quot;Workspace diagnostic pull failed.&quot;,e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter&lt;=5&amp;&amp;(this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&amp;&amp;(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new He.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=&gt;({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=&gt;{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;(this.documentStates.tracks(Et.document,r.uri.toString())||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(Et.workspace,r.uri.toString(),r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=&gt;{let o=(a,u,h)=&gt;{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a.uri)},previousResultId:u};return this.client.sendRequest($e.Proposed.DocumentDiagnosticRequest.type,g,h).then(p=&gt;p==null||this.isDisposed?{kind:un.DocumentDiagnosticReportKind.full,items:[]}:p.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,resultId:p.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(p.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,resultId:p.resultId},p=&gt;this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,h,p,{kind:un.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.clientOptions.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&amp;&amp;(e.provideWorkspaceDiagnostics=(t,r,i)=&gt;{let o=h=&gt;h.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:this.client.protocol2CodeConverter.asDiagnostics(h.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},s=h=&gt;{let g=[];for(let p of h)g.push({uri:this.client.code2ProtocolConverter.asUri(p.uri),value:p.value});return g},a=(h,g)=&gt;{let p=(0,ED.generateUuid)(),C=this.client.onProgress($e.Proposed.WorkspaceDiagnosticRequest.partialResult,p,E=&gt;{if(E==null){i(null);return}let I={items:[]};for(let F of E.items)I.items.push(o(F));i(I)}),R={identifier:this.options.identifier,previousResultIds:s(h),partialResultToken:p};return this.client.sendRequest($e.Proposed.WorkspaceDiagnosticRequest.type,R,g).then(E=&gt;{let I={items:[]};for(let F of E.items)I.items.push(o(F));return C.dispose(),i(I),{items:[]}},E=&gt;(C.dispose(),this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,g,E,{items:[]})))},u=this.client.clientOptions.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===ft.active&amp;&amp;t.tokenSource.cancel(),this.openRequests.set(e,{state:ft.outDated,textDocument:t.textDocument})}},lu=class{constructor(e){this.diagnosticRequestor=e,this.documents=new $e.LinkedMap}add(e){let t=e.uri.toString();this.documents.has(t)||(this.documents.set(e.uri.toString(),e,$e.Touch.Last),this.trigger())}remove(e){let t=e.uri.toString();this.documents.has(t)&amp;&amp;(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&amp;&amp;(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,$e.RAL)().timer.setInterval(()=&gt;{let e=this.documents.first;e!==void 0&amp;&amp;(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,$e.Touch.Last),e===this.endDocument&amp;&amp;this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},du=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=r.documentSelector,s=[],a=p=&gt;Fr.$DocumentSelector.matchForProvider(o,p)&amp;&amp;t.isVisible(p);this.diagnosticRequestor=new uu(e,t,r),this.backgroundScheduler=new lu(this.diagnosticRequestor);let u=p=&gt;{!a(p)||!r.interFileDependencies||this.activeTextDocument===p||this.backgroundScheduler.add(p)};this.activeTextDocument=He.window.activeTextEditor?.document,He.window.onDidChangeActiveTextEditor(p=&gt;{let C=this.activeTextDocument;this.activeTextDocument=p?.document,C!==void 0&amp;&amp;u(C),this.activeTextDocument!==void 0&amp;&amp;this.backgroundScheduler.remove(this.activeTextDocument)});let h=e.getFeature($e.DidOpenTextDocumentNotification.method);s.push(h.onNotificationSent(p=&gt;{let C=p.original;a(C)&amp;&amp;this.diagnosticRequestor.pull(C,()=&gt;{u(C)})}));for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p,()=&gt;{u(p)});if(i.onChange){let p=e.getFeature($e.DidChangeTextDocumentNotification.method);s.push(p.onNotificationSent(async C=&gt;{let R=C.original.document;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onType))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;C.original.contentChanges.length&gt;0&amp;&amp;this.diagnosticRequestor.pull(R,()=&gt;{this.backgroundScheduler.trigger()})}))}if(i.onSave){let p=e.getFeature($e.DidSaveTextDocumentNotification.method);s.push(p.onNotificationSent(C=&gt;{let R=C.original;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onSave))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;this.diagnosticRequestor.pull(C.original,()=&gt;{this.backgroundScheduler.trigger()})}))}let g=e.getFeature($e.DidCloseTextDocumentNotification.method);s.push(g.onNotificationSent(p=&gt;{let C=p.original;this.diagnosticRequestor.cleanupPull(C),this.backgroundScheduler.remove(C)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=&gt;{for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p)}),r.workspaceDiagnostics===!0&amp;&amp;r.identifier!==&quot;da348dc5-c30a-4515-9d98-31ff3be38d14&quot;&amp;&amp;this.diagnosticRequestor.pullWorkspace(),this.disposable=He.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},fu=class extends Fr.TextDocumentFeature{constructor(e){super(e,$e.Proposed.DocumentDiagnosticRequest.type),this.editorTracker=new au}fillClientCapabilities(e){let t=Gh(Gh(e,&quot;textDocument&quot;),&quot;diagnostic&quot;);t.dynamicRegistration=!0,t.relatedDocumentSupport=!1}initialize(e,t){this._client.onRequest($e.Proposed.DiagnosticRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let t=new du(this._client,this.editorTracker,e);return[t.disposable,t]}};ur.DiagnosticFeature=fu});var Jh=q(qo=&gt;{&quot;use strict&quot;;Object.defineProperty(qo,&quot;__esModule&quot;,{value:!0});qo.TypeHierarchyFeature=void 0;var kD=require(&quot;vscode&quot;),lr=Ce(),hu=it();function Xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var pu=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareTypeHierarchy(e,t,r){if(hu.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,e))return;let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asTypeHierarchyItems(p),p=&gt;i.handleFailedRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,h,p,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},gu=class extends hu.TextDocumentFeature{constructor(e){super(e,lr.Proposed.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=Xh(Xh(e,&quot;textDocument&quot;),&quot;typeHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new pu(t,e);return[kD.languages.registerTypeHierarchyProvider(hu.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};qo.TypeHierarchyFeature=gu});var Yh=q(Oo=&gt;{&quot;use strict&quot;;Object.defineProperty(Oo,&quot;__esModule&quot;,{value:!0});Oo.InlineValueFeature=void 0;var Qh=require(&quot;vscode&quot;),Eo=Ce(),mu=it();function ko(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var vu=class extends mu.TextDocumentFeature{constructor(e){super(e,Eo.Proposed.InlineValuesRequest.type)}fillClientCapabilities(e){ko(ko(e,&quot;textDocument&quot;),&quot;inlineValues&quot;).dynamicRegistration=!0,ko(ko(e,&quot;workspace&quot;),&quot;codeLens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(Eo.Proposed.InlineValuesRefreshRequest.type,async()=&gt;{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValuesProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Qh.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,u)=&gt;{if(mu.$DocumentSelector.skipCellTextDocument(t,o))return;let h=this._client,g=(C,R,E,I)=&gt;{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(C),viewPort:h.code2ProtocolConverter.asRange(R),context:h.code2ProtocolConverter.asInlineValuesContext(E)};return h.sendRequest(Eo.Proposed.InlineValuesRequest.type,F,I).then(A=&gt;h.protocol2CodeConverter.asInlineValues(A),A=&gt;h.handleFailedRequest(Eo.Proposed.InlineValuesRequest.type,I,A,null))},p=h.clientOptions.middleware;return p.provideInlineValues?p.provideInlineValues(o,s,a,u,g):g(o,s,a,u)}};return[Qh.languages.registerInlineValuesProvider(mu.$DocumentSelector.asTextDocumentFilters(t),i),{provider:i,onDidChangeInlineValues:r}]}};Oo.InlineValueFeature=vu});var tp=q(Lo=&gt;{&quot;use strict&quot;;Object.defineProperty(Lo,&quot;__esModule&quot;,{value:!0});Lo.NotebookDocumentSyncFeature=void 0;var ht=require(&quot;vscode&quot;),OD=Mi(),Kt=Ce(),ln=Ce(),yu=it(),xo=Or(),Zh=yn();function ep(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kt;(function(n){let e;(function(t){function r(p,C){return{version:p.version,uri:C.asUri(p.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(p,C,R){let E=Kt.Proposed.NotebookDocument.create(R.asUri(p.uri),p.notebookType,p.version,o(C,R));return Object.keys(p.metadata).length&gt;0&amp;&amp;(E.metadata=s(p.metadata)),E}t.asNotebookDocument=i;function o(p,C){return p.map(R=&gt;a(R,C))}t.asNotebookCells=o;function s(p){return h(new Set,p)}t.asMetadata=s;function a(p,C){let R=Kt.Proposed.NotebookCell.create(u(p.kind),C.asUri(p.document.uri));return Object.keys(p.metadata).length&gt;0&amp;&amp;(R.metadata=s(p.metadata)),p.executionSummary!==void 0&amp;&amp;Zh.number(p.executionSummary.executionOrder)&amp;&amp;Zh.boolean(p.executionSummary.success)&amp;&amp;(R.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),R}t.asNotebookCell=a;function u(p){switch(p){case ht.NotebookCellKind.Markup:return Kt.Proposed.NotebookCellKind.Markup;case ht.NotebookCellKind.Code:return Kt.Proposed.NotebookCellKind.Code}}function h(p,C){if(p.has(C))throw new Error(&quot;Can't deep copy cyclic structures.&quot;);if(Array.isArray(C)){let R=[];for(let E of C)if(E!==null&amp;&amp;typeof E==&quot;object&quot;||Array.isArray(E))R.push(h(p,E));else{if(E instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);R.push(E)}return R}else{let R=Object.keys(C),E=Object.create(null);for(let I of R){let F=C[I];if(F!==null&amp;&amp;typeof F==&quot;object&quot;||Array.isArray(F))E[I]=h(p,F);else{if(F instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);E[I]=F}}return E}}function g(p,C){let R=C.asChangeTextDocumentParams(p);return{document:R.textDocument,changes:R.contentChanges}}t.asTextContentChange=g})(e=n.c2p||(n.c2p={}))})(kt||(kt={}));var Cu;(function(n){function e(t,r,i){let o=t.length,s=r.length,a=0;for(;a&lt;s&amp;&amp;a&lt;o&amp;&amp;Kt.Proposed.NotebookCell.equals(t[a],r[a],i);)a++;if(a&lt;s&amp;&amp;a&lt;o){let u=o-1,h=s-1;for(;u&gt;=0&amp;&amp;h&gt;=0&amp;&amp;Kt.Proposed.NotebookCell.equals(t[u],r[h],i);)u--,h--;let g=u+1-a,p=a===h+1?void 0:r.slice(a,h+1);return p!==void 0?{start:a,deleteCount:g,cells:p}:{start:a,deleteCount:g}}else return a&lt;s?{start:a,deleteCount:0,cells:r.slice(a)}:a&lt;o?{start:a,deleteCount:o-a}:void 0}n.computeDiff=e})(Cu||(Cu={}));var No;(function(n){function e(t,r){if(t.notebookType!==void 0&amp;&amp;r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&amp;&amp;i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new OD.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(No||(No={}));var Io;(function(n){function e(t,r,i){if(i===&quot;cellContent&quot;&amp;&amp;!yu.$DocumentSelector.matchForDocumentSync(t.cellDocumentSelector,r.document)||i===&quot;notebook&quot;&amp;&amp;!yu.$DocumentSelector.matchForProvider(t.cellDocumentSelector,r.document))return!1;let o=r.notebook;for(let s of t.notebookDocumentSelector)if(s.notebookDocumentFilter!==void 0&amp;&amp;No.matchNotebook(s.notebookDocumentFilter,o))return!0;return!1}n.match=e})(Io||(Io={}));var Fo;(function(n){function e(t,r){return{cells:t,uris:new Set(r.map(i=&gt;i.document.uri.toString()))}}n.create=e})(Fo||(Fo={}));var Ri=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.cellExecutionState=new Map,this.notebookDidOpen=new Set,this.disposables=[],ht.workspace.onDidOpenNotebookDocument(r=&gt;{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ht.notebooks.onDidChangeNotebookDocumentMetadata(r=&gt;this.notebookDocumentMetadataChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCells(r=&gt;this.cellStructureChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeCellMetadata(r=&gt;this.cellMetaDataChanged(r.cell.notebook,r.cell),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCellExecutionState(r=&gt;this.cellExecutionStateChanged(r),void 0,this.disposables),this.options.save===!0&amp;&amp;ht.notebooks.onDidSaveNotebookDocument(r=&gt;this.didSave(r),void 0,this.disposables),ht.workspace.onDidCloseNotebookDocument(r=&gt;{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}get mode(){return&quot;notebook&quot;}handles(e){return Io.match(this.options,e,this.mode)}didOpenNotebookCellDocument(e,t){if(!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.getMatchingCells(e,[t]),o=i!==void 0&amp;&amp;i[0]===t;if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(o&amp;&amp;s)return;this.cellStructureChanged(e,r)}else{if(!o)return;this.cellStructureChanged(e,r)}}didChangeCellTextDocument(e,t){!yu.$DocumentSelector.matchForProvider(this.options.cellDocumentSelector,t.document)||this.doSendChange(e,{cells:{textContent:[kt.c2p.asTextContentChange(t,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=null,r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)this.cellStructureChanged(e,r);else{let i=t??this.getMatchingCells(e);if(i===void 0)return;this.doSendOpen(e,i,o=&gt;{this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o.cells,i))}).catch(()=&gt;{})}}notebookDocumentMetadataChanged(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendChange(e,{metadata:kt.c2p.asMetadata(e.metadata)}).catch(()=&gt;{})}cellStructureChanged(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0){let r=this.getMatchingCells(e);if(r===void 0)return;this.didOpen(e,r,t)}else{let r=this.getMatchingCells(e);if(r===void 0){this.didClose(e,t);return}let i=t.cells,o=kt.c2p.asNotebookCells(r,this.client.code2ProtocolConverter),s=Cu.computeDiff(t.cells,o,!1);if(s===void 0)return;let a=s.deleteCount===0?new Set:new Set(i.slice(s.start,s.start+s.deleteCount).map(p=&gt;p.document)),u=s.cells===void 0?new Set:new Set(s.cells.map(p=&gt;p.document));for(let p of Array.from(a.values()))u.has(p)&amp;&amp;(a.delete(p),u.delete(p));let h=[],g=[];if(a.size&gt;0||u.size&gt;0){let p=new Map(r.map(C=&gt;[this.client.code2ProtocolConverter.asUri(C.document.uri),C]));for(let C of u.values()){let R=p.get(C);R!==void 0&amp;&amp;h.push(this.client.code2ProtocolConverter.asTextDocumentItem(R.document))}for(let C of a.values())g.push({uri:C})}this.doSendChange(e,{cells:{structure:{array:s,didClose:g.length&gt;0?g:void 0,didOpen:h.length&gt;0?h:void 0}}}).catch(()=&gt;{}),this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o,r))}}cellMetaDataChanged(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0||!r.uris.has(t.document.uri.toString()))return;let i=kt.c2p.asNotebookCell(t,this.client.code2ProtocolConverter);this.doSendChange(e,{cells:{data:[i]}}).catch(()=&gt;{})}cellExecutionStateChanged(e){if(e.state===ht.NotebookCellExecutionState.Pending)return;let t=e.cell.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0)return;let i=e.cell.document.uri.toString();!r.uris.has(i)||(e.state===ht.NotebookCellExecutionState.Executing&amp;&amp;this.cellExecutionState.set(e.cell.document.uri.toString(),e.state),e.state===ht.NotebookCellExecutionState.Idle&amp;&amp;this.cellExecutionState.has(i)&amp;&amp;(this.cellExecutionState.delete(i),this.doSendChange(t,{cells:{data:[kt.c2p.asNotebookCell(e.cell,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})))}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendSave(e).catch(()=&gt;{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=&gt;t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=&gt;{}),this.notebookSyncInfo.delete(e.uri.toString())}getMatchingCells(e,t=e.getCells()){if(this.options.notebookDocumentSelector!==void 0){for(let r of this.options.notebookDocumentSelector)if(r.notebookDocumentFilter===void 0){if(r.cellSelector===void 0)return;let i=this.filterCells(t,r.cellSelector);return i.length===0?void 0:i}else if(No.matchNotebook(r.notebookDocumentFilter,e))return r.cellSelector===void 0?t:this.filterCells(t,r.cellSelector)}}filterCells(e,t){return e.filter(r=&gt;{let i=r.document.languageId;return t.some(o=&gt;i===o.language)})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t,r){let i=(s,a)=&gt;{let u=kt.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),h=a.map(p=&gt;this.client.code2ProtocolConverter.asTextDocumentItem(p.document)),g=this.client.sendNotification(Kt.Proposed.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:h}).catch(p=&gt;{throw this.client.error(&quot;Sending DidOpenNotebookDocumentNotification failed&quot;,p),p});return r&amp;&amp;r(u),g},o=this.client.clientOptions.middleware?.notebooks;return o?.didOpen!==void 0?o.didOpen(e,t,i):i(e,t)}async sendDidChangeNotebookDocument(e,t){let r=Object.create(null);if(t.metadata&amp;&amp;(r.metadata=kt.c2p.asMetadata(e.metadata)),t.cells!==void 0){let i=Object.create(null),o=t.cells;o.structure&amp;&amp;(i.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:o.structure.array.cells!==void 0?o.structure.array.cells.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter)):void 0},didOpen:o.structure.didOpen!==void 0?o.structure.didOpen.map(s=&gt;this.client.code2ProtocolConverter.asOpenTextDocumentParams(s.document).textDocument):void 0,didClose:o.structure.didClose!==void 0?o.structure.didClose.map(s=&gt;this.client.code2ProtocolConverter.asCloseTextDocumentParams(s.document).textDocument):void 0}),o.data!==void 0&amp;&amp;(i.data=o.data.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter))),o.textContent!==void 0&amp;&amp;(i.textContent=o.textContent.map(s=&gt;kt.c2p.asTextContentChange(s,this.client.code2ProtocolConverter))),Object.keys(i).length&gt;0&amp;&amp;(r.cells=i)}if(Object.keys(r).length&gt;0)return this.doSendChange(e,r)}async doSendChange(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidChangeNotebookDocumentNotification.type,{notebookDocument:kt.c2p.asVersionedNotebookDocumentIdentifier(o,this.client.code2ProtocolConverter),change:s}).catch(a=&gt;{this.client.error(&quot;Sending DidChangeNotebookDocumentNotification failed&quot;,a)}),i=this.client.clientOptions.middleware?.notebooks;return i?.didChange!==void 0?i?.didChange(e,t,r):r(e,t)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=i=&gt;this.client.sendNotification(Kt.Proposed.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}}).catch(o=&gt;{throw this.client.error(&quot;Sending DidSaveNotebookDocumentNotification failed&quot;,o),o}),r=this.client.clientOptions.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidSelectNotebookController(e,t,r){let i=(s,a,u)=&gt;this.client.sendNotification(Kt.Proposed.DidSelectNotebookControllerNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},controller:a,selected:u}).catch(h=&gt;{throw this.client.error(&quot;Sending DidSelectNotebookControllerNotification failed&quot;,h),h}),o=this.client.clientOptions.middleware?.notebooks;return o?.didSelectNotebookController!==void 0?o.didSelectNotebookController(e,t,r,i):i(e,t,r)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=&gt;this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))}).catch(a=&gt;{throw this.client.error(&quot;Sending DidCloseNotebookDocumentNotification failed&quot;,a),a}),i=this.client.clientOptions.middleware?.notebooks;return i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}},Ru=class{constructor(e,t){if(this.client=e,this.options=t,t.cellDocumentSelector.length&gt;0){let r=xo.generateUuid();this.client.getFeature(ln.DidOpenTextDocumentNotification.method).register({id:r,registerOptions:{documentSelector:t.cellDocumentSelector}});let i=xo.generateUuid();this.client.getFeature(ln.DidChangeTextDocumentNotification.method).register({id:i,registerOptions:{documentSelector:t.cellDocumentSelector,syncKind:ln.TextDocumentSyncKind.Incremental}});let o=xo.generateUuid();this.client.getFeature(ln.DidCloseTextDocumentNotification.method).register({id:o,registerOptions:{documentSelector:t.cellDocumentSelector}}),this.registrations={open:r,change:i,close:o}}}get mode(){return&quot;cellContent&quot;}handles(e){return Io.match(this.options,e,this.mode)}dispose(){this.registrations!==void 0&amp;&amp;(this.client.getFeature(ln.DidOpenTextDocumentNotification.method).unregister(this.registrations.open),this.client.getFeature(ln.DidChangeTextDocumentNotification.method).unregister(this.registrations.change),this.client.getFeature(ln.DidCloseTextDocumentNotification.method).unregister(this.registrations.close))}async sendDidOpenTextDocument(e){let t=this.client.getFeature(ln.DidOpenTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No open provider found for notebook cell document ${e.uri.toString()}`))}async sendDidChangeTextDocument(e){let t=this.client.getFeature(ln.DidChangeTextDocumentNotification.method).getProvider(e.document);return t!==void 0?t.send(e):Promise.reject(new Error(`No change provider found for notebook cell document ${e.document.uri.toString()}`))}async sendDidCloseTextDocument(e){let t=this.client.getFeature(ln.DidCloseTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No close provider found for notebook cell document ${e.uri.toString()}`))}},dr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Kt.Proposed.NotebookDocumentSyncRegistrationType.type,ht.workspace.onDidOpenTextDocument(t=&gt;{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.getNotebookDocument(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didOpenNotebookCellDocument(r,i)}),ht.workspace.onDidChangeTextDocument(t=&gt;{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==dr.CellScheme)return;let[i]=this.getNotebookDocument(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didChangeCellTextDocument(i,t)})}fillClientCapabilities(e){let t=ep(ep(e,&quot;notebookDocument&quot;),&quot;synchronization&quot;);t.dynamicRegistration=!0}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??xo.generateUuid();this.register({id:r,registerOptions:t})}register(e){if(e.registerOptions.mode===&quot;cellContent&quot;){let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions,!0)}),r=new Ru(this.client,t);this.registrations.set(e.id,r)}else{let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions)}),r=new Ri(this.client,t);this.registrations.set(e.id,r)}}unregister(e){let t=this.registrations.get(e);t&amp;&amp;t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}getProvider(e){for(let t of this.registrations.values())if(t.handles(e))return t}getNotebookDocument(e){let t=e.uri.toString();for(let r of ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}getNotebookCellTextDocumentFilter(e,t){let r=[];for(let i of e.notebookDocumentSelector){let o;if(i.notebookDocumentFilter!==void 0&amp;&amp;(o=t===!0?{notebookDocument:Object.assign({},i.notebookDocumentFilter,{sync:!0})}:{notebookDocument:Object.assign({},i.notebookDocumentFilter)}),i.cellSelector!==void 0){for(let s of i.cellSelector)o===void 0?r.push(t===!0?{cellLanguage:s.language,sync:!0}:{cellLanguage:s.language}):r.push(Object.assign({},o,{cellLanguage:s.language}));o=void 0}else o!==void 0&amp;&amp;r.push(o)}return r}};Lo.NotebookDocumentSyncFeature=dr;dr.CellScheme=&quot;vscode-notebook-cell&quot;});var Su=q(fr=&gt;{&quot;use strict&quot;;Object.defineProperty(fr,&quot;__esModule&quot;,{value:!0});fr.ProposedFeatures=fr.CommonLanguageClient=void 0;var xD=it(),ND=Ph(),ID=_a(),FD=Eh(),LD=kh(),AD=Oh(),MD=Nh(),jD=Fh(),$D=Ah(),HD=Mh(),WD=$h(),KD=Hh(),Lr=Uh(),UD=Vh(),Du=class extends xD.BaseLanguageClient{constructor(e,t,r){super(e,t,r)}registerProposedFeatures(){this.registerFeatures(sp.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new ID.ConfigurationFeature(this)),this.registerFeature(new LD.TypeDefinitionFeature(this)),this.registerFeature(new FD.ImplementationFeature(this)),this.registerFeature(new ND.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&amp;&amp;this.registerFeature(new AD.WorkspaceFoldersFeature(this)),this.registerFeature(new MD.FoldingRangeFeature(this)),this.registerFeature(new jD.DeclarationFeature(this)),this.registerFeature(new $D.SelectionRangeFeature(this)),this.registerFeature(new HD.ProgressFeature(this)),this.registerFeature(new WD.CallHierarchyFeature(this)),this.registerFeature(new KD.SemanticTokensFeature(this)),this.registerFeature(new UD.LinkedEditingFeature(this)),this.registerFeature(new Lr.DidCreateFilesFeature(this)),this.registerFeature(new Lr.DidRenameFilesFeature(this)),this.registerFeature(new Lr.DidDeleteFilesFeature(this)),this.registerFeature(new Lr.WillCreateFilesFeature(this)),this.registerFeature(new Lr.WillRenameFilesFeature(this)),this.registerFeature(new Lr.WillDeleteFilesFeature(this))}};fr.CommonLanguageClient=Du;var np=Bh(),rp=Jh(),ip=Yh(),op=tp(),sp;(function(n){function e(s){return[new np.DiagnosticFeature(s),new rp.TypeHierarchyFeature(s),new ip.InlineValueFeature(s),new op.NotebookDocumentSyncFeature(s)]}n.createAll=e;function t(s){return new np.DiagnosticFeature(s)}n.createDiagnosticFeature=t;function r(s){return new rp.TypeHierarchyFeature(s)}n.createTypeHierarchyFeature=r;function i(s){return new ip.InlineValueFeature(s)}n.createInlineValueFeature=i;function o(s){return new op.NotebookDocumentSyncFeature(s)}n.createNotebookDocumentSyncFeature=o})(sp=fr.ProposedFeatures||(fr.ProposedFeatures={}))});var cp=q(Ao=&gt;{&quot;use strict&quot;;Object.defineProperty(Ao,&quot;__esModule&quot;,{value:!0});Ao.terminate=void 0;var ap=require(&quot;child_process&quot;),zD=require(&quot;path&quot;),VD=process.platform===&quot;win32&quot;,GD=process.platform===&quot;darwin&quot;,BD=process.platform===&quot;linux&quot;;function XD(n,e){if(VD)try{let i={stdio:[&quot;pipe&quot;,&quot;pipe&quot;,&quot;ignore&quot;]};return e&amp;&amp;(i.cwd=e),ap.execFileSync(&quot;taskkill&quot;,[&quot;/T&quot;,&quot;/F&quot;,&quot;/PID&quot;,n.pid.toString()],i),!0}catch{return!1}else if(BD||GD)try{var t=(0,zD.join)(__dirname,&quot;terminateProcess.sh&quot;),r=ap.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill(&quot;SIGKILL&quot;),!0}Ao.terminate=XD});var wu=q((Sb,up)=&gt;{&quot;use strict&quot;;up.exports=Ce()});var lp=q(_n=&gt;{&quot;use strict&quot;;var JD=_n&amp;&amp;_n.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),bu=_n&amp;&amp;_n.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;JD(e,n,t)};Object.defineProperty(_n,&quot;__esModule&quot;,{value:!0});bu(Ce(),_n);bu(it(),_n);bu(Su(),_n)});var pp=q(vt=&gt;{&quot;use strict&quot;;var QD=vt&amp;&amp;vt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),hp=vt&amp;&amp;vt.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;QD(e,n,t)};Object.defineProperty(vt,&quot;__esModule&quot;,{value:!0});vt.SettingMonitor=vt.LanguageClient=vt.TransportKind=void 0;var Tn=require(&quot;child_process&quot;),_u=require(&quot;fs&quot;),Tu=require(&quot;path&quot;),dp=Ed(),jn=require(&quot;vscode&quot;),Ee=yn(),YD=Su(),ZD=it(),eS=cp(),xe=wu();hp(wu(),vt);hp(lp(),vt);var fp=&quot;^1.63.0&quot;,Le;(function(n){n[n.stdio=0]=&quot;stdio&quot;,n[n.ipc=1]=&quot;ipc&quot;,n[n.pipe=2]=&quot;pipe&quot;,n[n.socket=3]=&quot;socket&quot;})(Le=vt.TransportKind||(vt.TransportKind={}));var Mn;(function(n){function e(t){let r=t;return r&amp;&amp;r.kind===Le.socket&amp;&amp;Ee.number(r.port)}n.isSocket=e})(Mn||(Mn={}));var Pu;(function(n){function e(t){return Ee.string(t.command)}n.is=e})(Pu||(Pu={}));var qu;(function(n){function e(t){return Ee.string(t.module)}n.is=e})(qu||(qu={}));var Eu;(function(n){function e(t){let r=t;return r&amp;&amp;r.writer!==void 0&amp;&amp;r.reader!==void 0}n.is=e})(Eu||(Eu={}));var ku;(function(n){function e(t){let r=t;return r&amp;&amp;r.process!==void 0&amp;&amp;typeof r.detached==&quot;boolean&quot;}n.is=e})(ku||(ku={}));var Ou=class extends YD.CommonLanguageClient{constructor(e,t,r,i,o){let s,a,u,h,g;Ee.string(t)?(s=e,a=t,u=r,h=i,g=!!o):(s=e.toLowerCase(),a=e,u=t,h=r,g=i),g===void 0&amp;&amp;(g=!1),super(s,a,h),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(p){throw Ee.string(p.message)&amp;&amp;this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=dp.parse(jn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jn.version}`);if(e.prerelease&amp;&amp;e.prerelease.length&gt;0&amp;&amp;(e.prerelease=[]),!dp.satisfies(e,fp))throw new Error(`The language client requires VS Code version ${fp} but received version ${jn.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=&gt;setTimeout(e,1e3)),this.start()):this.start()}stop(e=2e3){return super.stop(e).finally(()=&gt;{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&amp;&amp;this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=&gt;{try{process.kill(e.pid,0),(0,eS.terminate)(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&amp;&amp;(e.processId=process.pid)}createMessageTransports(e){function t(g,p){if(!g&amp;&amp;!p)return;let C=Object.create(null);return Object.keys(process.env).forEach(R=&gt;C[R]=process.env[R]),p&amp;&amp;(C.ELECTRON_RUN_AS_NODE=&quot;1&quot;,C.ELECTRON_NO_ASAR=&quot;1&quot;),g&amp;&amp;Object.keys(g).forEach(R=&gt;C[R]=g[R]),C}let r=[&quot;--debug=&quot;,&quot;--debug-brk=&quot;,&quot;--inspect=&quot;,&quot;--inspect-brk=&quot;],i=[&quot;--debug&quot;,&quot;--debug-brk&quot;,&quot;--inspect&quot;,&quot;--inspect-brk&quot;];function o(){let g=process.execArgv;return g?g.some(p=&gt;r.some(C=&gt;p.startsWith(C))||i.some(C=&gt;p===C)):!1}function s(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error(&quot;Process created without stdio streams&quot;)}let a=this._serverOptions;if(Ee.func(a))return a().then(g=&gt;{if(ZD.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Eu.is(g))return this._isDetached=!!g.detached,{reader:new xe.StreamMessageReader(g.reader),writer:new xe.StreamMessageWriter(g.writer)};{let p;return ku.is(g)?(p=g.process,this._isDetached=g.detached):(p=g,this._isDetached=!1),p.stderr.on(&quot;data&quot;,C=&gt;this.outputChannel.append(Ee.string(C)?C:C.toString(e))),{reader:new xe.StreamMessageReader(p.stdout),writer:new xe.StreamMessageWriter(p.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||o()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(g=&gt;{if(qu.is(u)&amp;&amp;u.module){let p=u,C=p.transport||Le.stdio;if(p.runtime){let R=[],E=p.options??Object.create(null);E.execArgv&amp;&amp;E.execArgv.forEach(N=&gt;R.push(N)),R.push(p.module),p.args&amp;&amp;p.args.forEach(N=&gt;R.push(N));let I=Object.create(null);I.cwd=g,I.env=t(E.env,!1);let F=this._getRuntimePath(p.runtime,g),A;if(C===Le.ipc?(I.stdio=[null,null,null,&quot;ipc&quot;],R.push(&quot;--node-ipc&quot;)):C===Le.stdio?R.push(&quot;--stdio&quot;):C===Le.pipe?(A=(0,xe.generateRandomPipeName)(),R.push(`--pipe=${A}`)):Mn.isSocket(C)&amp;&amp;R.push(`--socket=${C.port}`),R.push(`--clientProcessId=${process.pid.toString()}`),C===Le.ipc||C===Le.stdio){let N=Tn.spawn(F,R,I);return!N||!N.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(N),writer:new xe.IPCMessageWriter(N)})):Promise.resolve({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)}))}else{if(C===Le.pipe)return(0,xe.createClientPipeTransport)(A).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))});if(Mn.isSocket(C))return(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))})}}else{let R;return new Promise((E,I)=&gt;{let F=(p.args&amp;&amp;p.args.slice())??[];C===Le.ipc?F.push(&quot;--node-ipc&quot;):C===Le.stdio?F.push(&quot;--stdio&quot;):C===Le.pipe?(R=(0,xe.generateRandomPipeName)(),F.push(`--pipe=${R}`)):Mn.isSocket(C)&amp;&amp;F.push(`--socket=${C.port}`),F.push(`--clientProcessId=${process.pid.toString()}`);let A=p.options??Object.create(null);if(A.env=t(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=g,A.silent=!0,C===Le.ipc||C===Le.stdio){let N=Tn.fork(p.module,F||[],A);s(N),this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),E({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):E({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)})}else C===Le.pipe?(0,xe.createClientPipeTransport)(R).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I):Mn.isSocket(C)&amp;&amp;(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I)})}}else if(Pu.is(u)&amp;&amp;u.command){let p=u,C=u.args!==void 0?u.args.slice(0):[],R,E=u.transport;if(E===Le.stdio)C.push(&quot;--stdio&quot;);else if(E===Le.pipe)R=(0,xe.generateRandomPipeName)(),C.push(`--pipe=${R}`);else if(Mn.isSocket(E))C.push(`--socket=${E.port}`);else if(E===Le.ipc)throw new Error(&quot;Transport kind ipc is not support for command executable&quot;);let I=Object.assign({},p.options);if(I.cwd=I.cwd||g,E===void 0||E===Le.stdio){let F=Tn.spawn(p.command,C,I);return!F||!F.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(F.stderr.on(&quot;data&quot;,A=&gt;this.outputChannel.append(Ee.string(A)?A:A.toString(e))),this._serverProcess=F,this._isDetached=!!I.detached,Promise.resolve({reader:new xe.StreamMessageReader(F.stdout),writer:new xe.StreamMessageWriter(F.stdin)}))}else{if(E===Le.pipe)return(0,xe.createClientPipeTransport)(R).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))});if(Mn.isSocket(E))return(0,xe.createClientSocketTransport)(E.port).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))})}}return Promise.reject(new Error(&quot;Unsupported server configuration &quot;+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Tu.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Tu.join(r,e);if(_u.existsSync(i))return i}if(t!==void 0){let i=Tu.join(t,e);if(_u.existsSync(i))return i}return e}_mainGetRootPath(){let e=jn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}_getServerWorkingDir(e){let t=e&amp;&amp;e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=&gt;{_u.lstat(t,(i,o)=&gt;{r(!i&amp;&amp;o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return&quot;en&quot;;let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!=&quot;string&quot;?&quot;en&quot;:t.locale}};vt.LanguageClient=Ou;var xu=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jn.Disposable(()=&gt;{this._client.needsStop()&amp;&amp;this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf(&quot;.&quot;),t=e&gt;=0?this._setting.substr(0,e):this._setting,r=e&gt;=0?this._setting.substr(e+1):void 0,i=r?jn.workspace.getConfiguration(t).get(r,!1):jn.workspace.getConfiguration(t);i&amp;&amp;this._client.needsStart()?this._client.start():!i&amp;&amp;this._client.needsStop()&amp;&amp;this._client.stop()}};vt.SettingMonitor=xu});var mp=q((_b,gp)=&gt;{&quot;use strict&quot;;gp.exports=pp()});var rS={};_p(rS,{activate:()=&gt;tS,activateInlayHints:()=&gt;yp,deactivate:()=&gt;nS});module.exports=Pp(rS);var Ut=require(&quot;vscode&quot;),vp=Tp(mp()),Di;async function tS(n){let e=Ut.window.createOutputChannel(&quot;Hexpat Language Server trace&quot;),r={command:process.env.HEXPAT_SERVER_PATH||&quot;hexpat-language-server&quot;,options:{env:{...process.env,RUST_LOG:&quot;debug&quot;}}},i={run:r,debug:r},o={documentSelector:[{scheme:&quot;file&quot;,language:&quot;hexpat&quot;}],synchronize:{fileEvents:Ut.workspace.createFileSystemWatcher(&quot;**/.clientrc&quot;)},traceOutputChannel:e};Di=new vp.LanguageClient(&quot;hexpat-language-server&quot;,&quot;hexpat language server&quot;,i,o),yp(n),Di.start()}function nS(){if(!!Di)return Di.stop()}function yp(n){let e={hintsProvider:null,updateHintsEventEmitter:new Ut.EventEmitter,async onConfigChange(){this.dispose();let t=this.updateHintsEventEmitter.event;this.hintsProvider=Ut.languages.registerInlayHintsProvider({scheme:&quot;file&quot;,language:&quot;hexpat&quot;},new class{constructor(){this.onDidChangeInlayHints=t}resolveInlayHint(r,i){return{label:r.label,...r}}async provideInlayHints(r,i,o){let s=await Di.sendRequest(&quot;custom/inlay_hint&quot;,{path:r.uri.toString()}).catch(a=&gt;null);return s==null?[]:s.map(a=&gt;{let[u,h,g]=a,p=r.positionAt(u);return{position:r.positionAt(h),paddingLeft:!0,label:[{value:g,location:new Ut.Location(r.uri,p)}]}})}})},onDidChangeTextDocument({contentChanges:t,document:r}){},dispose(){var t;(t=this.hintsProvider)==null||t.dispose(),this.hintsProvider=null,this.updateHintsEventEmitter.dispose()}};Ut.workspace.onDidChangeConfiguration(e.onConfigChange,e,n.subscriptions),Ut.workspace.onDidChangeTextDocument(e.onDidChangeTextDocument,e,n.subscriptions),e.onConfigChange().catch(console.error)}0&amp;&amp;(module.exports={activate,activateInlayHints,deactivate});
</failure>
		</testcase>
		<testcase name="javascript.lang.security.audit.path-traversal.path-join-resolve-traversal.path-join-resolve-traversal" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="39">
			<failure type="WARNING" message="Detected possible user input going into a `path.join` or `path.resolve` function. This could possibly lead to a path traversal vulnerability,  where the attacker can access arbitrary files stored in the file system. Instead, be sure to sanitize or validate user input first.">`+t.data.toString():&quot;&quot;}`}return e instanceof Error?De.string(e.stack)?e.stack:e.message:De.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Info&amp;&amp;this.showNotificationMessage(y.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Warn&amp;&amp;this.showNotificationMessage(y.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),(r===&quot;force&quot;||r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Error)&amp;&amp;this.showNotificationMessage(y.MessageType.Error,e)}showNotificationMessage(e,t){t=t??&quot;A request has failed. See the output for more information.&quot;,(e===y.MessageType.Error?K.window.showErrorMessage:e===y.MessageType.Warning?K.window.showWarningMessage:K.window.showInformationMessage)(t,&quot;Go to output&quot;).then(i=&gt;{i!==void 0&amp;&amp;this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&amp;&amp;this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&amp;&amp;e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&amp;&amp;this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===qe.Initial||this.state===qe.Stopping||this.state===qe.Stopped}needsStop(){return this.state===qe.Starting||this.state===qe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===qe.Running&amp;&amp;!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&amp;&amp;(this._onReady=new Promise((e,t)=&gt;{this._onReadyCallbacks=new ao(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?K.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):K.languages.createDiagnosticCollection()),this.state=qe.Starting,this.resolveConnection().then(e=&gt;(e.onLogMessage(t=&gt;{switch(t.type){case y.MessageType.Error:this.error(t.message,void 0,!1);break;case y.MessageType.Warning:this.warn(t.message,void 0,!1);break;case y.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=&gt;{switch(t.type){case y.MessageType.Error:K.window.showErrorMessage(t.message);break;case y.MessageType.Warning:K.window.showWarningMessage(t.message);break;case y.MessageType.Info:K.window.showInformationMessage(t.message);break;default:K.window.showInformationMessage(t.message)}}),e.onRequest(y.ShowMessageRequest.type,t=&gt;{let r;switch(t.type){case y.MessageType.Error:r=K.window.showErrorMessage;break;case y.MessageType.Warning:r=K.window.showWarningMessage;break;case y.MessageType.Info:r=K.window.showInformationMessage;break;default:r=K.window.showInformationMessage}let i=t.actions||[];return r(t.message,...i)}),e.onTelemetry(t=&gt;{this._telemetryEmitter.fire(t)}),e.onRequest(y.ShowDocumentRequest.type,async t=&gt;{let r=async o=&gt;{let s=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await K.env.openExternal(s)};{let a={};return o.selection!==void 0&amp;&amp;(a.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?a.preserveFocus=!0:o.takeFocus===!0&amp;&amp;(a.preserveFocus=!1),await K.window.showTextDocument(s,a),{success:!0}}}catch{return{success:!0}}},i=this._clientOptions.middleware.window?.showDocument;return i!==void 0?i(t,r):r(t)}),e.listen(),this.initialize(e))).catch(e=&gt;{this.state=qe.StartFailed,this._onReadyCallbacks.reject(e),this.error(`${this._name} client: couldn't create connection to server`,e,&quot;force&quot;)}),new K.Disposable(()=&gt;{this.needsStop()&amp;&amp;this.stop().catch(e=&gt;{this.error(&quot;Stopping server failed.&quot;,e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:K.env.appName,version:K.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(K.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:De.func(t)?t():t,trace:y.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=Se.generateUuid(),a=new lD.ProgressPart(e,s);return o.workDoneToken=s,this.doInitialize(e,o).then(u=&gt;(a.done(),u),u=&gt;{throw a.cancel(),u})}else return this.doInitialize(e,o)}doInitialize(e,t){return e.initialize(t).then(r=&gt;{this._resolvedConnection=e,this._initializeResult=r,this.state=qe.Running;let i;return De.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===y.TextDocumentSyncKind.None?i={openClose:!1,change:y.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&amp;&amp;r.capabilities.textDocumentSync!==null&amp;&amp;(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=&gt;this.handleDiagnostics(o)),e.onRequest(y.RegistrationRequest.type,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(&quot;client/registerFeature&quot;,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(y.UnregistrationRequest.type,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(&quot;client/unregisterFeature&quot;,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(y.ApplyWorkspaceEditRequest.type,o=&gt;this.handleApplyWorkspaceEdit(o)),e.sendNotification(y.InitializedNotification.type,{}).then(()=&gt;(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r))}).then(void 0,r=&gt;{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof y.ResponseError&amp;&amp;r.data&amp;&amp;r.data.retry?K.window.showErrorMessage(r.message,{title:&quot;Retry&quot;,id:&quot;retry&quot;}).then(i=&gt;{i&amp;&amp;i.id===&quot;retry&quot;?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&amp;&amp;r.message&amp;&amp;K.window.showErrorMessage(r.message),this.error(&quot;Server initialization failed.&quot;,r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=K.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}async stop(e=2e3){if(await this.onReady(),this._initializeResult=void 0,!this._connectionPromise)return this.state=qe.Stopped,Promise.resolve();if(this.state===qe.Stopping&amp;&amp;this._onStop)return this._onStop;this.state=qe.Stopping,this.cleanUp(!1);let t=new Promise(i=&gt;{(0,y.RAL)().timer.setTimeout(i,e)}),r=this.resolveConnection().then(i=&gt;i.shutdown().then(()=&gt;i.exit().then(()=&gt;i)));return this._onStop=Promise.race([t,r]).then(i=&gt;{if(i!==void 0)i.end(),i.dispose();else throw this.error(&quot;Stopping server timed out&quot;,void 0,!1),new Error(&quot;Stopping the server timed out&quot;)},i=&gt;{throw this.error(&quot;Stopping server failed&quot;,i,!1),i}).finally(()=&gt;{this.state=qe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})}cleanUp(e=!0,t=!0){this._fileEvents=[],this._fileEventDelayer.cancel(),this._listeners&amp;&amp;(this._listeners.forEach(r=&gt;r.dispose()),this._listeners=void 0),this._providers&amp;&amp;(this._providers.forEach(r=&gt;r.dispose()),this._providers=void 0),this._syncedDocuments&amp;&amp;this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=&gt;i[1]).reverse())r.dispose();e&amp;&amp;this.cleanUpChannel(),t&amp;&amp;this._diagnostics&amp;&amp;(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&amp;&amp;this._disposeOutputChannel&amp;&amp;(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=&gt;{await t.onReady();let s=await t.resolveConnection(),a=Promise.resolve();return t.isConnectionActive()&amp;&amp;(t.forceDocumentSync(),a=s.didChangeWatchedFiles({changes:t._fileEvents})),t._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=&gt;{t.error(&quot;Notify file events failed.&quot;,o)})}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&amp;&amp;(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(y.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,r,(o,s)=&gt;this.setDiagnostics(o,s)):this.setDiagnostics(t,r)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(r,i,o)=&gt;{this.handleConnectionError(r,i,o)},t=()=&gt;{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||&quot;utf8&quot;).then(r=&gt;dD(r.reader,r.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===qe.Stopped)return;try{this._resolvedConnection&amp;&amp;this._resolvedConnection.dispose()}catch{}let e={action:sr.DoNotRestart};if(this.state!==qe.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e.action===sr.DoNotRestart?(this.error(e.message??&quot;Connection to server got closed. Server will not be restarted.&quot;,void 0,&quot;force&quot;),this.state===qe.Starting?(this._onReadyCallbacks.reject(new Error(&quot;Connection to server got closed. Server will not be restarted.&quot;)),this.state=qe.StartFailed):this.state=qe.Stopped,this.cleanUp(!1,!0)):e.action===sr.Restart&amp;&amp;(this.info(e.message??&quot;Connection to server got closed. Server will restart.&quot;),this.cleanUp(!1,!1),this.state=qe.Initial,this.start())}handleConnectionError(e,t,r){let i=this._clientOptions.errorHandler.error(e,t,r);i.action===so.Shutdown&amp;&amp;(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,&quot;force&quot;),this.stop().catch(o=&gt;{this.error(&quot;Stopping server failed&quot;,o,!1)}))}hookConfigurationChanged(e){K.workspace.onDidChangeConfiguration(()=&gt;{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let r=K.workspace.getConfiguration(this._id),i=y.Trace.Off,o=y.TraceFormat.Text;if(r){let s=r.get(&quot;trace.server&quot;,&quot;off&quot;);typeof s==&quot;string&quot;?i=y.Trace.fromString(s):(i=y.Trace.fromString(r.get(&quot;trace.server.verbosity&quot;,&quot;off&quot;)),o=y.TraceFormat.fromString(r.get(&quot;trace.server.format&quot;,&quot;text&quot;)))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;De.array(t)?r=t:r=[t],r&amp;&amp;this._dynamicFeatures.get(y.DidChangeWatchedFilesNotification.type.method).registerRaw(Se.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),rc.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Pc(this)),this.registerFeature(new ic(this,this._syncedDocuments)),this.registerFeature(new sc(this)),this.registerFeature(new ac(this)),this.registerFeature(new cc(this)),this.registerFeature(new uc(this)),this.registerFeature(new oc(this,this._syncedDocuments)),this.registerFeature(new lc(this,e=&gt;this.notifyFileEvent(e))),this.registerFeature(new fc(this)),this.registerFeature(new hc(this)),this.registerFeature(new pc(this)),this.registerFeature(new gc(this)),this.registerFeature(new mc(this)),this.registerFeature(new vc(this)),this.registerFeature(new yc(this)),this.registerFeature(new Cc(this)),this.registerFeature(new Rc(this)),this.registerFeature(new Dc(this)),this.registerFeature(new Sc(this)),this.registerFeature(new wc(this)),this.registerFeature(new bc(this)),this.registerFeature(new _c(this)),this.registerFeature(new Tc(this)),this.registerFeature(new qc(this))}fillInitializeParams(e){for(let t of this._features)De.func(t.fillInitializeParams)&amp;&amp;t.fillInitializeParams(e)}computeClientCapabilities(){let e={};V(e,&quot;workspace&quot;).applyEdit=!0;let t=V(V(e,&quot;workspace&quot;),&quot;workspaceEdit&quot;);t.documentChanges=!0,t.resourceOperations=[y.ResourceOperationKind.Create,y.ResourceOperationKind.Rename,y.ResourceOperationKind.Delete],t.failureHandling=y.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=V(V(e,&quot;textDocument&quot;),&quot;publishDiagnostics&quot;);r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[y.DiagnosticTag.Unnecessary,y.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=V(e,&quot;window&quot;),o=V(i,&quot;showMessage&quot;);o.messageActionItem={additionalPropertiesSupport:!0};let s=V(i,&quot;showDocument&quot;);s.support=!0;let a=V(e,&quot;general&quot;);a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ar.RequestsToCancelOnContentModified)},a.regularExpressions={engine:&quot;ECMAScript&quot;,version:&quot;ES2020&quot;},a.markdown={parser:&quot;marked&quot;,version:&quot;1.1.0&quot;},this._clientOptions.markdown.supportHtml&amp;&amp;(a.markdown.allowedTags=[&quot;ul&quot;,&quot;li&quot;,&quot;p&quot;,&quot;code&quot;,&quot;blockquote&quot;,&quot;ol&quot;,&quot;h1&quot;,&quot;h2&quot;,&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;hr&quot;,&quot;em&quot;,&quot;pre&quot;,&quot;table&quot;,&quot;thead&quot;,&quot;tbody&quot;,&quot;tr&quot;,&quot;th&quot;,&quot;td&quot;,&quot;div&quot;,&quot;del&quot;,&quot;a&quot;,&quot;strong&quot;,&quot;br&quot;,&quot;img&quot;,&quot;span&quot;]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(o===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let s=i.registerOptions??{};s.documentSelector=s.documentSelector??this._clientOptions.documentSelector;let a={id:i.id,registerOptions:s};try{o.register(a)}catch(u){r(u);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,r=new Map;K.workspace.textDocuments.forEach(o=&gt;r.set(o.uri.toString(),o));let i=!1;if(t.documentChanges){for(let o of t.documentChanges)if(y.TextDocumentEdit.is(o)&amp;&amp;o.textDocument.version&amp;&amp;o.textDocument.version&gt;=0){let s=r.get(o.textDocument.uri);if(s&amp;&amp;s.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):De.asPromise(K.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=&gt;({applied:o})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof y.ResponseError){if(r.code===y.LSPErrorCodes.RequestCancelled||r.code===y.LSPErrorCodes.ServerCancelled){if(t!==void 0&amp;&amp;t.isCancellationRequested)return i;throw r.data!==void 0?new co(r.data):new K.CancellationError}else if(r.code===y.LSPErrorCodes.ContentModified){if(ar.RequestsToCancelOnContentModified.has(e.method))throw new K.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};ye.BaseLanguageClient=ar;ar.RequestsToCancelOnContentModified=new Set([y.SemanticTokensRequest.method,y.SemanticTokensRangeRequest.method,y.SemanticTokensDeltaRequest.method])});var Ph=q(lo=&gt;{&quot;use strict&quot;;Object.defineProperty(lo,&quot;__esModule&quot;,{value:!0});lo.ColorProviderFeature=void 0;var uo=require(&quot;vscode&quot;),mi=Ce(),Ec=it();function Th(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kc=class extends Ec.TextDocumentFeature{constructor(e){super(e,mi.DocumentColorRequest.type)}fillClientCapabilities(e){Th(Th(e,&quot;textDocument&quot;),&quot;colorProvider&quot;).dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=&gt;{let a=this._client,u=(g,p,C)=&gt;{let R={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p.document),range:a.code2ProtocolConverter.asRange(p.range)};return a.sendRequest(mi.ColorPresentationRequest.type,R,C).then(this.asColorPresentations.bind(this),E=&gt;a.handleFailedRequest(mi.ColorPresentationRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,o,s,u):u(i,o,s)},provideDocumentColors:(i,o)=&gt;{if(Ec.$DocumentSelector.skipCellTextDocument(t,i))return;let s=this._client,a=(h,g)=&gt;{let p={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(h)};return s.sendRequest(mi.DocumentColorRequest.type,p,g).then(this.asColorInformations.bind(this),C=&gt;s.handleFailedRequest(mi.ColorPresentationRequest.type,g,C,null))},u=s.clientOptions.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,o,a):a(i,o)}};return[uo.languages.registerColorProvider(Ec.$DocumentSelector.asTextDocumentFilters(t),r),r]}asColor(e){return new uo.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=&gt;new uo.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=&gt;{let r=new uo.ColorPresentation(t.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),r}):[]}};lo.ColorProviderFeature=kc});var Eh=q(fo=&gt;{&quot;use strict&quot;;Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0});fo.ImplementationFeature=void 0;var gD=require(&quot;vscode&quot;),Oc=Ce(),xc=it();function qh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Nc=class extends xc.TextDocumentFeature{constructor(e){super(e,Oc.ImplementationRequest.type)}fillClientCapabilities(e){let t=qh(qh(e,&quot;textDocument&quot;),&quot;implementation&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=&gt;{if(xc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Oc.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Oc.ImplementationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideImplementation?h.provideImplementation(i,o,s,u):u(i,o,s)}};return[gD.languages.registerImplementationProvider(xc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};fo.ImplementationFeature=Nc});var kh=q(po=&gt;{&quot;use strict&quot;;Object.defineProperty(po,&quot;__esModule&quot;,{value:!0});po.TypeDefinitionFeature=void 0;var mD=require(&quot;vscode&quot;),Ic=Ce(),Fc=it();function ho(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Lc=class extends Fc.TextDocumentFeature{constructor(e){super(e,Ic.TypeDefinitionRequest.type)}fillClientCapabilities(e){ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;).dynamicRegistration=!0;let t=ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=&gt;{if(Fc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Ic.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Ic.TypeDefinitionRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,o,s,u):u(i,o,s)}};return[mD.languages.registerTypeDefinitionProvider(Fc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};po.TypeDefinitionFeature=Lc});var Oh=q(xr=&gt;{&quot;use strict&quot;;Object.defineProperty(xr,&quot;__esModule&quot;,{value:!0});xr.WorkspaceFoldersFeature=xr.arrayDiff=void 0;var vD=Or(),go=require(&quot;vscode&quot;),vi=Ce();function Ac(n,e){if(n!==void 0)return n[e]}function Mc(n,e){return n.filter(t=&gt;e.indexOf(t)&lt;0)}xr.arrayDiff=Mc;var jc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return vi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=go.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=&gt;this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(vi.WorkspaceFoldersRequest.type,o=&gt;{let s=()=&gt;{let u=go.workspace.workspaceFolders;return u===void 0?null:u.map(g=&gt;this.asProtocol(g))},a=t.clientOptions.middleware.workspace;return a&amp;&amp;a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Ac(Ac(Ac(e,&quot;workspace&quot;),&quot;workspaceFolders&quot;),&quot;changeNotifications&quot;),i;typeof r==&quot;string&quot;?i=r:r===!0&amp;&amp;(i=vD.generateUuid()),i&amp;&amp;this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&amp;&amp;e){let r=Mc(this._initialFolders,e),i=Mc(e,this._initialFolders);(i.length&gt;0||r.length&gt;0)&amp;&amp;(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&amp;&amp;(t=this.doSendEvent(e,[]));t!==void 0&amp;&amp;t.catch(r=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=&gt;this.asProtocol(i)),removed:t.map(i=&gt;this.asProtocol(i))}};return this._client.sendNotification(vi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=go.workspace.onDidChangeWorkspaceFolders(o=&gt;{let s=h=&gt;this.doSendEvent(h.added,h.removed),a=r.clientOptions.middleware.workspace;(a&amp;&amp;a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(h=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(go.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&amp;&amp;(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};xr.WorkspaceFoldersFeature=jc});var Nh=q(mo=&gt;{&quot;use strict&quot;;Object.defineProperty(mo,&quot;__esModule&quot;,{value:!0});mo.FoldingRangeFeature=void 0;var yi=require(&quot;vscode&quot;),Nr=Ce(),$c=it();function xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Ir=class extends $c.TextDocumentFeature{constructor(e){super(e,Nr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=xh(xh(e,&quot;textDocument&quot;),&quot;foldingRange&quot;);t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=&gt;{if($c.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g)};return a.sendRequest(Nr.FoldingRangeRequest.type,R,C).then(Ir.asFoldingRanges,E=&gt;a.handleFailedRequest(Nr.FoldingRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,o,s,u):u(i,o,s)}};return[yi.languages.registerFoldingRangeProvider($c.$DocumentSelector.asTextDocumentFilters(t),r),r]}static asFoldingRangeKind(e){if(e)switch(e){case Nr.FoldingRangeKind.Comment:return yi.FoldingRangeKind.Comment;case Nr.FoldingRangeKind.Imports:return yi.FoldingRangeKind.Imports;case Nr.FoldingRangeKind.Region:return yi.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=&gt;new yi.FoldingRange(t.startLine,t.endLine,Ir.asFoldingRangeKind(t.kind))):[]}};mo.FoldingRangeFeature=Ir});var Fh=q(vo=&gt;{&quot;use strict&quot;;Object.defineProperty(vo,&quot;__esModule&quot;,{value:!0});vo.DeclarationFeature=void 0;var yD=require(&quot;vscode&quot;),Hc=Ce(),Wc=it();function Ih(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Kc=class extends Wc.TextDocumentFeature{constructor(e){super(e,Hc.DeclarationRequest.type)}fillClientCapabilities(e){let t=Ih(Ih(e,&quot;textDocument&quot;),&quot;declaration&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=&gt;{if(Wc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Hc.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDeclarationResult,R=&gt;a.handleFailedRequest(Hc.DeclarationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDeclaration?h.provideDeclaration(i,o,s,u):u(i,o,s)}};return[yD.languages.registerDeclarationProvider(Wc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};vo.DeclarationFeature=Kc});var Ah=q(yo=&gt;{&quot;use strict&quot;;Object.defineProperty(yo,&quot;__esModule&quot;,{value:!0});yo.SelectionRangeFeature=void 0;var CD=require(&quot;vscode&quot;),Uc=Ce(),zc=it();function Lh(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Vc=class extends zc.TextDocumentFeature{constructor(e){super(e,Uc.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Lh(Lh(e,&quot;textDocument&quot;),&quot;selectionRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=&gt;{if(zc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositions(p)};return a.sendRequest(Uc.SelectionRangeRequest.type,R,C).then(E=&gt;a.protocol2CodeConverter.asSelectionRanges(E),E=&gt;a.handleFailedRequest(Uc.SelectionRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,o,s,u):u(i,o,s)}};return[CD.languages.registerSelectionRangeProvider(zc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};yo.SelectionRangeFeature=Vc});var Mh=q(Co=&gt;{&quot;use strict&quot;;Object.defineProperty(Co,&quot;__esModule&quot;,{value:!0});Co.ProgressFeature=void 0;var RD=Ce(),DD=ec();function SD(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Gc=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){SD(e,&quot;window&quot;).workDoneProgress=!0}initialize(){let e=this._client,t=i=&gt;{this.activeParts.delete(i)},r=i=&gt;{this.activeParts.add(new DD.ProgressPart(this._client,i.token,t))};e.onRequest(RD.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Co.ProgressFeature=Gc});var $h=q(Ro=&gt;{&quot;use strict&quot;;Object.defineProperty(Ro,&quot;__esModule&quot;,{value:!0});Ro.CallHierarchyFeature=void 0;var wD=require(&quot;vscode&quot;),cr=Ce(),Bc=it();function jh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Xc=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{if(Bc.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,a))return;let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(cr.CallHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asCallHierarchyItems(p),p=&gt;i.handleFailedRequest(cr.CallHierarchyPrepareRequest.type,h,p,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},Jc=class extends Bc.TextDocumentFeature{constructor(e){super(e,cr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=jh(jh(e,&quot;textDocument&quot;),&quot;callHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Xc(t,e);return[wD.languages.registerCallHierarchyProvider(Bc.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};Ro.CallHierarchyFeature=Jc});var Hh=q(bo=&gt;{&quot;use strict&quot;;Object.defineProperty(bo,&quot;__esModule&quot;,{value:!0});bo.SemanticTokensFeature=void 0;var Do=require(&quot;vscode&quot;),ee=Ce(),So=it(),bD=yn();function wo(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Qc=class extends So.TextDocumentFeature{constructor(e){super(e,ee.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=wo(wo(e,&quot;textDocument&quot;),&quot;semanticTokens&quot;);t.dynamicRegistration=!0,t.tokenTypes=[ee.SemanticTokenTypes.namespace,ee.SemanticTokenTypes.type,ee.SemanticTokenTypes.class,ee.SemanticTokenTypes.enum,ee.SemanticTokenTypes.interface,ee.SemanticTokenTypes.struct,ee.SemanticTokenTypes.typeParameter,ee.SemanticTokenTypes.parameter,ee.SemanticTokenTypes.variable,ee.SemanticTokenTypes.property,ee.SemanticTokenTypes.enumMember,ee.SemanticTokenTypes.event,ee.SemanticTokenTypes.function,ee.SemanticTokenTypes.method,ee.SemanticTokenTypes.macro,ee.SemanticTokenTypes.keyword,ee.SemanticTokenTypes.modifier,ee.SemanticTokenTypes.comment,ee.SemanticTokenTypes.string,ee.SemanticTokenTypes.number,ee.SemanticTokenTypes.regexp,ee.SemanticTokenTypes.operator,ee.SemanticTokenTypes.decorator],t.tokenModifiers=[ee.SemanticTokenModifiers.declaration,ee.SemanticTokenModifiers.definition,ee.SemanticTokenModifiers.readonly,ee.SemanticTokenModifiers.static,ee.SemanticTokenModifiers.deprecated,ee.SemanticTokenModifiers.abstract,ee.SemanticTokenModifiers.async,ee.SemanticTokenModifiers.modification,ee.SemanticTokenModifiers.documentation,ee.SemanticTokenModifiers.defaultLibrary],t.formats=[ee.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,wo(wo(e,&quot;workspace&quot;),&quot;semanticTokens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(ee.SemanticTokensRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=bD.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&amp;&amp;typeof e.full!=&quot;boolean&quot;&amp;&amp;e.full.delta===!0,o=new Do.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(R,E)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let I=this._client,F=I.clientOptions.middleware,A=(N,L)=&gt;{let j={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(N)};return I.sendRequest(ee.SemanticTokensRequest.type,j,L).then(X=&gt;I.protocol2CodeConverter.asSemanticTokens(X),X=&gt;I.handleFailedRequest(ee.SemanticTokensRequest.type,L,X,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(R,E,A):A(R,E)},provideDocumentSemanticTokensEdits:i?(R,E,I)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),previousResultId:j};return F.sendRequest(ee.SemanticTokensDeltaRequest.type,Re,X).then(ne=&gt;ee.SemanticTokens.is(ne)?F.protocol2CodeConverter.asSemanticTokens(ne):F.protocol2CodeConverter.asSemanticTokensEdits(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensDeltaRequest.type,X,ne,null))};return A.provideDocumentSemanticTokensEdits?A.provideDocumentSemanticTokensEdits(R,E,I,N):N(R,E,I)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(R,E,I)=&gt;{let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),range:F.code2ProtocolConverter.asRange(j)};return F.sendRequest(ee.SemanticTokensRangeRequest.type,Re,X).then(ne=&gt;F.protocol2CodeConverter.asSemanticTokens(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensRangeRequest.type,X,ne,null))};return A.provideDocumentRangeSemanticTokens?A.provideDocumentRangeSemanticTokens(R,E,I,N):N(R,E,I)}}:void 0,h=[],p=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend),C=So.$DocumentSelector.asTextDocumentFilters(t);return s!==void 0&amp;&amp;h.push(Do.languages.registerDocumentSemanticTokensProvider(C,s,p)),u!==void 0&amp;&amp;h.push(Do.languages.registerDocumentRangeSemanticTokensProvider(C,u,p)),[new Do.Disposable(()=&gt;h.forEach(R=&gt;R.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}};bo.SemanticTokensFeature=Qc});var Uh=q(St=&gt;{&quot;use strict&quot;;Object.defineProperty(St,&quot;__esModule&quot;,{value:!0});St.WillDeleteFilesFeature=St.WillRenameFilesFeature=St.WillCreateFilesFeature=St.DidDeleteFilesFeature=St.DidRenameFilesFeature=St.DidCreateFilesFeature=void 0;var Wt=require(&quot;vscode&quot;),_D=Mi(),wn=Ce(),TD=Or();function Wh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}function PD(n,e){return n[e]}function Kh(n,e,t){n[e]=t}var bn=class{constructor(e,t,r,i,o){this._filters=new Map,this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Wh(Wh(e,&quot;workspace&quot;),&quot;fileOperations&quot;);Kh(t,&quot;dynamicRegistration&quot;,!0),Kh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?PD(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:TD.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=&gt;{let i=new _D.Minimatch(r.pattern.glob,bn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}getFileType(e){return bn.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=&gt;{let s=t(o),a=s.fsPath.replace(/\\/g,&quot;/&quot;);for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&amp;&amp;h.scheme!==s.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let g=await this.getFileType(s);if(g===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(g===Wt.FileType.File&amp;&amp;h.kind===wn.FileOperationPatternKind.file||g===Wt.FileType.Directory&amp;&amp;h.kind===wn.FileOperationPatternKind.folder)return!0}else if(h.kind===wn.FileOperationPatternKind.folder&amp;&amp;await bn.getFileType(s)===Wt.FileType.Directory&amp;&amp;h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=&gt;r[s]);return{...e,files:i}}static async getFileType(e){try{return(await Wt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&amp;&amp;e.ignoreCase===!0)return{nocase:!0}}},_o=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=&gt;this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},To=class extends _o{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await bn.getFileType(e);return r&amp;&amp;this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&amp;&amp;this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}},Yc=class extends _o{constructor(e){super(e,Wt.workspace.onDidCreateFiles,wn.DidCreateFilesNotification.type,&quot;didCreate&quot;,&quot;didCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};St.DidCreateFilesFeature=Yc;var Zc=class extends To{constructor(e){super(e,Wt.workspace.onDidRenameFiles,wn.DidRenameFilesNotification.type,&quot;didRename&quot;,&quot;didRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};St.DidRenameFilesFeature=Zc;var eu=class extends To{constructor(e){super(e,Wt.workspace.onDidDeleteFiles,wn.DidDeleteFilesNotification.type,&quot;didDelete&quot;,&quot;didDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};St.DidDeleteFilesFeature=eu;var Ci=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=&gt;this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},tu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillCreateFiles,wn.WillCreateFilesRequest.type,&quot;willCreate&quot;,&quot;willCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};St.WillCreateFilesFeature=tu;var nu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillRenameFiles,wn.WillRenameFilesRequest.type,&quot;willRename&quot;,&quot;willRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};St.WillRenameFilesFeature=nu;var ru=class extends Ci{constructor(e){super(e,Wt.workspace.onWillDeleteFiles,wn.WillDeleteFilesRequest.type,&quot;willDelete&quot;,&quot;willDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};St.WillDeleteFilesFeature=ru});var Vh=q(Po=&gt;{&quot;use strict&quot;;Object.defineProperty(Po,&quot;__esModule&quot;,{value:!0});Po.LinkedEditingFeature=void 0;var qD=require(&quot;vscode&quot;),iu=Ce(),ou=it();function zh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var su=class extends ou.TextDocumentFeature{constructor(e){super(e,iu.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=zh(zh(e,&quot;textDocument&quot;),&quot;linkedEditingRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=&gt;{if(ou.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(iu.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asLinkedEditingRanges,R=&gt;a.handleFailedRequest(iu.LinkedEditingRangeRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,o,s,u):u(i,o,s)}};return[qD.languages.registerLinkedEditingRangeProvider(ou.$DocumentSelector.asTextDocumentFilters(t),r),r]}};Po.LinkedEditingFeature=su});var Bh=q(ur=&gt;{&quot;use strict&quot;;Object.defineProperty(ur,&quot;__esModule&quot;,{value:!0});ur.DiagnosticFeature=ur.vsdiag=void 0;var He=require(&quot;vscode&quot;),$e=Ce(),ED=Or(),Fr=it();function Gh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var un;(function(n){let e;(function(t){t.full=&quot;full&quot;,t.unChanged=&quot;unChanged&quot;})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(un=ur.vsdiag||(ur.vsdiag={}));var ft;(function(n){n.active=&quot;open&quot;,n.reschedule=&quot;reschedule&quot;,n.outDated=&quot;drop&quot;})(ft||(ft={}));var au=class{constructor(){this.open=new Set;let e=()=&gt;{if(this.open.clear(),He.window.tabs!==void 0)for(let t of He.window.tabs)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString());else if(He.window.openEditors!==void 0)for(let t of He.window.openEditors)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString())};e(),He.window.onDidChangeTabs!==void 0?this.disposable=He.window.onDidChangeTabs(e):He.window.onDidChangeOpenEditors!==void 0?this.disposable=He.window.onDidChangeOpenEditors(e):this.disposable={dispose:()=&gt;{}}}dispose(){this.disposable.dispose()}isActive(e){return He.window.activeTextEditor?.document===e}isVisible(e){return this.open.has(e.uri.toString())}},Et;(function(n){n[n.document=1]=&quot;document&quot;,n[n.workspace=2]=&quot;workspace&quot;})(Et||(Et={}));var cu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===Et.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r]:[t.uri.toString(),t.uri,t.version],u=i.get(o);return u===void 0&amp;&amp;(u={document:s,pulledVersion:a,resultId:void 0},i.set(o,u)),u}update(e,t,r,i){let o=e===Et.document?this.documentPullStates:this.workspacePullStates,[s,a,u,h]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r,i]:[t.uri.toString(),t.uri,t.version,r],g=o.get(s);g===void 0?(g={document:a,pulledVersion:u,resultId:h},o.set(s,g)):(g.pulledVersion=u,g.resultId=h)}unTrack(e,t){(e===Et.document?this.documentPullStates:this.workspacePullStates).delete(t.uri.toString())}tracks(e,t){let r=typeof t==&quot;string&quot;?t:t.uri.toString();return(e===Et.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){return(e===Et.document?this.documentPullStates:this.workspacePullStates).get(t.uri.toString())?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&amp;&amp;(r=this.documentPullStates.get(t)),r.resultId!==void 0&amp;&amp;e.push({uri:t,value:r.resultId});return e}},uu=class{constructor(e,t,r){this.client=e,this.editorTracker=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new He.EventEmitter,this.provider=this.createProvider(),this.diagnostics=He.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new cu,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){this.pullAsync(e).then(()=&gt;{t&amp;&amp;t()},r=&gt;{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,r,!1)})}async pullAsync(e){let t=e.uri.toString(),r=e.version,i=this.openRequests.get(t),o=this.documentStates.track(Et.document,e);if(i===void 0){let s=new He.CancellationTokenSource;this.openRequests.set(t,{state:ft.active,version:r,textDocument:e,tokenSource:s});let a,u;try{a=await this.provider.provideDiagnostics(e,o.resultId,s.token)??{kind:un.DocumentDiagnosticReportKind.full,items:[]}}catch(h){if(h instanceof Fr.LSPCancellationError&amp;&amp;$e.Proposed.DiagnosticServerCancellationData.is(h.data)&amp;&amp;h.data.retriggerRequest===!1&amp;&amp;(u={state:ft.outDated,textDocument:e}),u===void 0&amp;&amp;h instanceof He.CancellationError)u={state:ft.reschedule,textDocument:e};else throw h}if(u=u??this.openRequests.get(t),u===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${t}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(t),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(Et.document,e);return}if(u.state===ft.outDated)return;a!==void 0&amp;&amp;(a.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;this.diagnostics.set(e.uri,a.items),o.pulledVersion=r,o.resultId=a.resultId),u.state===ft.reschedule&amp;&amp;this.pull(e)}else i.state===ft.active?(i.tokenSource.cancel(),this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})):i.state===ft.outDated&amp;&amp;this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})}cleanupPull(e){let t=e.uri.toString(),r=this.openRequests.get(t);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(t,{state:ft.reschedule,textDocument:e}):this.pull(e):(r!==void 0&amp;&amp;(r.state===ft.active&amp;&amp;r.tokenSource.cancel(),this.openRequests.set(t,{state:ft.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=&gt;{this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3)},e=&gt;{!(e instanceof Fr.LSPCancellationError)&amp;&amp;!$e.Proposed.DiagnosticServerCancellationData.is(e.data)&amp;&amp;(this.client.error(&quot;Workspace diagnostic pull failed.&quot;,e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter&lt;=5&amp;&amp;(this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&amp;&amp;(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new He.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=&gt;({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=&gt;{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;(this.documentStates.tracks(Et.document,r.uri.toString())||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(Et.workspace,r.uri.toString(),r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=&gt;{let o=(a,u,h)=&gt;{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a.uri)},previousResultId:u};return this.client.sendRequest($e.Proposed.DocumentDiagnosticRequest.type,g,h).then(p=&gt;p==null||this.isDisposed?{kind:un.DocumentDiagnosticReportKind.full,items:[]}:p.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,resultId:p.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(p.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,resultId:p.resultId},p=&gt;this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,h,p,{kind:un.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.clientOptions.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&amp;&amp;(e.provideWorkspaceDiagnostics=(t,r,i)=&gt;{let o=h=&gt;h.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:this.client.protocol2CodeConverter.asDiagnostics(h.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},s=h=&gt;{let g=[];for(let p of h)g.push({uri:this.client.code2ProtocolConverter.asUri(p.uri),value:p.value});return g},a=(h,g)=&gt;{let p=(0,ED.generateUuid)(),C=this.client.onProgress($e.Proposed.WorkspaceDiagnosticRequest.partialResult,p,E=&gt;{if(E==null){i(null);return}let I={items:[]};for(let F of E.items)I.items.push(o(F));i(I)}),R={identifier:this.options.identifier,previousResultIds:s(h),partialResultToken:p};return this.client.sendRequest($e.Proposed.WorkspaceDiagnosticRequest.type,R,g).then(E=&gt;{let I={items:[]};for(let F of E.items)I.items.push(o(F));return C.dispose(),i(I),{items:[]}},E=&gt;(C.dispose(),this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,g,E,{items:[]})))},u=this.client.clientOptions.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===ft.active&amp;&amp;t.tokenSource.cancel(),this.openRequests.set(e,{state:ft.outDated,textDocument:t.textDocument})}},lu=class{constructor(e){this.diagnosticRequestor=e,this.documents=new $e.LinkedMap}add(e){let t=e.uri.toString();this.documents.has(t)||(this.documents.set(e.uri.toString(),e,$e.Touch.Last),this.trigger())}remove(e){let t=e.uri.toString();this.documents.has(t)&amp;&amp;(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&amp;&amp;(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,$e.RAL)().timer.setInterval(()=&gt;{let e=this.documents.first;e!==void 0&amp;&amp;(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,$e.Touch.Last),e===this.endDocument&amp;&amp;this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},du=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=r.documentSelector,s=[],a=p=&gt;Fr.$DocumentSelector.matchForProvider(o,p)&amp;&amp;t.isVisible(p);this.diagnosticRequestor=new uu(e,t,r),this.backgroundScheduler=new lu(this.diagnosticRequestor);let u=p=&gt;{!a(p)||!r.interFileDependencies||this.activeTextDocument===p||this.backgroundScheduler.add(p)};this.activeTextDocument=He.window.activeTextEditor?.document,He.window.onDidChangeActiveTextEditor(p=&gt;{let C=this.activeTextDocument;this.activeTextDocument=p?.document,C!==void 0&amp;&amp;u(C),this.activeTextDocument!==void 0&amp;&amp;this.backgroundScheduler.remove(this.activeTextDocument)});let h=e.getFeature($e.DidOpenTextDocumentNotification.method);s.push(h.onNotificationSent(p=&gt;{let C=p.original;a(C)&amp;&amp;this.diagnosticRequestor.pull(C,()=&gt;{u(C)})}));for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p,()=&gt;{u(p)});if(i.onChange){let p=e.getFeature($e.DidChangeTextDocumentNotification.method);s.push(p.onNotificationSent(async C=&gt;{let R=C.original.document;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onType))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;C.original.contentChanges.length&gt;0&amp;&amp;this.diagnosticRequestor.pull(R,()=&gt;{this.backgroundScheduler.trigger()})}))}if(i.onSave){let p=e.getFeature($e.DidSaveTextDocumentNotification.method);s.push(p.onNotificationSent(C=&gt;{let R=C.original;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onSave))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;this.diagnosticRequestor.pull(C.original,()=&gt;{this.backgroundScheduler.trigger()})}))}let g=e.getFeature($e.DidCloseTextDocumentNotification.method);s.push(g.onNotificationSent(p=&gt;{let C=p.original;this.diagnosticRequestor.cleanupPull(C),this.backgroundScheduler.remove(C)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=&gt;{for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p)}),r.workspaceDiagnostics===!0&amp;&amp;r.identifier!==&quot;da348dc5-c30a-4515-9d98-31ff3be38d14&quot;&amp;&amp;this.diagnosticRequestor.pullWorkspace(),this.disposable=He.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},fu=class extends Fr.TextDocumentFeature{constructor(e){super(e,$e.Proposed.DocumentDiagnosticRequest.type),this.editorTracker=new au}fillClientCapabilities(e){let t=Gh(Gh(e,&quot;textDocument&quot;),&quot;diagnostic&quot;);t.dynamicRegistration=!0,t.relatedDocumentSupport=!1}initialize(e,t){this._client.onRequest($e.Proposed.DiagnosticRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let t=new du(this._client,this.editorTracker,e);return[t.disposable,t]}};ur.DiagnosticFeature=fu});var Jh=q(qo=&gt;{&quot;use strict&quot;;Object.defineProperty(qo,&quot;__esModule&quot;,{value:!0});qo.TypeHierarchyFeature=void 0;var kD=require(&quot;vscode&quot;),lr=Ce(),hu=it();function Xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var pu=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareTypeHierarchy(e,t,r){if(hu.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,e))return;let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asTypeHierarchyItems(p),p=&gt;i.handleFailedRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,h,p,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},gu=class extends hu.TextDocumentFeature{constructor(e){super(e,lr.Proposed.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=Xh(Xh(e,&quot;textDocument&quot;),&quot;typeHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new pu(t,e);return[kD.languages.registerTypeHierarchyProvider(hu.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};qo.TypeHierarchyFeature=gu});var Yh=q(Oo=&gt;{&quot;use strict&quot;;Object.defineProperty(Oo,&quot;__esModule&quot;,{value:!0});Oo.InlineValueFeature=void 0;var Qh=require(&quot;vscode&quot;),Eo=Ce(),mu=it();function ko(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var vu=class extends mu.TextDocumentFeature{constructor(e){super(e,Eo.Proposed.InlineValuesRequest.type)}fillClientCapabilities(e){ko(ko(e,&quot;textDocument&quot;),&quot;inlineValues&quot;).dynamicRegistration=!0,ko(ko(e,&quot;workspace&quot;),&quot;codeLens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(Eo.Proposed.InlineValuesRefreshRequest.type,async()=&gt;{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValuesProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Qh.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,u)=&gt;{if(mu.$DocumentSelector.skipCellTextDocument(t,o))return;let h=this._client,g=(C,R,E,I)=&gt;{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(C),viewPort:h.code2ProtocolConverter.asRange(R),context:h.code2ProtocolConverter.asInlineValuesContext(E)};return h.sendRequest(Eo.Proposed.InlineValuesRequest.type,F,I).then(A=&gt;h.protocol2CodeConverter.asInlineValues(A),A=&gt;h.handleFailedRequest(Eo.Proposed.InlineValuesRequest.type,I,A,null))},p=h.clientOptions.middleware;return p.provideInlineValues?p.provideInlineValues(o,s,a,u,g):g(o,s,a,u)}};return[Qh.languages.registerInlineValuesProvider(mu.$DocumentSelector.asTextDocumentFilters(t),i),{provider:i,onDidChangeInlineValues:r}]}};Oo.InlineValueFeature=vu});var tp=q(Lo=&gt;{&quot;use strict&quot;;Object.defineProperty(Lo,&quot;__esModule&quot;,{value:!0});Lo.NotebookDocumentSyncFeature=void 0;var ht=require(&quot;vscode&quot;),OD=Mi(),Kt=Ce(),ln=Ce(),yu=it(),xo=Or(),Zh=yn();function ep(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kt;(function(n){let e;(function(t){function r(p,C){return{version:p.version,uri:C.asUri(p.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(p,C,R){let E=Kt.Proposed.NotebookDocument.create(R.asUri(p.uri),p.notebookType,p.version,o(C,R));return Object.keys(p.metadata).length&gt;0&amp;&amp;(E.metadata=s(p.metadata)),E}t.asNotebookDocument=i;function o(p,C){return p.map(R=&gt;a(R,C))}t.asNotebookCells=o;function s(p){return h(new Set,p)}t.asMetadata=s;function a(p,C){let R=Kt.Proposed.NotebookCell.create(u(p.kind),C.asUri(p.document.uri));return Object.keys(p.metadata).length&gt;0&amp;&amp;(R.metadata=s(p.metadata)),p.executionSummary!==void 0&amp;&amp;Zh.number(p.executionSummary.executionOrder)&amp;&amp;Zh.boolean(p.executionSummary.success)&amp;&amp;(R.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),R}t.asNotebookCell=a;function u(p){switch(p){case ht.NotebookCellKind.Markup:return Kt.Proposed.NotebookCellKind.Markup;case ht.NotebookCellKind.Code:return Kt.Proposed.NotebookCellKind.Code}}function h(p,C){if(p.has(C))throw new Error(&quot;Can't deep copy cyclic structures.&quot;);if(Array.isArray(C)){let R=[];for(let E of C)if(E!==null&amp;&amp;typeof E==&quot;object&quot;||Array.isArray(E))R.push(h(p,E));else{if(E instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);R.push(E)}return R}else{let R=Object.keys(C),E=Object.create(null);for(let I of R){let F=C[I];if(F!==null&amp;&amp;typeof F==&quot;object&quot;||Array.isArray(F))E[I]=h(p,F);else{if(F instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);E[I]=F}}return E}}function g(p,C){let R=C.asChangeTextDocumentParams(p);return{document:R.textDocument,changes:R.contentChanges}}t.asTextContentChange=g})(e=n.c2p||(n.c2p={}))})(kt||(kt={}));var Cu;(function(n){function e(t,r,i){let o=t.length,s=r.length,a=0;for(;a&lt;s&amp;&amp;a&lt;o&amp;&amp;Kt.Proposed.NotebookCell.equals(t[a],r[a],i);)a++;if(a&lt;s&amp;&amp;a&lt;o){let u=o-1,h=s-1;for(;u&gt;=0&amp;&amp;h&gt;=0&amp;&amp;Kt.Proposed.NotebookCell.equals(t[u],r[h],i);)u--,h--;let g=u+1-a,p=a===h+1?void 0:r.slice(a,h+1);return p!==void 0?{start:a,deleteCount:g,cells:p}:{start:a,deleteCount:g}}else return a&lt;s?{start:a,deleteCount:0,cells:r.slice(a)}:a&lt;o?{start:a,deleteCount:o-a}:void 0}n.computeDiff=e})(Cu||(Cu={}));var No;(function(n){function e(t,r){if(t.notebookType!==void 0&amp;&amp;r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&amp;&amp;i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new OD.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(No||(No={}));var Io;(function(n){function e(t,r,i){if(i===&quot;cellContent&quot;&amp;&amp;!yu.$DocumentSelector.matchForDocumentSync(t.cellDocumentSelector,r.document)||i===&quot;notebook&quot;&amp;&amp;!yu.$DocumentSelector.matchForProvider(t.cellDocumentSelector,r.document))return!1;let o=r.notebook;for(let s of t.notebookDocumentSelector)if(s.notebookDocumentFilter!==void 0&amp;&amp;No.matchNotebook(s.notebookDocumentFilter,o))return!0;return!1}n.match=e})(Io||(Io={}));var Fo;(function(n){function e(t,r){return{cells:t,uris:new Set(r.map(i=&gt;i.document.uri.toString()))}}n.create=e})(Fo||(Fo={}));var Ri=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.cellExecutionState=new Map,this.notebookDidOpen=new Set,this.disposables=[],ht.workspace.onDidOpenNotebookDocument(r=&gt;{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ht.notebooks.onDidChangeNotebookDocumentMetadata(r=&gt;this.notebookDocumentMetadataChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCells(r=&gt;this.cellStructureChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeCellMetadata(r=&gt;this.cellMetaDataChanged(r.cell.notebook,r.cell),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCellExecutionState(r=&gt;this.cellExecutionStateChanged(r),void 0,this.disposables),this.options.save===!0&amp;&amp;ht.notebooks.onDidSaveNotebookDocument(r=&gt;this.didSave(r),void 0,this.disposables),ht.workspace.onDidCloseNotebookDocument(r=&gt;{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}get mode(){return&quot;notebook&quot;}handles(e){return Io.match(this.options,e,this.mode)}didOpenNotebookCellDocument(e,t){if(!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.getMatchingCells(e,[t]),o=i!==void 0&amp;&amp;i[0]===t;if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(o&amp;&amp;s)return;this.cellStructureChanged(e,r)}else{if(!o)return;this.cellStructureChanged(e,r)}}didChangeCellTextDocument(e,t){!yu.$DocumentSelector.matchForProvider(this.options.cellDocumentSelector,t.document)||this.doSendChange(e,{cells:{textContent:[kt.c2p.asTextContentChange(t,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=null,r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)this.cellStructureChanged(e,r);else{let i=t??this.getMatchingCells(e);if(i===void 0)return;this.doSendOpen(e,i,o=&gt;{this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o.cells,i))}).catch(()=&gt;{})}}notebookDocumentMetadataChanged(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendChange(e,{metadata:kt.c2p.asMetadata(e.metadata)}).catch(()=&gt;{})}cellStructureChanged(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0){let r=this.getMatchingCells(e);if(r===void 0)return;this.didOpen(e,r,t)}else{let r=this.getMatchingCells(e);if(r===void 0){this.didClose(e,t);return}let i=t.cells,o=kt.c2p.asNotebookCells(r,this.client.code2ProtocolConverter),s=Cu.computeDiff(t.cells,o,!1);if(s===void 0)return;let a=s.deleteCount===0?new Set:new Set(i.slice(s.start,s.start+s.deleteCount).map(p=&gt;p.document)),u=s.cells===void 0?new Set:new Set(s.cells.map(p=&gt;p.document));for(let p of Array.from(a.values()))u.has(p)&amp;&amp;(a.delete(p),u.delete(p));let h=[],g=[];if(a.size&gt;0||u.size&gt;0){let p=new Map(r.map(C=&gt;[this.client.code2ProtocolConverter.asUri(C.document.uri),C]));for(let C of u.values()){let R=p.get(C);R!==void 0&amp;&amp;h.push(this.client.code2ProtocolConverter.asTextDocumentItem(R.document))}for(let C of a.values())g.push({uri:C})}this.doSendChange(e,{cells:{structure:{array:s,didClose:g.length&gt;0?g:void 0,didOpen:h.length&gt;0?h:void 0}}}).catch(()=&gt;{}),this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o,r))}}cellMetaDataChanged(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0||!r.uris.has(t.document.uri.toString()))return;let i=kt.c2p.asNotebookCell(t,this.client.code2ProtocolConverter);this.doSendChange(e,{cells:{data:[i]}}).catch(()=&gt;{})}cellExecutionStateChanged(e){if(e.state===ht.NotebookCellExecutionState.Pending)return;let t=e.cell.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0)return;let i=e.cell.document.uri.toString();!r.uris.has(i)||(e.state===ht.NotebookCellExecutionState.Executing&amp;&amp;this.cellExecutionState.set(e.cell.document.uri.toString(),e.state),e.state===ht.NotebookCellExecutionState.Idle&amp;&amp;this.cellExecutionState.has(i)&amp;&amp;(this.cellExecutionState.delete(i),this.doSendChange(t,{cells:{data:[kt.c2p.asNotebookCell(e.cell,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})))}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendSave(e).catch(()=&gt;{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=&gt;t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=&gt;{}),this.notebookSyncInfo.delete(e.uri.toString())}getMatchingCells(e,t=e.getCells()){if(this.options.notebookDocumentSelector!==void 0){for(let r of this.options.notebookDocumentSelector)if(r.notebookDocumentFilter===void 0){if(r.cellSelector===void 0)return;let i=this.filterCells(t,r.cellSelector);return i.length===0?void 0:i}else if(No.matchNotebook(r.notebookDocumentFilter,e))return r.cellSelector===void 0?t:this.filterCells(t,r.cellSelector)}}filterCells(e,t){return e.filter(r=&gt;{let i=r.document.languageId;return t.some(o=&gt;i===o.language)})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t,r){let i=(s,a)=&gt;{let u=kt.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),h=a.map(p=&gt;this.client.code2ProtocolConverter.asTextDocumentItem(p.document)),g=this.client.sendNotification(Kt.Proposed.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:h}).catch(p=&gt;{throw this.client.error(&quot;Sending DidOpenNotebookDocumentNotification failed&quot;,p),p});return r&amp;&amp;r(u),g},o=this.client.clientOptions.middleware?.notebooks;return o?.didOpen!==void 0?o.didOpen(e,t,i):i(e,t)}async sendDidChangeNotebookDocument(e,t){let r=Object.create(null);if(t.metadata&amp;&amp;(r.metadata=kt.c2p.asMetadata(e.metadata)),t.cells!==void 0){let i=Object.create(null),o=t.cells;o.structure&amp;&amp;(i.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:o.structure.array.cells!==void 0?o.structure.array.cells.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter)):void 0},didOpen:o.structure.didOpen!==void 0?o.structure.didOpen.map(s=&gt;this.client.code2ProtocolConverter.asOpenTextDocumentParams(s.document).textDocument):void 0,didClose:o.structure.didClose!==void 0?o.structure.didClose.map(s=&gt;this.client.code2ProtocolConverter.asCloseTextDocumentParams(s.document).textDocument):void 0}),o.data!==void 0&amp;&amp;(i.data=o.data.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter))),o.textContent!==void 0&amp;&amp;(i.textContent=o.textContent.map(s=&gt;kt.c2p.asTextContentChange(s,this.client.code2ProtocolConverter))),Object.keys(i).length&gt;0&amp;&amp;(r.cells=i)}if(Object.keys(r).length&gt;0)return this.doSendChange(e,r)}async doSendChange(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidChangeNotebookDocumentNotification.type,{notebookDocument:kt.c2p.asVersionedNotebookDocumentIdentifier(o,this.client.code2ProtocolConverter),change:s}).catch(a=&gt;{this.client.error(&quot;Sending DidChangeNotebookDocumentNotification failed&quot;,a)}),i=this.client.clientOptions.middleware?.notebooks;return i?.didChange!==void 0?i?.didChange(e,t,r):r(e,t)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=i=&gt;this.client.sendNotification(Kt.Proposed.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}}).catch(o=&gt;{throw this.client.error(&quot;Sending DidSaveNotebookDocumentNotification failed&quot;,o),o}),r=this.client.clientOptions.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidSelectNotebookController(e,t,r){let i=(s,a,u)=&gt;this.client.sendNotification(Kt.Proposed.DidSelectNotebookControllerNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},controller:a,selected:u}).catch(h=&gt;{throw this.client.error(&quot;Sending DidSelectNotebookControllerNotification failed&quot;,h),h}),o=this.client.clientOptions.middleware?.notebooks;return o?.didSelectNotebookController!==void 0?o.didSelectNotebookController(e,t,r,i):i(e,t,r)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=&gt;this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))}).catch(a=&gt;{throw this.client.error(&quot;Sending DidCloseNotebookDocumentNotification failed&quot;,a),a}),i=this.client.clientOptions.middleware?.notebooks;return i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}},Ru=class{constructor(e,t){if(this.client=e,this.options=t,t.cellDocumentSelector.length&gt;0){let r=xo.generateUuid();this.client.getFeature(ln.DidOpenTextDocumentNotification.method).register({id:r,registerOptions:{documentSelector:t.cellDocumentSelector}});let i=xo.generateUuid();this.client.getFeature(ln.DidChangeTextDocumentNotification.method).register({id:i,registerOptions:{documentSelector:t.cellDocumentSelector,syncKind:ln.TextDocumentSyncKind.Incremental}});let o=xo.generateUuid();this.client.getFeature(ln.DidCloseTextDocumentNotification.method).register({id:o,registerOptions:{documentSelector:t.cellDocumentSelector}}),this.registrations={open:r,change:i,close:o}}}get mode(){return&quot;cellContent&quot;}handles(e){return Io.match(this.options,e,this.mode)}dispose(){this.registrations!==void 0&amp;&amp;(this.client.getFeature(ln.DidOpenTextDocumentNotification.method).unregister(this.registrations.open),this.client.getFeature(ln.DidChangeTextDocumentNotification.method).unregister(this.registrations.change),this.client.getFeature(ln.DidCloseTextDocumentNotification.method).unregister(this.registrations.close))}async sendDidOpenTextDocument(e){let t=this.client.getFeature(ln.DidOpenTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No open provider found for notebook cell document ${e.uri.toString()}`))}async sendDidChangeTextDocument(e){let t=this.client.getFeature(ln.DidChangeTextDocumentNotification.method).getProvider(e.document);return t!==void 0?t.send(e):Promise.reject(new Error(`No change provider found for notebook cell document ${e.document.uri.toString()}`))}async sendDidCloseTextDocument(e){let t=this.client.getFeature(ln.DidCloseTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No close provider found for notebook cell document ${e.uri.toString()}`))}},dr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Kt.Proposed.NotebookDocumentSyncRegistrationType.type,ht.workspace.onDidOpenTextDocument(t=&gt;{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.getNotebookDocument(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didOpenNotebookCellDocument(r,i)}),ht.workspace.onDidChangeTextDocument(t=&gt;{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==dr.CellScheme)return;let[i]=this.getNotebookDocument(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didChangeCellTextDocument(i,t)})}fillClientCapabilities(e){let t=ep(ep(e,&quot;notebookDocument&quot;),&quot;synchronization&quot;);t.dynamicRegistration=!0}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??xo.generateUuid();this.register({id:r,registerOptions:t})}register(e){if(e.registerOptions.mode===&quot;cellContent&quot;){let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions,!0)}),r=new Ru(this.client,t);this.registrations.set(e.id,r)}else{let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions)}),r=new Ri(this.client,t);this.registrations.set(e.id,r)}}unregister(e){let t=this.registrations.get(e);t&amp;&amp;t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}getProvider(e){for(let t of this.registrations.values())if(t.handles(e))return t}getNotebookDocument(e){let t=e.uri.toString();for(let r of ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}getNotebookCellTextDocumentFilter(e,t){let r=[];for(let i of e.notebookDocumentSelector){let o;if(i.notebookDocumentFilter!==void 0&amp;&amp;(o=t===!0?{notebookDocument:Object.assign({},i.notebookDocumentFilter,{sync:!0})}:{notebookDocument:Object.assign({},i.notebookDocumentFilter)}),i.cellSelector!==void 0){for(let s of i.cellSelector)o===void 0?r.push(t===!0?{cellLanguage:s.language,sync:!0}:{cellLanguage:s.language}):r.push(Object.assign({},o,{cellLanguage:s.language}));o=void 0}else o!==void 0&amp;&amp;r.push(o)}return r}};Lo.NotebookDocumentSyncFeature=dr;dr.CellScheme=&quot;vscode-notebook-cell&quot;});var Su=q(fr=&gt;{&quot;use strict&quot;;Object.defineProperty(fr,&quot;__esModule&quot;,{value:!0});fr.ProposedFeatures=fr.CommonLanguageClient=void 0;var xD=it(),ND=Ph(),ID=_a(),FD=Eh(),LD=kh(),AD=Oh(),MD=Nh(),jD=Fh(),$D=Ah(),HD=Mh(),WD=$h(),KD=Hh(),Lr=Uh(),UD=Vh(),Du=class extends xD.BaseLanguageClient{constructor(e,t,r){super(e,t,r)}registerProposedFeatures(){this.registerFeatures(sp.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new ID.ConfigurationFeature(this)),this.registerFeature(new LD.TypeDefinitionFeature(this)),this.registerFeature(new FD.ImplementationFeature(this)),this.registerFeature(new ND.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&amp;&amp;this.registerFeature(new AD.WorkspaceFoldersFeature(this)),this.registerFeature(new MD.FoldingRangeFeature(this)),this.registerFeature(new jD.DeclarationFeature(this)),this.registerFeature(new $D.SelectionRangeFeature(this)),this.registerFeature(new HD.ProgressFeature(this)),this.registerFeature(new WD.CallHierarchyFeature(this)),this.registerFeature(new KD.SemanticTokensFeature(this)),this.registerFeature(new UD.LinkedEditingFeature(this)),this.registerFeature(new Lr.DidCreateFilesFeature(this)),this.registerFeature(new Lr.DidRenameFilesFeature(this)),this.registerFeature(new Lr.DidDeleteFilesFeature(this)),this.registerFeature(new Lr.WillCreateFilesFeature(this)),this.registerFeature(new Lr.WillRenameFilesFeature(this)),this.registerFeature(new Lr.WillDeleteFilesFeature(this))}};fr.CommonLanguageClient=Du;var np=Bh(),rp=Jh(),ip=Yh(),op=tp(),sp;(function(n){function e(s){return[new np.DiagnosticFeature(s),new rp.TypeHierarchyFeature(s),new ip.InlineValueFeature(s),new op.NotebookDocumentSyncFeature(s)]}n.createAll=e;function t(s){return new np.DiagnosticFeature(s)}n.createDiagnosticFeature=t;function r(s){return new rp.TypeHierarchyFeature(s)}n.createTypeHierarchyFeature=r;function i(s){return new ip.InlineValueFeature(s)}n.createInlineValueFeature=i;function o(s){return new op.NotebookDocumentSyncFeature(s)}n.createNotebookDocumentSyncFeature=o})(sp=fr.ProposedFeatures||(fr.ProposedFeatures={}))});var cp=q(Ao=&gt;{&quot;use strict&quot;;Object.defineProperty(Ao,&quot;__esModule&quot;,{value:!0});Ao.terminate=void 0;var ap=require(&quot;child_process&quot;),zD=require(&quot;path&quot;),VD=process.platform===&quot;win32&quot;,GD=process.platform===&quot;darwin&quot;,BD=process.platform===&quot;linux&quot;;function XD(n,e){if(VD)try{let i={stdio:[&quot;pipe&quot;,&quot;pipe&quot;,&quot;ignore&quot;]};return e&amp;&amp;(i.cwd=e),ap.execFileSync(&quot;taskkill&quot;,[&quot;/T&quot;,&quot;/F&quot;,&quot;/PID&quot;,n.pid.toString()],i),!0}catch{return!1}else if(BD||GD)try{var t=(0,zD.join)(__dirname,&quot;terminateProcess.sh&quot;),r=ap.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill(&quot;SIGKILL&quot;),!0}Ao.terminate=XD});var wu=q((Sb,up)=&gt;{&quot;use strict&quot;;up.exports=Ce()});var lp=q(_n=&gt;{&quot;use strict&quot;;var JD=_n&amp;&amp;_n.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),bu=_n&amp;&amp;_n.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;JD(e,n,t)};Object.defineProperty(_n,&quot;__esModule&quot;,{value:!0});bu(Ce(),_n);bu(it(),_n);bu(Su(),_n)});var pp=q(vt=&gt;{&quot;use strict&quot;;var QD=vt&amp;&amp;vt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),hp=vt&amp;&amp;vt.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;QD(e,n,t)};Object.defineProperty(vt,&quot;__esModule&quot;,{value:!0});vt.SettingMonitor=vt.LanguageClient=vt.TransportKind=void 0;var Tn=require(&quot;child_process&quot;),_u=require(&quot;fs&quot;),Tu=require(&quot;path&quot;),dp=Ed(),jn=require(&quot;vscode&quot;),Ee=yn(),YD=Su(),ZD=it(),eS=cp(),xe=wu();hp(wu(),vt);hp(lp(),vt);var fp=&quot;^1.63.0&quot;,Le;(function(n){n[n.stdio=0]=&quot;stdio&quot;,n[n.ipc=1]=&quot;ipc&quot;,n[n.pipe=2]=&quot;pipe&quot;,n[n.socket=3]=&quot;socket&quot;})(Le=vt.TransportKind||(vt.TransportKind={}));var Mn;(function(n){function e(t){let r=t;return r&amp;&amp;r.kind===Le.socket&amp;&amp;Ee.number(r.port)}n.isSocket=e})(Mn||(Mn={}));var Pu;(function(n){function e(t){return Ee.string(t.command)}n.is=e})(Pu||(Pu={}));var qu;(function(n){function e(t){return Ee.string(t.module)}n.is=e})(qu||(qu={}));var Eu;(function(n){function e(t){let r=t;return r&amp;&amp;r.writer!==void 0&amp;&amp;r.reader!==void 0}n.is=e})(Eu||(Eu={}));var ku;(function(n){function e(t){let r=t;return r&amp;&amp;r.process!==void 0&amp;&amp;typeof r.detached==&quot;boolean&quot;}n.is=e})(ku||(ku={}));var Ou=class extends YD.CommonLanguageClient{constructor(e,t,r,i,o){let s,a,u,h,g;Ee.string(t)?(s=e,a=t,u=r,h=i,g=!!o):(s=e.toLowerCase(),a=e,u=t,h=r,g=i),g===void 0&amp;&amp;(g=!1),super(s,a,h),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(p){throw Ee.string(p.message)&amp;&amp;this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=dp.parse(jn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jn.version}`);if(e.prerelease&amp;&amp;e.prerelease.length&gt;0&amp;&amp;(e.prerelease=[]),!dp.satisfies(e,fp))throw new Error(`The language client requires VS Code version ${fp} but received version ${jn.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=&gt;setTimeout(e,1e3)),this.start()):this.start()}stop(e=2e3){return super.stop(e).finally(()=&gt;{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&amp;&amp;this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=&gt;{try{process.kill(e.pid,0),(0,eS.terminate)(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&amp;&amp;(e.processId=process.pid)}createMessageTransports(e){function t(g,p){if(!g&amp;&amp;!p)return;let C=Object.create(null);return Object.keys(process.env).forEach(R=&gt;C[R]=process.env[R]),p&amp;&amp;(C.ELECTRON_RUN_AS_NODE=&quot;1&quot;,C.ELECTRON_NO_ASAR=&quot;1&quot;),g&amp;&amp;Object.keys(g).forEach(R=&gt;C[R]=g[R]),C}let r=[&quot;--debug=&quot;,&quot;--debug-brk=&quot;,&quot;--inspect=&quot;,&quot;--inspect-brk=&quot;],i=[&quot;--debug&quot;,&quot;--debug-brk&quot;,&quot;--inspect&quot;,&quot;--inspect-brk&quot;];function o(){let g=process.execArgv;return g?g.some(p=&gt;r.some(C=&gt;p.startsWith(C))||i.some(C=&gt;p===C)):!1}function s(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error(&quot;Process created without stdio streams&quot;)}let a=this._serverOptions;if(Ee.func(a))return a().then(g=&gt;{if(ZD.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Eu.is(g))return this._isDetached=!!g.detached,{reader:new xe.StreamMessageReader(g.reader),writer:new xe.StreamMessageWriter(g.writer)};{let p;return ku.is(g)?(p=g.process,this._isDetached=g.detached):(p=g,this._isDetached=!1),p.stderr.on(&quot;data&quot;,C=&gt;this.outputChannel.append(Ee.string(C)?C:C.toString(e))),{reader:new xe.StreamMessageReader(p.stdout),writer:new xe.StreamMessageWriter(p.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||o()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(g=&gt;{if(qu.is(u)&amp;&amp;u.module){let p=u,C=p.transport||Le.stdio;if(p.runtime){let R=[],E=p.options??Object.create(null);E.execArgv&amp;&amp;E.execArgv.forEach(N=&gt;R.push(N)),R.push(p.module),p.args&amp;&amp;p.args.forEach(N=&gt;R.push(N));let I=Object.create(null);I.cwd=g,I.env=t(E.env,!1);let F=this._getRuntimePath(p.runtime,g),A;if(C===Le.ipc?(I.stdio=[null,null,null,&quot;ipc&quot;],R.push(&quot;--node-ipc&quot;)):C===Le.stdio?R.push(&quot;--stdio&quot;):C===Le.pipe?(A=(0,xe.generateRandomPipeName)(),R.push(`--pipe=${A}`)):Mn.isSocket(C)&amp;&amp;R.push(`--socket=${C.port}`),R.push(`--clientProcessId=${process.pid.toString()}`),C===Le.ipc||C===Le.stdio){let N=Tn.spawn(F,R,I);return!N||!N.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(N),writer:new xe.IPCMessageWriter(N)})):Promise.resolve({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)}))}else{if(C===Le.pipe)return(0,xe.createClientPipeTransport)(A).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))});if(Mn.isSocket(C))return(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))})}}else{let R;return new Promise((E,I)=&gt;{let F=(p.args&amp;&amp;p.args.slice())??[];C===Le.ipc?F.push(&quot;--node-ipc&quot;):C===Le.stdio?F.push(&quot;--stdio&quot;):C===Le.pipe?(R=(0,xe.generateRandomPipeName)(),F.push(`--pipe=${R}`)):Mn.isSocket(C)&amp;&amp;F.push(`--socket=${C.port}`),F.push(`--clientProcessId=${process.pid.toString()}`);let A=p.options??Object.create(null);if(A.env=t(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=g,A.silent=!0,C===Le.ipc||C===Le.stdio){let N=Tn.fork(p.module,F||[],A);s(N),this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),E({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):E({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)})}else C===Le.pipe?(0,xe.createClientPipeTransport)(R).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I):Mn.isSocket(C)&amp;&amp;(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I)})}}else if(Pu.is(u)&amp;&amp;u.command){let p=u,C=u.args!==void 0?u.args.slice(0):[],R,E=u.transport;if(E===Le.stdio)C.push(&quot;--stdio&quot;);else if(E===Le.pipe)R=(0,xe.generateRandomPipeName)(),C.push(`--pipe=${R}`);else if(Mn.isSocket(E))C.push(`--socket=${E.port}`);else if(E===Le.ipc)throw new Error(&quot;Transport kind ipc is not support for command executable&quot;);let I=Object.assign({},p.options);if(I.cwd=I.cwd||g,E===void 0||E===Le.stdio){let F=Tn.spawn(p.command,C,I);return!F||!F.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(F.stderr.on(&quot;data&quot;,A=&gt;this.outputChannel.append(Ee.string(A)?A:A.toString(e))),this._serverProcess=F,this._isDetached=!!I.detached,Promise.resolve({reader:new xe.StreamMessageReader(F.stdout),writer:new xe.StreamMessageWriter(F.stdin)}))}else{if(E===Le.pipe)return(0,xe.createClientPipeTransport)(R).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))});if(Mn.isSocket(E))return(0,xe.createClientSocketTransport)(E.port).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))})}}return Promise.reject(new Error(&quot;Unsupported server configuration &quot;+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Tu.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Tu.join(r,e);if(_u.existsSync(i))return i}if(t!==void 0){let i=Tu.join(t,e);if(_u.existsSync(i))return i}return e}_mainGetRootPath(){let e=jn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}_getServerWorkingDir(e){let t=e&amp;&amp;e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=&gt;{_u.lstat(t,(i,o)=&gt;{r(!i&amp;&amp;o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return&quot;en&quot;;let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!=&quot;string&quot;?&quot;en&quot;:t.locale}};vt.LanguageClient=Ou;var xu=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jn.Disposable(()=&gt;{this._client.needsStop()&amp;&amp;this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf(&quot;.&quot;),t=e&gt;=0?this._setting.substr(0,e):this._setting,r=e&gt;=0?this._setting.substr(e+1):void 0,i=r?jn.workspace.getConfiguration(t).get(r,!1):jn.workspace.getConfiguration(t);i&amp;&amp;this._client.needsStart()?this._client.start():!i&amp;&amp;this._client.needsStop()&amp;&amp;this._client.stop()}};vt.SettingMonitor=xu});var mp=q((_b,gp)=&gt;{&quot;use strict&quot;;gp.exports=pp()});var rS={};_p(rS,{activate:()=&gt;tS,activateInlayHints:()=&gt;yp,deactivate:()=&gt;nS});module.exports=Pp(rS);var Ut=require(&quot;vscode&quot;),vp=Tp(mp()),Di;async function tS(n){let e=Ut.window.createOutputChannel(&quot;Hexpat Language Server trace&quot;),r={command:process.env.HEXPAT_SERVER_PATH||&quot;hexpat-language-server&quot;,options:{env:{...process.env,RUST_LOG:&quot;debug&quot;}}},i={run:r,debug:r},o={documentSelector:[{scheme:&quot;file&quot;,language:&quot;hexpat&quot;}],synchronize:{fileEvents:Ut.workspace.createFileSystemWatcher(&quot;**/.clientrc&quot;)},traceOutputChannel:e};Di=new vp.LanguageClient(&quot;hexpat-language-server&quot;,&quot;hexpat language server&quot;,i,o),yp(n),Di.start()}function nS(){if(!!Di)return Di.stop()}function yp(n){let e={hintsProvider:null,updateHintsEventEmitter:new Ut.EventEmitter,async onConfigChange(){this.dispose();let t=this.updateHintsEventEmitter.event;this.hintsProvider=Ut.languages.registerInlayHintsProvider({scheme:&quot;file&quot;,language:&quot;hexpat&quot;},new class{constructor(){this.onDidChangeInlayHints=t}resolveInlayHint(r,i){return{label:r.label,...r}}async provideInlayHints(r,i,o){let s=await Di.sendRequest(&quot;custom/inlay_hint&quot;,{path:r.uri.toString()}).catch(a=&gt;null);return s==null?[]:s.map(a=&gt;{let[u,h,g]=a,p=r.positionAt(u);return{position:r.positionAt(h),paddingLeft:!0,label:[{value:g,location:new Ut.Location(r.uri,p)}]}})}})},onDidChangeTextDocument({contentChanges:t,document:r}){},dispose(){var t;(t=this.hintsProvider)==null||t.dispose(),this.hintsProvider=null,this.updateHintsEventEmitter.dispose()}};Ut.workspace.onDidChangeConfiguration(e.onConfigChange,e,n.subscriptions),Ut.workspace.onDidChangeTextDocument(e.onDidChangeTextDocument,e,n.subscriptions),e.onConfigChange().catch(console.error)}0&amp;&amp;(module.exports={activate,activateInlayHints,deactivate});
</failure>
		</testcase>
		<testcase name="javascript.lang.security.audit.detect-non-literal-regexp.detect-non-literal-regexp" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="1">
			<failure type="WARNING" message="RegExp() called with a `e` function argument, this might allow an attacker to cause a Denial of Service (DoS) within your application as RegExP which blocks the main thread.">var Rp=Object.create;var Si=Object.defineProperty;var Dp=Object.getOwnPropertyDescriptor;var Sp=Object.getOwnPropertyNames;var wp=Object.getPrototypeOf,bp=Object.prototype.hasOwnProperty;var q=(n,e)=&gt;()=&gt;(e||n((e={exports:{}}).exports,e),e.exports),_p=(n,e)=&gt;{for(var t in e)Si(n,t,{get:e[t],enumerable:!0})},Iu=(n,e,t,r)=&gt;{if(e&amp;&amp;typeof e==&quot;object&quot;||typeof e==&quot;function&quot;)for(let i of Sp(e))!bp.call(n,i)&amp;&amp;i!==t&amp;&amp;Si(n,i,{get:()=&gt;e[i],enumerable:!(r=Dp(e,i))||r.enumerable});return n};var Tp=(n,e,t)=&gt;(t=n!=null?Rp(wp(n)):{},Iu(e||!n||!n.__esModule?Si(t,&quot;default&quot;,{value:n,enumerable:!0}):t,n)),Pp=n=&gt;Iu(Si({},&quot;__esModule&quot;,{value:!0}),n);var Mr=q((oS,Fu)=&gt;{var qp=&quot;2.0.0&quot;,Ep=Number.MAX_SAFE_INTEGER||9007199254740991,kp=16;Fu.exports={SEMVER_SPEC_VERSION:qp,MAX_LENGTH:256,MAX_SAFE_INTEGER:Ep,MAX_SAFE_COMPONENT_LENGTH:kp}});var jr=q((sS,Lu)=&gt;{var Op=typeof process==&quot;object&quot;&amp;&amp;process.env&amp;&amp;process.env.NODE_DEBUG&amp;&amp;/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=&gt;console.error(&quot;SEMVER&quot;,...n):()=&gt;{};Lu.exports=Op});var zn=q((On,Au)=&gt;{var{MAX_SAFE_COMPONENT_LENGTH:Mo}=Mr(),xp=jr();On=Au.exports={};var Np=On.re=[],U=On.src=[],z=On.t={},Ip=0,re=(n,e,t)=&gt;{let r=Ip++;xp(r,e),z[n]=r,U[r]=e,Np[r]=new RegExp(e,t?&quot;g&quot;:void 0)};re(&quot;NUMERICIDENTIFIER&quot;,&quot;0|[1-9]\\d*&quot;);re(&quot;NUMERICIDENTIFIERLOOSE&quot;,&quot;[0-9]+&quot;);re(&quot;NONNUMERICIDENTIFIER&quot;,&quot;\\d*[a-zA-Z-][a-zA-Z0-9-]*&quot;);re(&quot;MAINVERSION&quot;,`(${U[z.NUMERICIDENTIFIER]})\\.(${U[z.NUMERICIDENTIFIER]})\\.(${U[z.NUMERICIDENTIFIER]})`);re(&quot;MAINVERSIONLOOSE&quot;,`(${U[z.NUMERICIDENTIFIERLOOSE]})\\.(${U[z.NUMERICIDENTIFIERLOOSE]})\\.(${U[z.NUMERICIDENTIFIERLOOSE]})`);re(&quot;PRERELEASEIDENTIFIER&quot;,`(?:${U[z.NUMERICIDENTIFIER]}|${U[z.NONNUMERICIDENTIFIER]})`);re(&quot;PRERELEASEIDENTIFIERLOOSE&quot;,`(?:${U[z.NUMERICIDENTIFIERLOOSE]}|${U[z.NONNUMERICIDENTIFIER]})`);re(&quot;PRERELEASE&quot;,`(?:-(${U[z.PRERELEASEIDENTIFIER]}(?:\\.${U[z.PRERELEASEIDENTIFIER]})*))`);re(&quot;PRERELEASELOOSE&quot;,`(?:-?(${U[z.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${U[z.PRERELEASEIDENTIFIERLOOSE]})*))`);re(&quot;BUILDIDENTIFIER&quot;,&quot;[0-9A-Za-z-]+&quot;);re(&quot;BUILD&quot;,`(?:\\+(${U[z.BUILDIDENTIFIER]}(?:\\.${U[z.BUILDIDENTIFIER]})*))`);re(&quot;FULLPLAIN&quot;,`v?${U[z.MAINVERSION]}${U[z.PRERELEASE]}?${U[z.BUILD]}?`);re(&quot;FULL&quot;,`^${U[z.FULLPLAIN]}$`);re(&quot;LOOSEPLAIN&quot;,`[v=\\s]*${U[z.MAINVERSIONLOOSE]}${U[z.PRERELEASELOOSE]}?${U[z.BUILD]}?`);re(&quot;LOOSE&quot;,`^${U[z.LOOSEPLAIN]}$`);re(&quot;GTLT&quot;,&quot;((?:&lt;|&gt;)?=?)&quot;);re(&quot;XRANGEIDENTIFIERLOOSE&quot;,`${U[z.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);re(&quot;XRANGEIDENTIFIER&quot;,`${U[z.NUMERICIDENTIFIER]}|x|X|\\*`);re(&quot;XRANGEPLAIN&quot;,`[v=\\s]*(${U[z.XRANGEIDENTIFIER]})(?:\\.(${U[z.XRANGEIDENTIFIER]})(?:\\.(${U[z.XRANGEIDENTIFIER]})(?:${U[z.PRERELEASE]})?${U[z.BUILD]}?)?)?`);re(&quot;XRANGEPLAINLOOSE&quot;,`[v=\\s]*(${U[z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[z.XRANGEIDENTIFIERLOOSE]})(?:${U[z.PRERELEASELOOSE]})?${U[z.BUILD]}?)?)?`);re(&quot;XRANGE&quot;,`^${U[z.GTLT]}\\s*${U[z.XRANGEPLAIN]}$`);re(&quot;XRANGELOOSE&quot;,`^${U[z.GTLT]}\\s*${U[z.XRANGEPLAINLOOSE]}$`);re(&quot;COERCE&quot;,`(^|[^\\d])(\\d{1,${Mo}})(?:\\.(\\d{1,${Mo}}))?(?:\\.(\\d{1,${Mo}}))?(?:$|[^\\d])`);re(&quot;COERCERTL&quot;,U[z.COERCE],!0);re(&quot;LONETILDE&quot;,&quot;(?:~&gt;?)&quot;);re(&quot;TILDETRIM&quot;,`(\\s*)${U[z.LONETILDE]}\\s+`,!0);On.tildeTrimReplace=&quot;$1~&quot;;re(&quot;TILDE&quot;,`^${U[z.LONETILDE]}${U[z.XRANGEPLAIN]}$`);re(&quot;TILDELOOSE&quot;,`^${U[z.LONETILDE]}${U[z.XRANGEPLAINLOOSE]}$`);re(&quot;LONECARET&quot;,&quot;(?:\\^)&quot;);re(&quot;CARETTRIM&quot;,`(\\s*)${U[z.LONECARET]}\\s+`,!0);On.caretTrimReplace=&quot;$1^&quot;;re(&quot;CARET&quot;,`^${U[z.LONECARET]}${U[z.XRANGEPLAIN]}$`);re(&quot;CARETLOOSE&quot;,`^${U[z.LONECARET]}${U[z.XRANGEPLAINLOOSE]}$`);re(&quot;COMPARATORLOOSE&quot;,`^${U[z.GTLT]}\\s*(${U[z.LOOSEPLAIN]})$|^$`);re(&quot;COMPARATOR&quot;,`^${U[z.GTLT]}\\s*(${U[z.FULLPLAIN]})$|^$`);re(&quot;COMPARATORTRIM&quot;,`(\\s*)${U[z.GTLT]}\\s*(${U[z.LOOSEPLAIN]}|${U[z.XRANGEPLAIN]})`,!0);On.comparatorTrimReplace=&quot;$1$2$3&quot;;re(&quot;HYPHENRANGE&quot;,`^\\s*(${U[z.XRANGEPLAIN]})\\s+-\\s+(${U[z.XRANGEPLAIN]})\\s*$`);re(&quot;HYPHENRANGELOOSE&quot;,`^\\s*(${U[z.XRANGEPLAINLOOSE]})\\s+-\\s+(${U[z.XRANGEPLAINLOOSE]})\\s*$`);re(&quot;STAR&quot;,&quot;(&lt;|&gt;)?=?\\s*\\*&quot;);re(&quot;GTE0&quot;,&quot;^\\s*&gt;=\\s*0.0.0\\s*$&quot;);re(&quot;GTE0PRE&quot;,&quot;^\\s*&gt;=\\s*0.0.0-0\\s*$&quot;)});var $r=q((aS,Mu)=&gt;{var Fp=[&quot;includePrerelease&quot;,&quot;loose&quot;,&quot;rtl&quot;],Lp=n=&gt;n?typeof n!=&quot;object&quot;?{loose:!0}:Fp.filter(e=&gt;n[e]).reduce((e,t)=&gt;(e[t]=!0,e),{}):{};Mu.exports=Lp});var wi=q((cS,Hu)=&gt;{var ju=/^[0-9]+$/,$u=(n,e)=&gt;{let t=ju.test(n),r=ju.test(e);return t&amp;&amp;r&amp;&amp;(n=+n,e=+e),n===e?0:t&amp;&amp;!r?-1:r&amp;&amp;!t?1:n&lt;e?-1:1},Ap=(n,e)=&gt;$u(e,n);Hu.exports={compareIdentifiers:$u,rcompareIdentifiers:Ap}});var ut=q((uS,zu)=&gt;{var bi=jr(),{MAX_LENGTH:Wu,MAX_SAFE_INTEGER:_i}=Mr(),{re:Ku,t:Uu}=zn(),Mp=$r(),{compareIdentifiers:Hr}=wi(),Pt=class{constructor(e,t){if(t=Mp(t),e instanceof Pt){if(e.loose===!!t.loose&amp;&amp;e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!=&quot;string&quot;)throw new TypeError(`Invalid Version: ${e}`);if(e.length&gt;Wu)throw new TypeError(`version is longer than ${Wu} characters`);bi(&quot;SemVer&quot;,e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Ku[Uu.LOOSE]:Ku[Uu.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major&gt;_i||this.major&lt;0)throw new TypeError(&quot;Invalid major version&quot;);if(this.minor&gt;_i||this.minor&lt;0)throw new TypeError(&quot;Invalid minor version&quot;);if(this.patch&gt;_i||this.patch&lt;0)throw new TypeError(&quot;Invalid patch version&quot;);r[4]?this.prerelease=r[4].split(&quot;.&quot;).map(i=&gt;{if(/^[0-9]+$/.test(i)){let o=+i;if(o&gt;=0&amp;&amp;o&lt;_i)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split(&quot;.&quot;):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&amp;&amp;(this.version+=`-${this.prerelease.join(&quot;.&quot;)}`),this.version}toString(){return this.version}compare(e){if(bi(&quot;SemVer.compare&quot;,this.version,this.options,e),!(e instanceof Pt)){if(typeof e==&quot;string&quot;&amp;&amp;e===this.version)return 0;e=new Pt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Pt||(e=new Pt(e,this.options)),Hr(this.major,e.major)||Hr(this.minor,e.minor)||Hr(this.patch,e.patch)}comparePre(e){if(e instanceof Pt||(e=new Pt(e,this.options)),this.prerelease.length&amp;&amp;!e.prerelease.length)return-1;if(!this.prerelease.length&amp;&amp;e.prerelease.length)return 1;if(!this.prerelease.length&amp;&amp;!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(bi(&quot;prerelease compare&quot;,t,r,i),r===void 0&amp;&amp;i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Hr(r,i)}while(++t)}compareBuild(e){e instanceof Pt||(e=new Pt(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(bi(&quot;prerelease compare&quot;,t,r,i),r===void 0&amp;&amp;i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Hr(r,i)}while(++t)}inc(e,t){switch(e){case&quot;premajor&quot;:this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(&quot;pre&quot;,t);break;case&quot;preminor&quot;:this.prerelease.length=0,this.patch=0,this.minor++,this.inc(&quot;pre&quot;,t);break;case&quot;prepatch&quot;:this.prerelease.length=0,this.inc(&quot;patch&quot;,t),this.inc(&quot;pre&quot;,t);break;case&quot;prerelease&quot;:this.prerelease.length===0&amp;&amp;this.inc(&quot;patch&quot;,t),this.inc(&quot;pre&quot;,t);break;case&quot;major&quot;:(this.minor!==0||this.patch!==0||this.prerelease.length===0)&amp;&amp;this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case&quot;minor&quot;:(this.patch!==0||this.prerelease.length===0)&amp;&amp;this.minor++,this.patch=0,this.prerelease=[];break;case&quot;patch&quot;:this.prerelease.length===0&amp;&amp;this.patch++,this.prerelease=[];break;case&quot;pre&quot;:if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r&gt;=0;)typeof this.prerelease[r]==&quot;number&quot;&amp;&amp;(this.prerelease[r]++,r=-2);r===-1&amp;&amp;this.prerelease.push(0)}t&amp;&amp;(this.prerelease[0]===t?isNaN(this.prerelease[1])&amp;&amp;(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};zu.exports=Pt});var Vn=q((lS,Xu)=&gt;{var{MAX_LENGTH:jp}=Mr(),{re:Vu,t:Gu}=zn(),Bu=ut(),$p=$r(),Hp=(n,e)=&gt;{if(e=$p(e),n instanceof Bu)return n;if(typeof n!=&quot;string&quot;||n.length&gt;jp||!(e.loose?Vu[Gu.LOOSE]:Vu[Gu.FULL]).test(n))return null;try{return new Bu(n,e)}catch{return null}};Xu.exports=Hp});var Qu=q((dS,Ju)=&gt;{var Wp=Vn(),Kp=(n,e)=&gt;{let t=Wp(n,e);return t?t.version:null};Ju.exports=Kp});var Zu=q((fS,Yu)=&gt;{var Up=Vn(),zp=(n,e)=&gt;{let t=Up(n.trim().replace(/^[=v]+/,&quot;&quot;),e);return t?t.version:null};Yu.exports=zp});var tl=q((hS,el)=&gt;{var Vp=ut(),Gp=(n,e,t,r)=&gt;{typeof t==&quot;string&quot;&amp;&amp;(r=t,t=void 0);try{return new Vp(n,t).inc(e,r).version}catch{return null}};el.exports=Gp});var Mt=q((pS,rl)=&gt;{var nl=ut(),Bp=(n,e,t)=&gt;new nl(n,t).compare(new nl(e,t));rl.exports=Bp});var Ti=q((gS,il)=&gt;{var Xp=Mt(),Jp=(n,e,t)=&gt;Xp(n,e,t)===0;il.exports=Jp});var al=q((mS,sl)=&gt;{var ol=Vn(),Qp=Ti(),Yp=(n,e)=&gt;{if(Qp(n,e))return null;{let t=ol(n),r=ol(e),i=t.prerelease.length||r.prerelease.length,o=i?&quot;pre&quot;:&quot;&quot;,s=i?&quot;prerelease&quot;:&quot;&quot;;for(let a in t)if((a===&quot;major&quot;||a===&quot;minor&quot;||a===&quot;patch&quot;)&amp;&amp;t[a]!==r[a])return o+a;return s}};sl.exports=Yp});var ul=q((vS,cl)=&gt;{var Zp=ut(),eg=(n,e)=&gt;new Zp(n,e).major;cl.exports=eg});var dl=q((yS,ll)=&gt;{var tg=ut(),ng=(n,e)=&gt;new tg(n,e).minor;ll.exports=ng});var hl=q((CS,fl)=&gt;{var rg=ut(),ig=(n,e)=&gt;new rg(n,e).patch;fl.exports=ig});var gl=q((RS,pl)=&gt;{var og=Vn(),sg=(n,e)=&gt;{let t=og(n,e);return t&amp;&amp;t.prerelease.length?t.prerelease:null};pl.exports=sg});var vl=q((DS,ml)=&gt;{var ag=Mt(),cg=(n,e,t)=&gt;ag(e,n,t);ml.exports=cg});var Cl=q((SS,yl)=&gt;{var ug=Mt(),lg=(n,e)=&gt;ug(n,e,!0);yl.exports=lg});var Pi=q((wS,Dl)=&gt;{var Rl=ut(),dg=(n,e,t)=&gt;{let r=new Rl(n,t),i=new Rl(e,t);return r.compare(i)||r.compareBuild(i)};Dl.exports=dg});var wl=q((bS,Sl)=&gt;{var fg=Pi(),hg=(n,e)=&gt;n.sort((t,r)=&gt;fg(t,r,e));Sl.exports=hg});var _l=q((_S,bl)=&gt;{var pg=Pi(),gg=(n,e)=&gt;n.sort((t,r)=&gt;pg(r,t,e));bl.exports=gg});var Wr=q((TS,Tl)=&gt;{var mg=Mt(),vg=(n,e,t)=&gt;mg(n,e,t)&gt;0;Tl.exports=vg});var qi=q((PS,Pl)=&gt;{var yg=Mt(),Cg=(n,e,t)=&gt;yg(n,e,t)&lt;0;Pl.exports=Cg});var jo=q((qS,ql)=&gt;{var Rg=Mt(),Dg=(n,e,t)=&gt;Rg(n,e,t)!==0;ql.exports=Dg});var Ei=q((ES,El)=&gt;{var Sg=Mt(),wg=(n,e,t)=&gt;Sg(n,e,t)&gt;=0;El.exports=wg});var ki=q((kS,kl)=&gt;{var bg=Mt(),_g=(n,e,t)=&gt;bg(n,e,t)&lt;=0;kl.exports=_g});var $o=q((OS,Ol)=&gt;{var Tg=Ti(),Pg=jo(),qg=Wr(),Eg=Ei(),kg=qi(),Og=ki(),xg=(n,e,t,r)=&gt;{switch(e){case&quot;===&quot;:return typeof n==&quot;object&quot;&amp;&amp;(n=n.version),typeof t==&quot;object&quot;&amp;&amp;(t=t.version),n===t;case&quot;!==&quot;:return typeof n==&quot;object&quot;&amp;&amp;(n=n.version),typeof t==&quot;object&quot;&amp;&amp;(t=t.version),n!==t;case&quot;&quot;:case&quot;=&quot;:case&quot;==&quot;:return Tg(n,t,r);case&quot;!=&quot;:return Pg(n,t,r);case&quot;&gt;&quot;:return qg(n,t,r);case&quot;&gt;=&quot;:return Eg(n,t,r);case&quot;&lt;&quot;:return kg(n,t,r);case&quot;&lt;=&quot;:return Og(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Ol.exports=xg});var Nl=q((xS,xl)=&gt;{var Ng=ut(),Ig=Vn(),{re:Oi,t:xi}=zn(),Fg=(n,e)=&gt;{if(n instanceof Ng)return n;if(typeof n==&quot;number&quot;&amp;&amp;(n=String(n)),typeof n!=&quot;string&quot;)return null;e=e||{};let t=null;if(!e.rtl)t=n.match(Oi[xi.COERCE]);else{let r;for(;(r=Oi[xi.COERCERTL].exec(n))&amp;&amp;(!t||t.index+t[0].length!==n.length);)(!t||r.index+r[0].length!==t.index+t[0].length)&amp;&amp;(t=r),Oi[xi.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;Oi[xi.COERCERTL].lastIndex=-1}return t===null?null:Ig(`${t[2]}.${t[3]||&quot;0&quot;}.${t[4]||&quot;0&quot;}`,e)};xl.exports=Fg});var Fl=q((NS,Il)=&gt;{&quot;use strict&quot;;Il.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Al=q((IS,Ll)=&gt;{&quot;use strict&quot;;Ll.exports=de;de.Node=Gn;de.create=de;function de(n){var e=this;if(e instanceof de||(e=new de),e.tail=null,e.head=null,e.length=0,n&amp;&amp;typeof n.forEach==&quot;function&quot;)n.forEach(function(i){e.push(i)});else if(arguments.length&gt;0)for(var t=0,r=arguments.length;t&lt;r;t++)e.push(arguments[t]);return e}de.prototype.removeNode=function(n){if(n.list!==this)throw new Error(&quot;removing node which does not belong to this list&quot;);var e=n.next,t=n.prev;return e&amp;&amp;(e.prev=t),t&amp;&amp;(t.next=e),n===this.head&amp;&amp;(this.head=e),n===this.tail&amp;&amp;(this.tail=t),n.list.length--,n.next=null,n.prev=null,n.list=null,e};de.prototype.unshiftNode=function(n){if(n!==this.head){n.list&amp;&amp;n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&amp;&amp;(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};de.prototype.pushNode=function(n){if(n!==this.tail){n.list&amp;&amp;n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&amp;&amp;(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};de.prototype.push=function(){for(var n=0,e=arguments.length;n&lt;e;n++)Ag(this,arguments[n]);return this.length};de.prototype.unshift=function(){for(var n=0,e=arguments.length;n&lt;e;n++)Mg(this,arguments[n]);return this.length};de.prototype.pop=function(){if(!!this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};de.prototype.shift=function(){if(!!this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};de.prototype.forEach=function(n,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)n.call(e,t.value,r,this),t=t.next};de.prototype.forEachReverse=function(n,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)n.call(e,t.value,r,this),t=t.prev};de.prototype.get=function(n){for(var e=0,t=this.head;t!==null&amp;&amp;e&lt;n;e++)t=t.next;if(e===n&amp;&amp;t!==null)return t.value};de.prototype.getReverse=function(n){for(var e=0,t=this.tail;t!==null&amp;&amp;e&lt;n;e++)t=t.prev;if(e===n&amp;&amp;t!==null)return t.value};de.prototype.map=function(n,e){e=e||this;for(var t=new de,r=this.head;r!==null;)t.push(n.call(e,r.value,this)),r=r.next;return t};de.prototype.mapReverse=function(n,e){e=e||this;for(var t=new de,r=this.tail;r!==null;)t.push(n.call(e,r.value,this)),r=r.prev;return t};de.prototype.reduce=function(n,e){var t,r=this.head;if(arguments.length&gt;1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError(&quot;Reduce of empty list with no initial value&quot;);for(var i=0;r!==null;i++)t=n(t,r.value,i),r=r.next;return t};de.prototype.reduceReverse=function(n,e){var t,r=this.tail;if(arguments.length&gt;1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError(&quot;Reduce of empty list with no initial value&quot;);for(var i=this.length-1;r!==null;i--)t=n(t,r.value,i),r=r.prev;return t};de.prototype.toArray=function(){for(var n=new Array(this.length),e=0,t=this.head;t!==null;e++)n[e]=t.value,t=t.next;return n};de.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,t=this.tail;t!==null;e++)n[e]=t.value,t=t.prev;return n};de.prototype.slice=function(n,e){e=e||this.length,e&lt;0&amp;&amp;(e+=this.length),n=n||0,n&lt;0&amp;&amp;(n+=this.length);var t=new de;if(e&lt;n||e&lt;0)return t;n&lt;0&amp;&amp;(n=0),e&gt;this.length&amp;&amp;(e=this.length);for(var r=0,i=this.head;i!==null&amp;&amp;r&lt;n;r++)i=i.next;for(;i!==null&amp;&amp;r&lt;e;r++,i=i.next)t.push(i.value);return t};de.prototype.sliceReverse=function(n,e){e=e||this.length,e&lt;0&amp;&amp;(e+=this.length),n=n||0,n&lt;0&amp;&amp;(n+=this.length);var t=new de;if(e&lt;n||e&lt;0)return t;n&lt;0&amp;&amp;(n=0),e&gt;this.length&amp;&amp;(e=this.length);for(var r=this.length,i=this.tail;i!==null&amp;&amp;r&gt;e;r--)i=i.prev;for(;i!==null&amp;&amp;r&gt;n;r--,i=i.prev)t.push(i.value);return t};de.prototype.splice=function(n,e,...t){n&gt;this.length&amp;&amp;(n=this.length-1),n&lt;0&amp;&amp;(n=this.length+n);for(var r=0,i=this.head;i!==null&amp;&amp;r&lt;n;r++)i=i.next;for(var o=[],r=0;i&amp;&amp;r&lt;e;r++)o.push(i.value),i=this.removeNode(i);i===null&amp;&amp;(i=this.tail),i!==this.head&amp;&amp;i!==this.tail&amp;&amp;(i=i.prev);for(var r=0;r&lt;t.length;r++)i=Lg(this,i,t[r]);return o};de.prototype.reverse=function(){for(var n=this.head,e=this.tail,t=n;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=n,this};function Lg(n,e,t){var r=e===n.head?new Gn(t,null,e,n):new Gn(t,e,e.next,n);return r.next===null&amp;&amp;(n.tail=r),r.prev===null&amp;&amp;(n.head=r),n.length++,r}function Ag(n,e){n.tail=new Gn(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function Mg(n,e){n.head=new Gn(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function Gn(n,e,t,r){if(!(this instanceof Gn))return new Gn(n,e,t,r);this.list=r,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Fl()(de)}catch{}});var Wl=q((FS,Hl)=&gt;{&quot;use strict&quot;;var jg=Al(),Bn=Symbol(&quot;max&quot;),vn=Symbol(&quot;length&quot;),pr=Symbol(&quot;lengthCalculator&quot;),Ur=Symbol(&quot;allowStale&quot;),Xn=Symbol(&quot;maxAge&quot;),mn=Symbol(&quot;dispose&quot;),Ml=Symbol(&quot;noDisposeOnSet&quot;),Je=Symbol(&quot;lruList&quot;),Vt=Symbol(&quot;cache&quot;),$l=Symbol(&quot;updateAgeOnGet&quot;),Ho=()=&gt;1,Ko=class{constructor(e){if(typeof e==&quot;number&quot;&amp;&amp;(e={max:e}),e||(e={}),e.max&amp;&amp;(typeof e.max!=&quot;number&quot;||e.max&lt;0))throw new TypeError(&quot;max must be a non-negative number&quot;);let t=this[Bn]=e.max||1/0,r=e.length||Ho;if(this[pr]=typeof r!=&quot;function&quot;?Ho:r,this[Ur]=e.stale||!1,e.maxAge&amp;&amp;typeof e.maxAge!=&quot;number&quot;)throw new TypeError(&quot;maxAge must be a number&quot;);this[Xn]=e.maxAge||0,this[mn]=e.dispose,this[Ml]=e.noDisposeOnSet||!1,this[$l]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!=&quot;number&quot;||e&lt;0)throw new TypeError(&quot;max must be a non-negative number&quot;);this[Bn]=e||1/0,Kr(this)}get max(){return this[Bn]}set allowStale(e){this[Ur]=!!e}get allowStale(){return this[Ur]}set maxAge(e){if(typeof e!=&quot;number&quot;)throw new TypeError(&quot;maxAge must be a non-negative number&quot;);this[Xn]=e,Kr(this)}get maxAge(){return this[Xn]}set lengthCalculator(e){typeof e!=&quot;function&quot;&amp;&amp;(e=Ho),e!==this[pr]&amp;&amp;(this[pr]=e,this[vn]=0,this[Je].forEach(t=&gt;{t.length=this[pr](t.value,t.key),this[vn]+=t.length})),Kr(this)}get lengthCalculator(){return this[pr]}get length(){return this[vn]}get itemCount(){return this[Je].length}rforEach(e,t){t=t||this;for(let r=this[Je].tail;r!==null;){let i=r.prev;jl(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[Je].head;r!==null;){let i=r.next;jl(this,e,r,t),r=i}}keys(){return this[Je].toArray().map(e=&gt;e.key)}values(){return this[Je].toArray().map(e=&gt;e.value)}reset(){this[mn]&amp;&amp;this[Je]&amp;&amp;this[Je].length&amp;&amp;this[Je].forEach(e=&gt;this[mn](e.key,e.value)),this[Vt]=new Map,this[Je]=new jg,this[vn]=0}dump(){return this[Je].map(e=&gt;Ni(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=&gt;e)}dumpLru(){return this[Je]}set(e,t,r){if(r=r||this[Xn],r&amp;&amp;typeof r!=&quot;number&quot;)throw new TypeError(&quot;maxAge must be a number&quot;);let i=r?Date.now():0,o=this[pr](t,e);if(this[Vt].has(e)){if(o&gt;this[Bn])return gr(this,this[Vt].get(e)),!1;let u=this[Vt].get(e).value;return this[mn]&amp;&amp;(this[Ml]||this[mn](e,u.value)),u.now=i,u.maxAge=r,u.value=t,this[vn]+=o-u.length,u.length=o,this.get(e),Kr(this),!0}let s=new Uo(e,t,o,i,r);return s.length&gt;this[Bn]?(this[mn]&amp;&amp;this[mn](e,t),!1):(this[vn]+=s.length,this[Je].unshift(s),this[Vt].set(e,this[Je].head),Kr(this),!0)}has(e){if(!this[Vt].has(e))return!1;let t=this[Vt].get(e).value;return!Ni(this,t)}get(e){return Wo(this,e,!0)}peek(e){return Wo(this,e,!1)}pop(){let e=this[Je].tail;return e?(gr(this,e),e.value):null}del(e){gr(this,this[Vt].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r&gt;=0;r--){let i=e[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-t;s&gt;0&amp;&amp;this.set(i.k,i.v,s)}}}prune(){this[Vt].forEach((e,t)=&gt;Wo(this,t,!1))}},Wo=(n,e,t)=&gt;{let r=n[Vt].get(e);if(r){let i=r.value;if(Ni(n,i)){if(gr(n,r),!n[Ur])return}else t&amp;&amp;(n[$l]&amp;&amp;(r.value.now=Date.now()),n[Je].unshiftNode(r));return i.value}},Ni=(n,e)=&gt;{if(!e||!e.maxAge&amp;&amp;!n[Xn])return!1;let t=Date.now()-e.now;return e.maxAge?t&gt;e.maxAge:n[Xn]&amp;&amp;t&gt;n[Xn]},Kr=n=&gt;{if(n[vn]&gt;n[Bn])for(let e=n[Je].tail;n[vn]&gt;n[Bn]&amp;&amp;e!==null;){let t=e.prev;gr(n,e),e=t}},gr=(n,e)=&gt;{if(e){let t=e.value;n[mn]&amp;&amp;n[mn](t.key,t.value),n[vn]-=t.length,n[Vt].delete(t.key),n[Je].removeNode(e)}},Uo=class{constructor(e,t,r,i,o){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=o||0}},jl=(n,e,t,r)=&gt;{let i=t.value;Ni(n,i)&amp;&amp;(gr(n,t),n[Ur]||(i=void 0)),i&amp;&amp;e.call(r,i.value,i.key,n)};Hl.exports=Ko});var jt=q((LS,Vl)=&gt;{var Jn=class{constructor(e,t){if(t=Hg(t),e instanceof Jn)return e.loose===!!t.loose&amp;&amp;e.includePrerelease===!!t.includePrerelease?e:new Jn(e.raw,t);if(e instanceof zo)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=&gt;this.parseRange(r.trim())).filter(r=&gt;r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length&gt;1){let r=this.set[0];if(this.set=this.set.filter(i=&gt;!Ul(i[0])),this.set.length===0)this.set=[r];else if(this.set.length&gt;1){for(let i of this.set)if(i.length===1&amp;&amp;Vg(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=&gt;e.join(&quot; &quot;).trim()).join(&quot;||&quot;).trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(&quot;,&quot;)}:${e}`,i=Kl.get(r);if(i)return i;let o=this.options.loose,s=o?lt[et.HYPHENRANGELOOSE]:lt[et.HYPHENRANGE];e=e.replace(s,nm(this.options.includePrerelease)),je(&quot;hyphen replace&quot;,e),e=e.replace(lt[et.COMPARATORTRIM],Kg),je(&quot;comparator trim&quot;,e,lt[et.COMPARATORTRIM]),e=e.replace(lt[et.TILDETRIM],Ug),e=e.replace(lt[et.CARETTRIM],zg),e=e.split(/\s+/).join(&quot; &quot;);let a=o?lt[et.COMPARATORLOOSE]:lt[et.COMPARATOR],u=e.split(&quot; &quot;).map(C=&gt;Gg(C,this.options)).join(&quot; &quot;).split(/\s+/).map(C=&gt;tm(C,this.options)).filter(this.options.loose?C=&gt;!!C.match(a):()=&gt;!0).map(C=&gt;new zo(C,this.options)),h=u.length,g=new Map;for(let C of u){if(Ul(C))return[C];g.set(C.value,C)}g.size&gt;1&amp;&amp;g.has(&quot;&quot;)&amp;&amp;g.delete(&quot;&quot;);let p=[...g.values()];return Kl.set(r,p),p}intersects(e,t){if(!(e instanceof Jn))throw new TypeError(&quot;a Range is required&quot;);return this.set.some(r=&gt;zl(r,t)&amp;&amp;e.set.some(i=&gt;zl(i,t)&amp;&amp;r.every(o=&gt;i.every(s=&gt;o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e==&quot;string&quot;)try{e=new Wg(e,this.options)}catch{return!1}for(let t=0;t&lt;this.set.length;t++)if(rm(this.set[t],e,this.options))return!0;return!1}};Vl.exports=Jn;var $g=Wl(),Kl=new $g({max:1e3}),Hg=$r(),zo=zr(),je=jr(),Wg=ut(),{re:lt,t:et,comparatorTrimReplace:Kg,tildeTrimReplace:Ug,caretTrimReplace:zg}=zn(),Ul=n=&gt;n.value===&quot;&lt;0.0.0-0&quot;,Vg=n=&gt;n.value===&quot;&quot;,zl=(n,e)=&gt;{let t=!0,r=n.slice(),i=r.pop();for(;t&amp;&amp;r.length;)t=r.every(o=&gt;i.intersects(o,e)),i=r.pop();return t},Gg=(n,e)=&gt;(je(&quot;comp&quot;,n,e),n=Jg(n,e),je(&quot;caret&quot;,n),n=Bg(n,e),je(&quot;tildes&quot;,n),n=Yg(n,e),je(&quot;xrange&quot;,n),n=em(n,e),je(&quot;stars&quot;,n),n),pt=n=&gt;!n||n.toLowerCase()===&quot;x&quot;||n===&quot;*&quot;,Bg=(n,e)=&gt;n.trim().split(/\s+/).map(t=&gt;Xg(t,e)).join(&quot; &quot;),Xg=(n,e)=&gt;{let t=e.loose?lt[et.TILDELOOSE]:lt[et.TILDE];return n.replace(t,(r,i,o,s,a)=&gt;{je(&quot;tilde&quot;,n,r,i,o,s,a);let u;return pt(i)?u=&quot;&quot;:pt(o)?u=`&gt;=${i}.0.0 &lt;${+i+1}.0.0-0`:pt(s)?u=`&gt;=${i}.${o}.0 &lt;${i}.${+o+1}.0-0`:a?(je(&quot;replaceTilde pr&quot;,a),u=`&gt;=${i}.${o}.${s}-${a} &lt;${i}.${+o+1}.0-0`):u=`&gt;=${i}.${o}.${s} &lt;${i}.${+o+1}.0-0`,je(&quot;tilde return&quot;,u),u})},Jg=(n,e)=&gt;n.trim().split(/\s+/).map(t=&gt;Qg(t,e)).join(&quot; &quot;),Qg=(n,e)=&gt;{je(&quot;caret&quot;,n,e);let t=e.loose?lt[et.CARETLOOSE]:lt[et.CARET],r=e.includePrerelease?&quot;-0&quot;:&quot;&quot;;return n.replace(t,(i,o,s,a,u)=&gt;{je(&quot;caret&quot;,n,i,o,s,a,u);let h;return pt(o)?h=&quot;&quot;:pt(s)?h=`&gt;=${o}.0.0${r} &lt;${+o+1}.0.0-0`:pt(a)?o===&quot;0&quot;?h=`&gt;=${o}.${s}.0${r} &lt;${o}.${+s+1}.0-0`:h=`&gt;=${o}.${s}.0${r} &lt;${+o+1}.0.0-0`:u?(je(&quot;replaceCaret pr&quot;,u),o===&quot;0&quot;?s===&quot;0&quot;?h=`&gt;=${o}.${s}.${a}-${u} &lt;${o}.${s}.${+a+1}-0`:h=`&gt;=${o}.${s}.${a}-${u} &lt;${o}.${+s+1}.0-0`:h=`&gt;=${o}.${s}.${a}-${u} &lt;${+o+1}.0.0-0`):(je(&quot;no pr&quot;),o===&quot;0&quot;?s===&quot;0&quot;?h=`&gt;=${o}.${s}.${a}${r} &lt;${o}.${s}.${+a+1}-0`:h=`&gt;=${o}.${s}.${a}${r} &lt;${o}.${+s+1}.0-0`:h=`&gt;=${o}.${s}.${a} &lt;${+o+1}.0.0-0`),je(&quot;caret return&quot;,h),h})},Yg=(n,e)=&gt;(je(&quot;replaceXRanges&quot;,n,e),n.split(/\s+/).map(t=&gt;Zg(t,e)).join(&quot; &quot;)),Zg=(n,e)=&gt;{n=n.trim();let t=e.loose?lt[et.XRANGELOOSE]:lt[et.XRANGE];return n.replace(t,(r,i,o,s,a,u)=&gt;{je(&quot;xRange&quot;,n,r,i,o,s,a,u);let h=pt(o),g=h||pt(s),p=g||pt(a),C=p;return i===&quot;=&quot;&amp;&amp;C&amp;&amp;(i=&quot;&quot;),u=e.includePrerelease?&quot;-0&quot;:&quot;&quot;,h?i===&quot;&gt;&quot;||i===&quot;&lt;&quot;?r=&quot;&lt;0.0.0-0&quot;:r=&quot;*&quot;:i&amp;&amp;C?(g&amp;&amp;(s=0),a=0,i===&quot;&gt;&quot;?(i=&quot;&gt;=&quot;,g?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i===&quot;&lt;=&quot;&amp;&amp;(i=&quot;&lt;&quot;,g?o=+o+1:s=+s+1),i===&quot;&lt;&quot;&amp;&amp;(u=&quot;-0&quot;),r=`${i+o}.${s}.${a}${u}`):g?r=`&gt;=${o}.0.0${u} &lt;${+o+1}.0.0-0`:p&amp;&amp;(r=`&gt;=${o}.${s}.0${u} &lt;${o}.${+s+1}.0-0`),je(&quot;xRange return&quot;,r),r})},em=(n,e)=&gt;(je(&quot;replaceStars&quot;,n,e),n.trim().replace(lt[et.STAR],&quot;&quot;)),tm=(n,e)=&gt;(je(&quot;replaceGTE0&quot;,n,e),n.trim().replace(lt[e.includePrerelease?et.GTE0PRE:et.GTE0],&quot;&quot;)),nm=n=&gt;(e,t,r,i,o,s,a,u,h,g,p,C,R)=&gt;(pt(r)?t=&quot;&quot;:pt(i)?t=`&gt;=${r}.0.0${n?&quot;-0&quot;:&quot;&quot;}`:pt(o)?t=`&gt;=${r}.${i}.0${n?&quot;-0&quot;:&quot;&quot;}`:s?t=`&gt;=${t}`:t=`&gt;=${t}${n?&quot;-0&quot;:&quot;&quot;}`,pt(h)?u=&quot;&quot;:pt(g)?u=`&lt;${+h+1}.0.0-0`:pt(p)?u=`&lt;${h}.${+g+1}.0-0`:C?u=`&lt;=${h}.${g}.${p}-${C}`:n?u=`&lt;${h}.${g}.${+p+1}-0`:u=`&lt;=${u}`,`${t} ${u}`.trim()),rm=(n,e,t)=&gt;{for(let r=0;r&lt;n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&amp;&amp;!t.includePrerelease){for(let r=0;r&lt;n.length;r++)if(je(n[r].semver),n[r].semver!==zo.ANY&amp;&amp;n[r].semver.prerelease.length&gt;0){let i=n[r].semver;if(i.major===e.major&amp;&amp;i.minor===e.minor&amp;&amp;i.patch===e.patch)return!0}return!1}return!0}});var zr=q((AS,Ql)=&gt;{var Vr=Symbol(&quot;SemVer ANY&quot;),mr=class{static get ANY(){return Vr}constructor(e,t){if(t=im(t),e instanceof mr){if(e.loose===!!t.loose)return e;e=e.value}Go(&quot;comparator&quot;,e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Vr?this.value=&quot;&quot;:this.value=this.operator+this.semver.version,Go(&quot;comp&quot;,this)}parse(e){let t=this.options.loose?Gl[Bl.COMPARATORLOOSE]:Gl[Bl.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:&quot;&quot;,this.operator===&quot;=&quot;&amp;&amp;(this.operator=&quot;&quot;),r[2]?this.semver=new Xl(r[2],this.options.loose):this.semver=Vr}toString(){return this.value}test(e){if(Go(&quot;Comparator.test&quot;,e,this.options.loose),this.semver===Vr||e===Vr)return!0;if(typeof e==&quot;string&quot;)try{e=new Xl(e,this.options)}catch{return!1}return Vo(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof mr))throw new TypeError(&quot;a Comparator is required&quot;);if((!t||typeof t!=&quot;object&quot;)&amp;&amp;(t={loose:!!t,includePrerelease:!1}),this.operator===&quot;&quot;)return this.value===&quot;&quot;?!0:new Jl(e.value,t).test(this.value);if(e.operator===&quot;&quot;)return e.value===&quot;&quot;?!0:new Jl(this.value,t).test(e.semver);let r=(this.operator===&quot;&gt;=&quot;||this.operator===&quot;&gt;&quot;)&amp;&amp;(e.operator===&quot;&gt;=&quot;||e.operator===&quot;&gt;&quot;),i=(this.operator===&quot;&lt;=&quot;||this.operator===&quot;&lt;&quot;)&amp;&amp;(e.operator===&quot;&lt;=&quot;||e.operator===&quot;&lt;&quot;),o=this.semver.version===e.semver.version,s=(this.operator===&quot;&gt;=&quot;||this.operator===&quot;&lt;=&quot;)&amp;&amp;(e.operator===&quot;&gt;=&quot;||e.operator===&quot;&lt;=&quot;),a=Vo(this.semver,&quot;&lt;&quot;,e.semver,t)&amp;&amp;(this.operator===&quot;&gt;=&quot;||this.operator===&quot;&gt;&quot;)&amp;&amp;(e.operator===&quot;&lt;=&quot;||e.operator===&quot;&lt;&quot;),u=Vo(this.semver,&quot;&gt;&quot;,e.semver,t)&amp;&amp;(this.operator===&quot;&lt;=&quot;||this.operator===&quot;&lt;&quot;)&amp;&amp;(e.operator===&quot;&gt;=&quot;||e.operator===&quot;&gt;&quot;);return r||i||o&amp;&amp;s||a||u}};Ql.exports=mr;var im=$r(),{re:Gl,t:Bl}=zn(),Vo=$o(),Go=jr(),Xl=ut(),Jl=jt()});var Gr=q((MS,Yl)=&gt;{var om=jt(),sm=(n,e,t)=&gt;{try{e=new om(e,t)}catch{return!1}return e.test(n)};Yl.exports=sm});var ed=q((jS,Zl)=&gt;{var am=jt(),cm=(n,e)=&gt;new am(n,e).set.map(t=&gt;t.map(r=&gt;r.value).join(&quot; &quot;).trim().split(&quot; &quot;));Zl.exports=cm});var nd=q(($S,td)=&gt;{var um=ut(),lm=jt(),dm=(n,e,t)=&gt;{let r=null,i=null,o=null;try{o=new lm(e,t)}catch{return null}return n.forEach(s=&gt;{o.test(s)&amp;&amp;(!r||i.compare(s)===-1)&amp;&amp;(r=s,i=new um(r,t))}),r};td.exports=dm});var id=q((HS,rd)=&gt;{var fm=ut(),hm=jt(),pm=(n,e,t)=&gt;{let r=null,i=null,o=null;try{o=new hm(e,t)}catch{return null}return n.forEach(s=&gt;{o.test(s)&amp;&amp;(!r||i.compare(s)===1)&amp;&amp;(r=s,i=new fm(r,t))}),r};rd.exports=pm});var ad=q((WS,sd)=&gt;{var Bo=ut(),gm=jt(),od=Wr(),mm=(n,e)=&gt;{n=new gm(n,e);let t=new Bo(&quot;0.0.0&quot;);if(n.test(t)||(t=new Bo(&quot;0.0.0-0&quot;),n.test(t)))return t;t=null;for(let r=0;r&lt;n.set.length;++r){let i=n.set[r],o=null;i.forEach(s=&gt;{let a=new Bo(s.semver.version);switch(s.operator){case&quot;&gt;&quot;:a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case&quot;&quot;:case&quot;&gt;=&quot;:(!o||od(a,o))&amp;&amp;(o=a);break;case&quot;&lt;&quot;:case&quot;&lt;=&quot;:break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&amp;&amp;(!t||od(t,o))&amp;&amp;(t=o)}return t&amp;&amp;n.test(t)?t:null};sd.exports=mm});var ud=q((KS,cd)=&gt;{var vm=jt(),ym=(n,e)=&gt;{try{return new vm(n,e).range||&quot;*&quot;}catch{return null}};cd.exports=ym});var Ii=q((US,hd)=&gt;{var Cm=ut(),fd=zr(),{ANY:Rm}=fd,Dm=jt(),Sm=Gr(),ld=Wr(),dd=qi(),wm=ki(),bm=Ei(),_m=(n,e,t,r)=&gt;{n=new Cm(n,r),e=new Dm(e,r);let i,o,s,a,u;switch(t){case&quot;&gt;&quot;:i=ld,o=wm,s=dd,a=&quot;&gt;&quot;,u=&quot;&gt;=&quot;;break;case&quot;&lt;&quot;:i=dd,o=bm,s=ld,a=&quot;&lt;&quot;,u=&quot;&lt;=&quot;;break;default:throw new TypeError('Must provide a hilo val of &quot;&lt;&quot; or &quot;&gt;&quot;')}if(Sm(n,e,r))return!1;for(let h=0;h&lt;e.set.length;++h){let g=e.set[h],p=null,C=null;if(g.forEach(R=&gt;{R.semver===Rm&amp;&amp;(R=new fd(&quot;&gt;=0.0.0&quot;)),p=p||R,C=C||R,i(R.semver,p.semver,r)?p=R:s(R.semver,C.semver,r)&amp;&amp;(C=R)}),p.operator===a||p.operator===u||(!C.operator||C.operator===a)&amp;&amp;o(n,C.semver))return!1;if(C.operator===u&amp;&amp;s(n,C.semver))return!1}return!0};hd.exports=_m});var gd=q((zS,pd)=&gt;{var Tm=Ii(),Pm=(n,e,t)=&gt;Tm(n,e,&quot;&gt;&quot;,t);pd.exports=Pm});var vd=q((VS,md)=&gt;{var qm=Ii(),Em=(n,e,t)=&gt;qm(n,e,&quot;&lt;&quot;,t);md.exports=Em});var Rd=q((GS,Cd)=&gt;{var yd=jt(),km=(n,e,t)=&gt;(n=new yd(n,t),e=new yd(e,t),n.intersects(e));Cd.exports=km});var Sd=q((BS,Dd)=&gt;{var Om=Gr(),xm=Mt();Dd.exports=(n,e,t)=&gt;{let r=[],i=null,o=null,s=n.sort((g,p)=&gt;xm(g,p,t));for(let g of s)Om(g,e,t)?(o=g,i||(i=g)):(o&amp;&amp;r.push([i,o]),o=null,i=null);i&amp;&amp;r.push([i,null]);let a=[];for(let[g,p]of r)g===p?a.push(g):!p&amp;&amp;g===s[0]?a.push(&quot;*&quot;):p?g===s[0]?a.push(`&lt;=${p}`):a.push(`${g} - ${p}`):a.push(`&gt;=${g}`);let u=a.join(&quot; || &quot;),h=typeof e.raw==&quot;string&quot;?e.raw:String(e);return u.length&lt;h.length?u:e}});var Pd=q((XS,Td)=&gt;{var wd=jt(),Fi=zr(),{ANY:Xo}=Fi,Br=Gr(),Jo=Mt(),Nm=(n,e,t={})=&gt;{if(n===e)return!0;n=new wd(n,t),e=new wd(e,t);let r=!1;e:for(let i of n.set){for(let o of e.set){let s=Im(i,o,t);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Im=(n,e,t)=&gt;{if(n===e)return!0;if(n.length===1&amp;&amp;n[0].semver===Xo){if(e.length===1&amp;&amp;e[0].semver===Xo)return!0;t.includePrerelease?n=[new Fi(&quot;&gt;=0.0.0-0&quot;)]:n=[new Fi(&quot;&gt;=0.0.0&quot;)]}if(e.length===1&amp;&amp;e[0].semver===Xo){if(t.includePrerelease)return!0;e=[new Fi(&quot;&gt;=0.0.0&quot;)]}let r=new Set,i,o;for(let R of n)R.operator===&quot;&gt;&quot;||R.operator===&quot;&gt;=&quot;?i=bd(i,R,t):R.operator===&quot;&lt;&quot;||R.operator===&quot;&lt;=&quot;?o=_d(o,R,t):r.add(R.semver);if(r.size&gt;1)return null;let s;if(i&amp;&amp;o){if(s=Jo(i.semver,o.semver,t),s&gt;0)return null;if(s===0&amp;&amp;(i.operator!==&quot;&gt;=&quot;||o.operator!==&quot;&lt;=&quot;))return null}for(let R of r){if(i&amp;&amp;!Br(R,String(i),t)||o&amp;&amp;!Br(R,String(o),t))return null;for(let E of e)if(!Br(R,String(E),t))return!1;return!0}let a,u,h,g,p=o&amp;&amp;!t.includePrerelease&amp;&amp;o.semver.prerelease.length?o.semver:!1,C=i&amp;&amp;!t.includePrerelease&amp;&amp;i.semver.prerelease.length?i.semver:!1;p&amp;&amp;p.prerelease.length===1&amp;&amp;o.operator===&quot;&lt;&quot;&amp;&amp;p.prerelease[0]===0&amp;&amp;(p=!1);for(let R of e){if(g=g||R.operator===&quot;&gt;&quot;||R.operator===&quot;&gt;=&quot;,h=h||R.operator===&quot;&lt;&quot;||R.operator===&quot;&lt;=&quot;,i){if(C&amp;&amp;R.semver.prerelease&amp;&amp;R.semver.prerelease.length&amp;&amp;R.semver.major===C.major&amp;&amp;R.semver.minor===C.minor&amp;&amp;R.semver.patch===C.patch&amp;&amp;(C=!1),R.operator===&quot;&gt;&quot;||R.operator===&quot;&gt;=&quot;){if(a=bd(i,R,t),a===R&amp;&amp;a!==i)return!1}else if(i.operator===&quot;&gt;=&quot;&amp;&amp;!Br(i.semver,String(R),t))return!1}if(o){if(p&amp;&amp;R.semver.prerelease&amp;&amp;R.semver.prerelease.length&amp;&amp;R.semver.major===p.major&amp;&amp;R.semver.minor===p.minor&amp;&amp;R.semver.patch===p.patch&amp;&amp;(p=!1),R.operator===&quot;&lt;&quot;||R.operator===&quot;&lt;=&quot;){if(u=_d(o,R,t),u===R&amp;&amp;u!==o)return!1}else if(o.operator===&quot;&lt;=&quot;&amp;&amp;!Br(o.semver,String(R),t))return!1}if(!R.operator&amp;&amp;(o||i)&amp;&amp;s!==0)return!1}return!(i&amp;&amp;h&amp;&amp;!o&amp;&amp;s!==0||o&amp;&amp;g&amp;&amp;!i&amp;&amp;s!==0||C||p)},bd=(n,e,t)=&gt;{if(!n)return e;let r=Jo(n.semver,e.semver,t);return r&gt;0?n:r&lt;0||e.operator===&quot;&gt;&quot;&amp;&amp;n.operator===&quot;&gt;=&quot;?e:n},_d=(n,e,t)=&gt;{if(!n)return e;let r=Jo(n.semver,e.semver,t);return r&lt;0?n:r&gt;0||e.operator===&quot;&lt;&quot;&amp;&amp;n.operator===&quot;&lt;=&quot;?e:n};Td.exports=Nm});var Ed=q((JS,qd)=&gt;{var Qo=zn();qd.exports={re:Qo.re,src:Qo.src,tokens:Qo.t,SEMVER_SPEC_VERSION:Mr().SEMVER_SPEC_VERSION,SemVer:ut(),compareIdentifiers:wi().compareIdentifiers,rcompareIdentifiers:wi().rcompareIdentifiers,parse:Vn(),valid:Qu(),clean:Zu(),inc:tl(),diff:al(),major:ul(),minor:dl(),patch:hl(),prerelease:gl(),compare:Mt(),rcompare:vl(),compareLoose:Cl(),compareBuild:Pi(),sort:wl(),rsort:_l(),gt:Wr(),lt:qi(),eq:Ti(),neq:jo(),gte:Ei(),lte:ki(),cmp:$o(),coerce:Nl(),Comparator:zr(),Range:jt(),satisfies:Gr(),toComparators:ed(),maxSatisfying:nd(),minSatisfying:id(),minVersion:ad(),validRange:ud(),outside:Ii(),gtr:gd(),ltr:vd(),intersects:Rd(),simplifyRange:Sd(),subset:Pd()}});var yn=q(Ie=&gt;{&quot;use strict&quot;;Object.defineProperty(Ie,&quot;__esModule&quot;,{value:!0});Ie.asPromise=Ie.thenable=Ie.typedArray=Ie.stringArray=Ie.array=Ie.func=Ie.error=Ie.number=Ie.string=Ie.boolean=void 0;function Fm(n){return n===!0||n===!1}Ie.boolean=Fm;function kd(n){return typeof n==&quot;string&quot;||n instanceof String}Ie.string=kd;function Lm(n){return typeof n==&quot;number&quot;||n instanceof Number}Ie.number=Lm;function Am(n){return n instanceof Error}Ie.error=Am;function Od(n){return typeof n==&quot;function&quot;}Ie.func=Od;function xd(n){return Array.isArray(n)}Ie.array=xd;function Mm(n){return xd(n)&amp;&amp;n.every(e=&gt;kd(e))}Ie.stringArray=Mm;function jm(n,e){return Array.isArray(n)&amp;&amp;n.every(e)}Ie.typedArray=jm;function Nd(n){return n&amp;&amp;Od(n.then)}Ie.thenable=Nd;function $m(n){return n instanceof Promise?n:Nd(n)?new Promise((e,t)=&gt;{n.then(r=&gt;e(r),r=&gt;t(r))}):Promise.resolve(n)}Ie.asPromise=$m});var Fd=q((YS,Id)=&gt;{Id.exports=function(n,e){for(var t=[],r=0;r&lt;n.length;r++){var i=e(n[r],r);Hm(i)?t.push.apply(t,i):t.push(i)}return t};var Hm=Array.isArray||function(n){return Object.prototype.toString.call(n)===&quot;[object Array]&quot;}});var $d=q((ZS,jd)=&gt;{&quot;use strict&quot;;jd.exports=Ad;function Ad(n,e,t){n instanceof RegExp&amp;&amp;(n=Ld(n,t)),e instanceof RegExp&amp;&amp;(e=Ld(e,t));var r=Md(n,e,t);return r&amp;&amp;{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function Ld(n,e){var t=e.match(n);return t?t[0]:null}Ad.range=Md;function Md(n,e,t){var r,i,o,s,a,u=t.indexOf(n),h=t.indexOf(e,u+1),g=u;if(u&gt;=0&amp;&amp;h&gt;0){if(n===e)return[u,h];for(r=[],o=t.length;g&gt;=0&amp;&amp;!a;)g==u?(r.push(g),u=t.indexOf(n,g+1)):r.length==1?a=[r.pop(),h]:(i=r.pop(),i&lt;o&amp;&amp;(o=i,s=h),h=t.indexOf(e,g+1)),g=u&lt;h&amp;&amp;u&gt;=0?u:h;r.length&amp;&amp;(a=[o,s])}return a}});var Bd=q((ew,Gd)=&gt;{var Wm=Fd(),Hd=$d();Gd.exports=zm;var Wd=&quot;\0SLASH&quot;+Math.random()+&quot;\0&quot;,Kd=&quot;\0OPEN&quot;+Math.random()+&quot;\0&quot;,Zo=&quot;\0CLOSE&quot;+Math.random()+&quot;\0&quot;,Ud=&quot;\0COMMA&quot;+Math.random()+&quot;\0&quot;,zd=&quot;\0PERIOD&quot;+Math.random()+&quot;\0&quot;;function Yo(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function Km(n){return n.split(&quot;\\\\&quot;).join(Wd).split(&quot;\\{&quot;).join(Kd).split(&quot;\\}&quot;).join(Zo).split(&quot;\\,&quot;).join(Ud).split(&quot;\\.&quot;).join(zd)}function Um(n){return n.split(Wd).join(&quot;\\&quot;).split(Kd).join(&quot;{&quot;).split(Zo).join(&quot;}&quot;).split(Ud).join(&quot;,&quot;).split(zd).join(&quot;.&quot;)}function Vd(n){if(!n)return[&quot;&quot;];var e=[],t=Hd(&quot;{&quot;,&quot;}&quot;,n);if(!t)return n.split(&quot;,&quot;);var r=t.pre,i=t.body,o=t.post,s=r.split(&quot;,&quot;);s[s.length-1]+=&quot;{&quot;+i+&quot;}&quot;;var a=Vd(o);return o.length&amp;&amp;(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function zm(n){return n?(n.substr(0,2)===&quot;{}&quot;&amp;&amp;(n=&quot;\\{\\}&quot;+n.substr(2)),vr(Km(n),!0).map(Um)):[]}function Vm(n){return&quot;{&quot;+n+&quot;}&quot;}function Gm(n){return/^-?0\d/.test(n)}function Bm(n,e){return n&lt;=e}function Xm(n,e){return n&gt;=e}function vr(n,e){var t=[],r=Hd(&quot;{&quot;,&quot;}&quot;,n);if(!r||/\$$/.test(r.pre))return[n];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),s=i||o,a=r.body.indexOf(&quot;,&quot;)&gt;=0;if(!s&amp;&amp;!a)return r.post.match(/,.*\}/)?(n=r.pre+&quot;{&quot;+r.body+Zo+r.post,vr(n)):[n];var u;if(s)u=r.body.split(/\.\./);else if(u=Vd(r.body),u.length===1&amp;&amp;(u=vr(u[0],!1).map(Vm),u.length===1)){var g=r.post.length?vr(r.post,!1):[&quot;&quot;];return g.map(function(st){return r.pre+u[0]+st})}var h=r.pre,g=r.post.length?vr(r.post,!1):[&quot;&quot;],p;if(s){var C=Yo(u[0]),R=Yo(u[1]),E=Math.max(u[0].length,u[1].length),I=u.length==3?Math.abs(Yo(u[2])):1,F=Bm,A=R&lt;C;A&amp;&amp;(I*=-1,F=Xm);var N=u.some(Gm);p=[];for(var L=C;F(L,R);L+=I){var j;if(o)j=String.fromCharCode(L),j===&quot;\\&quot;&amp;&amp;(j=&quot;&quot;);else if(j=String(L),N){var X=E-j.length;if(X&gt;0){var Re=new Array(X+1).join(&quot;0&quot;);L&lt;0?j=&quot;-&quot;+Re+j.slice(1):j=Re+j}}p.push(j)}}else p=Wm(u,function(ot){return vr(ot,!1)});for(var ne=0;ne&lt;p.length;ne++)for(var Pe=0;Pe&lt;g.length;Pe++){var We=h+p[ne]+g[Pe];(!e||s||We)&amp;&amp;t.push(We)}return t}});var Mi=q((tw,Zd)=&gt;{Zd.exports=qt;qt.Minimatch=tt;var Xr=function(){try{return require(&quot;path&quot;)}catch{}}()||{sep:&quot;/&quot;};qt.sep=Xr.sep;var ns=qt.GLOBSTAR=tt.GLOBSTAR={},Jm=Bd(),Xd={&quot;!&quot;:{open:&quot;(?:(?!(?:&quot;,close:&quot;))[^/]*?)&quot;},&quot;?&quot;:{open:&quot;(?:&quot;,close:&quot;)?&quot;},&quot;+&quot;:{open:&quot;(?:&quot;,close:&quot;)+&quot;},&quot;*&quot;:{open:&quot;(?:&quot;,close:&quot;)*&quot;},&quot;@&quot;:{open:&quot;(?:&quot;,close:&quot;)&quot;}},es=&quot;[^/]&quot;,ts=es+&quot;*?&quot;,Qm=&quot;(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?&quot;,Ym=&quot;(?:(?!(?:\\/|^)\\.).)*?&quot;,Jd=Zm(&quot;().*{}+?[]^$\\!&quot;);function Zm(n){return n.split(&quot;&quot;).reduce(function(e,t){return e[t]=!0,e},{})}var Qd=/\/+/;qt.filter=ev;function ev(n,e){return e=e||{},function(t,r,i){return qt(t,n,e)}}function xn(n,e){e=e||{};var t={};return Object.keys(n).forEach(function(r){t[r]=n[r]}),Object.keys(e).forEach(function(r){t[r]=e[r]}),t}qt.defaults=function(n){if(!n||typeof n!=&quot;object&quot;||!Object.keys(n).length)return qt;var e=qt,t=function(i,o,s){return e(i,o,xn(n,s))};return t.Minimatch=function(i,o){return new e.Minimatch(i,xn(n,o))},t.Minimatch.defaults=function(i){return e.defaults(xn(n,i)).Minimatch},t.filter=function(i,o){return e.filter(i,xn(n,o))},t.defaults=function(i){return e.defaults(xn(n,i))},t.makeRe=function(i,o){return e.makeRe(i,xn(n,o))},t.braceExpand=function(i,o){return e.braceExpand(i,xn(n,o))},t.match=function(r,i,o){return e.match(r,i,xn(n,o))},t};tt.defaults=function(n){return qt.defaults(n).Minimatch};function qt(n,e,t){return Ai(e),t||(t={}),!t.nocomment&amp;&amp;e.charAt(0)===&quot;#&quot;?!1:new tt(e,t).match(n)}function tt(n,e){if(!(this instanceof tt))return new tt(n,e);Ai(n),e||(e={}),n=n.trim(),!e.allowWindowsEscape&amp;&amp;Xr.sep!==&quot;/&quot;&amp;&amp;(n=n.split(Xr.sep).join(&quot;/&quot;)),this.options=e,this.set=[],this.pattern=n,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}tt.prototype.debug=function(){};tt.prototype.make=tv;function tv(){var n=this.pattern,e=this.options;if(!e.nocomment&amp;&amp;n.charAt(0)===&quot;#&quot;){this.comment=!0;return}if(!n){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&amp;&amp;(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,t),t=this.globParts=t.map(function(r){return r.split(Qd)}),this.debug(this.pattern,t),t=t.map(function(r,i,o){return r.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}tt.prototype.parseNegate=nv;function nv(){var n=this.pattern,e=!1,t=this.options,r=0;if(!t.nonegate){for(var i=0,o=n.length;i&lt;o&amp;&amp;n.charAt(i)===&quot;!&quot;;i++)e=!e,r++;r&amp;&amp;(this.pattern=n.substr(r)),this.negate=e}}qt.braceExpand=function(n,e){return Yd(n,e)};tt.prototype.braceExpand=Yd;function Yd(n,e){return e||(this instanceof tt?e=this.options:e={}),n=typeof n&gt;&quot;u&quot;?this.pattern:n,Ai(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Jm(n)}var rv=1024*64,Ai=function(n){if(typeof n!=&quot;string&quot;)throw new TypeError(&quot;invalid pattern&quot;);if(n.length&gt;rv)throw new TypeError(&quot;pattern is too long&quot;)};tt.prototype.parse=iv;var Li={};function iv(n,e){Ai(n);var t=this.options;if(n===&quot;**&quot;)if(t.noglobstar)n=&quot;*&quot;;else return ns;if(n===&quot;&quot;)return&quot;&quot;;var r=&quot;&quot;,i=!!t.nocase,o=!1,s=[],a=[],u,h=!1,g=-1,p=-1,C=n.charAt(0)===&quot;.&quot;?&quot;&quot;:t.dot?&quot;(?!(?:^|\\/)\\.{1,2}(?:$|\\/))&quot;:&quot;(?!\\.)&quot;,R=this;function E(){if(u){switch(u){case&quot;*&quot;:r+=ts,i=!0;break;case&quot;?&quot;:r+=es,i=!0;break;default:r+=&quot;\\&quot;+u;break}R.debug(&quot;clearStateChar %j %j&quot;,u,r),u=!1}}for(var I=0,F=n.length,A;I&lt;F&amp;&amp;(A=n.charAt(I));I++){if(this.debug(&quot;%s	%s %s %j&quot;,n,I,r,A),o&amp;&amp;Jd[A]){r+=&quot;\\&quot;+A,o=!1;continue}switch(A){case&quot;/&quot;:return!1;case&quot;\\&quot;:E(),o=!0;continue;case&quot;?&quot;:case&quot;*&quot;:case&quot;+&quot;:case&quot;@&quot;:case&quot;!&quot;:if(this.debug(&quot;%s	%s %s %j &lt;-- stateChar&quot;,n,I,r,A),h){this.debug(&quot;  in class&quot;),A===&quot;!&quot;&amp;&amp;I===p+1&amp;&amp;(A=&quot;^&quot;),r+=A;continue}R.debug(&quot;call clearStateChar %j&quot;,u),E(),u=A,t.noext&amp;&amp;E();continue;case&quot;(&quot;:if(h){r+=&quot;(&quot;;continue}if(!u){r+=&quot;\\(&quot;;continue}s.push({type:u,start:I-1,reStart:r.length,open:Xd[u].open,close:Xd[u].close}),r+=u===&quot;!&quot;?&quot;(?:(?!(?:&quot;:&quot;(?:&quot;,this.debug(&quot;plType %j %j&quot;,u,r),u=!1;continue;case&quot;)&quot;:if(h||!s.length){r+=&quot;\\)&quot;;continue}E(),i=!0;var N=s.pop();r+=N.close,N.type===&quot;!&quot;&amp;&amp;a.push(N),N.reEnd=r.length;continue;case&quot;|&quot;:if(h||!s.length||o){r+=&quot;\\|&quot;,o=!1;continue}E(),r+=&quot;|&quot;;continue;case&quot;[&quot;:if(E(),h){r+=&quot;\\&quot;+A;continue}h=!0,p=I,g=r.length,r+=A;continue;case&quot;]&quot;:if(I===p+1||!h){r+=&quot;\\&quot;+A,o=!1;continue}var L=n.substring(p+1,I);try{RegExp(&quot;[&quot;+L+&quot;]&quot;)}catch{var j=this.parse(L,Li);r=r.substr(0,g)+&quot;\\[&quot;+j[0]+&quot;\\]&quot;,i=i||j[1],h=!1;continue}i=!0,h=!1,r+=A;continue;default:E(),o?o=!1:Jd[A]&amp;&amp;!(A===&quot;^&quot;&amp;&amp;h)&amp;&amp;(r+=&quot;\\&quot;),r+=A}}for(h&amp;&amp;(L=n.substr(p+1),j=this.parse(L,Li),r=r.substr(0,g)+&quot;\\[&quot;+j[0],i=i||j[1]),N=s.pop();N;N=s.pop()){var X=r.slice(N.reStart+N.open.length);this.debug(&quot;setting tail&quot;,r,N),X=X.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(at,wt,Ct){return Ct||(Ct=&quot;\\&quot;),wt+wt+Ct+&quot;|&quot;}),this.debug(`tail=%j
</failure>
		</testcase>
		<testcase name="javascript.lang.security.audit.detect-non-literal-regexp.detect-non-literal-regexp" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="1">
			<failure type="WARNING" message="RegExp() called with a `n` function argument, this might allow an attacker to cause a Denial of Service (DoS) within your application as RegExP which blocks the main thread.">var Rp=Object.create;var Si=Object.defineProperty;var Dp=Object.getOwnPropertyDescriptor;var Sp=Object.getOwnPropertyNames;var wp=Object.getPrototypeOf,bp=Object.prototype.hasOwnProperty;var q=(n,e)=&gt;()=&gt;(e||n((e={exports:{}}).exports,e),e.exports),_p=(n,e)=&gt;{for(var t in e)Si(n,t,{get:e[t],enumerable:!0})},Iu=(n,e,t,r)=&gt;{if(e&amp;&amp;typeof e==&quot;object&quot;||typeof e==&quot;function&quot;)for(let i of Sp(e))!bp.call(n,i)&amp;&amp;i!==t&amp;&amp;Si(n,i,{get:()=&gt;e[i],enumerable:!(r=Dp(e,i))||r.enumerable});return n};var Tp=(n,e,t)=&gt;(t=n!=null?Rp(wp(n)):{},Iu(e||!n||!n.__esModule?Si(t,&quot;default&quot;,{value:n,enumerable:!0}):t,n)),Pp=n=&gt;Iu(Si({},&quot;__esModule&quot;,{value:!0}),n);var Mr=q((oS,Fu)=&gt;{var qp=&quot;2.0.0&quot;,Ep=Number.MAX_SAFE_INTEGER||9007199254740991,kp=16;Fu.exports={SEMVER_SPEC_VERSION:qp,MAX_LENGTH:256,MAX_SAFE_INTEGER:Ep,MAX_SAFE_COMPONENT_LENGTH:kp}});var jr=q((sS,Lu)=&gt;{var Op=typeof process==&quot;object&quot;&amp;&amp;process.env&amp;&amp;process.env.NODE_DEBUG&amp;&amp;/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...n)=&gt;console.error(&quot;SEMVER&quot;,...n):()=&gt;{};Lu.exports=Op});var zn=q((On,Au)=&gt;{var{MAX_SAFE_COMPONENT_LENGTH:Mo}=Mr(),xp=jr();On=Au.exports={};var Np=On.re=[],U=On.src=[],z=On.t={},Ip=0,re=(n,e,t)=&gt;{let r=Ip++;xp(r,e),z[n]=r,U[r]=e,Np[r]=new RegExp(e,t?&quot;g&quot;:void 0)};re(&quot;NUMERICIDENTIFIER&quot;,&quot;0|[1-9]\\d*&quot;);re(&quot;NUMERICIDENTIFIERLOOSE&quot;,&quot;[0-9]+&quot;);re(&quot;NONNUMERICIDENTIFIER&quot;,&quot;\\d*[a-zA-Z-][a-zA-Z0-9-]*&quot;);re(&quot;MAINVERSION&quot;,`(${U[z.NUMERICIDENTIFIER]})\\.(${U[z.NUMERICIDENTIFIER]})\\.(${U[z.NUMERICIDENTIFIER]})`);re(&quot;MAINVERSIONLOOSE&quot;,`(${U[z.NUMERICIDENTIFIERLOOSE]})\\.(${U[z.NUMERICIDENTIFIERLOOSE]})\\.(${U[z.NUMERICIDENTIFIERLOOSE]})`);re(&quot;PRERELEASEIDENTIFIER&quot;,`(?:${U[z.NUMERICIDENTIFIER]}|${U[z.NONNUMERICIDENTIFIER]})`);re(&quot;PRERELEASEIDENTIFIERLOOSE&quot;,`(?:${U[z.NUMERICIDENTIFIERLOOSE]}|${U[z.NONNUMERICIDENTIFIER]})`);re(&quot;PRERELEASE&quot;,`(?:-(${U[z.PRERELEASEIDENTIFIER]}(?:\\.${U[z.PRERELEASEIDENTIFIER]})*))`);re(&quot;PRERELEASELOOSE&quot;,`(?:-?(${U[z.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${U[z.PRERELEASEIDENTIFIERLOOSE]})*))`);re(&quot;BUILDIDENTIFIER&quot;,&quot;[0-9A-Za-z-]+&quot;);re(&quot;BUILD&quot;,`(?:\\+(${U[z.BUILDIDENTIFIER]}(?:\\.${U[z.BUILDIDENTIFIER]})*))`);re(&quot;FULLPLAIN&quot;,`v?${U[z.MAINVERSION]}${U[z.PRERELEASE]}?${U[z.BUILD]}?`);re(&quot;FULL&quot;,`^${U[z.FULLPLAIN]}$`);re(&quot;LOOSEPLAIN&quot;,`[v=\\s]*${U[z.MAINVERSIONLOOSE]}${U[z.PRERELEASELOOSE]}?${U[z.BUILD]}?`);re(&quot;LOOSE&quot;,`^${U[z.LOOSEPLAIN]}$`);re(&quot;GTLT&quot;,&quot;((?:&lt;|&gt;)?=?)&quot;);re(&quot;XRANGEIDENTIFIERLOOSE&quot;,`${U[z.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);re(&quot;XRANGEIDENTIFIER&quot;,`${U[z.NUMERICIDENTIFIER]}|x|X|\\*`);re(&quot;XRANGEPLAIN&quot;,`[v=\\s]*(${U[z.XRANGEIDENTIFIER]})(?:\\.(${U[z.XRANGEIDENTIFIER]})(?:\\.(${U[z.XRANGEIDENTIFIER]})(?:${U[z.PRERELEASE]})?${U[z.BUILD]}?)?)?`);re(&quot;XRANGEPLAINLOOSE&quot;,`[v=\\s]*(${U[z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[z.XRANGEIDENTIFIERLOOSE]})(?:\\.(${U[z.XRANGEIDENTIFIERLOOSE]})(?:${U[z.PRERELEASELOOSE]})?${U[z.BUILD]}?)?)?`);re(&quot;XRANGE&quot;,`^${U[z.GTLT]}\\s*${U[z.XRANGEPLAIN]}$`);re(&quot;XRANGELOOSE&quot;,`^${U[z.GTLT]}\\s*${U[z.XRANGEPLAINLOOSE]}$`);re(&quot;COERCE&quot;,`(^|[^\\d])(\\d{1,${Mo}})(?:\\.(\\d{1,${Mo}}))?(?:\\.(\\d{1,${Mo}}))?(?:$|[^\\d])`);re(&quot;COERCERTL&quot;,U[z.COERCE],!0);re(&quot;LONETILDE&quot;,&quot;(?:~&gt;?)&quot;);re(&quot;TILDETRIM&quot;,`(\\s*)${U[z.LONETILDE]}\\s+`,!0);On.tildeTrimReplace=&quot;$1~&quot;;re(&quot;TILDE&quot;,`^${U[z.LONETILDE]}${U[z.XRANGEPLAIN]}$`);re(&quot;TILDELOOSE&quot;,`^${U[z.LONETILDE]}${U[z.XRANGEPLAINLOOSE]}$`);re(&quot;LONECARET&quot;,&quot;(?:\\^)&quot;);re(&quot;CARETTRIM&quot;,`(\\s*)${U[z.LONECARET]}\\s+`,!0);On.caretTrimReplace=&quot;$1^&quot;;re(&quot;CARET&quot;,`^${U[z.LONECARET]}${U[z.XRANGEPLAIN]}$`);re(&quot;CARETLOOSE&quot;,`^${U[z.LONECARET]}${U[z.XRANGEPLAINLOOSE]}$`);re(&quot;COMPARATORLOOSE&quot;,`^${U[z.GTLT]}\\s*(${U[z.LOOSEPLAIN]})$|^$`);re(&quot;COMPARATOR&quot;,`^${U[z.GTLT]}\\s*(${U[z.FULLPLAIN]})$|^$`);re(&quot;COMPARATORTRIM&quot;,`(\\s*)${U[z.GTLT]}\\s*(${U[z.LOOSEPLAIN]}|${U[z.XRANGEPLAIN]})`,!0);On.comparatorTrimReplace=&quot;$1$2$3&quot;;re(&quot;HYPHENRANGE&quot;,`^\\s*(${U[z.XRANGEPLAIN]})\\s+-\\s+(${U[z.XRANGEPLAIN]})\\s*$`);re(&quot;HYPHENRANGELOOSE&quot;,`^\\s*(${U[z.XRANGEPLAINLOOSE]})\\s+-\\s+(${U[z.XRANGEPLAINLOOSE]})\\s*$`);re(&quot;STAR&quot;,&quot;(&lt;|&gt;)?=?\\s*\\*&quot;);re(&quot;GTE0&quot;,&quot;^\\s*&gt;=\\s*0.0.0\\s*$&quot;);re(&quot;GTE0PRE&quot;,&quot;^\\s*&gt;=\\s*0.0.0-0\\s*$&quot;)});var $r=q((aS,Mu)=&gt;{var Fp=[&quot;includePrerelease&quot;,&quot;loose&quot;,&quot;rtl&quot;],Lp=n=&gt;n?typeof n!=&quot;object&quot;?{loose:!0}:Fp.filter(e=&gt;n[e]).reduce((e,t)=&gt;(e[t]=!0,e),{}):{};Mu.exports=Lp});var wi=q((cS,Hu)=&gt;{var ju=/^[0-9]+$/,$u=(n,e)=&gt;{let t=ju.test(n),r=ju.test(e);return t&amp;&amp;r&amp;&amp;(n=+n,e=+e),n===e?0:t&amp;&amp;!r?-1:r&amp;&amp;!t?1:n&lt;e?-1:1},Ap=(n,e)=&gt;$u(e,n);Hu.exports={compareIdentifiers:$u,rcompareIdentifiers:Ap}});var ut=q((uS,zu)=&gt;{var bi=jr(),{MAX_LENGTH:Wu,MAX_SAFE_INTEGER:_i}=Mr(),{re:Ku,t:Uu}=zn(),Mp=$r(),{compareIdentifiers:Hr}=wi(),Pt=class{constructor(e,t){if(t=Mp(t),e instanceof Pt){if(e.loose===!!t.loose&amp;&amp;e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!=&quot;string&quot;)throw new TypeError(`Invalid Version: ${e}`);if(e.length&gt;Wu)throw new TypeError(`version is longer than ${Wu} characters`);bi(&quot;SemVer&quot;,e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?Ku[Uu.LOOSE]:Ku[Uu.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major&gt;_i||this.major&lt;0)throw new TypeError(&quot;Invalid major version&quot;);if(this.minor&gt;_i||this.minor&lt;0)throw new TypeError(&quot;Invalid minor version&quot;);if(this.patch&gt;_i||this.patch&lt;0)throw new TypeError(&quot;Invalid patch version&quot;);r[4]?this.prerelease=r[4].split(&quot;.&quot;).map(i=&gt;{if(/^[0-9]+$/.test(i)){let o=+i;if(o&gt;=0&amp;&amp;o&lt;_i)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split(&quot;.&quot;):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&amp;&amp;(this.version+=`-${this.prerelease.join(&quot;.&quot;)}`),this.version}toString(){return this.version}compare(e){if(bi(&quot;SemVer.compare&quot;,this.version,this.options,e),!(e instanceof Pt)){if(typeof e==&quot;string&quot;&amp;&amp;e===this.version)return 0;e=new Pt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Pt||(e=new Pt(e,this.options)),Hr(this.major,e.major)||Hr(this.minor,e.minor)||Hr(this.patch,e.patch)}comparePre(e){if(e instanceof Pt||(e=new Pt(e,this.options)),this.prerelease.length&amp;&amp;!e.prerelease.length)return-1;if(!this.prerelease.length&amp;&amp;e.prerelease.length)return 1;if(!this.prerelease.length&amp;&amp;!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],i=e.prerelease[t];if(bi(&quot;prerelease compare&quot;,t,r,i),r===void 0&amp;&amp;i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Hr(r,i)}while(++t)}compareBuild(e){e instanceof Pt||(e=new Pt(e,this.options));let t=0;do{let r=this.build[t],i=e.build[t];if(bi(&quot;prerelease compare&quot;,t,r,i),r===void 0&amp;&amp;i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return Hr(r,i)}while(++t)}inc(e,t){switch(e){case&quot;premajor&quot;:this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc(&quot;pre&quot;,t);break;case&quot;preminor&quot;:this.prerelease.length=0,this.patch=0,this.minor++,this.inc(&quot;pre&quot;,t);break;case&quot;prepatch&quot;:this.prerelease.length=0,this.inc(&quot;patch&quot;,t),this.inc(&quot;pre&quot;,t);break;case&quot;prerelease&quot;:this.prerelease.length===0&amp;&amp;this.inc(&quot;patch&quot;,t),this.inc(&quot;pre&quot;,t);break;case&quot;major&quot;:(this.minor!==0||this.patch!==0||this.prerelease.length===0)&amp;&amp;this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case&quot;minor&quot;:(this.patch!==0||this.prerelease.length===0)&amp;&amp;this.minor++,this.patch=0,this.prerelease=[];break;case&quot;patch&quot;:this.prerelease.length===0&amp;&amp;this.patch++,this.prerelease=[];break;case&quot;pre&quot;:if(this.prerelease.length===0)this.prerelease=[0];else{let r=this.prerelease.length;for(;--r&gt;=0;)typeof this.prerelease[r]==&quot;number&quot;&amp;&amp;(this.prerelease[r]++,r=-2);r===-1&amp;&amp;this.prerelease.push(0)}t&amp;&amp;(this.prerelease[0]===t?isNaN(this.prerelease[1])&amp;&amp;(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};zu.exports=Pt});var Vn=q((lS,Xu)=&gt;{var{MAX_LENGTH:jp}=Mr(),{re:Vu,t:Gu}=zn(),Bu=ut(),$p=$r(),Hp=(n,e)=&gt;{if(e=$p(e),n instanceof Bu)return n;if(typeof n!=&quot;string&quot;||n.length&gt;jp||!(e.loose?Vu[Gu.LOOSE]:Vu[Gu.FULL]).test(n))return null;try{return new Bu(n,e)}catch{return null}};Xu.exports=Hp});var Qu=q((dS,Ju)=&gt;{var Wp=Vn(),Kp=(n,e)=&gt;{let t=Wp(n,e);return t?t.version:null};Ju.exports=Kp});var Zu=q((fS,Yu)=&gt;{var Up=Vn(),zp=(n,e)=&gt;{let t=Up(n.trim().replace(/^[=v]+/,&quot;&quot;),e);return t?t.version:null};Yu.exports=zp});var tl=q((hS,el)=&gt;{var Vp=ut(),Gp=(n,e,t,r)=&gt;{typeof t==&quot;string&quot;&amp;&amp;(r=t,t=void 0);try{return new Vp(n,t).inc(e,r).version}catch{return null}};el.exports=Gp});var Mt=q((pS,rl)=&gt;{var nl=ut(),Bp=(n,e,t)=&gt;new nl(n,t).compare(new nl(e,t));rl.exports=Bp});var Ti=q((gS,il)=&gt;{var Xp=Mt(),Jp=(n,e,t)=&gt;Xp(n,e,t)===0;il.exports=Jp});var al=q((mS,sl)=&gt;{var ol=Vn(),Qp=Ti(),Yp=(n,e)=&gt;{if(Qp(n,e))return null;{let t=ol(n),r=ol(e),i=t.prerelease.length||r.prerelease.length,o=i?&quot;pre&quot;:&quot;&quot;,s=i?&quot;prerelease&quot;:&quot;&quot;;for(let a in t)if((a===&quot;major&quot;||a===&quot;minor&quot;||a===&quot;patch&quot;)&amp;&amp;t[a]!==r[a])return o+a;return s}};sl.exports=Yp});var ul=q((vS,cl)=&gt;{var Zp=ut(),eg=(n,e)=&gt;new Zp(n,e).major;cl.exports=eg});var dl=q((yS,ll)=&gt;{var tg=ut(),ng=(n,e)=&gt;new tg(n,e).minor;ll.exports=ng});var hl=q((CS,fl)=&gt;{var rg=ut(),ig=(n,e)=&gt;new rg(n,e).patch;fl.exports=ig});var gl=q((RS,pl)=&gt;{var og=Vn(),sg=(n,e)=&gt;{let t=og(n,e);return t&amp;&amp;t.prerelease.length?t.prerelease:null};pl.exports=sg});var vl=q((DS,ml)=&gt;{var ag=Mt(),cg=(n,e,t)=&gt;ag(e,n,t);ml.exports=cg});var Cl=q((SS,yl)=&gt;{var ug=Mt(),lg=(n,e)=&gt;ug(n,e,!0);yl.exports=lg});var Pi=q((wS,Dl)=&gt;{var Rl=ut(),dg=(n,e,t)=&gt;{let r=new Rl(n,t),i=new Rl(e,t);return r.compare(i)||r.compareBuild(i)};Dl.exports=dg});var wl=q((bS,Sl)=&gt;{var fg=Pi(),hg=(n,e)=&gt;n.sort((t,r)=&gt;fg(t,r,e));Sl.exports=hg});var _l=q((_S,bl)=&gt;{var pg=Pi(),gg=(n,e)=&gt;n.sort((t,r)=&gt;pg(r,t,e));bl.exports=gg});var Wr=q((TS,Tl)=&gt;{var mg=Mt(),vg=(n,e,t)=&gt;mg(n,e,t)&gt;0;Tl.exports=vg});var qi=q((PS,Pl)=&gt;{var yg=Mt(),Cg=(n,e,t)=&gt;yg(n,e,t)&lt;0;Pl.exports=Cg});var jo=q((qS,ql)=&gt;{var Rg=Mt(),Dg=(n,e,t)=&gt;Rg(n,e,t)!==0;ql.exports=Dg});var Ei=q((ES,El)=&gt;{var Sg=Mt(),wg=(n,e,t)=&gt;Sg(n,e,t)&gt;=0;El.exports=wg});var ki=q((kS,kl)=&gt;{var bg=Mt(),_g=(n,e,t)=&gt;bg(n,e,t)&lt;=0;kl.exports=_g});var $o=q((OS,Ol)=&gt;{var Tg=Ti(),Pg=jo(),qg=Wr(),Eg=Ei(),kg=qi(),Og=ki(),xg=(n,e,t,r)=&gt;{switch(e){case&quot;===&quot;:return typeof n==&quot;object&quot;&amp;&amp;(n=n.version),typeof t==&quot;object&quot;&amp;&amp;(t=t.version),n===t;case&quot;!==&quot;:return typeof n==&quot;object&quot;&amp;&amp;(n=n.version),typeof t==&quot;object&quot;&amp;&amp;(t=t.version),n!==t;case&quot;&quot;:case&quot;=&quot;:case&quot;==&quot;:return Tg(n,t,r);case&quot;!=&quot;:return Pg(n,t,r);case&quot;&gt;&quot;:return qg(n,t,r);case&quot;&gt;=&quot;:return Eg(n,t,r);case&quot;&lt;&quot;:return kg(n,t,r);case&quot;&lt;=&quot;:return Og(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};Ol.exports=xg});var Nl=q((xS,xl)=&gt;{var Ng=ut(),Ig=Vn(),{re:Oi,t:xi}=zn(),Fg=(n,e)=&gt;{if(n instanceof Ng)return n;if(typeof n==&quot;number&quot;&amp;&amp;(n=String(n)),typeof n!=&quot;string&quot;)return null;e=e||{};let t=null;if(!e.rtl)t=n.match(Oi[xi.COERCE]);else{let r;for(;(r=Oi[xi.COERCERTL].exec(n))&amp;&amp;(!t||t.index+t[0].length!==n.length);)(!t||r.index+r[0].length!==t.index+t[0].length)&amp;&amp;(t=r),Oi[xi.COERCERTL].lastIndex=r.index+r[1].length+r[2].length;Oi[xi.COERCERTL].lastIndex=-1}return t===null?null:Ig(`${t[2]}.${t[3]||&quot;0&quot;}.${t[4]||&quot;0&quot;}`,e)};xl.exports=Fg});var Fl=q((NS,Il)=&gt;{&quot;use strict&quot;;Il.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Al=q((IS,Ll)=&gt;{&quot;use strict&quot;;Ll.exports=de;de.Node=Gn;de.create=de;function de(n){var e=this;if(e instanceof de||(e=new de),e.tail=null,e.head=null,e.length=0,n&amp;&amp;typeof n.forEach==&quot;function&quot;)n.forEach(function(i){e.push(i)});else if(arguments.length&gt;0)for(var t=0,r=arguments.length;t&lt;r;t++)e.push(arguments[t]);return e}de.prototype.removeNode=function(n){if(n.list!==this)throw new Error(&quot;removing node which does not belong to this list&quot;);var e=n.next,t=n.prev;return e&amp;&amp;(e.prev=t),t&amp;&amp;(t.next=e),n===this.head&amp;&amp;(this.head=e),n===this.tail&amp;&amp;(this.tail=t),n.list.length--,n.next=null,n.prev=null,n.list=null,e};de.prototype.unshiftNode=function(n){if(n!==this.head){n.list&amp;&amp;n.list.removeNode(n);var e=this.head;n.list=this,n.next=e,e&amp;&amp;(e.prev=n),this.head=n,this.tail||(this.tail=n),this.length++}};de.prototype.pushNode=function(n){if(n!==this.tail){n.list&amp;&amp;n.list.removeNode(n);var e=this.tail;n.list=this,n.prev=e,e&amp;&amp;(e.next=n),this.tail=n,this.head||(this.head=n),this.length++}};de.prototype.push=function(){for(var n=0,e=arguments.length;n&lt;e;n++)Ag(this,arguments[n]);return this.length};de.prototype.unshift=function(){for(var n=0,e=arguments.length;n&lt;e;n++)Mg(this,arguments[n]);return this.length};de.prototype.pop=function(){if(!!this.tail){var n=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,n}};de.prototype.shift=function(){if(!!this.head){var n=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,n}};de.prototype.forEach=function(n,e){e=e||this;for(var t=this.head,r=0;t!==null;r++)n.call(e,t.value,r,this),t=t.next};de.prototype.forEachReverse=function(n,e){e=e||this;for(var t=this.tail,r=this.length-1;t!==null;r--)n.call(e,t.value,r,this),t=t.prev};de.prototype.get=function(n){for(var e=0,t=this.head;t!==null&amp;&amp;e&lt;n;e++)t=t.next;if(e===n&amp;&amp;t!==null)return t.value};de.prototype.getReverse=function(n){for(var e=0,t=this.tail;t!==null&amp;&amp;e&lt;n;e++)t=t.prev;if(e===n&amp;&amp;t!==null)return t.value};de.prototype.map=function(n,e){e=e||this;for(var t=new de,r=this.head;r!==null;)t.push(n.call(e,r.value,this)),r=r.next;return t};de.prototype.mapReverse=function(n,e){e=e||this;for(var t=new de,r=this.tail;r!==null;)t.push(n.call(e,r.value,this)),r=r.prev;return t};de.prototype.reduce=function(n,e){var t,r=this.head;if(arguments.length&gt;1)t=e;else if(this.head)r=this.head.next,t=this.head.value;else throw new TypeError(&quot;Reduce of empty list with no initial value&quot;);for(var i=0;r!==null;i++)t=n(t,r.value,i),r=r.next;return t};de.prototype.reduceReverse=function(n,e){var t,r=this.tail;if(arguments.length&gt;1)t=e;else if(this.tail)r=this.tail.prev,t=this.tail.value;else throw new TypeError(&quot;Reduce of empty list with no initial value&quot;);for(var i=this.length-1;r!==null;i--)t=n(t,r.value,i),r=r.prev;return t};de.prototype.toArray=function(){for(var n=new Array(this.length),e=0,t=this.head;t!==null;e++)n[e]=t.value,t=t.next;return n};de.prototype.toArrayReverse=function(){for(var n=new Array(this.length),e=0,t=this.tail;t!==null;e++)n[e]=t.value,t=t.prev;return n};de.prototype.slice=function(n,e){e=e||this.length,e&lt;0&amp;&amp;(e+=this.length),n=n||0,n&lt;0&amp;&amp;(n+=this.length);var t=new de;if(e&lt;n||e&lt;0)return t;n&lt;0&amp;&amp;(n=0),e&gt;this.length&amp;&amp;(e=this.length);for(var r=0,i=this.head;i!==null&amp;&amp;r&lt;n;r++)i=i.next;for(;i!==null&amp;&amp;r&lt;e;r++,i=i.next)t.push(i.value);return t};de.prototype.sliceReverse=function(n,e){e=e||this.length,e&lt;0&amp;&amp;(e+=this.length),n=n||0,n&lt;0&amp;&amp;(n+=this.length);var t=new de;if(e&lt;n||e&lt;0)return t;n&lt;0&amp;&amp;(n=0),e&gt;this.length&amp;&amp;(e=this.length);for(var r=this.length,i=this.tail;i!==null&amp;&amp;r&gt;e;r--)i=i.prev;for(;i!==null&amp;&amp;r&gt;n;r--,i=i.prev)t.push(i.value);return t};de.prototype.splice=function(n,e,...t){n&gt;this.length&amp;&amp;(n=this.length-1),n&lt;0&amp;&amp;(n=this.length+n);for(var r=0,i=this.head;i!==null&amp;&amp;r&lt;n;r++)i=i.next;for(var o=[],r=0;i&amp;&amp;r&lt;e;r++)o.push(i.value),i=this.removeNode(i);i===null&amp;&amp;(i=this.tail),i!==this.head&amp;&amp;i!==this.tail&amp;&amp;(i=i.prev);for(var r=0;r&lt;t.length;r++)i=Lg(this,i,t[r]);return o};de.prototype.reverse=function(){for(var n=this.head,e=this.tail,t=n;t!==null;t=t.prev){var r=t.prev;t.prev=t.next,t.next=r}return this.head=e,this.tail=n,this};function Lg(n,e,t){var r=e===n.head?new Gn(t,null,e,n):new Gn(t,e,e.next,n);return r.next===null&amp;&amp;(n.tail=r),r.prev===null&amp;&amp;(n.head=r),n.length++,r}function Ag(n,e){n.tail=new Gn(e,n.tail,null,n),n.head||(n.head=n.tail),n.length++}function Mg(n,e){n.head=new Gn(e,null,n.head,n),n.tail||(n.tail=n.head),n.length++}function Gn(n,e,t,r){if(!(this instanceof Gn))return new Gn(n,e,t,r);this.list=r,this.value=n,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{Fl()(de)}catch{}});var Wl=q((FS,Hl)=&gt;{&quot;use strict&quot;;var jg=Al(),Bn=Symbol(&quot;max&quot;),vn=Symbol(&quot;length&quot;),pr=Symbol(&quot;lengthCalculator&quot;),Ur=Symbol(&quot;allowStale&quot;),Xn=Symbol(&quot;maxAge&quot;),mn=Symbol(&quot;dispose&quot;),Ml=Symbol(&quot;noDisposeOnSet&quot;),Je=Symbol(&quot;lruList&quot;),Vt=Symbol(&quot;cache&quot;),$l=Symbol(&quot;updateAgeOnGet&quot;),Ho=()=&gt;1,Ko=class{constructor(e){if(typeof e==&quot;number&quot;&amp;&amp;(e={max:e}),e||(e={}),e.max&amp;&amp;(typeof e.max!=&quot;number&quot;||e.max&lt;0))throw new TypeError(&quot;max must be a non-negative number&quot;);let t=this[Bn]=e.max||1/0,r=e.length||Ho;if(this[pr]=typeof r!=&quot;function&quot;?Ho:r,this[Ur]=e.stale||!1,e.maxAge&amp;&amp;typeof e.maxAge!=&quot;number&quot;)throw new TypeError(&quot;maxAge must be a number&quot;);this[Xn]=e.maxAge||0,this[mn]=e.dispose,this[Ml]=e.noDisposeOnSet||!1,this[$l]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!=&quot;number&quot;||e&lt;0)throw new TypeError(&quot;max must be a non-negative number&quot;);this[Bn]=e||1/0,Kr(this)}get max(){return this[Bn]}set allowStale(e){this[Ur]=!!e}get allowStale(){return this[Ur]}set maxAge(e){if(typeof e!=&quot;number&quot;)throw new TypeError(&quot;maxAge must be a non-negative number&quot;);this[Xn]=e,Kr(this)}get maxAge(){return this[Xn]}set lengthCalculator(e){typeof e!=&quot;function&quot;&amp;&amp;(e=Ho),e!==this[pr]&amp;&amp;(this[pr]=e,this[vn]=0,this[Je].forEach(t=&gt;{t.length=this[pr](t.value,t.key),this[vn]+=t.length})),Kr(this)}get lengthCalculator(){return this[pr]}get length(){return this[vn]}get itemCount(){return this[Je].length}rforEach(e,t){t=t||this;for(let r=this[Je].tail;r!==null;){let i=r.prev;jl(this,e,r,t),r=i}}forEach(e,t){t=t||this;for(let r=this[Je].head;r!==null;){let i=r.next;jl(this,e,r,t),r=i}}keys(){return this[Je].toArray().map(e=&gt;e.key)}values(){return this[Je].toArray().map(e=&gt;e.value)}reset(){this[mn]&amp;&amp;this[Je]&amp;&amp;this[Je].length&amp;&amp;this[Je].forEach(e=&gt;this[mn](e.key,e.value)),this[Vt]=new Map,this[Je]=new jg,this[vn]=0}dump(){return this[Je].map(e=&gt;Ni(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=&gt;e)}dumpLru(){return this[Je]}set(e,t,r){if(r=r||this[Xn],r&amp;&amp;typeof r!=&quot;number&quot;)throw new TypeError(&quot;maxAge must be a number&quot;);let i=r?Date.now():0,o=this[pr](t,e);if(this[Vt].has(e)){if(o&gt;this[Bn])return gr(this,this[Vt].get(e)),!1;let u=this[Vt].get(e).value;return this[mn]&amp;&amp;(this[Ml]||this[mn](e,u.value)),u.now=i,u.maxAge=r,u.value=t,this[vn]+=o-u.length,u.length=o,this.get(e),Kr(this),!0}let s=new Uo(e,t,o,i,r);return s.length&gt;this[Bn]?(this[mn]&amp;&amp;this[mn](e,t),!1):(this[vn]+=s.length,this[Je].unshift(s),this[Vt].set(e,this[Je].head),Kr(this),!0)}has(e){if(!this[Vt].has(e))return!1;let t=this[Vt].get(e).value;return!Ni(this,t)}get(e){return Wo(this,e,!0)}peek(e){return Wo(this,e,!1)}pop(){let e=this[Je].tail;return e?(gr(this,e),e.value):null}del(e){gr(this,this[Vt].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r&gt;=0;r--){let i=e[r],o=i.e||0;if(o===0)this.set(i.k,i.v);else{let s=o-t;s&gt;0&amp;&amp;this.set(i.k,i.v,s)}}}prune(){this[Vt].forEach((e,t)=&gt;Wo(this,t,!1))}},Wo=(n,e,t)=&gt;{let r=n[Vt].get(e);if(r){let i=r.value;if(Ni(n,i)){if(gr(n,r),!n[Ur])return}else t&amp;&amp;(n[$l]&amp;&amp;(r.value.now=Date.now()),n[Je].unshiftNode(r));return i.value}},Ni=(n,e)=&gt;{if(!e||!e.maxAge&amp;&amp;!n[Xn])return!1;let t=Date.now()-e.now;return e.maxAge?t&gt;e.maxAge:n[Xn]&amp;&amp;t&gt;n[Xn]},Kr=n=&gt;{if(n[vn]&gt;n[Bn])for(let e=n[Je].tail;n[vn]&gt;n[Bn]&amp;&amp;e!==null;){let t=e.prev;gr(n,e),e=t}},gr=(n,e)=&gt;{if(e){let t=e.value;n[mn]&amp;&amp;n[mn](t.key,t.value),n[vn]-=t.length,n[Vt].delete(t.key),n[Je].removeNode(e)}},Uo=class{constructor(e,t,r,i,o){this.key=e,this.value=t,this.length=r,this.now=i,this.maxAge=o||0}},jl=(n,e,t,r)=&gt;{let i=t.value;Ni(n,i)&amp;&amp;(gr(n,t),n[Ur]||(i=void 0)),i&amp;&amp;e.call(r,i.value,i.key,n)};Hl.exports=Ko});var jt=q((LS,Vl)=&gt;{var Jn=class{constructor(e,t){if(t=Hg(t),e instanceof Jn)return e.loose===!!t.loose&amp;&amp;e.includePrerelease===!!t.includePrerelease?e:new Jn(e.raw,t);if(e instanceof zo)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(r=&gt;this.parseRange(r.trim())).filter(r=&gt;r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length&gt;1){let r=this.set[0];if(this.set=this.set.filter(i=&gt;!Ul(i[0])),this.set.length===0)this.set=[r];else if(this.set.length&gt;1){for(let i of this.set)if(i.length===1&amp;&amp;Vg(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=&gt;e.join(&quot; &quot;).trim()).join(&quot;||&quot;).trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let r=`parseRange:${Object.keys(this.options).join(&quot;,&quot;)}:${e}`,i=Kl.get(r);if(i)return i;let o=this.options.loose,s=o?lt[et.HYPHENRANGELOOSE]:lt[et.HYPHENRANGE];e=e.replace(s,nm(this.options.includePrerelease)),je(&quot;hyphen replace&quot;,e),e=e.replace(lt[et.COMPARATORTRIM],Kg),je(&quot;comparator trim&quot;,e,lt[et.COMPARATORTRIM]),e=e.replace(lt[et.TILDETRIM],Ug),e=e.replace(lt[et.CARETTRIM],zg),e=e.split(/\s+/).join(&quot; &quot;);let a=o?lt[et.COMPARATORLOOSE]:lt[et.COMPARATOR],u=e.split(&quot; &quot;).map(C=&gt;Gg(C,this.options)).join(&quot; &quot;).split(/\s+/).map(C=&gt;tm(C,this.options)).filter(this.options.loose?C=&gt;!!C.match(a):()=&gt;!0).map(C=&gt;new zo(C,this.options)),h=u.length,g=new Map;for(let C of u){if(Ul(C))return[C];g.set(C.value,C)}g.size&gt;1&amp;&amp;g.has(&quot;&quot;)&amp;&amp;g.delete(&quot;&quot;);let p=[...g.values()];return Kl.set(r,p),p}intersects(e,t){if(!(e instanceof Jn))throw new TypeError(&quot;a Range is required&quot;);return this.set.some(r=&gt;zl(r,t)&amp;&amp;e.set.some(i=&gt;zl(i,t)&amp;&amp;r.every(o=&gt;i.every(s=&gt;o.intersects(s,t)))))}test(e){if(!e)return!1;if(typeof e==&quot;string&quot;)try{e=new Wg(e,this.options)}catch{return!1}for(let t=0;t&lt;this.set.length;t++)if(rm(this.set[t],e,this.options))return!0;return!1}};Vl.exports=Jn;var $g=Wl(),Kl=new $g({max:1e3}),Hg=$r(),zo=zr(),je=jr(),Wg=ut(),{re:lt,t:et,comparatorTrimReplace:Kg,tildeTrimReplace:Ug,caretTrimReplace:zg}=zn(),Ul=n=&gt;n.value===&quot;&lt;0.0.0-0&quot;,Vg=n=&gt;n.value===&quot;&quot;,zl=(n,e)=&gt;{let t=!0,r=n.slice(),i=r.pop();for(;t&amp;&amp;r.length;)t=r.every(o=&gt;i.intersects(o,e)),i=r.pop();return t},Gg=(n,e)=&gt;(je(&quot;comp&quot;,n,e),n=Jg(n,e),je(&quot;caret&quot;,n),n=Bg(n,e),je(&quot;tildes&quot;,n),n=Yg(n,e),je(&quot;xrange&quot;,n),n=em(n,e),je(&quot;stars&quot;,n),n),pt=n=&gt;!n||n.toLowerCase()===&quot;x&quot;||n===&quot;*&quot;,Bg=(n,e)=&gt;n.trim().split(/\s+/).map(t=&gt;Xg(t,e)).join(&quot; &quot;),Xg=(n,e)=&gt;{let t=e.loose?lt[et.TILDELOOSE]:lt[et.TILDE];return n.replace(t,(r,i,o,s,a)=&gt;{je(&quot;tilde&quot;,n,r,i,o,s,a);let u;return pt(i)?u=&quot;&quot;:pt(o)?u=`&gt;=${i}.0.0 &lt;${+i+1}.0.0-0`:pt(s)?u=`&gt;=${i}.${o}.0 &lt;${i}.${+o+1}.0-0`:a?(je(&quot;replaceTilde pr&quot;,a),u=`&gt;=${i}.${o}.${s}-${a} &lt;${i}.${+o+1}.0-0`):u=`&gt;=${i}.${o}.${s} &lt;${i}.${+o+1}.0-0`,je(&quot;tilde return&quot;,u),u})},Jg=(n,e)=&gt;n.trim().split(/\s+/).map(t=&gt;Qg(t,e)).join(&quot; &quot;),Qg=(n,e)=&gt;{je(&quot;caret&quot;,n,e);let t=e.loose?lt[et.CARETLOOSE]:lt[et.CARET],r=e.includePrerelease?&quot;-0&quot;:&quot;&quot;;return n.replace(t,(i,o,s,a,u)=&gt;{je(&quot;caret&quot;,n,i,o,s,a,u);let h;return pt(o)?h=&quot;&quot;:pt(s)?h=`&gt;=${o}.0.0${r} &lt;${+o+1}.0.0-0`:pt(a)?o===&quot;0&quot;?h=`&gt;=${o}.${s}.0${r} &lt;${o}.${+s+1}.0-0`:h=`&gt;=${o}.${s}.0${r} &lt;${+o+1}.0.0-0`:u?(je(&quot;replaceCaret pr&quot;,u),o===&quot;0&quot;?s===&quot;0&quot;?h=`&gt;=${o}.${s}.${a}-${u} &lt;${o}.${s}.${+a+1}-0`:h=`&gt;=${o}.${s}.${a}-${u} &lt;${o}.${+s+1}.0-0`:h=`&gt;=${o}.${s}.${a}-${u} &lt;${+o+1}.0.0-0`):(je(&quot;no pr&quot;),o===&quot;0&quot;?s===&quot;0&quot;?h=`&gt;=${o}.${s}.${a}${r} &lt;${o}.${s}.${+a+1}-0`:h=`&gt;=${o}.${s}.${a}${r} &lt;${o}.${+s+1}.0-0`:h=`&gt;=${o}.${s}.${a} &lt;${+o+1}.0.0-0`),je(&quot;caret return&quot;,h),h})},Yg=(n,e)=&gt;(je(&quot;replaceXRanges&quot;,n,e),n.split(/\s+/).map(t=&gt;Zg(t,e)).join(&quot; &quot;)),Zg=(n,e)=&gt;{n=n.trim();let t=e.loose?lt[et.XRANGELOOSE]:lt[et.XRANGE];return n.replace(t,(r,i,o,s,a,u)=&gt;{je(&quot;xRange&quot;,n,r,i,o,s,a,u);let h=pt(o),g=h||pt(s),p=g||pt(a),C=p;return i===&quot;=&quot;&amp;&amp;C&amp;&amp;(i=&quot;&quot;),u=e.includePrerelease?&quot;-0&quot;:&quot;&quot;,h?i===&quot;&gt;&quot;||i===&quot;&lt;&quot;?r=&quot;&lt;0.0.0-0&quot;:r=&quot;*&quot;:i&amp;&amp;C?(g&amp;&amp;(s=0),a=0,i===&quot;&gt;&quot;?(i=&quot;&gt;=&quot;,g?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):i===&quot;&lt;=&quot;&amp;&amp;(i=&quot;&lt;&quot;,g?o=+o+1:s=+s+1),i===&quot;&lt;&quot;&amp;&amp;(u=&quot;-0&quot;),r=`${i+o}.${s}.${a}${u}`):g?r=`&gt;=${o}.0.0${u} &lt;${+o+1}.0.0-0`:p&amp;&amp;(r=`&gt;=${o}.${s}.0${u} &lt;${o}.${+s+1}.0-0`),je(&quot;xRange return&quot;,r),r})},em=(n,e)=&gt;(je(&quot;replaceStars&quot;,n,e),n.trim().replace(lt[et.STAR],&quot;&quot;)),tm=(n,e)=&gt;(je(&quot;replaceGTE0&quot;,n,e),n.trim().replace(lt[e.includePrerelease?et.GTE0PRE:et.GTE0],&quot;&quot;)),nm=n=&gt;(e,t,r,i,o,s,a,u,h,g,p,C,R)=&gt;(pt(r)?t=&quot;&quot;:pt(i)?t=`&gt;=${r}.0.0${n?&quot;-0&quot;:&quot;&quot;}`:pt(o)?t=`&gt;=${r}.${i}.0${n?&quot;-0&quot;:&quot;&quot;}`:s?t=`&gt;=${t}`:t=`&gt;=${t}${n?&quot;-0&quot;:&quot;&quot;}`,pt(h)?u=&quot;&quot;:pt(g)?u=`&lt;${+h+1}.0.0-0`:pt(p)?u=`&lt;${h}.${+g+1}.0-0`:C?u=`&lt;=${h}.${g}.${p}-${C}`:n?u=`&lt;${h}.${g}.${+p+1}-0`:u=`&lt;=${u}`,`${t} ${u}`.trim()),rm=(n,e,t)=&gt;{for(let r=0;r&lt;n.length;r++)if(!n[r].test(e))return!1;if(e.prerelease.length&amp;&amp;!t.includePrerelease){for(let r=0;r&lt;n.length;r++)if(je(n[r].semver),n[r].semver!==zo.ANY&amp;&amp;n[r].semver.prerelease.length&gt;0){let i=n[r].semver;if(i.major===e.major&amp;&amp;i.minor===e.minor&amp;&amp;i.patch===e.patch)return!0}return!1}return!0}});var zr=q((AS,Ql)=&gt;{var Vr=Symbol(&quot;SemVer ANY&quot;),mr=class{static get ANY(){return Vr}constructor(e,t){if(t=im(t),e instanceof mr){if(e.loose===!!t.loose)return e;e=e.value}Go(&quot;comparator&quot;,e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Vr?this.value=&quot;&quot;:this.value=this.operator+this.semver.version,Go(&quot;comp&quot;,this)}parse(e){let t=this.options.loose?Gl[Bl.COMPARATORLOOSE]:Gl[Bl.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:&quot;&quot;,this.operator===&quot;=&quot;&amp;&amp;(this.operator=&quot;&quot;),r[2]?this.semver=new Xl(r[2],this.options.loose):this.semver=Vr}toString(){return this.value}test(e){if(Go(&quot;Comparator.test&quot;,e,this.options.loose),this.semver===Vr||e===Vr)return!0;if(typeof e==&quot;string&quot;)try{e=new Xl(e,this.options)}catch{return!1}return Vo(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof mr))throw new TypeError(&quot;a Comparator is required&quot;);if((!t||typeof t!=&quot;object&quot;)&amp;&amp;(t={loose:!!t,includePrerelease:!1}),this.operator===&quot;&quot;)return this.value===&quot;&quot;?!0:new Jl(e.value,t).test(this.value);if(e.operator===&quot;&quot;)return e.value===&quot;&quot;?!0:new Jl(this.value,t).test(e.semver);let r=(this.operator===&quot;&gt;=&quot;||this.operator===&quot;&gt;&quot;)&amp;&amp;(e.operator===&quot;&gt;=&quot;||e.operator===&quot;&gt;&quot;),i=(this.operator===&quot;&lt;=&quot;||this.operator===&quot;&lt;&quot;)&amp;&amp;(e.operator===&quot;&lt;=&quot;||e.operator===&quot;&lt;&quot;),o=this.semver.version===e.semver.version,s=(this.operator===&quot;&gt;=&quot;||this.operator===&quot;&lt;=&quot;)&amp;&amp;(e.operator===&quot;&gt;=&quot;||e.operator===&quot;&lt;=&quot;),a=Vo(this.semver,&quot;&lt;&quot;,e.semver,t)&amp;&amp;(this.operator===&quot;&gt;=&quot;||this.operator===&quot;&gt;&quot;)&amp;&amp;(e.operator===&quot;&lt;=&quot;||e.operator===&quot;&lt;&quot;),u=Vo(this.semver,&quot;&gt;&quot;,e.semver,t)&amp;&amp;(this.operator===&quot;&lt;=&quot;||this.operator===&quot;&lt;&quot;)&amp;&amp;(e.operator===&quot;&gt;=&quot;||e.operator===&quot;&gt;&quot;);return r||i||o&amp;&amp;s||a||u}};Ql.exports=mr;var im=$r(),{re:Gl,t:Bl}=zn(),Vo=$o(),Go=jr(),Xl=ut(),Jl=jt()});var Gr=q((MS,Yl)=&gt;{var om=jt(),sm=(n,e,t)=&gt;{try{e=new om(e,t)}catch{return!1}return e.test(n)};Yl.exports=sm});var ed=q((jS,Zl)=&gt;{var am=jt(),cm=(n,e)=&gt;new am(n,e).set.map(t=&gt;t.map(r=&gt;r.value).join(&quot; &quot;).trim().split(&quot; &quot;));Zl.exports=cm});var nd=q(($S,td)=&gt;{var um=ut(),lm=jt(),dm=(n,e,t)=&gt;{let r=null,i=null,o=null;try{o=new lm(e,t)}catch{return null}return n.forEach(s=&gt;{o.test(s)&amp;&amp;(!r||i.compare(s)===-1)&amp;&amp;(r=s,i=new um(r,t))}),r};td.exports=dm});var id=q((HS,rd)=&gt;{var fm=ut(),hm=jt(),pm=(n,e,t)=&gt;{let r=null,i=null,o=null;try{o=new hm(e,t)}catch{return null}return n.forEach(s=&gt;{o.test(s)&amp;&amp;(!r||i.compare(s)===1)&amp;&amp;(r=s,i=new fm(r,t))}),r};rd.exports=pm});var ad=q((WS,sd)=&gt;{var Bo=ut(),gm=jt(),od=Wr(),mm=(n,e)=&gt;{n=new gm(n,e);let t=new Bo(&quot;0.0.0&quot;);if(n.test(t)||(t=new Bo(&quot;0.0.0-0&quot;),n.test(t)))return t;t=null;for(let r=0;r&lt;n.set.length;++r){let i=n.set[r],o=null;i.forEach(s=&gt;{let a=new Bo(s.semver.version);switch(s.operator){case&quot;&gt;&quot;:a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case&quot;&quot;:case&quot;&gt;=&quot;:(!o||od(a,o))&amp;&amp;(o=a);break;case&quot;&lt;&quot;:case&quot;&lt;=&quot;:break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),o&amp;&amp;(!t||od(t,o))&amp;&amp;(t=o)}return t&amp;&amp;n.test(t)?t:null};sd.exports=mm});var ud=q((KS,cd)=&gt;{var vm=jt(),ym=(n,e)=&gt;{try{return new vm(n,e).range||&quot;*&quot;}catch{return null}};cd.exports=ym});var Ii=q((US,hd)=&gt;{var Cm=ut(),fd=zr(),{ANY:Rm}=fd,Dm=jt(),Sm=Gr(),ld=Wr(),dd=qi(),wm=ki(),bm=Ei(),_m=(n,e,t,r)=&gt;{n=new Cm(n,r),e=new Dm(e,r);let i,o,s,a,u;switch(t){case&quot;&gt;&quot;:i=ld,o=wm,s=dd,a=&quot;&gt;&quot;,u=&quot;&gt;=&quot;;break;case&quot;&lt;&quot;:i=dd,o=bm,s=ld,a=&quot;&lt;&quot;,u=&quot;&lt;=&quot;;break;default:throw new TypeError('Must provide a hilo val of &quot;&lt;&quot; or &quot;&gt;&quot;')}if(Sm(n,e,r))return!1;for(let h=0;h&lt;e.set.length;++h){let g=e.set[h],p=null,C=null;if(g.forEach(R=&gt;{R.semver===Rm&amp;&amp;(R=new fd(&quot;&gt;=0.0.0&quot;)),p=p||R,C=C||R,i(R.semver,p.semver,r)?p=R:s(R.semver,C.semver,r)&amp;&amp;(C=R)}),p.operator===a||p.operator===u||(!C.operator||C.operator===a)&amp;&amp;o(n,C.semver))return!1;if(C.operator===u&amp;&amp;s(n,C.semver))return!1}return!0};hd.exports=_m});var gd=q((zS,pd)=&gt;{var Tm=Ii(),Pm=(n,e,t)=&gt;Tm(n,e,&quot;&gt;&quot;,t);pd.exports=Pm});var vd=q((VS,md)=&gt;{var qm=Ii(),Em=(n,e,t)=&gt;qm(n,e,&quot;&lt;&quot;,t);md.exports=Em});var Rd=q((GS,Cd)=&gt;{var yd=jt(),km=(n,e,t)=&gt;(n=new yd(n,t),e=new yd(e,t),n.intersects(e));Cd.exports=km});var Sd=q((BS,Dd)=&gt;{var Om=Gr(),xm=Mt();Dd.exports=(n,e,t)=&gt;{let r=[],i=null,o=null,s=n.sort((g,p)=&gt;xm(g,p,t));for(let g of s)Om(g,e,t)?(o=g,i||(i=g)):(o&amp;&amp;r.push([i,o]),o=null,i=null);i&amp;&amp;r.push([i,null]);let a=[];for(let[g,p]of r)g===p?a.push(g):!p&amp;&amp;g===s[0]?a.push(&quot;*&quot;):p?g===s[0]?a.push(`&lt;=${p}`):a.push(`${g} - ${p}`):a.push(`&gt;=${g}`);let u=a.join(&quot; || &quot;),h=typeof e.raw==&quot;string&quot;?e.raw:String(e);return u.length&lt;h.length?u:e}});var Pd=q((XS,Td)=&gt;{var wd=jt(),Fi=zr(),{ANY:Xo}=Fi,Br=Gr(),Jo=Mt(),Nm=(n,e,t={})=&gt;{if(n===e)return!0;n=new wd(n,t),e=new wd(e,t);let r=!1;e:for(let i of n.set){for(let o of e.set){let s=Im(i,o,t);if(r=r||s!==null,s)continue e}if(r)return!1}return!0},Im=(n,e,t)=&gt;{if(n===e)return!0;if(n.length===1&amp;&amp;n[0].semver===Xo){if(e.length===1&amp;&amp;e[0].semver===Xo)return!0;t.includePrerelease?n=[new Fi(&quot;&gt;=0.0.0-0&quot;)]:n=[new Fi(&quot;&gt;=0.0.0&quot;)]}if(e.length===1&amp;&amp;e[0].semver===Xo){if(t.includePrerelease)return!0;e=[new Fi(&quot;&gt;=0.0.0&quot;)]}let r=new Set,i,o;for(let R of n)R.operator===&quot;&gt;&quot;||R.operator===&quot;&gt;=&quot;?i=bd(i,R,t):R.operator===&quot;&lt;&quot;||R.operator===&quot;&lt;=&quot;?o=_d(o,R,t):r.add(R.semver);if(r.size&gt;1)return null;let s;if(i&amp;&amp;o){if(s=Jo(i.semver,o.semver,t),s&gt;0)return null;if(s===0&amp;&amp;(i.operator!==&quot;&gt;=&quot;||o.operator!==&quot;&lt;=&quot;))return null}for(let R of r){if(i&amp;&amp;!Br(R,String(i),t)||o&amp;&amp;!Br(R,String(o),t))return null;for(let E of e)if(!Br(R,String(E),t))return!1;return!0}let a,u,h,g,p=o&amp;&amp;!t.includePrerelease&amp;&amp;o.semver.prerelease.length?o.semver:!1,C=i&amp;&amp;!t.includePrerelease&amp;&amp;i.semver.prerelease.length?i.semver:!1;p&amp;&amp;p.prerelease.length===1&amp;&amp;o.operator===&quot;&lt;&quot;&amp;&amp;p.prerelease[0]===0&amp;&amp;(p=!1);for(let R of e){if(g=g||R.operator===&quot;&gt;&quot;||R.operator===&quot;&gt;=&quot;,h=h||R.operator===&quot;&lt;&quot;||R.operator===&quot;&lt;=&quot;,i){if(C&amp;&amp;R.semver.prerelease&amp;&amp;R.semver.prerelease.length&amp;&amp;R.semver.major===C.major&amp;&amp;R.semver.minor===C.minor&amp;&amp;R.semver.patch===C.patch&amp;&amp;(C=!1),R.operator===&quot;&gt;&quot;||R.operator===&quot;&gt;=&quot;){if(a=bd(i,R,t),a===R&amp;&amp;a!==i)return!1}else if(i.operator===&quot;&gt;=&quot;&amp;&amp;!Br(i.semver,String(R),t))return!1}if(o){if(p&amp;&amp;R.semver.prerelease&amp;&amp;R.semver.prerelease.length&amp;&amp;R.semver.major===p.major&amp;&amp;R.semver.minor===p.minor&amp;&amp;R.semver.patch===p.patch&amp;&amp;(p=!1),R.operator===&quot;&lt;&quot;||R.operator===&quot;&lt;=&quot;){if(u=_d(o,R,t),u===R&amp;&amp;u!==o)return!1}else if(o.operator===&quot;&lt;=&quot;&amp;&amp;!Br(o.semver,String(R),t))return!1}if(!R.operator&amp;&amp;(o||i)&amp;&amp;s!==0)return!1}return!(i&amp;&amp;h&amp;&amp;!o&amp;&amp;s!==0||o&amp;&amp;g&amp;&amp;!i&amp;&amp;s!==0||C||p)},bd=(n,e,t)=&gt;{if(!n)return e;let r=Jo(n.semver,e.semver,t);return r&gt;0?n:r&lt;0||e.operator===&quot;&gt;&quot;&amp;&amp;n.operator===&quot;&gt;=&quot;?e:n},_d=(n,e,t)=&gt;{if(!n)return e;let r=Jo(n.semver,e.semver,t);return r&lt;0?n:r&gt;0||e.operator===&quot;&lt;&quot;&amp;&amp;n.operator===&quot;&lt;=&quot;?e:n};Td.exports=Nm});var Ed=q((JS,qd)=&gt;{var Qo=zn();qd.exports={re:Qo.re,src:Qo.src,tokens:Qo.t,SEMVER_SPEC_VERSION:Mr().SEMVER_SPEC_VERSION,SemVer:ut(),compareIdentifiers:wi().compareIdentifiers,rcompareIdentifiers:wi().rcompareIdentifiers,parse:Vn(),valid:Qu(),clean:Zu(),inc:tl(),diff:al(),major:ul(),minor:dl(),patch:hl(),prerelease:gl(),compare:Mt(),rcompare:vl(),compareLoose:Cl(),compareBuild:Pi(),sort:wl(),rsort:_l(),gt:Wr(),lt:qi(),eq:Ti(),neq:jo(),gte:Ei(),lte:ki(),cmp:$o(),coerce:Nl(),Comparator:zr(),Range:jt(),satisfies:Gr(),toComparators:ed(),maxSatisfying:nd(),minSatisfying:id(),minVersion:ad(),validRange:ud(),outside:Ii(),gtr:gd(),ltr:vd(),intersects:Rd(),simplifyRange:Sd(),subset:Pd()}});var yn=q(Ie=&gt;{&quot;use strict&quot;;Object.defineProperty(Ie,&quot;__esModule&quot;,{value:!0});Ie.asPromise=Ie.thenable=Ie.typedArray=Ie.stringArray=Ie.array=Ie.func=Ie.error=Ie.number=Ie.string=Ie.boolean=void 0;function Fm(n){return n===!0||n===!1}Ie.boolean=Fm;function kd(n){return typeof n==&quot;string&quot;||n instanceof String}Ie.string=kd;function Lm(n){return typeof n==&quot;number&quot;||n instanceof Number}Ie.number=Lm;function Am(n){return n instanceof Error}Ie.error=Am;function Od(n){return typeof n==&quot;function&quot;}Ie.func=Od;function xd(n){return Array.isArray(n)}Ie.array=xd;function Mm(n){return xd(n)&amp;&amp;n.every(e=&gt;kd(e))}Ie.stringArray=Mm;function jm(n,e){return Array.isArray(n)&amp;&amp;n.every(e)}Ie.typedArray=jm;function Nd(n){return n&amp;&amp;Od(n.then)}Ie.thenable=Nd;function $m(n){return n instanceof Promise?n:Nd(n)?new Promise((e,t)=&gt;{n.then(r=&gt;e(r),r=&gt;t(r))}):Promise.resolve(n)}Ie.asPromise=$m});var Fd=q((YS,Id)=&gt;{Id.exports=function(n,e){for(var t=[],r=0;r&lt;n.length;r++){var i=e(n[r],r);Hm(i)?t.push.apply(t,i):t.push(i)}return t};var Hm=Array.isArray||function(n){return Object.prototype.toString.call(n)===&quot;[object Array]&quot;}});var $d=q((ZS,jd)=&gt;{&quot;use strict&quot;;jd.exports=Ad;function Ad(n,e,t){n instanceof RegExp&amp;&amp;(n=Ld(n,t)),e instanceof RegExp&amp;&amp;(e=Ld(e,t));var r=Md(n,e,t);return r&amp;&amp;{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+n.length,r[1]),post:t.slice(r[1]+e.length)}}function Ld(n,e){var t=e.match(n);return t?t[0]:null}Ad.range=Md;function Md(n,e,t){var r,i,o,s,a,u=t.indexOf(n),h=t.indexOf(e,u+1),g=u;if(u&gt;=0&amp;&amp;h&gt;0){if(n===e)return[u,h];for(r=[],o=t.length;g&gt;=0&amp;&amp;!a;)g==u?(r.push(g),u=t.indexOf(n,g+1)):r.length==1?a=[r.pop(),h]:(i=r.pop(),i&lt;o&amp;&amp;(o=i,s=h),h=t.indexOf(e,g+1)),g=u&lt;h&amp;&amp;u&gt;=0?u:h;r.length&amp;&amp;(a=[o,s])}return a}});var Bd=q((ew,Gd)=&gt;{var Wm=Fd(),Hd=$d();Gd.exports=zm;var Wd=&quot;\0SLASH&quot;+Math.random()+&quot;\0&quot;,Kd=&quot;\0OPEN&quot;+Math.random()+&quot;\0&quot;,Zo=&quot;\0CLOSE&quot;+Math.random()+&quot;\0&quot;,Ud=&quot;\0COMMA&quot;+Math.random()+&quot;\0&quot;,zd=&quot;\0PERIOD&quot;+Math.random()+&quot;\0&quot;;function Yo(n){return parseInt(n,10)==n?parseInt(n,10):n.charCodeAt(0)}function Km(n){return n.split(&quot;\\\\&quot;).join(Wd).split(&quot;\\{&quot;).join(Kd).split(&quot;\\}&quot;).join(Zo).split(&quot;\\,&quot;).join(Ud).split(&quot;\\.&quot;).join(zd)}function Um(n){return n.split(Wd).join(&quot;\\&quot;).split(Kd).join(&quot;{&quot;).split(Zo).join(&quot;}&quot;).split(Ud).join(&quot;,&quot;).split(zd).join(&quot;.&quot;)}function Vd(n){if(!n)return[&quot;&quot;];var e=[],t=Hd(&quot;{&quot;,&quot;}&quot;,n);if(!t)return n.split(&quot;,&quot;);var r=t.pre,i=t.body,o=t.post,s=r.split(&quot;,&quot;);s[s.length-1]+=&quot;{&quot;+i+&quot;}&quot;;var a=Vd(o);return o.length&amp;&amp;(s[s.length-1]+=a.shift(),s.push.apply(s,a)),e.push.apply(e,s),e}function zm(n){return n?(n.substr(0,2)===&quot;{}&quot;&amp;&amp;(n=&quot;\\{\\}&quot;+n.substr(2)),vr(Km(n),!0).map(Um)):[]}function Vm(n){return&quot;{&quot;+n+&quot;}&quot;}function Gm(n){return/^-?0\d/.test(n)}function Bm(n,e){return n&lt;=e}function Xm(n,e){return n&gt;=e}function vr(n,e){var t=[],r=Hd(&quot;{&quot;,&quot;}&quot;,n);if(!r||/\$$/.test(r.pre))return[n];var i=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),o=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),s=i||o,a=r.body.indexOf(&quot;,&quot;)&gt;=0;if(!s&amp;&amp;!a)return r.post.match(/,.*\}/)?(n=r.pre+&quot;{&quot;+r.body+Zo+r.post,vr(n)):[n];var u;if(s)u=r.body.split(/\.\./);else if(u=Vd(r.body),u.length===1&amp;&amp;(u=vr(u[0],!1).map(Vm),u.length===1)){var g=r.post.length?vr(r.post,!1):[&quot;&quot;];return g.map(function(st){return r.pre+u[0]+st})}var h=r.pre,g=r.post.length?vr(r.post,!1):[&quot;&quot;],p;if(s){var C=Yo(u[0]),R=Yo(u[1]),E=Math.max(u[0].length,u[1].length),I=u.length==3?Math.abs(Yo(u[2])):1,F=Bm,A=R&lt;C;A&amp;&amp;(I*=-1,F=Xm);var N=u.some(Gm);p=[];for(var L=C;F(L,R);L+=I){var j;if(o)j=String.fromCharCode(L),j===&quot;\\&quot;&amp;&amp;(j=&quot;&quot;);else if(j=String(L),N){var X=E-j.length;if(X&gt;0){var Re=new Array(X+1).join(&quot;0&quot;);L&lt;0?j=&quot;-&quot;+Re+j.slice(1):j=Re+j}}p.push(j)}}else p=Wm(u,function(ot){return vr(ot,!1)});for(var ne=0;ne&lt;p.length;ne++)for(var Pe=0;Pe&lt;g.length;Pe++){var We=h+p[ne]+g[Pe];(!e||s||We)&amp;&amp;t.push(We)}return t}});var Mi=q((tw,Zd)=&gt;{Zd.exports=qt;qt.Minimatch=tt;var Xr=function(){try{return require(&quot;path&quot;)}catch{}}()||{sep:&quot;/&quot;};qt.sep=Xr.sep;var ns=qt.GLOBSTAR=tt.GLOBSTAR={},Jm=Bd(),Xd={&quot;!&quot;:{open:&quot;(?:(?!(?:&quot;,close:&quot;))[^/]*?)&quot;},&quot;?&quot;:{open:&quot;(?:&quot;,close:&quot;)?&quot;},&quot;+&quot;:{open:&quot;(?:&quot;,close:&quot;)+&quot;},&quot;*&quot;:{open:&quot;(?:&quot;,close:&quot;)*&quot;},&quot;@&quot;:{open:&quot;(?:&quot;,close:&quot;)&quot;}},es=&quot;[^/]&quot;,ts=es+&quot;*?&quot;,Qm=&quot;(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?&quot;,Ym=&quot;(?:(?!(?:\\/|^)\\.).)*?&quot;,Jd=Zm(&quot;().*{}+?[]^$\\!&quot;);function Zm(n){return n.split(&quot;&quot;).reduce(function(e,t){return e[t]=!0,e},{})}var Qd=/\/+/;qt.filter=ev;function ev(n,e){return e=e||{},function(t,r,i){return qt(t,n,e)}}function xn(n,e){e=e||{};var t={};return Object.keys(n).forEach(function(r){t[r]=n[r]}),Object.keys(e).forEach(function(r){t[r]=e[r]}),t}qt.defaults=function(n){if(!n||typeof n!=&quot;object&quot;||!Object.keys(n).length)return qt;var e=qt,t=function(i,o,s){return e(i,o,xn(n,s))};return t.Minimatch=function(i,o){return new e.Minimatch(i,xn(n,o))},t.Minimatch.defaults=function(i){return e.defaults(xn(n,i)).Minimatch},t.filter=function(i,o){return e.filter(i,xn(n,o))},t.defaults=function(i){return e.defaults(xn(n,i))},t.makeRe=function(i,o){return e.makeRe(i,xn(n,o))},t.braceExpand=function(i,o){return e.braceExpand(i,xn(n,o))},t.match=function(r,i,o){return e.match(r,i,xn(n,o))},t};tt.defaults=function(n){return qt.defaults(n).Minimatch};function qt(n,e,t){return Ai(e),t||(t={}),!t.nocomment&amp;&amp;e.charAt(0)===&quot;#&quot;?!1:new tt(e,t).match(n)}function tt(n,e){if(!(this instanceof tt))return new tt(n,e);Ai(n),e||(e={}),n=n.trim(),!e.allowWindowsEscape&amp;&amp;Xr.sep!==&quot;/&quot;&amp;&amp;(n=n.split(Xr.sep).join(&quot;/&quot;)),this.options=e,this.set=[],this.pattern=n,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.make()}tt.prototype.debug=function(){};tt.prototype.make=tv;function tv(){var n=this.pattern,e=this.options;if(!e.nocomment&amp;&amp;n.charAt(0)===&quot;#&quot;){this.comment=!0;return}if(!n){this.empty=!0;return}this.parseNegate();var t=this.globSet=this.braceExpand();e.debug&amp;&amp;(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,t),t=this.globParts=t.map(function(r){return r.split(Qd)}),this.debug(this.pattern,t),t=t.map(function(r,i,o){return r.map(this.parse,this)},this),this.debug(this.pattern,t),t=t.filter(function(r){return r.indexOf(!1)===-1}),this.debug(this.pattern,t),this.set=t}tt.prototype.parseNegate=nv;function nv(){var n=this.pattern,e=!1,t=this.options,r=0;if(!t.nonegate){for(var i=0,o=n.length;i&lt;o&amp;&amp;n.charAt(i)===&quot;!&quot;;i++)e=!e,r++;r&amp;&amp;(this.pattern=n.substr(r)),this.negate=e}}qt.braceExpand=function(n,e){return Yd(n,e)};tt.prototype.braceExpand=Yd;function Yd(n,e){return e||(this instanceof tt?e=this.options:e={}),n=typeof n&gt;&quot;u&quot;?this.pattern:n,Ai(n),e.nobrace||!/\{(?:(?!\{).)*\}/.test(n)?[n]:Jm(n)}var rv=1024*64,Ai=function(n){if(typeof n!=&quot;string&quot;)throw new TypeError(&quot;invalid pattern&quot;);if(n.length&gt;rv)throw new TypeError(&quot;pattern is too long&quot;)};tt.prototype.parse=iv;var Li={};function iv(n,e){Ai(n);var t=this.options;if(n===&quot;**&quot;)if(t.noglobstar)n=&quot;*&quot;;else return ns;if(n===&quot;&quot;)return&quot;&quot;;var r=&quot;&quot;,i=!!t.nocase,o=!1,s=[],a=[],u,h=!1,g=-1,p=-1,C=n.charAt(0)===&quot;.&quot;?&quot;&quot;:t.dot?&quot;(?!(?:^|\\/)\\.{1,2}(?:$|\\/))&quot;:&quot;(?!\\.)&quot;,R=this;function E(){if(u){switch(u){case&quot;*&quot;:r+=ts,i=!0;break;case&quot;?&quot;:r+=es,i=!0;break;default:r+=&quot;\\&quot;+u;break}R.debug(&quot;clearStateChar %j %j&quot;,u,r),u=!1}}for(var I=0,F=n.length,A;I&lt;F&amp;&amp;(A=n.charAt(I));I++){if(this.debug(&quot;%s	%s %s %j&quot;,n,I,r,A),o&amp;&amp;Jd[A]){r+=&quot;\\&quot;+A,o=!1;continue}switch(A){case&quot;/&quot;:return!1;case&quot;\\&quot;:E(),o=!0;continue;case&quot;?&quot;:case&quot;*&quot;:case&quot;+&quot;:case&quot;@&quot;:case&quot;!&quot;:if(this.debug(&quot;%s	%s %s %j &lt;-- stateChar&quot;,n,I,r,A),h){this.debug(&quot;  in class&quot;),A===&quot;!&quot;&amp;&amp;I===p+1&amp;&amp;(A=&quot;^&quot;),r+=A;continue}R.debug(&quot;call clearStateChar %j&quot;,u),E(),u=A,t.noext&amp;&amp;E();continue;case&quot;(&quot;:if(h){r+=&quot;(&quot;;continue}if(!u){r+=&quot;\\(&quot;;continue}s.push({type:u,start:I-1,reStart:r.length,open:Xd[u].open,close:Xd[u].close}),r+=u===&quot;!&quot;?&quot;(?:(?!(?:&quot;:&quot;(?:&quot;,this.debug(&quot;plType %j %j&quot;,u,r),u=!1;continue;case&quot;)&quot;:if(h||!s.length){r+=&quot;\\)&quot;;continue}E(),i=!0;var N=s.pop();r+=N.close,N.type===&quot;!&quot;&amp;&amp;a.push(N),N.reEnd=r.length;continue;case&quot;|&quot;:if(h||!s.length||o){r+=&quot;\\|&quot;,o=!1;continue}E(),r+=&quot;|&quot;;continue;case&quot;[&quot;:if(E(),h){r+=&quot;\\&quot;+A;continue}h=!0,p=I,g=r.length,r+=A;continue;case&quot;]&quot;:if(I===p+1||!h){r+=&quot;\\&quot;+A,o=!1;continue}var L=n.substring(p+1,I);try{RegExp(&quot;[&quot;+L+&quot;]&quot;)}catch{var j=this.parse(L,Li);r=r.substr(0,g)+&quot;\\[&quot;+j[0]+&quot;\\]&quot;,i=i||j[1],h=!1;continue}i=!0,h=!1,r+=A;continue;default:E(),o?o=!1:Jd[A]&amp;&amp;!(A===&quot;^&quot;&amp;&amp;h)&amp;&amp;(r+=&quot;\\&quot;),r+=A}}for(h&amp;&amp;(L=n.substr(p+1),j=this.parse(L,Li),r=r.substr(0,g)+&quot;\\[&quot;+j[0],i=i||j[1]),N=s.pop();N;N=s.pop()){var X=r.slice(N.reStart+N.open.length);this.debug(&quot;setting tail&quot;,r,N),X=X.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(at,wt,Ct){return Ct||(Ct=&quot;\\&quot;),wt+wt+Ct+&quot;|&quot;}),this.debug(`tail=%j
</failure>
		</testcase>
		<testcase name="javascript.lang.security.audit.detect-non-literal-regexp.detect-non-literal-regexp" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="2">
			<failure type="WARNING" message="RegExp() called with a `n` function argument, this might allow an attacker to cause a Denial of Service (DoS) within your application as RegExP which blocks the main thread.">   %s`,X,X,N,r);var Re=N.type===&quot;*&quot;?ts:N.type===&quot;?&quot;?es:&quot;\\&quot;+N.type;i=!0,r=r.slice(0,N.reStart)+Re+&quot;\\(&quot;+X}E(),o&amp;&amp;(r+=&quot;\\\\&quot;);var ne=!1;switch(r.charAt(0)){case&quot;[&quot;:case&quot;.&quot;:case&quot;(&quot;:ne=!0}for(var Pe=a.length-1;Pe&gt;-1;Pe--){var We=a[Pe],ot=r.slice(0,We.reStart),st=r.slice(We.reStart,We.reEnd-8),Be=r.slice(We.reEnd-8,We.reEnd),Xe=r.slice(We.reEnd);Be+=Xe;var Ot=ot.split(&quot;(&quot;).length-1,Ze=Xe;for(I=0;I&lt;Ot;I++)Ze=Ze.replace(/\)[+*?]?/,&quot;&quot;);Xe=Ze;var yt=&quot;&quot;;Xe===&quot;&quot;&amp;&amp;e!==Li&amp;&amp;(yt=&quot;$&quot;);var tn=ot+st+Xe+yt+Be;r=tn}if(r!==&quot;&quot;&amp;&amp;i&amp;&amp;(r=&quot;(?=.)&quot;+r),ne&amp;&amp;(r=C+r),e===Li)return[r,i];if(!i)return sv(n);var ke=t.nocase?&quot;i&quot;:&quot;&quot;;try{var Ae=new RegExp(&quot;^&quot;+r+&quot;$&quot;,ke)}catch{return new RegExp(&quot;$.&quot;)}return Ae._glob=n,Ae._src=r,Ae}qt.makeRe=function(n,e){return new tt(n,e||{}).makeRe()};tt.prototype.makeRe=ov;function ov(){if(this.regexp||this.regexp===!1)return this.regexp;var n=this.set;if(!n.length)return this.regexp=!1,this.regexp;var e=this.options,t=e.noglobstar?ts:e.dot?Qm:Ym,r=e.nocase?&quot;i&quot;:&quot;&quot;,i=n.map(function(o){return o.map(function(s){return s===ns?t:typeof s==&quot;string&quot;?av(s):s._src}).join(&quot;\\/&quot;)}).join(&quot;|&quot;);i=&quot;^(?:&quot;+i+&quot;)$&quot;,this.negate&amp;&amp;(i=&quot;^(?!&quot;+i+&quot;).*$&quot;);try{this.regexp=new RegExp(i,r)}catch{this.regexp=!1}return this.regexp}qt.match=function(n,e,t){t=t||{};var r=new tt(e,t);return n=n.filter(function(i){return r.match(i)}),r.options.nonull&amp;&amp;!n.length&amp;&amp;n.push(e),n};tt.prototype.match=function(e,t){if(typeof t&gt;&quot;u&quot;&amp;&amp;(t=this.partial),this.debug(&quot;match&quot;,e,this.pattern),this.comment)return!1;if(this.empty)return e===&quot;&quot;;if(e===&quot;/&quot;&amp;&amp;t)return!0;var r=this.options;Xr.sep!==&quot;/&quot;&amp;&amp;(e=e.split(Xr.sep).join(&quot;/&quot;)),e=e.split(Qd),this.debug(this.pattern,&quot;split&quot;,e);var i=this.set;this.debug(this.pattern,&quot;set&quot;,i);var o,s;for(s=e.length-1;s&gt;=0&amp;&amp;(o=e[s],!o);s--);for(s=0;s&lt;i.length;s++){var a=i[s],u=e;r.matchBase&amp;&amp;a.length===1&amp;&amp;(u=[o]);var h=this.matchOne(u,a,t);if(h)return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate};tt.prototype.matchOne=function(n,e,t){var r=this.options;this.debug(&quot;matchOne&quot;,{this:this,file:n,pattern:e}),this.debug(&quot;matchOne&quot;,n.length,e.length);for(var i=0,o=0,s=n.length,a=e.length;i&lt;s&amp;&amp;o&lt;a;i++,o++){this.debug(&quot;matchOne loop&quot;);var u=e[o],h=n[i];if(this.debug(e,u,h),u===!1)return!1;if(u===ns){this.debug(&quot;GLOBSTAR&quot;,[e,u,h]);var g=i,p=o+1;if(p===a){for(this.debug(&quot;** at the end&quot;);i&lt;s;i++)if(n[i]===&quot;.&quot;||n[i]===&quot;..&quot;||!r.dot&amp;&amp;n[i].charAt(0)===&quot;.&quot;)return!1;return!0}for(;g&lt;s;){var C=n[g];if(this.debug(`
</failure>
		</testcase>
		<testcase name="javascript.lang.security.audit.detect-non-literal-regexp.detect-non-literal-regexp" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="37">
			<failure type="WARNING" message="RegExp() called with a `c` function argument, this might allow an attacker to cause a Denial of Service (DoS) within your application as RegExP which blocks the main thread.">${JSON.stringify(ue,void 0,4)}`);else c.changes&amp;&amp;Object.keys(c.changes).forEach(ue=&gt;{oe.set(i(ue),Xe(c.changes[ue]))});return oe}function pn(c){if(c!==void 0)return{label:c.label,needsConfirmation:!!c.needsConfirmation,description:c.description}}function Ft(c){let P=R(c.range),B=c.target?o(c.target):void 0,oe=new JR.default(P,B);return c.tooltip!==void 0&amp;&amp;(oe.tooltip=c.tooltip),c.data!==void 0&amp;&amp;c.data!==null&amp;&amp;(oe.data=c.data),oe}function Lt(c){if(!!c)return c.map(Ft)}function D(c){return new W.Color(c.red,c.green,c.blue,c.alpha)}function k(c){return new W.ColorInformation(R(c.range),D(c.color))}function M(c){if(Array.isArray(c))return c.map(k)}function H(c){let P=new W.ColorPresentation(c.label);return P.additionalTextEdits=Xe(c.additionalTextEdits),c.textEdit&amp;&amp;(P.textEdit=Be(c.textEdit)),P}function ge(c){if(Array.isArray(c))return c.map(H)}function fe(c){if(c)switch(c){case te.FoldingRangeKind.Comment:return W.FoldingRangeKind.Comment;case te.FoldingRangeKind.Imports:return W.FoldingRangeKind.Imports;case te.FoldingRangeKind.Region:return W.FoldingRangeKind.Region}}function we(c){return new W.FoldingRange(c.startLine,c.endLine,fe(c.kind))}function he(c){if(Array.isArray(c))return c.map(we)}function f(c){return new W.SelectionRange(R(c.range),c.parent?f(c.parent):void 0)}function T(c){if(!Array.isArray(c))return[];let P=[];for(let B of c)P.push(f(B));return P}function $(c){return te.InlineValueText.is(c)?new W.InlineValueText(R(c.range),c.text):te.InlineValueVariableLookup.is(c)?new W.InlineValueVariableLookup(R(c.range),c.variableName,c.caseSensitiveLookup):new W.InlineValueEvaluatableExpression(R(c.range),c.expression)}function b(c){if(!Array.isArray(c))return[];let P=[];for(let B of c)P.push($(B));return P}function l(c){if(c===null)return;let P=new YR.default(xt(c.kind),c.name,c.detail||&quot;&quot;,o(c.uri),R(c.range),R(c.selectionRange),c.data);return c.tags!==void 0&amp;&amp;(P.tags=Ve(c.tags)),P}function S(c){if(c!==null)return c.map(P=&gt;l(P))}function w(c){return new W.CallHierarchyIncomingCall(l(c.from),E(c.fromRanges))}function m(c){if(c!==null)return c.map(P=&gt;w(P))}function d(c){return new W.CallHierarchyOutgoingCall(l(c.to),E(c.fromRanges))}function _(c){if(c!==null)return c.map(P=&gt;d(P))}function x(c){if(c!=null)return new W.SemanticTokens(new Uint32Array(c.data),c.resultId)}function Y(c){return new W.SemanticTokensEdit(c.start,c.deleteCount,c.data!==void 0?new Uint32Array(c.data):void 0)}function be(c){if(c!=null)return new W.SemanticTokensEdits(c.edits.map(Y),c.resultId)}function Ne(c){return c}function _t(c){if(c!=null)return new W.LinkedEditingRanges(E(c.ranges),Tt(c.wordPattern))}function Tt(c){if(c!=null)return new RegExp(c)}function At(c){if(c===null)return;let P=new ZR.default(xt(c.kind),c.name,c.detail||&quot;&quot;,o(c.uri),R(c.range),R(c.selectionRange),c.data);return c.tags!==void 0&amp;&amp;(P.tags=Ve(c.tags)),P}function ae(c){if(c!==null)return c.map(P=&gt;At(P))}return{asUri:o,asDiagnostics:s,asDiagnostic:a,asRange:R,asRanges:E,asPosition:C,asDiagnosticSeverity:I,asDiagnosticTag:p,asHover:L,asCompletionResult:j,asCompletionItem:Pe,asTextEdit:Be,asTextEdits:Xe,asSignatureHelp:Ot,asSignatureInformations:Ze,asSignatureInformation:yt,asParameterInformations:tn,asParameterInformation:ke,asDeclarationResult:at,asDefinitionResult:wt,asLocation:Ae,asReferences:qn,asDocumentHighlights:$n,asDocumentHighlight:dn,asDocumentHighlightKind:nn,asSymbolKind:xt,asSymbolTag:En,asSymbolTags:Ve,asSymbolInformations:Hn,asSymbolInformation:kn,asDocumentSymbols:Wn,asDocumentSymbol:Nt,asCommand:bt,asCommands:zt,asCodeAction:Un,asCodeActionKind:ct,asCodeActionKinds:Kn,asCodeLens:It,asCodeLenses:rn,asWorkspaceEdit:hn,asDocumentLink:Ft,asDocumentLinks:Lt,asFoldingRangeKind:fe,asFoldingRange:we,asFoldingRanges:he,asColor:D,asColorInformation:k,asColorInformations:M,asColorPresentation:H,asColorPresentations:ge,asSelectionRange:f,asSelectionRanges:T,asInlineValue:$,asInlineValues:b,asSemanticTokensLegend:Ne,asSemanticTokens:x,asSemanticTokensEdit:Y,asSemanticTokensEdits:be,asCallHierarchyItem:l,asCallHierarchyItems:S,asCallHierarchyIncomingCall:w,asCallHierarchyIncomingCalls:m,asCallHierarchyOutgoingCall:d,asCallHierarchyOutgoingCalls:_,asLinkedEditingRanges:_t,asTypeHierarchyItem:At,asTypeHierarchyItems:ae}}no.createConverter=tD});var vh=q(ro=&gt;{&quot;use strict&quot;;Object.defineProperty(ro,&quot;__esModule&quot;,{value:!0});ro.Delayer=void 0;var nD=Ce(),Ya=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,t=this.defaultDelay){return this.task=e,t&gt;=0&amp;&amp;this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(r=&gt;{this.onSuccess=r}).then(()=&gt;{this.completionPromise=void 0,this.onSuccess=void 0;var r=this.task();return this.task=void 0,r})),(t&gt;=0||this.timeout===void 0)&amp;&amp;(this.timeout=(0,nD.RAL)().timer.setTimeout(()=&gt;{this.timeout=void 0,this.onSuccess(void 0)},t&gt;=0?t:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&amp;&amp;(this.timeout.dispose(),this.timeout=void 0)}};ro.Delayer=Ya});var Or=q(Ht=&gt;{&quot;use strict&quot;;Object.defineProperty(Ht,&quot;__esModule&quot;,{value:!0});Ht.generateUuid=Ht.parse=Ht.isUUID=Ht.v4=Ht.empty=void 0;var hi=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},ie=class extends hi{constructor(){super([ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),&quot;-&quot;,ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),&quot;-&quot;,&quot;4&quot;,ie._randomHex(),ie._randomHex(),ie._randomHex(),&quot;-&quot;,ie._oneOf(ie._timeHighBits),ie._randomHex(),ie._randomHex(),ie._randomHex(),&quot;-&quot;,ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex(),ie._randomHex()].join(&quot;&quot;))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return ie._oneOf(ie._chars)}};ie._chars=[&quot;0&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;,&quot;6&quot;,&quot;7&quot;,&quot;8&quot;,&quot;9&quot;,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;e&quot;,&quot;f&quot;];ie._timeHighBits=[&quot;8&quot;,&quot;9&quot;,&quot;a&quot;,&quot;b&quot;];Ht.empty=new hi(&quot;00000000-0000-0000-0000-000000000000&quot;);function yh(){return new ie}Ht.v4=yh;var rD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ch(n){return rD.test(n)}Ht.isUUID=Ch;function iD(n){if(!Ch(n))throw new Error(&quot;invalid uuid&quot;);return new hi(n)}Ht.parse=iD;function oD(){return yh().asHex()}Ht.generateUuid=oD});var ec=q(io=&gt;{&quot;use strict&quot;;Object.defineProperty(io,&quot;__esModule&quot;,{value:!0});io.ProgressPart=void 0;var Rh=require(&quot;vscode&quot;),Dh=Ce(),Sh=yn(),Za=class{constructor(e,t,r){this._client=e,this._token=t,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(Dh.WorkDoneProgress.type,this._token,i=&gt;{switch(i.kind){case&quot;begin&quot;:this.begin(i);break;case&quot;report&quot;:this.report(i);break;case&quot;end&quot;:this.done(),r&amp;&amp;r(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&amp;&amp;Rh.window.withProgress({location:Rh.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(t,r)=&gt;{if(this._lspProgressDisposable!==void 0)return this._progress=t,this._cancellationToken=r,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=&gt;{this._client.sendNotification(Dh.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=&gt;{this._resolve=i,this._reject=o})})}report(e){if(this._infinite&amp;&amp;Sh.string(e.message))this._progress!==void 0&amp;&amp;this._progress.report({message:e.message});else if(Sh.number(e.percentage)){let t=Math.max(0,Math.min(e.percentage,100)),r=Math.max(0,t-this._reported);this._reported+=r,this._progress!==void 0&amp;&amp;this._progress.report({message:e.message,increment:r})}}cancel(){this.cleanup(),this._reject!==void 0&amp;&amp;(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&amp;&amp;(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&amp;&amp;(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&amp;&amp;(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};io.ProgressPart=Za});var it=q(ye=&gt;{&quot;use strict&quot;;Object.defineProperty(ye,&quot;__esModule&quot;,{value:!0});ye.BaseLanguageClient=ye.LSPCancellationError=ye.MessageTransports=ye.TextDocumentFeature=ye.State=ye.RevealOutputChannelOn=ye.DiagnosticPullMode=ye.CloseAction=ye.ErrorAction=ye.$DocumentSelector=void 0;var sD=Mi(),K=require(&quot;vscode&quot;),y=Ce(),aD=_a(),cD=ph(),uD=mh(),De=yn(),wh=vh(),Se=Or(),lD=ec(),ce;(function(n){let e=&quot;vscode-notebook-cell&quot;,t;(function(g){function p(C){let R=C;return y.NotebookCellTextDocumentFilter.is(C)&amp;&amp;R.sync===!0}g.is=p})(t||(t={}));function r(g,p){return o(g,p,t.is)}n.matchForDocumentSync=r;function i(g,p){return o(g,p,y.NotebookCellTextDocumentFilter.is)}n.matchForProvider=i;function o(g,p,C){let R=p.uri.scheme===e;for(let E of g)if(R&amp;&amp;C(E)){if(E.cellLanguage!==void 0&amp;&amp;E.cellLanguage!==p.languageId)continue;let I=u(p);if(I===void 0)continue;if(E.notebookDocument===void 0||h(E.notebookDocument,I))return!0}else if(!R&amp;&amp;y.TextDocumentFilter.is(E)&amp;&amp;K.languages.match(E,p)!==0)return!0;return!1}function s(g,p){return p.uri.scheme!==e?!1:!i(g,p)}n.skipCellTextDocument=s;function a(g){let p=[],C=new Set;for(let R of g)typeof R==&quot;string&quot;||y.TextDocumentFilter.is(R)?p.push(R):R.cellLanguage!==void 0&amp;&amp;!C.has(R.cellLanguage)?(p.push({scheme:e,language:R.cellLanguage}),C.add(R.cellLanguage)):C.has(null)||(p.push({scheme:e}),C.add(null));return p}n.asTextDocumentFilters=a;function u(g){if(g.uri.scheme===e){for(let p of K.workspace.notebookDocuments)for(let C of p.getCells())if(C.document===g)return p}}function h(g,p){g.notebookType!==void 0&amp;&amp;(p.notebookType,g.notebookType);let C=p.uri;if(g.scheme!==void 0&amp;&amp;(C.scheme,g.scheme),g.pattern!==void 0){let R=new sD.Minimatch(g.pattern,{noext:!0});return R.makeRe()?R.match(C.fsPath):!1}else return!0}})(ce=ye.$DocumentSelector||(ye.$DocumentSelector={}));var tc=class{error(e){(0,y.RAL)().console.error(e)}warn(e){(0,y.RAL)().console.warn(e)}info(e){(0,y.RAL)().console.info(e)}log(e){(0,y.RAL)().console.log(e)}};function dD(n,e,t,r,i){let o=new tc,s=(0,y.createProtocolConnection)(n,e,o,i);return s.onError(u=&gt;{t(u[0],u[1],u[2])}),s.onClose(r),{listen:()=&gt;s.listen(),sendRequest:(u,...h)=&gt;s.sendRequest(u,...h),onRequest:(u,h)=&gt;s.onRequest(u,h),sendNotification:(u,h)=&gt;s.sendNotification(u,h),onNotification:(u,h)=&gt;s.onNotification(u,h),onProgress:s.onProgress,sendProgress:s.sendProgress,trace:(u,h,g)=&gt;{let p={sendNotification:!1,traceFormat:y.TraceFormat.Text};g===void 0?s.trace(u,h,p):(De.boolean(g),s.trace(u,h,g))},initialize:u=&gt;s.sendRequest(y.InitializeRequest.type,u),shutdown:()=&gt;s.sendRequest(y.ShutdownRequest.type,void 0),exit:()=&gt;s.sendNotification(y.ExitNotification.type),onLogMessage:u=&gt;s.onNotification(y.LogMessageNotification.type,u),onShowMessage:u=&gt;s.onNotification(y.ShowMessageNotification.type,u),onTelemetry:u=&gt;s.onNotification(y.TelemetryEventNotification.type,u),didChangeConfiguration:u=&gt;s.sendNotification(y.DidChangeConfigurationNotification.type,u),didChangeWatchedFiles:u=&gt;s.sendNotification(y.DidChangeWatchedFilesNotification.type,u),didOpenTextDocument:u=&gt;s.sendNotification(y.DidOpenTextDocumentNotification.type,u),didChangeTextDocument:u=&gt;s.sendNotification(y.DidChangeTextDocumentNotification.type,u),didCloseTextDocument:u=&gt;s.sendNotification(y.DidCloseTextDocumentNotification.type,u),didSaveTextDocument:u=&gt;s.sendNotification(y.DidSaveTextDocumentNotification.type,u),onDiagnostics:u=&gt;s.onNotification(y.PublishDiagnosticsNotification.type,u),end:()=&gt;s.end(),dispose:()=&gt;s.dispose()}}var so;(function(n){n[n.Continue=1]=&quot;Continue&quot;,n[n.Shutdown=2]=&quot;Shutdown&quot;})(so=ye.ErrorAction||(ye.ErrorAction={}));var sr;(function(n){n[n.DoNotRestart=1]=&quot;DoNotRestart&quot;,n[n.Restart=2]=&quot;Restart&quot;})(sr=ye.CloseAction||(ye.CloseAction={}));var nc=class{constructor(e,t){this.client=e,this.maxRestartCount=t,this.restarts=[]}error(e,t,r){return r&amp;&amp;r&lt;=3?{action:so.Continue}:{action:so.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length&lt;=this.maxRestartCount?{action:sr.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]&lt;=3*60*1e3?{action:sr.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:sr.Restart})}},fD;(function(n){n.onType=&quot;onType&quot;,n.onSave=&quot;onSave&quot;})(fD=ye.DiagnosticPullMode||(ye.DiagnosticPullMode={}));var pi;(function(n){n[n.Info=1]=&quot;Info&quot;,n[n.Warn=2]=&quot;Warn&quot;,n[n.Error=3]=&quot;Error&quot;,n[n.Never=4]=&quot;Never&quot;})(pi=ye.RevealOutputChannelOn||(ye.RevealOutputChannelOn={}));var oo;(function(n){n[n.Stopped=1]=&quot;Stopped&quot;,n[n.Starting=3]=&quot;Starting&quot;,n[n.Running=2]=&quot;Running&quot;})(oo=ye.State||(ye.State={}));var qe;(function(n){n[n.Initial=0]=&quot;Initial&quot;,n[n.Starting=1]=&quot;Starting&quot;,n[n.StartFailed=2]=&quot;StartFailed&quot;,n[n.Running=3]=&quot;Running&quot;,n[n.Stopping=4]=&quot;Stopping&quot;,n[n.Stopped=5]=&quot;Stopped&quot;})(qe||(qe={}));var bh=[y.SymbolKind.File,y.SymbolKind.Module,y.SymbolKind.Namespace,y.SymbolKind.Package,y.SymbolKind.Class,y.SymbolKind.Method,y.SymbolKind.Property,y.SymbolKind.Field,y.SymbolKind.Constructor,y.SymbolKind.Enum,y.SymbolKind.Interface,y.SymbolKind.Function,y.SymbolKind.Variable,y.SymbolKind.Constant,y.SymbolKind.String,y.SymbolKind.Number,y.SymbolKind.Boolean,y.SymbolKind.Array,y.SymbolKind.Object,y.SymbolKind.Key,y.SymbolKind.Null,y.SymbolKind.EnumMember,y.SymbolKind.Struct,y.SymbolKind.Event,y.SymbolKind.Operator,y.SymbolKind.TypeParameter],hD=[y.CompletionItemKind.Text,y.CompletionItemKind.Method,y.CompletionItemKind.Function,y.CompletionItemKind.Constructor,y.CompletionItemKind.Field,y.CompletionItemKind.Variable,y.CompletionItemKind.Class,y.CompletionItemKind.Interface,y.CompletionItemKind.Module,y.CompletionItemKind.Property,y.CompletionItemKind.Unit,y.CompletionItemKind.Value,y.CompletionItemKind.Enum,y.CompletionItemKind.Keyword,y.CompletionItemKind.Snippet,y.CompletionItemKind.Color,y.CompletionItemKind.File,y.CompletionItemKind.Reference,y.CompletionItemKind.Folder,y.CompletionItemKind.EnumMember,y.CompletionItemKind.Constant,y.CompletionItemKind.Struct,y.CompletionItemKind.Event,y.CompletionItemKind.Operator,y.CompletionItemKind.TypeParameter],_h=[y.SymbolTag.Deprecated];function V(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var gi;(function(n){function e(t){let r=K.workspace.getConfiguration(&quot;files&quot;,t);return{trimTrailingWhitespace:r.get(&quot;trimTrailingWhitespace&quot;),trimFinalNewlines:r.get(&quot;trimFinalNewlines&quot;),insertFinalNewline:r.get(&quot;insertFinalNewline&quot;)}}n.fromConfiguration=e})(gi||(gi={}));var rc;(function(n){function e(t){let r=t;return r&amp;&amp;De.func(r.register)&amp;&amp;De.func(r.unregister)&amp;&amp;De.func(r.dispose)&amp;&amp;r.registrationType!==void 0}n.is=e})(rc||(rc={}));var en=class{constructor(e,t,r,i,o,s){this._client=e,this._event=t,this._type=r,this._middleware=i,this._createParams=o,this._selectorFilter=s,this._selectors=new Map,this._onNotificationSent=new K.EventEmitter}static textDocumentFilter(e,t){for(let r of e)if(ce.matchForDocumentSync(r,t))return!0;return!1}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=this._event(t=&gt;{this.callback(t).catch(r=&gt;{this._client.error(`Sending document notification ${this._type.method} failed.`,r)})})),this._selectors.set(e.id,e.registerOptions.documentSelector))}async callback(e){let t=async r=&gt;{let i=this._createParams(r);await this._client.sendNotification(this._type,i).catch(),this.notificationSent(r,this._type,i)};if(!this._selectorFilter||this._selectorFilter(this._selectors.values(),e))return this._middleware?this._middleware(e,r=&gt;t(r)):t(e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({original:e,type:t,params:r})}unregister(e){this._selectors.delete(e),this._selectors.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let t of this._selectors.values())if(ce.matchForDocumentSync(t,e))return{send:r=&gt;this.callback(r)}}},ic=class extends en{constructor(e,t){super(e,K.workspace.onDidOpenTextDocument,y.DidOpenTextDocumentNotification.type,e.clientOptions.middleware.didOpen,r=&gt;e.code2ProtocolConverter.asOpenTextDocumentParams(r),en.textDocumentFilter),this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;synchronization&quot;).dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&amp;&amp;r&amp;&amp;r.openClose&amp;&amp;this.register({id:Se.generateUuid(),registerOptions:{documentSelector:t}})}get registrationType(){return y.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let t=e.registerOptions.documentSelector;K.workspace.textDocuments.forEach(r=&gt;{let i=r.uri.toString();if(!this._syncedDocuments.has(i)&amp;&amp;ce.matchForDocumentSync(t,r)){let o=this._client.clientOptions.middleware,s=a=&gt;this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(r,s):s(r)).catch(a=&gt;{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(i,r)}})}notificationSent(e,t,r){super.notificationSent(e,t,r),this._syncedDocuments.set(e.uri.toString(),e)}},oc=class extends en{constructor(e,t){super(e,K.workspace.onDidCloseTextDocument,y.DidCloseTextDocumentNotification.type,e.clientOptions.middleware.didClose,r=&gt;e.code2ProtocolConverter.asCloseTextDocumentParams(r),en.textDocumentFilter),this._syncedDocuments=t}get registrationType(){return y.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;synchronization&quot;).dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&amp;&amp;r&amp;&amp;r.openClose&amp;&amp;this.register({id:Se.generateUuid(),registerOptions:{documentSelector:t}})}notificationSent(e,t,r){super.notificationSent(e,t,r),this._syncedDocuments.delete(e.uri.toString())}unregister(e){let t=this._selectors.get(e);super.unregister(e);let r=this._selectors.values();this._syncedDocuments.forEach(i=&gt;{if(ce.matchForDocumentSync(t,i)&amp;&amp;!this._selectorFilter(r,i)){let o=this._client.clientOptions.middleware,s=a=&gt;this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,s):s(i)).catch(a=&gt;{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}},sc=class{constructor(e){this._client=e,this._changeData=new Map,this._forcingDelivery=!1,this._onNotificationSent=new K.EventEmitter}get registrationType(){return y.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;synchronization&quot;).dynamicRegistration=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&amp;&amp;r&amp;&amp;r.change!==void 0&amp;&amp;r.change!==y.TextDocumentSyncKind.None&amp;&amp;this.register({id:Se.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:r.change})})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=K.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{documentSelector:e.registerOptions.documentSelector,syncKind:e.registerOptions.syncKind}))}async callback(e){if(e.contentChanges.length===0)return;let t=[];for(let r of this._changeData.values())if(ce.matchForDocumentSync(r.documentSelector,e.document)){let i=this._client.clientOptions.middleware;if(r.syncKind===y.TextDocumentSyncKind.Incremental){let o=async s=&gt;{let a=this._client.code2ProtocolConverter.asChangeTextDocumentParams(s);await this._client.sendNotification(y.DidChangeTextDocumentNotification.type,a),this.notificationSent(s,y.DidChangeTextDocumentNotification.type,a)};t.push(i.didChange?i.didChange(e,s=&gt;o(s)):o(e))}else if(r.syncKind===y.TextDocumentSyncKind.Full){let o=async s=&gt;{let a=async u=&gt;{let h=this._client.code2ProtocolConverter.asChangeTextDocumentParams(u.document);await this._client.sendNotification(y.DidChangeTextDocumentNotification.type,h),this.notificationSent(u,y.DidChangeTextDocumentNotification.type,h)};return this._changeDelayer?(this._changeDelayer.uri!==s.document.uri.toString()&amp;&amp;(this.forceDelivery(),this._changeDelayer.uri=s.document.uri.toString()),this._changeDelayer.delayer.trigger(()=&gt;a(s))):(this._changeDelayer={uri:s.document.uri.toString(),delayer:new wh.Delayer(200)},this._changeDelayer.delayer.trigger(()=&gt;a(s),-1))};t.push(i.didChange?i.didChange(e,s=&gt;o(s)):o(e))}}return Promise.all(t).then(void 0,r=&gt;{throw this._client.error(`Sending document notification ${y.DidChangeTextDocumentNotification.type.method} failed`,r),r})}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,r){this._onNotificationSent.fire({original:e,type:t,params:r})}unregister(e){this._changeData.delete(e),this._changeData.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._changeDelayer!==void 0&amp;&amp;this._changeDelayer.delayer.cancel(),this._changeDelayer=void 0,this._forcingDelivery=!1,this._changeData.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}forceDelivery(){if(!(this._forcingDelivery||!this._changeDelayer))try{this._forcingDelivery=!0,this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=!1}}getProvider(e){for(let t of this._changeData.values())if(ce.matchForDocumentSync(t.documentSelector,e))return{send:r=&gt;this.callback(r)}}},ac=class extends en{constructor(e){super(e,K.workspace.onWillSaveTextDocument,y.WillSaveTextDocumentNotification.type,e.clientOptions.middleware.willSave,t=&gt;e.code2ProtocolConverter.asWillSaveTextDocumentParams(t),(t,r)=&gt;en.textDocumentFilter(t,r.document))}get registrationType(){return y.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;synchronization&quot;);t.willSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&amp;&amp;r&amp;&amp;r.willSave&amp;&amp;this.register({id:Se.generateUuid(),registerOptions:{documentSelector:t}})}},cc=class{constructor(e){this._client=e,this._selectors=new Map}get registrationType(){return y.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;synchronization&quot;);t.willSaveWaitUntil=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;t&amp;&amp;r&amp;&amp;r.willSaveWaitUntil&amp;&amp;this.register({id:Se.generateUuid(),registerOptions:{documentSelector:t}})}register(e){!e.registerOptions.documentSelector||(this._listener||(this._listener=K.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,e.registerOptions.documentSelector))}callback(e){if(en.textDocumentFilter(this._selectors.values(),e.document)){let t=this._client.clientOptions.middleware,r=i=&gt;this._client.sendRequest(y.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(o=&gt;{let s=this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,r):r(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}},uc=class extends en{constructor(e){super(e,K.workspace.onDidSaveTextDocument,y.DidSaveTextDocumentNotification.type,e.clientOptions.middleware.didSave,t=&gt;e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText),en.textDocumentFilter),this._includeText=!1}get registrationType(){return y.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;synchronization&quot;).didSave=!0}initialize(e,t){let r=e.resolvedTextDocumentSync;if(t&amp;&amp;r&amp;&amp;r.save){let i=typeof r.save==&quot;boolean&quot;?{includeText:!1}:{includeText:!!r.save.includeText};this.register({id:Se.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}},lc=class{constructor(e,t){this._client=e,this._notifyFileEvent=t,this._watchers=new Map}get registrationType(){return y.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){V(V(e,&quot;workspace&quot;),&quot;didChangeWatchedFiles&quot;).dynamicRegistration=!0}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let t=[];for(let r of e.registerOptions.watchers){if(!De.string(r.globPattern))continue;let i=!0,o=!0,s=!0;r.kind!==void 0&amp;&amp;r.kind!==null&amp;&amp;(i=(r.kind&amp;y.WatchKind.Create)!==0,o=(r.kind&amp;y.WatchKind.Change)!==0,s=(r.kind&amp;y.WatchKind.Delete)!==0);let a=K.workspace.createFileSystemWatcher(r.globPattern,!i,!o,!s);this.hookListeners(a,i,o,s),t.push(a)}this._watchers.set(e.id,t)}registerRaw(e,t){let r=[];for(let i of t)this.hookListeners(i,!0,!0,!0,r);this._watchers.set(e,r)}hookListeners(e,t,r,i,o){t&amp;&amp;e.onDidCreate(s=&gt;this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:y.FileChangeType.Created}),null,o),r&amp;&amp;e.onDidChange(s=&gt;this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:y.FileChangeType.Changed}),null,o),i&amp;&amp;e.onDidDelete(s=&gt;this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:y.FileChangeType.Deleted}),null,o)}unregister(e){let t=this._watchers.get(e);if(t)for(let r of t)r.dispose()}dispose(){this._watchers.forEach(e=&gt;{for(let t of e)t.dispose()}),this._watchers.clear()}},rt=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&amp;&amp;t.disposable.dispose()}dispose(){this._registrations.forEach(e=&gt;{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,t){if(t){if(y.TextDocumentRegistrationOptions.is(t)){let r=y.StaticRegistrationOptions.hasId(t)?t.id:Se.generateUuid(),i=t.documentSelector||e;if(i)return[r,Object.assign({},t,{documentSelector:i})]}else if(De.boolean(t)&amp;&amp;t===!0||y.WorkDoneProgressOptions.is(t)){if(!e)return[void 0,void 0];let r=De.boolean(t)&amp;&amp;t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[Se.generateUuid(),r]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,t){if(!(!e||!t))return De.boolean(t)&amp;&amp;t===!0?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(let t of this._registrations.values()){let r=t.data.registerOptions.documentSelector;if(r!==null&amp;&amp;ce.matchForProvider(r,e))return t.provider}}getAllProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}};ye.TextDocumentFeature=rt;var dc=class{constructor(e,t){this._client=e,this._registrationType=t,this._registrations=new Map}get registrationType(){return this._registrationType}register(e){let t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);t!==void 0&amp;&amp;t.disposable.dispose()}dispose(){this._registrations.forEach(e=&gt;{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let t of this._registrations.values())e.push(t.provider);return e}},fc=class extends rt{constructor(e){super(e,y.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;completion&quot;);t.dynamicRegistration=!0,t.contextSupport=!0,t.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[y.MarkupKind.Markdown,y.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[y.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:[&quot;documentation&quot;,&quot;detail&quot;,&quot;additionalTextEdits&quot;]},insertTextModeSupport:{valueSet:[y.InsertTextMode.asIs,y.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},t.insertTextMode=y.InsertTextMode.adjustIndentation,t.completionItemKind={valueSet:hD},t.completionList={itemDefaults:[&quot;commitCharacters&quot;,&quot;editRange&quot;,&quot;insertTextFormat&quot;,&quot;insertTextMode&quot;]}}initialize(e,t){let r=this.getRegistrationOptions(t,e.completionProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);let r=e.triggerCharacters??[],i=e.allCommitCharacters,o=e.documentSelector,s={provideCompletionItems:(a,u,h,g)=&gt;{if(ce.skipCellTextDocument(o,a))return;let p=this._client,C=this._client.clientOptions.middleware,R=(E,I,F,A)=&gt;p.sendRequest(y.CompletionRequest.type,p.code2ProtocolConverter.asCompletionParams(E,I,F),A).then(N=&gt;p.protocol2CodeConverter.asCompletionResult(N,i),N=&gt;p.handleFailedRequest(y.CompletionRequest.type,A,N,null));return C.provideCompletionItem?C.provideCompletionItem(a,u,g,h,R):R(a,u,g,h)},resolveCompletionItem:e.resolveProvider?(a,u)=&gt;{let h=this._client,g=this._client.clientOptions.middleware,p=(C,R)=&gt;h.sendRequest(y.CompletionResolveRequest.type,h.code2ProtocolConverter.asCompletionItem(C,!!this.labelDetailsSupport.get(t)),R).then(h.protocol2CodeConverter.asCompletionItem,E=&gt;h.handleFailedRequest(y.CompletionResolveRequest.type,R,E,C));return g.resolveCompletionItem?g.resolveCompletionItem(a,u,p):p(a,u)}:void 0};return[K.languages.registerCompletionItemProvider(ce.asTextDocumentFilters(o),s,...r),s]}},hc=class extends rt{constructor(e){super(e,y.HoverRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;hover&quot;);t.dynamicRegistration=!0,t.contentFormat=[y.MarkupKind.Markdown,y.MarkupKind.PlainText]}initialize(e,t){let r=this.getRegistrationOptions(t,e.hoverProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideHover:(i,o,s)=&gt;{if(ce.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(y.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asHover,R=&gt;a.handleFailedRequest(y.HoverRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideHover?h.provideHover(i,o,s,u):u(i,o,s)}};return[K.languages.registerHoverProvider(ce.asTextDocumentFilters(t),r),r]}},pc=class extends rt{constructor(e){super(e,y.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;signatureHelp&quot;);t.dynamicRegistration=!0,t.signatureInformation={documentationFormat:[y.MarkupKind.Markdown,y.MarkupKind.PlainText]},t.signatureInformation.parameterInformation={labelOffsetSupport:!0},t.signatureInformation.activeParameterSupport=!0,t.contextSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.signatureHelpProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSignatureHelp:(s,a,u,h)=&gt;{if(ce.skipCellTextDocument(t,s))return;let g=this._client,p=(R,E,I,F)=&gt;g.sendRequest(y.SignatureHelpRequest.type,g.code2ProtocolConverter.asSignatureHelpParams(R,E,I),F).then(g.protocol2CodeConverter.asSignatureHelp,A=&gt;g.handleFailedRequest(y.SignatureHelpRequest.type,F,A,null)),C=g.clientOptions.middleware;return C.provideSignatureHelp?C.provideSignatureHelp(s,a,h,u,p):p(s,a,h,u)}},i,o=ce.asTextDocumentFilters(t);if(e.retriggerCharacters===void 0){let s=e.triggerCharacters||[];i=K.languages.registerSignatureHelpProvider(o,r,...s)}else{let s={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};i=K.languages.registerSignatureHelpProvider(o,r,s)}return[i,r]}},gc=class extends rt{constructor(e){super(e,y.DefinitionRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;definition&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.definitionProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDefinition:(i,o,s)=&gt;{if(ce.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(y.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(y.DefinitionRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDefinition?h.provideDefinition(i,o,s,u):u(i,o,s)}};return[K.languages.registerDefinitionProvider(ce.asTextDocumentFilters(t),r),r]}},mc=class extends rt{constructor(e){super(e,y.ReferencesRequest.type)}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;references&quot;).dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.referencesProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideReferences:(i,o,s,a)=&gt;{if(ce.skipCellTextDocument(t,i))return;let u=this._client,h=(p,C,R,E)=&gt;u.sendRequest(y.ReferencesRequest.type,u.code2ProtocolConverter.asReferenceParams(p,C,R),E).then(u.protocol2CodeConverter.asReferences,I=&gt;u.handleFailedRequest(y.ReferencesRequest.type,E,I,null)),g=u.clientOptions.middleware;return g.provideReferences?g.provideReferences(i,o,s,a,h):h(i,o,s,a)}};return[K.languages.registerReferenceProvider(ce.asTextDocumentFilters(t),r),r]}},vc=class extends rt{constructor(e){super(e,y.DocumentHighlightRequest.type)}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;documentHighlight&quot;).dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentHighlightProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentHighlights:(i,o,s)=&gt;{if(ce.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(y.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDocumentHighlights,R=&gt;a.handleFailedRequest(y.DocumentHighlightRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDocumentHighlights?h.provideDocumentHighlights(i,o,s,u):u(i,o,s)}};return[K.languages.registerDocumentHighlightProvider(ce.asTextDocumentFilters(t),r),r]}},yc=class extends rt{constructor(e){super(e,y.DocumentSymbolRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;documentSymbol&quot;);t.dynamicRegistration=!0,t.symbolKind={valueSet:bh},t.hierarchicalDocumentSymbolSupport=!0,t.tagSupport={valueSet:_h},t.labelSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentSymbolProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentSymbols:(o,s)=&gt;{if(ce.skipCellTextDocument(t,o))return;let a=this._client,u=(g,p)=&gt;a.sendRequest(y.DocumentSymbolRequest.type,a.code2ProtocolConverter.asDocumentSymbolParams(g),p).then(C=&gt;{if(C!==null){if(C.length===0)return[];{let R=C[0];return y.DocumentSymbol.is(R)?a.protocol2CodeConverter.asDocumentSymbols(C):a.protocol2CodeConverter.asSymbolInformations(C)}}},C=&gt;a.handleFailedRequest(y.DocumentSymbolRequest.type,p,C,null)),h=a.clientOptions.middleware;return h.provideDocumentSymbols?h.provideDocumentSymbols(o,s,u):u(o,s)}},i=e.label!==void 0?{label:e.label}:void 0;return[K.languages.registerDocumentSymbolProvider(ce.asTextDocumentFilters(t),r,i),r]}},Cc=class extends dc{constructor(e){super(e,y.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;workspace&quot;),&quot;symbol&quot;);t.dynamicRegistration=!0,t.symbolKind={valueSet:bh},t.tagSupport={valueSet:_h},t.resolveSupport={properties:[&quot;location.range&quot;]}}initialize(e){!e.workspaceSymbolProvider||this.register({id:Se.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let t={provideWorkspaceSymbols:(r,i)=&gt;{let o=this._client,s=(u,h)=&gt;o.sendRequest(y.WorkspaceSymbolRequest.type,{query:u},h).then(o.protocol2CodeConverter.asSymbolInformations,g=&gt;o.handleFailedRequest(y.WorkspaceSymbolRequest.type,h,g,null)),a=o.clientOptions.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(r,i,s):s(r,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(r,i)=&gt;{let o=this._client,s=(u,h)=&gt;o.sendRequest(y.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(u),h).then(o.protocol2CodeConverter.asSymbolInformation,g=&gt;o.handleFailedRequest(y.WorkspaceSymbolResolveRequest.type,h,g,null)),a=o.clientOptions.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(r,i,s):s(r,i)}:void 0};return[K.languages.registerWorkspaceSymbolProvider(t),t]}},Rc=class extends rt{constructor(e){super(e,y.CodeActionRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;codeAction&quot;);t.dynamicRegistration=!0,t.isPreferredSupport=!0,t.disabledSupport=!0,t.dataSupport=!0,t.resolveSupport={properties:[&quot;edit&quot;]},t.codeActionLiteralSupport={codeActionKind:{valueSet:[y.CodeActionKind.Empty,y.CodeActionKind.QuickFix,y.CodeActionKind.Refactor,y.CodeActionKind.RefactorExtract,y.CodeActionKind.RefactorInline,y.CodeActionKind.RefactorRewrite,y.CodeActionKind.Source,y.CodeActionKind.SourceOrganizeImports]}},t.honorsChangeAnnotations=!1}initialize(e,t){let r=this.getRegistrationOptions(t,e.codeActionProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideCodeActions:(i,o,s,a)=&gt;{if(ce.skipCellTextDocument(t,i))return;let u=this._client,h=(p,C,R,E)=&gt;{let I={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(p),range:u.code2ProtocolConverter.asRange(C),context:u.code2ProtocolConverter.asCodeActionContext(R)};return u.sendRequest(y.CodeActionRequest.type,I,E).then(F=&gt;{if(F===null)return;let A=[];for(let N of F)y.Command.is(N)?A.push(u.protocol2CodeConverter.asCommand(N)):A.push(u.protocol2CodeConverter.asCodeAction(N));return A},F=&gt;u.handleFailedRequest(y.CodeActionRequest.type,E,F,null))},g=u.clientOptions.middleware;return g.provideCodeActions?g.provideCodeActions(i,o,s,a,h):h(i,o,s,a)},resolveCodeAction:e.resolveProvider?(i,o)=&gt;{let s=this._client,a=this._client.clientOptions.middleware,u=(h,g)=&gt;s.sendRequest(y.CodeActionResolveRequest.type,s.code2ProtocolConverter.asCodeAction(h),g).then(s.protocol2CodeConverter.asCodeAction,p=&gt;s.handleFailedRequest(y.CodeActionResolveRequest.type,g,p,h));return a.resolveCodeAction?a.resolveCodeAction(i,o,u):u(i,o)}:void 0};return[K.languages.registerCodeActionsProvider(ce.asTextDocumentFilters(t),r,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),r]}},Dc=class extends rt{constructor(e){super(e,y.CodeLensRequest.type)}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;codeLens&quot;).dynamicRegistration=!0,V(V(e,&quot;workspace&quot;),&quot;codeLens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(y.CodeLensRefreshRequest.type,async()=&gt;{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(t,e.codeLensProvider);!i||this.register({id:Se.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new K.EventEmitter,i={onDidChangeCodeLenses:r.event,provideCodeLenses:(o,s)=&gt;{if(ce.skipCellTextDocument(t,o))return;let a=this._client,u=(g,p)=&gt;a.sendRequest(y.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(g),p).then(a.protocol2CodeConverter.asCodeLenses,C=&gt;a.handleFailedRequest(y.CodeLensRequest.type,p,C,null)),h=a.clientOptions.middleware;return h.provideCodeLenses?h.provideCodeLenses(o,s,u):u(o,s)},resolveCodeLens:e.resolveProvider?(o,s)=&gt;{let a=this._client,u=(g,p)=&gt;a.sendRequest(y.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(g),p).then(a.protocol2CodeConverter.asCodeLens,C=&gt;a.handleFailedRequest(y.CodeLensResolveRequest.type,p,C,g)),h=a.clientOptions.middleware;return h.resolveCodeLens?h.resolveCodeLens(o,s,u):u(o,s)}:void 0};return[K.languages.registerCodeLensProvider(ce.asTextDocumentFilters(t),i),{provider:i,onDidChangeCodeLensEmitter:r}]}},Sc=class extends rt{constructor(e){super(e,y.DocumentFormattingRequest.type)}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;formatting&quot;).dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentFormattingProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentFormattingEdits:(i,o,s)=&gt;{if(ce.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),options:a.code2ProtocolConverter.asFormattingOptions(p,gi.fromConfiguration(g))};return a.sendRequest(y.DocumentFormattingRequest.type,R,C).then(a.protocol2CodeConverter.asTextEdits,E=&gt;a.handleFailedRequest(y.DocumentFormattingRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideDocumentFormattingEdits?h.provideDocumentFormattingEdits(i,o,s,u):u(i,o,s)}};return[K.languages.registerDocumentFormattingEditProvider(ce.asTextDocumentFilters(t),r),r]}},wc=class extends rt{constructor(e){super(e,y.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;rangeFormatting&quot;).dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentRangeFormattingEdits:(i,o,s,a)=&gt;{if(ce.skipCellTextDocument(t,i))return;let u=this._client,h=(p,C,R,E)=&gt;{let I={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(p),range:u.code2ProtocolConverter.asRange(C),options:u.code2ProtocolConverter.asFormattingOptions(R,gi.fromConfiguration(p))};return u.sendRequest(y.DocumentRangeFormattingRequest.type,I,E).then(u.protocol2CodeConverter.asTextEdits,F=&gt;u.handleFailedRequest(y.DocumentRangeFormattingRequest.type,E,F,null))},g=u.clientOptions.middleware;return g.provideDocumentRangeFormattingEdits?g.provideDocumentRangeFormattingEdits(i,o,s,a,h):h(i,o,s,a)}};return[K.languages.registerDocumentRangeFormattingEditProvider(ce.asTextDocumentFilters(t),r),r]}},bc=class extends rt{constructor(e){super(e,y.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){V(V(e,&quot;textDocument&quot;),&quot;onTypeFormatting&quot;).dynamicRegistration=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideOnTypeFormattingEdits:(o,s,a,u,h)=&gt;{if(ce.skipCellTextDocument(t,o))return;let g=this._client,p=(R,E,I,F,A)=&gt;{let N={textDocument:g.code2ProtocolConverter.asTextDocumentIdentifier(R),position:g.code2ProtocolConverter.asPosition(E),ch:I,options:g.code2ProtocolConverter.asFormattingOptions(F,gi.fromConfiguration(R))};return g.sendRequest(y.DocumentOnTypeFormattingRequest.type,N,A).then(g.protocol2CodeConverter.asTextEdits,L=&gt;g.handleFailedRequest(y.DocumentOnTypeFormattingRequest.type,A,L,null))},C=g.clientOptions.middleware;return C.provideOnTypeFormattingEdits?C.provideOnTypeFormattingEdits(o,s,a,u,h,p):p(o,s,a,u,h)}},i=e.moreTriggerCharacter||[];return[K.languages.registerOnTypeFormattingEditProvider(ce.asTextDocumentFilters(t),r,e.firstTriggerCharacter,...i),r]}},_c=class extends rt{constructor(e){super(e,y.RenameRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;rename&quot;);t.dynamicRegistration=!0,t.prepareSupport=!0,t.prepareSupportDefaultBehavior=y.PrepareSupportDefaultBehavior.Identifier,t.honorsChangeAnnotations=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.renameProvider);!r||(De.boolean(e.renameProvider)&amp;&amp;(r.prepareProvider=!1),this.register({id:Se.generateUuid(),registerOptions:r}))}registerLanguageProvider(e){let t=e.documentSelector,r={provideRenameEdits:(i,o,s,a)=&gt;{if(ce.skipCellTextDocument(t,i))return;let u=this._client,h=(p,C,R,E)=&gt;{let I={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(p),position:u.code2ProtocolConverter.asPosition(C),newName:R};return u.sendRequest(y.RenameRequest.type,I,E).then(u.protocol2CodeConverter.asWorkspaceEdit,F=&gt;u.handleFailedRequest(y.RenameRequest.type,E,F,null,!1))},g=u.clientOptions.middleware;return g.provideRenameEdits?g.provideRenameEdits(i,o,s,a,h):h(i,o,s,a)},prepareRename:e.prepareProvider?(i,o,s)=&gt;{if(ce.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),position:a.code2ProtocolConverter.asPosition(p)};return a.sendRequest(y.PrepareRenameRequest.type,R,C).then(E=&gt;y.Range.is(E)?a.protocol2CodeConverter.asRange(E):this.isDefaultBehavior(E)?E.defaultBehavior===!0?null:Promise.reject(new Error(&quot;The element can't be renamed.&quot;)):E&amp;&amp;y.Range.is(E.range)?{range:a.protocol2CodeConverter.asRange(E.range),placeholder:E.placeholder}:Promise.reject(new Error(&quot;The element can't be renamed.&quot;)),E=&gt;{throw typeof E.message==&quot;string&quot;?new Error(E.message):new Error(&quot;The element can't be renamed.&quot;)})},h=a.clientOptions.middleware;return h.prepareRename?h.prepareRename(i,o,s,u):u(i,o,s)}:void 0};return[K.languages.registerRenameProvider(ce.asTextDocumentFilters(t),r),r]}isDefaultBehavior(e){let t=e;return t&amp;&amp;De.boolean(t.defaultBehavior)}},Tc=class extends rt{constructor(e){super(e,y.DocumentLinkRequest.type)}fillClientCapabilities(e){let t=V(V(e,&quot;textDocument&quot;),&quot;documentLink&quot;);t.dynamicRegistration=!0,t.tooltipSupport=!0}initialize(e,t){let r=this.getRegistrationOptions(t,e.documentLinkProvider);!r||this.register({id:Se.generateUuid(),registerOptions:r})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDocumentLinks:(i,o)=&gt;{if(ce.skipCellTextDocument(t,i))return;let s=this._client,a=(h,g)=&gt;s.sendRequest(y.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(h),g).then(s.protocol2CodeConverter.asDocumentLinks,p=&gt;s.handleFailedRequest(y.DocumentLinkRequest.type,g,p,null)),u=s.clientOptions.middleware;return u.provideDocumentLinks?u.provideDocumentLinks(i,o,a):a(i,o)},resolveDocumentLink:e.resolveProvider?(i,o)=&gt;{let s=this._client,a=(h,g)=&gt;s.sendRequest(y.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(h),g).then(s.protocol2CodeConverter.asDocumentLink,p=&gt;s.handleFailedRequest(y.DocumentLinkResolveRequest.type,g,p,h)),u=s.clientOptions.middleware;return u.resolveDocumentLink?u.resolveDocumentLink(i,o,a):a(i,o)}:void 0};return[K.languages.registerDocumentLinkProvider(ce.asTextDocumentFilters(t),r),r]}},Pc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return y.DidChangeConfigurationNotification.type}fillClientCapabilities(e){V(V(e,&quot;workspace&quot;),&quot;didChangeConfiguration&quot;).dynamicRegistration=!0}initialize(){let e=this._client.clientOptions.synchronize.configurationSection;e!==void 0&amp;&amp;this.register({id:Se.generateUuid(),registerOptions:{section:e}})}register(e){let t=K.workspace.onDidChangeConfiguration(r=&gt;{this.onDidChangeConfiguration(e.registerOptions.section,r)});this._listeners.set(e.id,t),e.registerOptions.section!==void 0&amp;&amp;this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let t=this._listeners.get(e);t&amp;&amp;(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}onDidChangeConfiguration(e,t){let r;if(De.string(e)?r=[e]:r=e,r!==void 0&amp;&amp;t!==void 0&amp;&amp;!r.some(a=&gt;t.affectsConfiguration(a)))return;let i=async s=&gt;s===void 0?this._client.sendNotification(y.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(y.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)}),o=this.getMiddleware();(o?o(r,i):i(r)).catch(s=&gt;{this._client.error(`Sending notification ${y.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(e){function t(o,s){let a=o;for(let u=0;u&lt;s.length-1;u++){let h=a[s[u]];h||(h=Object.create(null),a[s[u]]=h),a=h}return a}let r=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o&lt;e.length;o++){let s=e[o],a=s.indexOf(&quot;.&quot;),u=null;if(a&gt;=0?u=K.workspace.getConfiguration(s.substr(0,a),r).get(s.substr(a+1)):u=K.workspace.getConfiguration(void 0,r).get(s),u){let h=e[o].split(&quot;.&quot;);t(i,h)[h[h.length-1]]=(0,aD.toJSONObject)(u)}}return i}getMiddleware(){let e=this._client.clientOptions.middleware;if(e.workspace&amp;&amp;e.workspace.didChangeConfiguration)return e.workspace.didChangeConfiguration}},qc=class{constructor(e){this._client=e,this._commands=new Map}get registrationType(){return y.ExecuteCommandRequest.type}fillClientCapabilities(e){V(V(e,&quot;workspace&quot;),&quot;executeCommand&quot;).dynamicRegistration=!0}initialize(e){!e.executeCommandProvider||this.register({id:Se.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let t=this._client,r=t.clientOptions.middleware,i=(o,s)=&gt;{let a={command:o,arguments:s};return t.sendRequest(y.ExecuteCommandRequest.type,a).then(void 0,u=&gt;t.handleFailedRequest(y.ExecuteCommandRequest.type,void 0,u,void 0))};if(e.registerOptions.commands){let o=[];for(let s of e.registerOptions.commands)o.push(K.commands.registerCommand(s,(...a)=&gt;r.executeCommand?r.executeCommand(s,a,i):i(s,a)));this._commands.set(e.id,o)}}unregister(e){let t=this._commands.get(e);t&amp;&amp;t.forEach(r=&gt;r.dispose())}dispose(){this._commands.forEach(e=&gt;{e.forEach(t=&gt;t.dispose())}),this._commands.clear()}},pD;(function(n){function e(t){return t&amp;&amp;y.MessageReader.is(t.reader)&amp;&amp;y.MessageWriter.is(t.writer)}n.is=e})(pD=ye.MessageTransports||(ye.MessageTransports={}));var ao=class{constructor(e,t){this._resolve=e,this._reject=t,this._used=!1}get isUsed(){return this._used}resolve(){this._used=!0,this._resolve()}reject(e){this._used=!0,this._reject(e)}},co=class extends K.CancellationError{constructor(e){super(),this.data=e}};ye.LSPCancellationError=co;var ar=class{constructor(e,t,r){this._traceFormat=y.TraceFormat.Text,this._features=[],this._dynamicFeatures=new Map,this._id=e,this._name=t,r=r||{};let i={isTrusted:!1,supportHtml:!1};r.markdown!==void 0&amp;&amp;(i.isTrusted=r.markdown.isTrusted===!0,i.supportHtml=r.markdown.supportHtml===!0),this._clientOptions={documentSelector:r.documentSelector??[],synchronize:r.synchronize??{},diagnosticCollectionName:r.diagnosticCollectionName,outputChannelName:r.outputChannelName??this._name,revealOutputChannelOn:r.revealOutputChannelOn??pi.Error,stdioEncoding:r.stdioEncoding??&quot;utf8&quot;,initializationOptions:r.initializationOptions,initializationFailedHandler:r.initializationFailedHandler,progressOnInitialization:!!r.progressOnInitialization,errorHandler:r.errorHandler??this.createDefaultErrorHandler(r.connectionOptions?.maxRestartCount),middleware:r.middleware??{},uriConverters:r.uriConverters,workspaceFolder:r.workspaceFolder,connectionOptions:r.connectionOptions,markdown:i,diagnosticPullOptions:r.diagnosticPullOptions??{onChange:!0,onSave:!1}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=qe.Initial,this._connectionPromise=void 0,this._resolvedConnection=void 0,this._initializeResult=void 0,r.outputChannel?(this._outputChannel=r.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=r.traceOutputChannel,this._listeners=void 0,this._providers=void 0,this._diagnostics=void 0,this._fileEvents=[],this._fileEventDelayer=new wh.Delayer(250),this._onReady=new Promise((o,s)=&gt;{this._onReadyCallbacks=new ao(o,s)}),this._onStop=void 0,this._telemetryEmitter=new y.Emitter,this._stateChangeEmitter=new y.Emitter,this._trace=y.Trace.Off,this._tracer={log:(o,s)=&gt;{De.string(o)?this.logTrace(o,s):this.logObjectTrace(o)}},this._c2p=cD.createConverter(r.uriConverters?r.uriConverters.code2Protocol:void 0),this._p2c=uD.createConverter(r.uriConverters?r.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get state(){return this._state}set state(e){let t=this.getPublicState();this._state=e;let r=this.getPublicState();r!==t&amp;&amp;this._stateChangeEmitter.fire({oldState:t,newState:r})}getPublicState(){return this.state===qe.Running?oo.Running:this.state===qe.Starting?oo.Starting:oo.Stopped}get initializeResult(){return this._initializeResult}sendRequest(e,...t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${De.string(e)?e:e.method}`);this.forceDocumentSync();try{return this._resolvedConnection.sendRequest(e,...t)}catch(r){throw this.error(`Sending request ${De.string(e)?e:e.method} failed.`,r),r}}onRequest(e,t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${De.string(e)?e:e.method}`);try{return this._resolvedConnection.onRequest(e,t)}catch(r){throw this.error(`Registering request handler ${De.string(e)?e:e.method} failed.`,r),r}}sendNotification(e,t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${De.string(e)?e:e.method}`);this.forceDocumentSync();try{return this._resolvedConnection.sendNotification(e,t)}catch(r){throw this.error(`Sending notification ${De.string(e)?e:e.method} failed.`,r),r}}onNotification(e,t){if(!this.isConnectionActive())throw new Error(`Language client is not ready yet when handling ${De.string(e)?e:e.method}`);try{return this._resolvedConnection.onNotification(e,t)}catch(r){throw this.error(`Registering notification handler ${De.string(e)?e:e.method} failed.`,r),r}}onProgress(e,t,r){if(!this.isConnectionActive())throw new Error(&quot;Language client is not ready yet when trying to send progress&quot;);try{if(y.WorkDoneProgress.is(e)){let i=this._clientOptions.middleware.handleWorkDoneProgress;if(i!==void 0)return this._resolvedConnection.onProgress(e,t,o=&gt;{i(t,o,()=&gt;r(o))})}return this._resolvedConnection.onProgress(e,t,r)}catch(i){throw this.error(`Registering progress handler for token ${t} failed.`,i),i}}sendProgress(e,t,r){if(!this.isConnectionActive())throw new Error(&quot;Language client is not ready yet when trying to send progress&quot;);return this.forceDocumentSync(),this._resolvedConnection.sendProgress(e,t,r).then(void 0,i=&gt;{throw this.error(`Sending progress for token ${t} failed.`,i),i})}get name(){return this._name}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=K.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}createDefaultErrorHandler(e){if(e!==void 0&amp;&amp;e&lt;0)throw new Error(`Invalid maxRestartCount: ${e}`);return new nc(this,e??4)}set trace(e){this._trace=e,this.onReady().then(()=&gt;{this.resolveConnection().then(t=&gt;{t.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})},()=&gt;this.info(&quot;Setting trace value failed&quot;,void 0,!1))},()=&gt;{})}data2String(e){if(e instanceof y.ResponseError){let t=e;return`  Message: ${t.message}
</failure>
		</testcase>
		<testcase name="javascript.lang.security.detect-child-process.detect-child-process" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="39">
			<failure type="ERROR" message="Detected calls to child_process from a function argument `g`. This could lead to a command injection if the input is user controllable. Try to avoid calls to child_process, and if it is needed ensure user input is correctly sanitized or sandboxed. ">`+t.data.toString():&quot;&quot;}`}return e instanceof Error?De.string(e.stack)?e.stack:e.message:De.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Info&amp;&amp;this.showNotificationMessage(y.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Warn&amp;&amp;this.showNotificationMessage(y.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),(r===&quot;force&quot;||r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Error)&amp;&amp;this.showNotificationMessage(y.MessageType.Error,e)}showNotificationMessage(e,t){t=t??&quot;A request has failed. See the output for more information.&quot;,(e===y.MessageType.Error?K.window.showErrorMessage:e===y.MessageType.Warning?K.window.showWarningMessage:K.window.showInformationMessage)(t,&quot;Go to output&quot;).then(i=&gt;{i!==void 0&amp;&amp;this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&amp;&amp;this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&amp;&amp;e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&amp;&amp;this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===qe.Initial||this.state===qe.Stopping||this.state===qe.Stopped}needsStop(){return this.state===qe.Starting||this.state===qe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===qe.Running&amp;&amp;!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&amp;&amp;(this._onReady=new Promise((e,t)=&gt;{this._onReadyCallbacks=new ao(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?K.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):K.languages.createDiagnosticCollection()),this.state=qe.Starting,this.resolveConnection().then(e=&gt;(e.onLogMessage(t=&gt;{switch(t.type){case y.MessageType.Error:this.error(t.message,void 0,!1);break;case y.MessageType.Warning:this.warn(t.message,void 0,!1);break;case y.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=&gt;{switch(t.type){case y.MessageType.Error:K.window.showErrorMessage(t.message);break;case y.MessageType.Warning:K.window.showWarningMessage(t.message);break;case y.MessageType.Info:K.window.showInformationMessage(t.message);break;default:K.window.showInformationMessage(t.message)}}),e.onRequest(y.ShowMessageRequest.type,t=&gt;{let r;switch(t.type){case y.MessageType.Error:r=K.window.showErrorMessage;break;case y.MessageType.Warning:r=K.window.showWarningMessage;break;case y.MessageType.Info:r=K.window.showInformationMessage;break;default:r=K.window.showInformationMessage}let i=t.actions||[];return r(t.message,...i)}),e.onTelemetry(t=&gt;{this._telemetryEmitter.fire(t)}),e.onRequest(y.ShowDocumentRequest.type,async t=&gt;{let r=async o=&gt;{let s=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await K.env.openExternal(s)};{let a={};return o.selection!==void 0&amp;&amp;(a.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?a.preserveFocus=!0:o.takeFocus===!0&amp;&amp;(a.preserveFocus=!1),await K.window.showTextDocument(s,a),{success:!0}}}catch{return{success:!0}}},i=this._clientOptions.middleware.window?.showDocument;return i!==void 0?i(t,r):r(t)}),e.listen(),this.initialize(e))).catch(e=&gt;{this.state=qe.StartFailed,this._onReadyCallbacks.reject(e),this.error(`${this._name} client: couldn't create connection to server`,e,&quot;force&quot;)}),new K.Disposable(()=&gt;{this.needsStop()&amp;&amp;this.stop().catch(e=&gt;{this.error(&quot;Stopping server failed.&quot;,e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:K.env.appName,version:K.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(K.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:De.func(t)?t():t,trace:y.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=Se.generateUuid(),a=new lD.ProgressPart(e,s);return o.workDoneToken=s,this.doInitialize(e,o).then(u=&gt;(a.done(),u),u=&gt;{throw a.cancel(),u})}else return this.doInitialize(e,o)}doInitialize(e,t){return e.initialize(t).then(r=&gt;{this._resolvedConnection=e,this._initializeResult=r,this.state=qe.Running;let i;return De.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===y.TextDocumentSyncKind.None?i={openClose:!1,change:y.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&amp;&amp;r.capabilities.textDocumentSync!==null&amp;&amp;(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=&gt;this.handleDiagnostics(o)),e.onRequest(y.RegistrationRequest.type,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(&quot;client/registerFeature&quot;,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(y.UnregistrationRequest.type,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(&quot;client/unregisterFeature&quot;,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(y.ApplyWorkspaceEditRequest.type,o=&gt;this.handleApplyWorkspaceEdit(o)),e.sendNotification(y.InitializedNotification.type,{}).then(()=&gt;(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r))}).then(void 0,r=&gt;{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof y.ResponseError&amp;&amp;r.data&amp;&amp;r.data.retry?K.window.showErrorMessage(r.message,{title:&quot;Retry&quot;,id:&quot;retry&quot;}).then(i=&gt;{i&amp;&amp;i.id===&quot;retry&quot;?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&amp;&amp;r.message&amp;&amp;K.window.showErrorMessage(r.message),this.error(&quot;Server initialization failed.&quot;,r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=K.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}async stop(e=2e3){if(await this.onReady(),this._initializeResult=void 0,!this._connectionPromise)return this.state=qe.Stopped,Promise.resolve();if(this.state===qe.Stopping&amp;&amp;this._onStop)return this._onStop;this.state=qe.Stopping,this.cleanUp(!1);let t=new Promise(i=&gt;{(0,y.RAL)().timer.setTimeout(i,e)}),r=this.resolveConnection().then(i=&gt;i.shutdown().then(()=&gt;i.exit().then(()=&gt;i)));return this._onStop=Promise.race([t,r]).then(i=&gt;{if(i!==void 0)i.end(),i.dispose();else throw this.error(&quot;Stopping server timed out&quot;,void 0,!1),new Error(&quot;Stopping the server timed out&quot;)},i=&gt;{throw this.error(&quot;Stopping server failed&quot;,i,!1),i}).finally(()=&gt;{this.state=qe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})}cleanUp(e=!0,t=!0){this._fileEvents=[],this._fileEventDelayer.cancel(),this._listeners&amp;&amp;(this._listeners.forEach(r=&gt;r.dispose()),this._listeners=void 0),this._providers&amp;&amp;(this._providers.forEach(r=&gt;r.dispose()),this._providers=void 0),this._syncedDocuments&amp;&amp;this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=&gt;i[1]).reverse())r.dispose();e&amp;&amp;this.cleanUpChannel(),t&amp;&amp;this._diagnostics&amp;&amp;(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&amp;&amp;this._disposeOutputChannel&amp;&amp;(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=&gt;{await t.onReady();let s=await t.resolveConnection(),a=Promise.resolve();return t.isConnectionActive()&amp;&amp;(t.forceDocumentSync(),a=s.didChangeWatchedFiles({changes:t._fileEvents})),t._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=&gt;{t.error(&quot;Notify file events failed.&quot;,o)})}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&amp;&amp;(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(y.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,r,(o,s)=&gt;this.setDiagnostics(o,s)):this.setDiagnostics(t,r)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(r,i,o)=&gt;{this.handleConnectionError(r,i,o)},t=()=&gt;{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||&quot;utf8&quot;).then(r=&gt;dD(r.reader,r.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===qe.Stopped)return;try{this._resolvedConnection&amp;&amp;this._resolvedConnection.dispose()}catch{}let e={action:sr.DoNotRestart};if(this.state!==qe.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e.action===sr.DoNotRestart?(this.error(e.message??&quot;Connection to server got closed. Server will not be restarted.&quot;,void 0,&quot;force&quot;),this.state===qe.Starting?(this._onReadyCallbacks.reject(new Error(&quot;Connection to server got closed. Server will not be restarted.&quot;)),this.state=qe.StartFailed):this.state=qe.Stopped,this.cleanUp(!1,!0)):e.action===sr.Restart&amp;&amp;(this.info(e.message??&quot;Connection to server got closed. Server will restart.&quot;),this.cleanUp(!1,!1),this.state=qe.Initial,this.start())}handleConnectionError(e,t,r){let i=this._clientOptions.errorHandler.error(e,t,r);i.action===so.Shutdown&amp;&amp;(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,&quot;force&quot;),this.stop().catch(o=&gt;{this.error(&quot;Stopping server failed&quot;,o,!1)}))}hookConfigurationChanged(e){K.workspace.onDidChangeConfiguration(()=&gt;{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let r=K.workspace.getConfiguration(this._id),i=y.Trace.Off,o=y.TraceFormat.Text;if(r){let s=r.get(&quot;trace.server&quot;,&quot;off&quot;);typeof s==&quot;string&quot;?i=y.Trace.fromString(s):(i=y.Trace.fromString(r.get(&quot;trace.server.verbosity&quot;,&quot;off&quot;)),o=y.TraceFormat.fromString(r.get(&quot;trace.server.format&quot;,&quot;text&quot;)))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;De.array(t)?r=t:r=[t],r&amp;&amp;this._dynamicFeatures.get(y.DidChangeWatchedFilesNotification.type.method).registerRaw(Se.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),rc.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Pc(this)),this.registerFeature(new ic(this,this._syncedDocuments)),this.registerFeature(new sc(this)),this.registerFeature(new ac(this)),this.registerFeature(new cc(this)),this.registerFeature(new uc(this)),this.registerFeature(new oc(this,this._syncedDocuments)),this.registerFeature(new lc(this,e=&gt;this.notifyFileEvent(e))),this.registerFeature(new fc(this)),this.registerFeature(new hc(this)),this.registerFeature(new pc(this)),this.registerFeature(new gc(this)),this.registerFeature(new mc(this)),this.registerFeature(new vc(this)),this.registerFeature(new yc(this)),this.registerFeature(new Cc(this)),this.registerFeature(new Rc(this)),this.registerFeature(new Dc(this)),this.registerFeature(new Sc(this)),this.registerFeature(new wc(this)),this.registerFeature(new bc(this)),this.registerFeature(new _c(this)),this.registerFeature(new Tc(this)),this.registerFeature(new qc(this))}fillInitializeParams(e){for(let t of this._features)De.func(t.fillInitializeParams)&amp;&amp;t.fillInitializeParams(e)}computeClientCapabilities(){let e={};V(e,&quot;workspace&quot;).applyEdit=!0;let t=V(V(e,&quot;workspace&quot;),&quot;workspaceEdit&quot;);t.documentChanges=!0,t.resourceOperations=[y.ResourceOperationKind.Create,y.ResourceOperationKind.Rename,y.ResourceOperationKind.Delete],t.failureHandling=y.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=V(V(e,&quot;textDocument&quot;),&quot;publishDiagnostics&quot;);r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[y.DiagnosticTag.Unnecessary,y.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=V(e,&quot;window&quot;),o=V(i,&quot;showMessage&quot;);o.messageActionItem={additionalPropertiesSupport:!0};let s=V(i,&quot;showDocument&quot;);s.support=!0;let a=V(e,&quot;general&quot;);a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ar.RequestsToCancelOnContentModified)},a.regularExpressions={engine:&quot;ECMAScript&quot;,version:&quot;ES2020&quot;},a.markdown={parser:&quot;marked&quot;,version:&quot;1.1.0&quot;},this._clientOptions.markdown.supportHtml&amp;&amp;(a.markdown.allowedTags=[&quot;ul&quot;,&quot;li&quot;,&quot;p&quot;,&quot;code&quot;,&quot;blockquote&quot;,&quot;ol&quot;,&quot;h1&quot;,&quot;h2&quot;,&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;hr&quot;,&quot;em&quot;,&quot;pre&quot;,&quot;table&quot;,&quot;thead&quot;,&quot;tbody&quot;,&quot;tr&quot;,&quot;th&quot;,&quot;td&quot;,&quot;div&quot;,&quot;del&quot;,&quot;a&quot;,&quot;strong&quot;,&quot;br&quot;,&quot;img&quot;,&quot;span&quot;]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(o===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let s=i.registerOptions??{};s.documentSelector=s.documentSelector??this._clientOptions.documentSelector;let a={id:i.id,registerOptions:s};try{o.register(a)}catch(u){r(u);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,r=new Map;K.workspace.textDocuments.forEach(o=&gt;r.set(o.uri.toString(),o));let i=!1;if(t.documentChanges){for(let o of t.documentChanges)if(y.TextDocumentEdit.is(o)&amp;&amp;o.textDocument.version&amp;&amp;o.textDocument.version&gt;=0){let s=r.get(o.textDocument.uri);if(s&amp;&amp;s.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):De.asPromise(K.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=&gt;({applied:o})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof y.ResponseError){if(r.code===y.LSPErrorCodes.RequestCancelled||r.code===y.LSPErrorCodes.ServerCancelled){if(t!==void 0&amp;&amp;t.isCancellationRequested)return i;throw r.data!==void 0?new co(r.data):new K.CancellationError}else if(r.code===y.LSPErrorCodes.ContentModified){if(ar.RequestsToCancelOnContentModified.has(e.method))throw new K.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};ye.BaseLanguageClient=ar;ar.RequestsToCancelOnContentModified=new Set([y.SemanticTokensRequest.method,y.SemanticTokensRangeRequest.method,y.SemanticTokensDeltaRequest.method])});var Ph=q(lo=&gt;{&quot;use strict&quot;;Object.defineProperty(lo,&quot;__esModule&quot;,{value:!0});lo.ColorProviderFeature=void 0;var uo=require(&quot;vscode&quot;),mi=Ce(),Ec=it();function Th(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kc=class extends Ec.TextDocumentFeature{constructor(e){super(e,mi.DocumentColorRequest.type)}fillClientCapabilities(e){Th(Th(e,&quot;textDocument&quot;),&quot;colorProvider&quot;).dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=&gt;{let a=this._client,u=(g,p,C)=&gt;{let R={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p.document),range:a.code2ProtocolConverter.asRange(p.range)};return a.sendRequest(mi.ColorPresentationRequest.type,R,C).then(this.asColorPresentations.bind(this),E=&gt;a.handleFailedRequest(mi.ColorPresentationRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,o,s,u):u(i,o,s)},provideDocumentColors:(i,o)=&gt;{if(Ec.$DocumentSelector.skipCellTextDocument(t,i))return;let s=this._client,a=(h,g)=&gt;{let p={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(h)};return s.sendRequest(mi.DocumentColorRequest.type,p,g).then(this.asColorInformations.bind(this),C=&gt;s.handleFailedRequest(mi.ColorPresentationRequest.type,g,C,null))},u=s.clientOptions.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,o,a):a(i,o)}};return[uo.languages.registerColorProvider(Ec.$DocumentSelector.asTextDocumentFilters(t),r),r]}asColor(e){return new uo.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=&gt;new uo.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=&gt;{let r=new uo.ColorPresentation(t.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),r}):[]}};lo.ColorProviderFeature=kc});var Eh=q(fo=&gt;{&quot;use strict&quot;;Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0});fo.ImplementationFeature=void 0;var gD=require(&quot;vscode&quot;),Oc=Ce(),xc=it();function qh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Nc=class extends xc.TextDocumentFeature{constructor(e){super(e,Oc.ImplementationRequest.type)}fillClientCapabilities(e){let t=qh(qh(e,&quot;textDocument&quot;),&quot;implementation&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=&gt;{if(xc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Oc.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Oc.ImplementationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideImplementation?h.provideImplementation(i,o,s,u):u(i,o,s)}};return[gD.languages.registerImplementationProvider(xc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};fo.ImplementationFeature=Nc});var kh=q(po=&gt;{&quot;use strict&quot;;Object.defineProperty(po,&quot;__esModule&quot;,{value:!0});po.TypeDefinitionFeature=void 0;var mD=require(&quot;vscode&quot;),Ic=Ce(),Fc=it();function ho(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Lc=class extends Fc.TextDocumentFeature{constructor(e){super(e,Ic.TypeDefinitionRequest.type)}fillClientCapabilities(e){ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;).dynamicRegistration=!0;let t=ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=&gt;{if(Fc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Ic.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Ic.TypeDefinitionRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,o,s,u):u(i,o,s)}};return[mD.languages.registerTypeDefinitionProvider(Fc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};po.TypeDefinitionFeature=Lc});var Oh=q(xr=&gt;{&quot;use strict&quot;;Object.defineProperty(xr,&quot;__esModule&quot;,{value:!0});xr.WorkspaceFoldersFeature=xr.arrayDiff=void 0;var vD=Or(),go=require(&quot;vscode&quot;),vi=Ce();function Ac(n,e){if(n!==void 0)return n[e]}function Mc(n,e){return n.filter(t=&gt;e.indexOf(t)&lt;0)}xr.arrayDiff=Mc;var jc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return vi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=go.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=&gt;this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(vi.WorkspaceFoldersRequest.type,o=&gt;{let s=()=&gt;{let u=go.workspace.workspaceFolders;return u===void 0?null:u.map(g=&gt;this.asProtocol(g))},a=t.clientOptions.middleware.workspace;return a&amp;&amp;a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Ac(Ac(Ac(e,&quot;workspace&quot;),&quot;workspaceFolders&quot;),&quot;changeNotifications&quot;),i;typeof r==&quot;string&quot;?i=r:r===!0&amp;&amp;(i=vD.generateUuid()),i&amp;&amp;this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&amp;&amp;e){let r=Mc(this._initialFolders,e),i=Mc(e,this._initialFolders);(i.length&gt;0||r.length&gt;0)&amp;&amp;(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&amp;&amp;(t=this.doSendEvent(e,[]));t!==void 0&amp;&amp;t.catch(r=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=&gt;this.asProtocol(i)),removed:t.map(i=&gt;this.asProtocol(i))}};return this._client.sendNotification(vi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=go.workspace.onDidChangeWorkspaceFolders(o=&gt;{let s=h=&gt;this.doSendEvent(h.added,h.removed),a=r.clientOptions.middleware.workspace;(a&amp;&amp;a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(h=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(go.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&amp;&amp;(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};xr.WorkspaceFoldersFeature=jc});var Nh=q(mo=&gt;{&quot;use strict&quot;;Object.defineProperty(mo,&quot;__esModule&quot;,{value:!0});mo.FoldingRangeFeature=void 0;var yi=require(&quot;vscode&quot;),Nr=Ce(),$c=it();function xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Ir=class extends $c.TextDocumentFeature{constructor(e){super(e,Nr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=xh(xh(e,&quot;textDocument&quot;),&quot;foldingRange&quot;);t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=&gt;{if($c.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g)};return a.sendRequest(Nr.FoldingRangeRequest.type,R,C).then(Ir.asFoldingRanges,E=&gt;a.handleFailedRequest(Nr.FoldingRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,o,s,u):u(i,o,s)}};return[yi.languages.registerFoldingRangeProvider($c.$DocumentSelector.asTextDocumentFilters(t),r),r]}static asFoldingRangeKind(e){if(e)switch(e){case Nr.FoldingRangeKind.Comment:return yi.FoldingRangeKind.Comment;case Nr.FoldingRangeKind.Imports:return yi.FoldingRangeKind.Imports;case Nr.FoldingRangeKind.Region:return yi.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=&gt;new yi.FoldingRange(t.startLine,t.endLine,Ir.asFoldingRangeKind(t.kind))):[]}};mo.FoldingRangeFeature=Ir});var Fh=q(vo=&gt;{&quot;use strict&quot;;Object.defineProperty(vo,&quot;__esModule&quot;,{value:!0});vo.DeclarationFeature=void 0;var yD=require(&quot;vscode&quot;),Hc=Ce(),Wc=it();function Ih(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Kc=class extends Wc.TextDocumentFeature{constructor(e){super(e,Hc.DeclarationRequest.type)}fillClientCapabilities(e){let t=Ih(Ih(e,&quot;textDocument&quot;),&quot;declaration&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=&gt;{if(Wc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Hc.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDeclarationResult,R=&gt;a.handleFailedRequest(Hc.DeclarationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDeclaration?h.provideDeclaration(i,o,s,u):u(i,o,s)}};return[yD.languages.registerDeclarationProvider(Wc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};vo.DeclarationFeature=Kc});var Ah=q(yo=&gt;{&quot;use strict&quot;;Object.defineProperty(yo,&quot;__esModule&quot;,{value:!0});yo.SelectionRangeFeature=void 0;var CD=require(&quot;vscode&quot;),Uc=Ce(),zc=it();function Lh(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Vc=class extends zc.TextDocumentFeature{constructor(e){super(e,Uc.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Lh(Lh(e,&quot;textDocument&quot;),&quot;selectionRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=&gt;{if(zc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositions(p)};return a.sendRequest(Uc.SelectionRangeRequest.type,R,C).then(E=&gt;a.protocol2CodeConverter.asSelectionRanges(E),E=&gt;a.handleFailedRequest(Uc.SelectionRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,o,s,u):u(i,o,s)}};return[CD.languages.registerSelectionRangeProvider(zc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};yo.SelectionRangeFeature=Vc});var Mh=q(Co=&gt;{&quot;use strict&quot;;Object.defineProperty(Co,&quot;__esModule&quot;,{value:!0});Co.ProgressFeature=void 0;var RD=Ce(),DD=ec();function SD(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Gc=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){SD(e,&quot;window&quot;).workDoneProgress=!0}initialize(){let e=this._client,t=i=&gt;{this.activeParts.delete(i)},r=i=&gt;{this.activeParts.add(new DD.ProgressPart(this._client,i.token,t))};e.onRequest(RD.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Co.ProgressFeature=Gc});var $h=q(Ro=&gt;{&quot;use strict&quot;;Object.defineProperty(Ro,&quot;__esModule&quot;,{value:!0});Ro.CallHierarchyFeature=void 0;var wD=require(&quot;vscode&quot;),cr=Ce(),Bc=it();function jh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Xc=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{if(Bc.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,a))return;let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(cr.CallHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asCallHierarchyItems(p),p=&gt;i.handleFailedRequest(cr.CallHierarchyPrepareRequest.type,h,p,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},Jc=class extends Bc.TextDocumentFeature{constructor(e){super(e,cr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=jh(jh(e,&quot;textDocument&quot;),&quot;callHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Xc(t,e);return[wD.languages.registerCallHierarchyProvider(Bc.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};Ro.CallHierarchyFeature=Jc});var Hh=q(bo=&gt;{&quot;use strict&quot;;Object.defineProperty(bo,&quot;__esModule&quot;,{value:!0});bo.SemanticTokensFeature=void 0;var Do=require(&quot;vscode&quot;),ee=Ce(),So=it(),bD=yn();function wo(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Qc=class extends So.TextDocumentFeature{constructor(e){super(e,ee.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=wo(wo(e,&quot;textDocument&quot;),&quot;semanticTokens&quot;);t.dynamicRegistration=!0,t.tokenTypes=[ee.SemanticTokenTypes.namespace,ee.SemanticTokenTypes.type,ee.SemanticTokenTypes.class,ee.SemanticTokenTypes.enum,ee.SemanticTokenTypes.interface,ee.SemanticTokenTypes.struct,ee.SemanticTokenTypes.typeParameter,ee.SemanticTokenTypes.parameter,ee.SemanticTokenTypes.variable,ee.SemanticTokenTypes.property,ee.SemanticTokenTypes.enumMember,ee.SemanticTokenTypes.event,ee.SemanticTokenTypes.function,ee.SemanticTokenTypes.method,ee.SemanticTokenTypes.macro,ee.SemanticTokenTypes.keyword,ee.SemanticTokenTypes.modifier,ee.SemanticTokenTypes.comment,ee.SemanticTokenTypes.string,ee.SemanticTokenTypes.number,ee.SemanticTokenTypes.regexp,ee.SemanticTokenTypes.operator,ee.SemanticTokenTypes.decorator],t.tokenModifiers=[ee.SemanticTokenModifiers.declaration,ee.SemanticTokenModifiers.definition,ee.SemanticTokenModifiers.readonly,ee.SemanticTokenModifiers.static,ee.SemanticTokenModifiers.deprecated,ee.SemanticTokenModifiers.abstract,ee.SemanticTokenModifiers.async,ee.SemanticTokenModifiers.modification,ee.SemanticTokenModifiers.documentation,ee.SemanticTokenModifiers.defaultLibrary],t.formats=[ee.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,wo(wo(e,&quot;workspace&quot;),&quot;semanticTokens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(ee.SemanticTokensRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=bD.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&amp;&amp;typeof e.full!=&quot;boolean&quot;&amp;&amp;e.full.delta===!0,o=new Do.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(R,E)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let I=this._client,F=I.clientOptions.middleware,A=(N,L)=&gt;{let j={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(N)};return I.sendRequest(ee.SemanticTokensRequest.type,j,L).then(X=&gt;I.protocol2CodeConverter.asSemanticTokens(X),X=&gt;I.handleFailedRequest(ee.SemanticTokensRequest.type,L,X,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(R,E,A):A(R,E)},provideDocumentSemanticTokensEdits:i?(R,E,I)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),previousResultId:j};return F.sendRequest(ee.SemanticTokensDeltaRequest.type,Re,X).then(ne=&gt;ee.SemanticTokens.is(ne)?F.protocol2CodeConverter.asSemanticTokens(ne):F.protocol2CodeConverter.asSemanticTokensEdits(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensDeltaRequest.type,X,ne,null))};return A.provideDocumentSemanticTokensEdits?A.provideDocumentSemanticTokensEdits(R,E,I,N):N(R,E,I)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(R,E,I)=&gt;{let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),range:F.code2ProtocolConverter.asRange(j)};return F.sendRequest(ee.SemanticTokensRangeRequest.type,Re,X).then(ne=&gt;F.protocol2CodeConverter.asSemanticTokens(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensRangeRequest.type,X,ne,null))};return A.provideDocumentRangeSemanticTokens?A.provideDocumentRangeSemanticTokens(R,E,I,N):N(R,E,I)}}:void 0,h=[],p=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend),C=So.$DocumentSelector.asTextDocumentFilters(t);return s!==void 0&amp;&amp;h.push(Do.languages.registerDocumentSemanticTokensProvider(C,s,p)),u!==void 0&amp;&amp;h.push(Do.languages.registerDocumentRangeSemanticTokensProvider(C,u,p)),[new Do.Disposable(()=&gt;h.forEach(R=&gt;R.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}};bo.SemanticTokensFeature=Qc});var Uh=q(St=&gt;{&quot;use strict&quot;;Object.defineProperty(St,&quot;__esModule&quot;,{value:!0});St.WillDeleteFilesFeature=St.WillRenameFilesFeature=St.WillCreateFilesFeature=St.DidDeleteFilesFeature=St.DidRenameFilesFeature=St.DidCreateFilesFeature=void 0;var Wt=require(&quot;vscode&quot;),_D=Mi(),wn=Ce(),TD=Or();function Wh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}function PD(n,e){return n[e]}function Kh(n,e,t){n[e]=t}var bn=class{constructor(e,t,r,i,o){this._filters=new Map,this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Wh(Wh(e,&quot;workspace&quot;),&quot;fileOperations&quot;);Kh(t,&quot;dynamicRegistration&quot;,!0),Kh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?PD(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:TD.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=&gt;{let i=new _D.Minimatch(r.pattern.glob,bn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}getFileType(e){return bn.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=&gt;{let s=t(o),a=s.fsPath.replace(/\\/g,&quot;/&quot;);for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&amp;&amp;h.scheme!==s.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let g=await this.getFileType(s);if(g===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(g===Wt.FileType.File&amp;&amp;h.kind===wn.FileOperationPatternKind.file||g===Wt.FileType.Directory&amp;&amp;h.kind===wn.FileOperationPatternKind.folder)return!0}else if(h.kind===wn.FileOperationPatternKind.folder&amp;&amp;await bn.getFileType(s)===Wt.FileType.Directory&amp;&amp;h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=&gt;r[s]);return{...e,files:i}}static async getFileType(e){try{return(await Wt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&amp;&amp;e.ignoreCase===!0)return{nocase:!0}}},_o=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=&gt;this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},To=class extends _o{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await bn.getFileType(e);return r&amp;&amp;this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&amp;&amp;this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}},Yc=class extends _o{constructor(e){super(e,Wt.workspace.onDidCreateFiles,wn.DidCreateFilesNotification.type,&quot;didCreate&quot;,&quot;didCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};St.DidCreateFilesFeature=Yc;var Zc=class extends To{constructor(e){super(e,Wt.workspace.onDidRenameFiles,wn.DidRenameFilesNotification.type,&quot;didRename&quot;,&quot;didRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};St.DidRenameFilesFeature=Zc;var eu=class extends To{constructor(e){super(e,Wt.workspace.onDidDeleteFiles,wn.DidDeleteFilesNotification.type,&quot;didDelete&quot;,&quot;didDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};St.DidDeleteFilesFeature=eu;var Ci=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=&gt;this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},tu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillCreateFiles,wn.WillCreateFilesRequest.type,&quot;willCreate&quot;,&quot;willCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};St.WillCreateFilesFeature=tu;var nu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillRenameFiles,wn.WillRenameFilesRequest.type,&quot;willRename&quot;,&quot;willRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};St.WillRenameFilesFeature=nu;var ru=class extends Ci{constructor(e){super(e,Wt.workspace.onWillDeleteFiles,wn.WillDeleteFilesRequest.type,&quot;willDelete&quot;,&quot;willDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};St.WillDeleteFilesFeature=ru});var Vh=q(Po=&gt;{&quot;use strict&quot;;Object.defineProperty(Po,&quot;__esModule&quot;,{value:!0});Po.LinkedEditingFeature=void 0;var qD=require(&quot;vscode&quot;),iu=Ce(),ou=it();function zh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var su=class extends ou.TextDocumentFeature{constructor(e){super(e,iu.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=zh(zh(e,&quot;textDocument&quot;),&quot;linkedEditingRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=&gt;{if(ou.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(iu.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asLinkedEditingRanges,R=&gt;a.handleFailedRequest(iu.LinkedEditingRangeRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,o,s,u):u(i,o,s)}};return[qD.languages.registerLinkedEditingRangeProvider(ou.$DocumentSelector.asTextDocumentFilters(t),r),r]}};Po.LinkedEditingFeature=su});var Bh=q(ur=&gt;{&quot;use strict&quot;;Object.defineProperty(ur,&quot;__esModule&quot;,{value:!0});ur.DiagnosticFeature=ur.vsdiag=void 0;var He=require(&quot;vscode&quot;),$e=Ce(),ED=Or(),Fr=it();function Gh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var un;(function(n){let e;(function(t){t.full=&quot;full&quot;,t.unChanged=&quot;unChanged&quot;})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(un=ur.vsdiag||(ur.vsdiag={}));var ft;(function(n){n.active=&quot;open&quot;,n.reschedule=&quot;reschedule&quot;,n.outDated=&quot;drop&quot;})(ft||(ft={}));var au=class{constructor(){this.open=new Set;let e=()=&gt;{if(this.open.clear(),He.window.tabs!==void 0)for(let t of He.window.tabs)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString());else if(He.window.openEditors!==void 0)for(let t of He.window.openEditors)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString())};e(),He.window.onDidChangeTabs!==void 0?this.disposable=He.window.onDidChangeTabs(e):He.window.onDidChangeOpenEditors!==void 0?this.disposable=He.window.onDidChangeOpenEditors(e):this.disposable={dispose:()=&gt;{}}}dispose(){this.disposable.dispose()}isActive(e){return He.window.activeTextEditor?.document===e}isVisible(e){return this.open.has(e.uri.toString())}},Et;(function(n){n[n.document=1]=&quot;document&quot;,n[n.workspace=2]=&quot;workspace&quot;})(Et||(Et={}));var cu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===Et.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r]:[t.uri.toString(),t.uri,t.version],u=i.get(o);return u===void 0&amp;&amp;(u={document:s,pulledVersion:a,resultId:void 0},i.set(o,u)),u}update(e,t,r,i){let o=e===Et.document?this.documentPullStates:this.workspacePullStates,[s,a,u,h]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r,i]:[t.uri.toString(),t.uri,t.version,r],g=o.get(s);g===void 0?(g={document:a,pulledVersion:u,resultId:h},o.set(s,g)):(g.pulledVersion=u,g.resultId=h)}unTrack(e,t){(e===Et.document?this.documentPullStates:this.workspacePullStates).delete(t.uri.toString())}tracks(e,t){let r=typeof t==&quot;string&quot;?t:t.uri.toString();return(e===Et.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){return(e===Et.document?this.documentPullStates:this.workspacePullStates).get(t.uri.toString())?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&amp;&amp;(r=this.documentPullStates.get(t)),r.resultId!==void 0&amp;&amp;e.push({uri:t,value:r.resultId});return e}},uu=class{constructor(e,t,r){this.client=e,this.editorTracker=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new He.EventEmitter,this.provider=this.createProvider(),this.diagnostics=He.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new cu,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){this.pullAsync(e).then(()=&gt;{t&amp;&amp;t()},r=&gt;{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,r,!1)})}async pullAsync(e){let t=e.uri.toString(),r=e.version,i=this.openRequests.get(t),o=this.documentStates.track(Et.document,e);if(i===void 0){let s=new He.CancellationTokenSource;this.openRequests.set(t,{state:ft.active,version:r,textDocument:e,tokenSource:s});let a,u;try{a=await this.provider.provideDiagnostics(e,o.resultId,s.token)??{kind:un.DocumentDiagnosticReportKind.full,items:[]}}catch(h){if(h instanceof Fr.LSPCancellationError&amp;&amp;$e.Proposed.DiagnosticServerCancellationData.is(h.data)&amp;&amp;h.data.retriggerRequest===!1&amp;&amp;(u={state:ft.outDated,textDocument:e}),u===void 0&amp;&amp;h instanceof He.CancellationError)u={state:ft.reschedule,textDocument:e};else throw h}if(u=u??this.openRequests.get(t),u===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${t}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(t),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(Et.document,e);return}if(u.state===ft.outDated)return;a!==void 0&amp;&amp;(a.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;this.diagnostics.set(e.uri,a.items),o.pulledVersion=r,o.resultId=a.resultId),u.state===ft.reschedule&amp;&amp;this.pull(e)}else i.state===ft.active?(i.tokenSource.cancel(),this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})):i.state===ft.outDated&amp;&amp;this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})}cleanupPull(e){let t=e.uri.toString(),r=this.openRequests.get(t);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(t,{state:ft.reschedule,textDocument:e}):this.pull(e):(r!==void 0&amp;&amp;(r.state===ft.active&amp;&amp;r.tokenSource.cancel(),this.openRequests.set(t,{state:ft.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=&gt;{this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3)},e=&gt;{!(e instanceof Fr.LSPCancellationError)&amp;&amp;!$e.Proposed.DiagnosticServerCancellationData.is(e.data)&amp;&amp;(this.client.error(&quot;Workspace diagnostic pull failed.&quot;,e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter&lt;=5&amp;&amp;(this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&amp;&amp;(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new He.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=&gt;({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=&gt;{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;(this.documentStates.tracks(Et.document,r.uri.toString())||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(Et.workspace,r.uri.toString(),r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=&gt;{let o=(a,u,h)=&gt;{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a.uri)},previousResultId:u};return this.client.sendRequest($e.Proposed.DocumentDiagnosticRequest.type,g,h).then(p=&gt;p==null||this.isDisposed?{kind:un.DocumentDiagnosticReportKind.full,items:[]}:p.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,resultId:p.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(p.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,resultId:p.resultId},p=&gt;this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,h,p,{kind:un.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.clientOptions.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&amp;&amp;(e.provideWorkspaceDiagnostics=(t,r,i)=&gt;{let o=h=&gt;h.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:this.client.protocol2CodeConverter.asDiagnostics(h.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},s=h=&gt;{let g=[];for(let p of h)g.push({uri:this.client.code2ProtocolConverter.asUri(p.uri),value:p.value});return g},a=(h,g)=&gt;{let p=(0,ED.generateUuid)(),C=this.client.onProgress($e.Proposed.WorkspaceDiagnosticRequest.partialResult,p,E=&gt;{if(E==null){i(null);return}let I={items:[]};for(let F of E.items)I.items.push(o(F));i(I)}),R={identifier:this.options.identifier,previousResultIds:s(h),partialResultToken:p};return this.client.sendRequest($e.Proposed.WorkspaceDiagnosticRequest.type,R,g).then(E=&gt;{let I={items:[]};for(let F of E.items)I.items.push(o(F));return C.dispose(),i(I),{items:[]}},E=&gt;(C.dispose(),this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,g,E,{items:[]})))},u=this.client.clientOptions.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===ft.active&amp;&amp;t.tokenSource.cancel(),this.openRequests.set(e,{state:ft.outDated,textDocument:t.textDocument})}},lu=class{constructor(e){this.diagnosticRequestor=e,this.documents=new $e.LinkedMap}add(e){let t=e.uri.toString();this.documents.has(t)||(this.documents.set(e.uri.toString(),e,$e.Touch.Last),this.trigger())}remove(e){let t=e.uri.toString();this.documents.has(t)&amp;&amp;(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&amp;&amp;(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,$e.RAL)().timer.setInterval(()=&gt;{let e=this.documents.first;e!==void 0&amp;&amp;(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,$e.Touch.Last),e===this.endDocument&amp;&amp;this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},du=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=r.documentSelector,s=[],a=p=&gt;Fr.$DocumentSelector.matchForProvider(o,p)&amp;&amp;t.isVisible(p);this.diagnosticRequestor=new uu(e,t,r),this.backgroundScheduler=new lu(this.diagnosticRequestor);let u=p=&gt;{!a(p)||!r.interFileDependencies||this.activeTextDocument===p||this.backgroundScheduler.add(p)};this.activeTextDocument=He.window.activeTextEditor?.document,He.window.onDidChangeActiveTextEditor(p=&gt;{let C=this.activeTextDocument;this.activeTextDocument=p?.document,C!==void 0&amp;&amp;u(C),this.activeTextDocument!==void 0&amp;&amp;this.backgroundScheduler.remove(this.activeTextDocument)});let h=e.getFeature($e.DidOpenTextDocumentNotification.method);s.push(h.onNotificationSent(p=&gt;{let C=p.original;a(C)&amp;&amp;this.diagnosticRequestor.pull(C,()=&gt;{u(C)})}));for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p,()=&gt;{u(p)});if(i.onChange){let p=e.getFeature($e.DidChangeTextDocumentNotification.method);s.push(p.onNotificationSent(async C=&gt;{let R=C.original.document;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onType))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;C.original.contentChanges.length&gt;0&amp;&amp;this.diagnosticRequestor.pull(R,()=&gt;{this.backgroundScheduler.trigger()})}))}if(i.onSave){let p=e.getFeature($e.DidSaveTextDocumentNotification.method);s.push(p.onNotificationSent(C=&gt;{let R=C.original;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onSave))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;this.diagnosticRequestor.pull(C.original,()=&gt;{this.backgroundScheduler.trigger()})}))}let g=e.getFeature($e.DidCloseTextDocumentNotification.method);s.push(g.onNotificationSent(p=&gt;{let C=p.original;this.diagnosticRequestor.cleanupPull(C),this.backgroundScheduler.remove(C)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=&gt;{for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p)}),r.workspaceDiagnostics===!0&amp;&amp;r.identifier!==&quot;da348dc5-c30a-4515-9d98-31ff3be38d14&quot;&amp;&amp;this.diagnosticRequestor.pullWorkspace(),this.disposable=He.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},fu=class extends Fr.TextDocumentFeature{constructor(e){super(e,$e.Proposed.DocumentDiagnosticRequest.type),this.editorTracker=new au}fillClientCapabilities(e){let t=Gh(Gh(e,&quot;textDocument&quot;),&quot;diagnostic&quot;);t.dynamicRegistration=!0,t.relatedDocumentSupport=!1}initialize(e,t){this._client.onRequest($e.Proposed.DiagnosticRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let t=new du(this._client,this.editorTracker,e);return[t.disposable,t]}};ur.DiagnosticFeature=fu});var Jh=q(qo=&gt;{&quot;use strict&quot;;Object.defineProperty(qo,&quot;__esModule&quot;,{value:!0});qo.TypeHierarchyFeature=void 0;var kD=require(&quot;vscode&quot;),lr=Ce(),hu=it();function Xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var pu=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareTypeHierarchy(e,t,r){if(hu.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,e))return;let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asTypeHierarchyItems(p),p=&gt;i.handleFailedRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,h,p,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},gu=class extends hu.TextDocumentFeature{constructor(e){super(e,lr.Proposed.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=Xh(Xh(e,&quot;textDocument&quot;),&quot;typeHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new pu(t,e);return[kD.languages.registerTypeHierarchyProvider(hu.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};qo.TypeHierarchyFeature=gu});var Yh=q(Oo=&gt;{&quot;use strict&quot;;Object.defineProperty(Oo,&quot;__esModule&quot;,{value:!0});Oo.InlineValueFeature=void 0;var Qh=require(&quot;vscode&quot;),Eo=Ce(),mu=it();function ko(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var vu=class extends mu.TextDocumentFeature{constructor(e){super(e,Eo.Proposed.InlineValuesRequest.type)}fillClientCapabilities(e){ko(ko(e,&quot;textDocument&quot;),&quot;inlineValues&quot;).dynamicRegistration=!0,ko(ko(e,&quot;workspace&quot;),&quot;codeLens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(Eo.Proposed.InlineValuesRefreshRequest.type,async()=&gt;{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValuesProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Qh.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,u)=&gt;{if(mu.$DocumentSelector.skipCellTextDocument(t,o))return;let h=this._client,g=(C,R,E,I)=&gt;{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(C),viewPort:h.code2ProtocolConverter.asRange(R),context:h.code2ProtocolConverter.asInlineValuesContext(E)};return h.sendRequest(Eo.Proposed.InlineValuesRequest.type,F,I).then(A=&gt;h.protocol2CodeConverter.asInlineValues(A),A=&gt;h.handleFailedRequest(Eo.Proposed.InlineValuesRequest.type,I,A,null))},p=h.clientOptions.middleware;return p.provideInlineValues?p.provideInlineValues(o,s,a,u,g):g(o,s,a,u)}};return[Qh.languages.registerInlineValuesProvider(mu.$DocumentSelector.asTextDocumentFilters(t),i),{provider:i,onDidChangeInlineValues:r}]}};Oo.InlineValueFeature=vu});var tp=q(Lo=&gt;{&quot;use strict&quot;;Object.defineProperty(Lo,&quot;__esModule&quot;,{value:!0});Lo.NotebookDocumentSyncFeature=void 0;var ht=require(&quot;vscode&quot;),OD=Mi(),Kt=Ce(),ln=Ce(),yu=it(),xo=Or(),Zh=yn();function ep(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kt;(function(n){let e;(function(t){function r(p,C){return{version:p.version,uri:C.asUri(p.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(p,C,R){let E=Kt.Proposed.NotebookDocument.create(R.asUri(p.uri),p.notebookType,p.version,o(C,R));return Object.keys(p.metadata).length&gt;0&amp;&amp;(E.metadata=s(p.metadata)),E}t.asNotebookDocument=i;function o(p,C){return p.map(R=&gt;a(R,C))}t.asNotebookCells=o;function s(p){return h(new Set,p)}t.asMetadata=s;function a(p,C){let R=Kt.Proposed.NotebookCell.create(u(p.kind),C.asUri(p.document.uri));return Object.keys(p.metadata).length&gt;0&amp;&amp;(R.metadata=s(p.metadata)),p.executionSummary!==void 0&amp;&amp;Zh.number(p.executionSummary.executionOrder)&amp;&amp;Zh.boolean(p.executionSummary.success)&amp;&amp;(R.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),R}t.asNotebookCell=a;function u(p){switch(p){case ht.NotebookCellKind.Markup:return Kt.Proposed.NotebookCellKind.Markup;case ht.NotebookCellKind.Code:return Kt.Proposed.NotebookCellKind.Code}}function h(p,C){if(p.has(C))throw new Error(&quot;Can't deep copy cyclic structures.&quot;);if(Array.isArray(C)){let R=[];for(let E of C)if(E!==null&amp;&amp;typeof E==&quot;object&quot;||Array.isArray(E))R.push(h(p,E));else{if(E instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);R.push(E)}return R}else{let R=Object.keys(C),E=Object.create(null);for(let I of R){let F=C[I];if(F!==null&amp;&amp;typeof F==&quot;object&quot;||Array.isArray(F))E[I]=h(p,F);else{if(F instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);E[I]=F}}return E}}function g(p,C){let R=C.asChangeTextDocumentParams(p);return{document:R.textDocument,changes:R.contentChanges}}t.asTextContentChange=g})(e=n.c2p||(n.c2p={}))})(kt||(kt={}));var Cu;(function(n){function e(t,r,i){let o=t.length,s=r.length,a=0;for(;a&lt;s&amp;&amp;a&lt;o&amp;&amp;Kt.Proposed.NotebookCell.equals(t[a],r[a],i);)a++;if(a&lt;s&amp;&amp;a&lt;o){let u=o-1,h=s-1;for(;u&gt;=0&amp;&amp;h&gt;=0&amp;&amp;Kt.Proposed.NotebookCell.equals(t[u],r[h],i);)u--,h--;let g=u+1-a,p=a===h+1?void 0:r.slice(a,h+1);return p!==void 0?{start:a,deleteCount:g,cells:p}:{start:a,deleteCount:g}}else return a&lt;s?{start:a,deleteCount:0,cells:r.slice(a)}:a&lt;o?{start:a,deleteCount:o-a}:void 0}n.computeDiff=e})(Cu||(Cu={}));var No;(function(n){function e(t,r){if(t.notebookType!==void 0&amp;&amp;r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&amp;&amp;i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new OD.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(No||(No={}));var Io;(function(n){function e(t,r,i){if(i===&quot;cellContent&quot;&amp;&amp;!yu.$DocumentSelector.matchForDocumentSync(t.cellDocumentSelector,r.document)||i===&quot;notebook&quot;&amp;&amp;!yu.$DocumentSelector.matchForProvider(t.cellDocumentSelector,r.document))return!1;let o=r.notebook;for(let s of t.notebookDocumentSelector)if(s.notebookDocumentFilter!==void 0&amp;&amp;No.matchNotebook(s.notebookDocumentFilter,o))return!0;return!1}n.match=e})(Io||(Io={}));var Fo;(function(n){function e(t,r){return{cells:t,uris:new Set(r.map(i=&gt;i.document.uri.toString()))}}n.create=e})(Fo||(Fo={}));var Ri=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.cellExecutionState=new Map,this.notebookDidOpen=new Set,this.disposables=[],ht.workspace.onDidOpenNotebookDocument(r=&gt;{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ht.notebooks.onDidChangeNotebookDocumentMetadata(r=&gt;this.notebookDocumentMetadataChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCells(r=&gt;this.cellStructureChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeCellMetadata(r=&gt;this.cellMetaDataChanged(r.cell.notebook,r.cell),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCellExecutionState(r=&gt;this.cellExecutionStateChanged(r),void 0,this.disposables),this.options.save===!0&amp;&amp;ht.notebooks.onDidSaveNotebookDocument(r=&gt;this.didSave(r),void 0,this.disposables),ht.workspace.onDidCloseNotebookDocument(r=&gt;{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}get mode(){return&quot;notebook&quot;}handles(e){return Io.match(this.options,e,this.mode)}didOpenNotebookCellDocument(e,t){if(!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.getMatchingCells(e,[t]),o=i!==void 0&amp;&amp;i[0]===t;if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(o&amp;&amp;s)return;this.cellStructureChanged(e,r)}else{if(!o)return;this.cellStructureChanged(e,r)}}didChangeCellTextDocument(e,t){!yu.$DocumentSelector.matchForProvider(this.options.cellDocumentSelector,t.document)||this.doSendChange(e,{cells:{textContent:[kt.c2p.asTextContentChange(t,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=null,r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)this.cellStructureChanged(e,r);else{let i=t??this.getMatchingCells(e);if(i===void 0)return;this.doSendOpen(e,i,o=&gt;{this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o.cells,i))}).catch(()=&gt;{})}}notebookDocumentMetadataChanged(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendChange(e,{metadata:kt.c2p.asMetadata(e.metadata)}).catch(()=&gt;{})}cellStructureChanged(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0){let r=this.getMatchingCells(e);if(r===void 0)return;this.didOpen(e,r,t)}else{let r=this.getMatchingCells(e);if(r===void 0){this.didClose(e,t);return}let i=t.cells,o=kt.c2p.asNotebookCells(r,this.client.code2ProtocolConverter),s=Cu.computeDiff(t.cells,o,!1);if(s===void 0)return;let a=s.deleteCount===0?new Set:new Set(i.slice(s.start,s.start+s.deleteCount).map(p=&gt;p.document)),u=s.cells===void 0?new Set:new Set(s.cells.map(p=&gt;p.document));for(let p of Array.from(a.values()))u.has(p)&amp;&amp;(a.delete(p),u.delete(p));let h=[],g=[];if(a.size&gt;0||u.size&gt;0){let p=new Map(r.map(C=&gt;[this.client.code2ProtocolConverter.asUri(C.document.uri),C]));for(let C of u.values()){let R=p.get(C);R!==void 0&amp;&amp;h.push(this.client.code2ProtocolConverter.asTextDocumentItem(R.document))}for(let C of a.values())g.push({uri:C})}this.doSendChange(e,{cells:{structure:{array:s,didClose:g.length&gt;0?g:void 0,didOpen:h.length&gt;0?h:void 0}}}).catch(()=&gt;{}),this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o,r))}}cellMetaDataChanged(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0||!r.uris.has(t.document.uri.toString()))return;let i=kt.c2p.asNotebookCell(t,this.client.code2ProtocolConverter);this.doSendChange(e,{cells:{data:[i]}}).catch(()=&gt;{})}cellExecutionStateChanged(e){if(e.state===ht.NotebookCellExecutionState.Pending)return;let t=e.cell.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0)return;let i=e.cell.document.uri.toString();!r.uris.has(i)||(e.state===ht.NotebookCellExecutionState.Executing&amp;&amp;this.cellExecutionState.set(e.cell.document.uri.toString(),e.state),e.state===ht.NotebookCellExecutionState.Idle&amp;&amp;this.cellExecutionState.has(i)&amp;&amp;(this.cellExecutionState.delete(i),this.doSendChange(t,{cells:{data:[kt.c2p.asNotebookCell(e.cell,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})))}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendSave(e).catch(()=&gt;{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=&gt;t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=&gt;{}),this.notebookSyncInfo.delete(e.uri.toString())}getMatchingCells(e,t=e.getCells()){if(this.options.notebookDocumentSelector!==void 0){for(let r of this.options.notebookDocumentSelector)if(r.notebookDocumentFilter===void 0){if(r.cellSelector===void 0)return;let i=this.filterCells(t,r.cellSelector);return i.length===0?void 0:i}else if(No.matchNotebook(r.notebookDocumentFilter,e))return r.cellSelector===void 0?t:this.filterCells(t,r.cellSelector)}}filterCells(e,t){return e.filter(r=&gt;{let i=r.document.languageId;return t.some(o=&gt;i===o.language)})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t,r){let i=(s,a)=&gt;{let u=kt.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),h=a.map(p=&gt;this.client.code2ProtocolConverter.asTextDocumentItem(p.document)),g=this.client.sendNotification(Kt.Proposed.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:h}).catch(p=&gt;{throw this.client.error(&quot;Sending DidOpenNotebookDocumentNotification failed&quot;,p),p});return r&amp;&amp;r(u),g},o=this.client.clientOptions.middleware?.notebooks;return o?.didOpen!==void 0?o.didOpen(e,t,i):i(e,t)}async sendDidChangeNotebookDocument(e,t){let r=Object.create(null);if(t.metadata&amp;&amp;(r.metadata=kt.c2p.asMetadata(e.metadata)),t.cells!==void 0){let i=Object.create(null),o=t.cells;o.structure&amp;&amp;(i.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:o.structure.array.cells!==void 0?o.structure.array.cells.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter)):void 0},didOpen:o.structure.didOpen!==void 0?o.structure.didOpen.map(s=&gt;this.client.code2ProtocolConverter.asOpenTextDocumentParams(s.document).textDocument):void 0,didClose:o.structure.didClose!==void 0?o.structure.didClose.map(s=&gt;this.client.code2ProtocolConverter.asCloseTextDocumentParams(s.document).textDocument):void 0}),o.data!==void 0&amp;&amp;(i.data=o.data.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter))),o.textContent!==void 0&amp;&amp;(i.textContent=o.textContent.map(s=&gt;kt.c2p.asTextContentChange(s,this.client.code2ProtocolConverter))),Object.keys(i).length&gt;0&amp;&amp;(r.cells=i)}if(Object.keys(r).length&gt;0)return this.doSendChange(e,r)}async doSendChange(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidChangeNotebookDocumentNotification.type,{notebookDocument:kt.c2p.asVersionedNotebookDocumentIdentifier(o,this.client.code2ProtocolConverter),change:s}).catch(a=&gt;{this.client.error(&quot;Sending DidChangeNotebookDocumentNotification failed&quot;,a)}),i=this.client.clientOptions.middleware?.notebooks;return i?.didChange!==void 0?i?.didChange(e,t,r):r(e,t)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=i=&gt;this.client.sendNotification(Kt.Proposed.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}}).catch(o=&gt;{throw this.client.error(&quot;Sending DidSaveNotebookDocumentNotification failed&quot;,o),o}),r=this.client.clientOptions.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidSelectNotebookController(e,t,r){let i=(s,a,u)=&gt;this.client.sendNotification(Kt.Proposed.DidSelectNotebookControllerNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},controller:a,selected:u}).catch(h=&gt;{throw this.client.error(&quot;Sending DidSelectNotebookControllerNotification failed&quot;,h),h}),o=this.client.clientOptions.middleware?.notebooks;return o?.didSelectNotebookController!==void 0?o.didSelectNotebookController(e,t,r,i):i(e,t,r)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=&gt;this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))}).catch(a=&gt;{throw this.client.error(&quot;Sending DidCloseNotebookDocumentNotification failed&quot;,a),a}),i=this.client.clientOptions.middleware?.notebooks;return i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}},Ru=class{constructor(e,t){if(this.client=e,this.options=t,t.cellDocumentSelector.length&gt;0){let r=xo.generateUuid();this.client.getFeature(ln.DidOpenTextDocumentNotification.method).register({id:r,registerOptions:{documentSelector:t.cellDocumentSelector}});let i=xo.generateUuid();this.client.getFeature(ln.DidChangeTextDocumentNotification.method).register({id:i,registerOptions:{documentSelector:t.cellDocumentSelector,syncKind:ln.TextDocumentSyncKind.Incremental}});let o=xo.generateUuid();this.client.getFeature(ln.DidCloseTextDocumentNotification.method).register({id:o,registerOptions:{documentSelector:t.cellDocumentSelector}}),this.registrations={open:r,change:i,close:o}}}get mode(){return&quot;cellContent&quot;}handles(e){return Io.match(this.options,e,this.mode)}dispose(){this.registrations!==void 0&amp;&amp;(this.client.getFeature(ln.DidOpenTextDocumentNotification.method).unregister(this.registrations.open),this.client.getFeature(ln.DidChangeTextDocumentNotification.method).unregister(this.registrations.change),this.client.getFeature(ln.DidCloseTextDocumentNotification.method).unregister(this.registrations.close))}async sendDidOpenTextDocument(e){let t=this.client.getFeature(ln.DidOpenTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No open provider found for notebook cell document ${e.uri.toString()}`))}async sendDidChangeTextDocument(e){let t=this.client.getFeature(ln.DidChangeTextDocumentNotification.method).getProvider(e.document);return t!==void 0?t.send(e):Promise.reject(new Error(`No change provider found for notebook cell document ${e.document.uri.toString()}`))}async sendDidCloseTextDocument(e){let t=this.client.getFeature(ln.DidCloseTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No close provider found for notebook cell document ${e.uri.toString()}`))}},dr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Kt.Proposed.NotebookDocumentSyncRegistrationType.type,ht.workspace.onDidOpenTextDocument(t=&gt;{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.getNotebookDocument(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didOpenNotebookCellDocument(r,i)}),ht.workspace.onDidChangeTextDocument(t=&gt;{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==dr.CellScheme)return;let[i]=this.getNotebookDocument(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didChangeCellTextDocument(i,t)})}fillClientCapabilities(e){let t=ep(ep(e,&quot;notebookDocument&quot;),&quot;synchronization&quot;);t.dynamicRegistration=!0}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??xo.generateUuid();this.register({id:r,registerOptions:t})}register(e){if(e.registerOptions.mode===&quot;cellContent&quot;){let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions,!0)}),r=new Ru(this.client,t);this.registrations.set(e.id,r)}else{let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions)}),r=new Ri(this.client,t);this.registrations.set(e.id,r)}}unregister(e){let t=this.registrations.get(e);t&amp;&amp;t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}getProvider(e){for(let t of this.registrations.values())if(t.handles(e))return t}getNotebookDocument(e){let t=e.uri.toString();for(let r of ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}getNotebookCellTextDocumentFilter(e,t){let r=[];for(let i of e.notebookDocumentSelector){let o;if(i.notebookDocumentFilter!==void 0&amp;&amp;(o=t===!0?{notebookDocument:Object.assign({},i.notebookDocumentFilter,{sync:!0})}:{notebookDocument:Object.assign({},i.notebookDocumentFilter)}),i.cellSelector!==void 0){for(let s of i.cellSelector)o===void 0?r.push(t===!0?{cellLanguage:s.language,sync:!0}:{cellLanguage:s.language}):r.push(Object.assign({},o,{cellLanguage:s.language}));o=void 0}else o!==void 0&amp;&amp;r.push(o)}return r}};Lo.NotebookDocumentSyncFeature=dr;dr.CellScheme=&quot;vscode-notebook-cell&quot;});var Su=q(fr=&gt;{&quot;use strict&quot;;Object.defineProperty(fr,&quot;__esModule&quot;,{value:!0});fr.ProposedFeatures=fr.CommonLanguageClient=void 0;var xD=it(),ND=Ph(),ID=_a(),FD=Eh(),LD=kh(),AD=Oh(),MD=Nh(),jD=Fh(),$D=Ah(),HD=Mh(),WD=$h(),KD=Hh(),Lr=Uh(),UD=Vh(),Du=class extends xD.BaseLanguageClient{constructor(e,t,r){super(e,t,r)}registerProposedFeatures(){this.registerFeatures(sp.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new ID.ConfigurationFeature(this)),this.registerFeature(new LD.TypeDefinitionFeature(this)),this.registerFeature(new FD.ImplementationFeature(this)),this.registerFeature(new ND.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&amp;&amp;this.registerFeature(new AD.WorkspaceFoldersFeature(this)),this.registerFeature(new MD.FoldingRangeFeature(this)),this.registerFeature(new jD.DeclarationFeature(this)),this.registerFeature(new $D.SelectionRangeFeature(this)),this.registerFeature(new HD.ProgressFeature(this)),this.registerFeature(new WD.CallHierarchyFeature(this)),this.registerFeature(new KD.SemanticTokensFeature(this)),this.registerFeature(new UD.LinkedEditingFeature(this)),this.registerFeature(new Lr.DidCreateFilesFeature(this)),this.registerFeature(new Lr.DidRenameFilesFeature(this)),this.registerFeature(new Lr.DidDeleteFilesFeature(this)),this.registerFeature(new Lr.WillCreateFilesFeature(this)),this.registerFeature(new Lr.WillRenameFilesFeature(this)),this.registerFeature(new Lr.WillDeleteFilesFeature(this))}};fr.CommonLanguageClient=Du;var np=Bh(),rp=Jh(),ip=Yh(),op=tp(),sp;(function(n){function e(s){return[new np.DiagnosticFeature(s),new rp.TypeHierarchyFeature(s),new ip.InlineValueFeature(s),new op.NotebookDocumentSyncFeature(s)]}n.createAll=e;function t(s){return new np.DiagnosticFeature(s)}n.createDiagnosticFeature=t;function r(s){return new rp.TypeHierarchyFeature(s)}n.createTypeHierarchyFeature=r;function i(s){return new ip.InlineValueFeature(s)}n.createInlineValueFeature=i;function o(s){return new op.NotebookDocumentSyncFeature(s)}n.createNotebookDocumentSyncFeature=o})(sp=fr.ProposedFeatures||(fr.ProposedFeatures={}))});var cp=q(Ao=&gt;{&quot;use strict&quot;;Object.defineProperty(Ao,&quot;__esModule&quot;,{value:!0});Ao.terminate=void 0;var ap=require(&quot;child_process&quot;),zD=require(&quot;path&quot;),VD=process.platform===&quot;win32&quot;,GD=process.platform===&quot;darwin&quot;,BD=process.platform===&quot;linux&quot;;function XD(n,e){if(VD)try{let i={stdio:[&quot;pipe&quot;,&quot;pipe&quot;,&quot;ignore&quot;]};return e&amp;&amp;(i.cwd=e),ap.execFileSync(&quot;taskkill&quot;,[&quot;/T&quot;,&quot;/F&quot;,&quot;/PID&quot;,n.pid.toString()],i),!0}catch{return!1}else if(BD||GD)try{var t=(0,zD.join)(__dirname,&quot;terminateProcess.sh&quot;),r=ap.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill(&quot;SIGKILL&quot;),!0}Ao.terminate=XD});var wu=q((Sb,up)=&gt;{&quot;use strict&quot;;up.exports=Ce()});var lp=q(_n=&gt;{&quot;use strict&quot;;var JD=_n&amp;&amp;_n.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),bu=_n&amp;&amp;_n.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;JD(e,n,t)};Object.defineProperty(_n,&quot;__esModule&quot;,{value:!0});bu(Ce(),_n);bu(it(),_n);bu(Su(),_n)});var pp=q(vt=&gt;{&quot;use strict&quot;;var QD=vt&amp;&amp;vt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),hp=vt&amp;&amp;vt.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;QD(e,n,t)};Object.defineProperty(vt,&quot;__esModule&quot;,{value:!0});vt.SettingMonitor=vt.LanguageClient=vt.TransportKind=void 0;var Tn=require(&quot;child_process&quot;),_u=require(&quot;fs&quot;),Tu=require(&quot;path&quot;),dp=Ed(),jn=require(&quot;vscode&quot;),Ee=yn(),YD=Su(),ZD=it(),eS=cp(),xe=wu();hp(wu(),vt);hp(lp(),vt);var fp=&quot;^1.63.0&quot;,Le;(function(n){n[n.stdio=0]=&quot;stdio&quot;,n[n.ipc=1]=&quot;ipc&quot;,n[n.pipe=2]=&quot;pipe&quot;,n[n.socket=3]=&quot;socket&quot;})(Le=vt.TransportKind||(vt.TransportKind={}));var Mn;(function(n){function e(t){let r=t;return r&amp;&amp;r.kind===Le.socket&amp;&amp;Ee.number(r.port)}n.isSocket=e})(Mn||(Mn={}));var Pu;(function(n){function e(t){return Ee.string(t.command)}n.is=e})(Pu||(Pu={}));var qu;(function(n){function e(t){return Ee.string(t.module)}n.is=e})(qu||(qu={}));var Eu;(function(n){function e(t){let r=t;return r&amp;&amp;r.writer!==void 0&amp;&amp;r.reader!==void 0}n.is=e})(Eu||(Eu={}));var ku;(function(n){function e(t){let r=t;return r&amp;&amp;r.process!==void 0&amp;&amp;typeof r.detached==&quot;boolean&quot;}n.is=e})(ku||(ku={}));var Ou=class extends YD.CommonLanguageClient{constructor(e,t,r,i,o){let s,a,u,h,g;Ee.string(t)?(s=e,a=t,u=r,h=i,g=!!o):(s=e.toLowerCase(),a=e,u=t,h=r,g=i),g===void 0&amp;&amp;(g=!1),super(s,a,h),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(p){throw Ee.string(p.message)&amp;&amp;this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=dp.parse(jn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jn.version}`);if(e.prerelease&amp;&amp;e.prerelease.length&gt;0&amp;&amp;(e.prerelease=[]),!dp.satisfies(e,fp))throw new Error(`The language client requires VS Code version ${fp} but received version ${jn.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=&gt;setTimeout(e,1e3)),this.start()):this.start()}stop(e=2e3){return super.stop(e).finally(()=&gt;{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&amp;&amp;this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=&gt;{try{process.kill(e.pid,0),(0,eS.terminate)(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&amp;&amp;(e.processId=process.pid)}createMessageTransports(e){function t(g,p){if(!g&amp;&amp;!p)return;let C=Object.create(null);return Object.keys(process.env).forEach(R=&gt;C[R]=process.env[R]),p&amp;&amp;(C.ELECTRON_RUN_AS_NODE=&quot;1&quot;,C.ELECTRON_NO_ASAR=&quot;1&quot;),g&amp;&amp;Object.keys(g).forEach(R=&gt;C[R]=g[R]),C}let r=[&quot;--debug=&quot;,&quot;--debug-brk=&quot;,&quot;--inspect=&quot;,&quot;--inspect-brk=&quot;],i=[&quot;--debug&quot;,&quot;--debug-brk&quot;,&quot;--inspect&quot;,&quot;--inspect-brk&quot;];function o(){let g=process.execArgv;return g?g.some(p=&gt;r.some(C=&gt;p.startsWith(C))||i.some(C=&gt;p===C)):!1}function s(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error(&quot;Process created without stdio streams&quot;)}let a=this._serverOptions;if(Ee.func(a))return a().then(g=&gt;{if(ZD.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Eu.is(g))return this._isDetached=!!g.detached,{reader:new xe.StreamMessageReader(g.reader),writer:new xe.StreamMessageWriter(g.writer)};{let p;return ku.is(g)?(p=g.process,this._isDetached=g.detached):(p=g,this._isDetached=!1),p.stderr.on(&quot;data&quot;,C=&gt;this.outputChannel.append(Ee.string(C)?C:C.toString(e))),{reader:new xe.StreamMessageReader(p.stdout),writer:new xe.StreamMessageWriter(p.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||o()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(g=&gt;{if(qu.is(u)&amp;&amp;u.module){let p=u,C=p.transport||Le.stdio;if(p.runtime){let R=[],E=p.options??Object.create(null);E.execArgv&amp;&amp;E.execArgv.forEach(N=&gt;R.push(N)),R.push(p.module),p.args&amp;&amp;p.args.forEach(N=&gt;R.push(N));let I=Object.create(null);I.cwd=g,I.env=t(E.env,!1);let F=this._getRuntimePath(p.runtime,g),A;if(C===Le.ipc?(I.stdio=[null,null,null,&quot;ipc&quot;],R.push(&quot;--node-ipc&quot;)):C===Le.stdio?R.push(&quot;--stdio&quot;):C===Le.pipe?(A=(0,xe.generateRandomPipeName)(),R.push(`--pipe=${A}`)):Mn.isSocket(C)&amp;&amp;R.push(`--socket=${C.port}`),R.push(`--clientProcessId=${process.pid.toString()}`),C===Le.ipc||C===Le.stdio){let N=Tn.spawn(F,R,I);return!N||!N.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(N),writer:new xe.IPCMessageWriter(N)})):Promise.resolve({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)}))}else{if(C===Le.pipe)return(0,xe.createClientPipeTransport)(A).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))});if(Mn.isSocket(C))return(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))})}}else{let R;return new Promise((E,I)=&gt;{let F=(p.args&amp;&amp;p.args.slice())??[];C===Le.ipc?F.push(&quot;--node-ipc&quot;):C===Le.stdio?F.push(&quot;--stdio&quot;):C===Le.pipe?(R=(0,xe.generateRandomPipeName)(),F.push(`--pipe=${R}`)):Mn.isSocket(C)&amp;&amp;F.push(`--socket=${C.port}`),F.push(`--clientProcessId=${process.pid.toString()}`);let A=p.options??Object.create(null);if(A.env=t(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=g,A.silent=!0,C===Le.ipc||C===Le.stdio){let N=Tn.fork(p.module,F||[],A);s(N),this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),E({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):E({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)})}else C===Le.pipe?(0,xe.createClientPipeTransport)(R).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I):Mn.isSocket(C)&amp;&amp;(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I)})}}else if(Pu.is(u)&amp;&amp;u.command){let p=u,C=u.args!==void 0?u.args.slice(0):[],R,E=u.transport;if(E===Le.stdio)C.push(&quot;--stdio&quot;);else if(E===Le.pipe)R=(0,xe.generateRandomPipeName)(),C.push(`--pipe=${R}`);else if(Mn.isSocket(E))C.push(`--socket=${E.port}`);else if(E===Le.ipc)throw new Error(&quot;Transport kind ipc is not support for command executable&quot;);let I=Object.assign({},p.options);if(I.cwd=I.cwd||g,E===void 0||E===Le.stdio){let F=Tn.spawn(p.command,C,I);return!F||!F.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(F.stderr.on(&quot;data&quot;,A=&gt;this.outputChannel.append(Ee.string(A)?A:A.toString(e))),this._serverProcess=F,this._isDetached=!!I.detached,Promise.resolve({reader:new xe.StreamMessageReader(F.stdout),writer:new xe.StreamMessageWriter(F.stdin)}))}else{if(E===Le.pipe)return(0,xe.createClientPipeTransport)(R).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))});if(Mn.isSocket(E))return(0,xe.createClientSocketTransport)(E.port).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))})}}return Promise.reject(new Error(&quot;Unsupported server configuration &quot;+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Tu.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Tu.join(r,e);if(_u.existsSync(i))return i}if(t!==void 0){let i=Tu.join(t,e);if(_u.existsSync(i))return i}return e}_mainGetRootPath(){let e=jn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}_getServerWorkingDir(e){let t=e&amp;&amp;e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=&gt;{_u.lstat(t,(i,o)=&gt;{r(!i&amp;&amp;o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return&quot;en&quot;;let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!=&quot;string&quot;?&quot;en&quot;:t.locale}};vt.LanguageClient=Ou;var xu=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jn.Disposable(()=&gt;{this._client.needsStop()&amp;&amp;this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf(&quot;.&quot;),t=e&gt;=0?this._setting.substr(0,e):this._setting,r=e&gt;=0?this._setting.substr(e+1):void 0,i=r?jn.workspace.getConfiguration(t).get(r,!1):jn.workspace.getConfiguration(t);i&amp;&amp;this._client.needsStart()?this._client.start():!i&amp;&amp;this._client.needsStop()&amp;&amp;this._client.stop()}};vt.SettingMonitor=xu});var mp=q((_b,gp)=&gt;{&quot;use strict&quot;;gp.exports=pp()});var rS={};_p(rS,{activate:()=&gt;tS,activateInlayHints:()=&gt;yp,deactivate:()=&gt;nS});module.exports=Pp(rS);var Ut=require(&quot;vscode&quot;),vp=Tp(mp()),Di;async function tS(n){let e=Ut.window.createOutputChannel(&quot;Hexpat Language Server trace&quot;),r={command:process.env.HEXPAT_SERVER_PATH||&quot;hexpat-language-server&quot;,options:{env:{...process.env,RUST_LOG:&quot;debug&quot;}}},i={run:r,debug:r},o={documentSelector:[{scheme:&quot;file&quot;,language:&quot;hexpat&quot;}],synchronize:{fileEvents:Ut.workspace.createFileSystemWatcher(&quot;**/.clientrc&quot;)},traceOutputChannel:e};Di=new vp.LanguageClient(&quot;hexpat-language-server&quot;,&quot;hexpat language server&quot;,i,o),yp(n),Di.start()}function nS(){if(!!Di)return Di.stop()}function yp(n){let e={hintsProvider:null,updateHintsEventEmitter:new Ut.EventEmitter,async onConfigChange(){this.dispose();let t=this.updateHintsEventEmitter.event;this.hintsProvider=Ut.languages.registerInlayHintsProvider({scheme:&quot;file&quot;,language:&quot;hexpat&quot;},new class{constructor(){this.onDidChangeInlayHints=t}resolveInlayHint(r,i){return{label:r.label,...r}}async provideInlayHints(r,i,o){let s=await Di.sendRequest(&quot;custom/inlay_hint&quot;,{path:r.uri.toString()}).catch(a=&gt;null);return s==null?[]:s.map(a=&gt;{let[u,h,g]=a,p=r.positionAt(u);return{position:r.positionAt(h),paddingLeft:!0,label:[{value:g,location:new Ut.Location(r.uri,p)}]}})}})},onDidChangeTextDocument({contentChanges:t,document:r}){},dispose(){var t;(t=this.hintsProvider)==null||t.dispose(),this.hintsProvider=null,this.updateHintsEventEmitter.dispose()}};Ut.workspace.onDidChangeConfiguration(e.onConfigChange,e,n.subscriptions),Ut.workspace.onDidChangeTextDocument(e.onDidChangeTextDocument,e,n.subscriptions),e.onConfigChange().catch(console.error)}0&amp;&amp;(module.exports={activate,activateInlayHints,deactivate});
</failure>
		</testcase>
		<testcase name="javascript.lang.security.detect-child-process.detect-child-process" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="39">
			<failure type="ERROR" message="Detected calls to child_process from a function argument `g`. This could lead to a command injection if the input is user controllable. Try to avoid calls to child_process, and if it is needed ensure user input is correctly sanitized or sandboxed. ">`+t.data.toString():&quot;&quot;}`}return e instanceof Error?De.string(e.stack)?e.stack:e.message:De.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Info&amp;&amp;this.showNotificationMessage(y.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Warn&amp;&amp;this.showNotificationMessage(y.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),(r===&quot;force&quot;||r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Error)&amp;&amp;this.showNotificationMessage(y.MessageType.Error,e)}showNotificationMessage(e,t){t=t??&quot;A request has failed. See the output for more information.&quot;,(e===y.MessageType.Error?K.window.showErrorMessage:e===y.MessageType.Warning?K.window.showWarningMessage:K.window.showInformationMessage)(t,&quot;Go to output&quot;).then(i=&gt;{i!==void 0&amp;&amp;this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&amp;&amp;this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&amp;&amp;e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&amp;&amp;this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===qe.Initial||this.state===qe.Stopping||this.state===qe.Stopped}needsStop(){return this.state===qe.Starting||this.state===qe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===qe.Running&amp;&amp;!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&amp;&amp;(this._onReady=new Promise((e,t)=&gt;{this._onReadyCallbacks=new ao(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?K.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):K.languages.createDiagnosticCollection()),this.state=qe.Starting,this.resolveConnection().then(e=&gt;(e.onLogMessage(t=&gt;{switch(t.type){case y.MessageType.Error:this.error(t.message,void 0,!1);break;case y.MessageType.Warning:this.warn(t.message,void 0,!1);break;case y.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=&gt;{switch(t.type){case y.MessageType.Error:K.window.showErrorMessage(t.message);break;case y.MessageType.Warning:K.window.showWarningMessage(t.message);break;case y.MessageType.Info:K.window.showInformationMessage(t.message);break;default:K.window.showInformationMessage(t.message)}}),e.onRequest(y.ShowMessageRequest.type,t=&gt;{let r;switch(t.type){case y.MessageType.Error:r=K.window.showErrorMessage;break;case y.MessageType.Warning:r=K.window.showWarningMessage;break;case y.MessageType.Info:r=K.window.showInformationMessage;break;default:r=K.window.showInformationMessage}let i=t.actions||[];return r(t.message,...i)}),e.onTelemetry(t=&gt;{this._telemetryEmitter.fire(t)}),e.onRequest(y.ShowDocumentRequest.type,async t=&gt;{let r=async o=&gt;{let s=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await K.env.openExternal(s)};{let a={};return o.selection!==void 0&amp;&amp;(a.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?a.preserveFocus=!0:o.takeFocus===!0&amp;&amp;(a.preserveFocus=!1),await K.window.showTextDocument(s,a),{success:!0}}}catch{return{success:!0}}},i=this._clientOptions.middleware.window?.showDocument;return i!==void 0?i(t,r):r(t)}),e.listen(),this.initialize(e))).catch(e=&gt;{this.state=qe.StartFailed,this._onReadyCallbacks.reject(e),this.error(`${this._name} client: couldn't create connection to server`,e,&quot;force&quot;)}),new K.Disposable(()=&gt;{this.needsStop()&amp;&amp;this.stop().catch(e=&gt;{this.error(&quot;Stopping server failed.&quot;,e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:K.env.appName,version:K.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(K.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:De.func(t)?t():t,trace:y.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=Se.generateUuid(),a=new lD.ProgressPart(e,s);return o.workDoneToken=s,this.doInitialize(e,o).then(u=&gt;(a.done(),u),u=&gt;{throw a.cancel(),u})}else return this.doInitialize(e,o)}doInitialize(e,t){return e.initialize(t).then(r=&gt;{this._resolvedConnection=e,this._initializeResult=r,this.state=qe.Running;let i;return De.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===y.TextDocumentSyncKind.None?i={openClose:!1,change:y.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&amp;&amp;r.capabilities.textDocumentSync!==null&amp;&amp;(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=&gt;this.handleDiagnostics(o)),e.onRequest(y.RegistrationRequest.type,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(&quot;client/registerFeature&quot;,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(y.UnregistrationRequest.type,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(&quot;client/unregisterFeature&quot;,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(y.ApplyWorkspaceEditRequest.type,o=&gt;this.handleApplyWorkspaceEdit(o)),e.sendNotification(y.InitializedNotification.type,{}).then(()=&gt;(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r))}).then(void 0,r=&gt;{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof y.ResponseError&amp;&amp;r.data&amp;&amp;r.data.retry?K.window.showErrorMessage(r.message,{title:&quot;Retry&quot;,id:&quot;retry&quot;}).then(i=&gt;{i&amp;&amp;i.id===&quot;retry&quot;?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&amp;&amp;r.message&amp;&amp;K.window.showErrorMessage(r.message),this.error(&quot;Server initialization failed.&quot;,r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=K.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}async stop(e=2e3){if(await this.onReady(),this._initializeResult=void 0,!this._connectionPromise)return this.state=qe.Stopped,Promise.resolve();if(this.state===qe.Stopping&amp;&amp;this._onStop)return this._onStop;this.state=qe.Stopping,this.cleanUp(!1);let t=new Promise(i=&gt;{(0,y.RAL)().timer.setTimeout(i,e)}),r=this.resolveConnection().then(i=&gt;i.shutdown().then(()=&gt;i.exit().then(()=&gt;i)));return this._onStop=Promise.race([t,r]).then(i=&gt;{if(i!==void 0)i.end(),i.dispose();else throw this.error(&quot;Stopping server timed out&quot;,void 0,!1),new Error(&quot;Stopping the server timed out&quot;)},i=&gt;{throw this.error(&quot;Stopping server failed&quot;,i,!1),i}).finally(()=&gt;{this.state=qe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})}cleanUp(e=!0,t=!0){this._fileEvents=[],this._fileEventDelayer.cancel(),this._listeners&amp;&amp;(this._listeners.forEach(r=&gt;r.dispose()),this._listeners=void 0),this._providers&amp;&amp;(this._providers.forEach(r=&gt;r.dispose()),this._providers=void 0),this._syncedDocuments&amp;&amp;this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=&gt;i[1]).reverse())r.dispose();e&amp;&amp;this.cleanUpChannel(),t&amp;&amp;this._diagnostics&amp;&amp;(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&amp;&amp;this._disposeOutputChannel&amp;&amp;(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=&gt;{await t.onReady();let s=await t.resolveConnection(),a=Promise.resolve();return t.isConnectionActive()&amp;&amp;(t.forceDocumentSync(),a=s.didChangeWatchedFiles({changes:t._fileEvents})),t._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=&gt;{t.error(&quot;Notify file events failed.&quot;,o)})}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&amp;&amp;(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(y.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,r,(o,s)=&gt;this.setDiagnostics(o,s)):this.setDiagnostics(t,r)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(r,i,o)=&gt;{this.handleConnectionError(r,i,o)},t=()=&gt;{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||&quot;utf8&quot;).then(r=&gt;dD(r.reader,r.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===qe.Stopped)return;try{this._resolvedConnection&amp;&amp;this._resolvedConnection.dispose()}catch{}let e={action:sr.DoNotRestart};if(this.state!==qe.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e.action===sr.DoNotRestart?(this.error(e.message??&quot;Connection to server got closed. Server will not be restarted.&quot;,void 0,&quot;force&quot;),this.state===qe.Starting?(this._onReadyCallbacks.reject(new Error(&quot;Connection to server got closed. Server will not be restarted.&quot;)),this.state=qe.StartFailed):this.state=qe.Stopped,this.cleanUp(!1,!0)):e.action===sr.Restart&amp;&amp;(this.info(e.message??&quot;Connection to server got closed. Server will restart.&quot;),this.cleanUp(!1,!1),this.state=qe.Initial,this.start())}handleConnectionError(e,t,r){let i=this._clientOptions.errorHandler.error(e,t,r);i.action===so.Shutdown&amp;&amp;(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,&quot;force&quot;),this.stop().catch(o=&gt;{this.error(&quot;Stopping server failed&quot;,o,!1)}))}hookConfigurationChanged(e){K.workspace.onDidChangeConfiguration(()=&gt;{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let r=K.workspace.getConfiguration(this._id),i=y.Trace.Off,o=y.TraceFormat.Text;if(r){let s=r.get(&quot;trace.server&quot;,&quot;off&quot;);typeof s==&quot;string&quot;?i=y.Trace.fromString(s):(i=y.Trace.fromString(r.get(&quot;trace.server.verbosity&quot;,&quot;off&quot;)),o=y.TraceFormat.fromString(r.get(&quot;trace.server.format&quot;,&quot;text&quot;)))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;De.array(t)?r=t:r=[t],r&amp;&amp;this._dynamicFeatures.get(y.DidChangeWatchedFilesNotification.type.method).registerRaw(Se.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),rc.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Pc(this)),this.registerFeature(new ic(this,this._syncedDocuments)),this.registerFeature(new sc(this)),this.registerFeature(new ac(this)),this.registerFeature(new cc(this)),this.registerFeature(new uc(this)),this.registerFeature(new oc(this,this._syncedDocuments)),this.registerFeature(new lc(this,e=&gt;this.notifyFileEvent(e))),this.registerFeature(new fc(this)),this.registerFeature(new hc(this)),this.registerFeature(new pc(this)),this.registerFeature(new gc(this)),this.registerFeature(new mc(this)),this.registerFeature(new vc(this)),this.registerFeature(new yc(this)),this.registerFeature(new Cc(this)),this.registerFeature(new Rc(this)),this.registerFeature(new Dc(this)),this.registerFeature(new Sc(this)),this.registerFeature(new wc(this)),this.registerFeature(new bc(this)),this.registerFeature(new _c(this)),this.registerFeature(new Tc(this)),this.registerFeature(new qc(this))}fillInitializeParams(e){for(let t of this._features)De.func(t.fillInitializeParams)&amp;&amp;t.fillInitializeParams(e)}computeClientCapabilities(){let e={};V(e,&quot;workspace&quot;).applyEdit=!0;let t=V(V(e,&quot;workspace&quot;),&quot;workspaceEdit&quot;);t.documentChanges=!0,t.resourceOperations=[y.ResourceOperationKind.Create,y.ResourceOperationKind.Rename,y.ResourceOperationKind.Delete],t.failureHandling=y.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=V(V(e,&quot;textDocument&quot;),&quot;publishDiagnostics&quot;);r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[y.DiagnosticTag.Unnecessary,y.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=V(e,&quot;window&quot;),o=V(i,&quot;showMessage&quot;);o.messageActionItem={additionalPropertiesSupport:!0};let s=V(i,&quot;showDocument&quot;);s.support=!0;let a=V(e,&quot;general&quot;);a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ar.RequestsToCancelOnContentModified)},a.regularExpressions={engine:&quot;ECMAScript&quot;,version:&quot;ES2020&quot;},a.markdown={parser:&quot;marked&quot;,version:&quot;1.1.0&quot;},this._clientOptions.markdown.supportHtml&amp;&amp;(a.markdown.allowedTags=[&quot;ul&quot;,&quot;li&quot;,&quot;p&quot;,&quot;code&quot;,&quot;blockquote&quot;,&quot;ol&quot;,&quot;h1&quot;,&quot;h2&quot;,&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;hr&quot;,&quot;em&quot;,&quot;pre&quot;,&quot;table&quot;,&quot;thead&quot;,&quot;tbody&quot;,&quot;tr&quot;,&quot;th&quot;,&quot;td&quot;,&quot;div&quot;,&quot;del&quot;,&quot;a&quot;,&quot;strong&quot;,&quot;br&quot;,&quot;img&quot;,&quot;span&quot;]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(o===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let s=i.registerOptions??{};s.documentSelector=s.documentSelector??this._clientOptions.documentSelector;let a={id:i.id,registerOptions:s};try{o.register(a)}catch(u){r(u);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,r=new Map;K.workspace.textDocuments.forEach(o=&gt;r.set(o.uri.toString(),o));let i=!1;if(t.documentChanges){for(let o of t.documentChanges)if(y.TextDocumentEdit.is(o)&amp;&amp;o.textDocument.version&amp;&amp;o.textDocument.version&gt;=0){let s=r.get(o.textDocument.uri);if(s&amp;&amp;s.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):De.asPromise(K.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=&gt;({applied:o})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof y.ResponseError){if(r.code===y.LSPErrorCodes.RequestCancelled||r.code===y.LSPErrorCodes.ServerCancelled){if(t!==void 0&amp;&amp;t.isCancellationRequested)return i;throw r.data!==void 0?new co(r.data):new K.CancellationError}else if(r.code===y.LSPErrorCodes.ContentModified){if(ar.RequestsToCancelOnContentModified.has(e.method))throw new K.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};ye.BaseLanguageClient=ar;ar.RequestsToCancelOnContentModified=new Set([y.SemanticTokensRequest.method,y.SemanticTokensRangeRequest.method,y.SemanticTokensDeltaRequest.method])});var Ph=q(lo=&gt;{&quot;use strict&quot;;Object.defineProperty(lo,&quot;__esModule&quot;,{value:!0});lo.ColorProviderFeature=void 0;var uo=require(&quot;vscode&quot;),mi=Ce(),Ec=it();function Th(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kc=class extends Ec.TextDocumentFeature{constructor(e){super(e,mi.DocumentColorRequest.type)}fillClientCapabilities(e){Th(Th(e,&quot;textDocument&quot;),&quot;colorProvider&quot;).dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=&gt;{let a=this._client,u=(g,p,C)=&gt;{let R={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p.document),range:a.code2ProtocolConverter.asRange(p.range)};return a.sendRequest(mi.ColorPresentationRequest.type,R,C).then(this.asColorPresentations.bind(this),E=&gt;a.handleFailedRequest(mi.ColorPresentationRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,o,s,u):u(i,o,s)},provideDocumentColors:(i,o)=&gt;{if(Ec.$DocumentSelector.skipCellTextDocument(t,i))return;let s=this._client,a=(h,g)=&gt;{let p={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(h)};return s.sendRequest(mi.DocumentColorRequest.type,p,g).then(this.asColorInformations.bind(this),C=&gt;s.handleFailedRequest(mi.ColorPresentationRequest.type,g,C,null))},u=s.clientOptions.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,o,a):a(i,o)}};return[uo.languages.registerColorProvider(Ec.$DocumentSelector.asTextDocumentFilters(t),r),r]}asColor(e){return new uo.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=&gt;new uo.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=&gt;{let r=new uo.ColorPresentation(t.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),r}):[]}};lo.ColorProviderFeature=kc});var Eh=q(fo=&gt;{&quot;use strict&quot;;Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0});fo.ImplementationFeature=void 0;var gD=require(&quot;vscode&quot;),Oc=Ce(),xc=it();function qh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Nc=class extends xc.TextDocumentFeature{constructor(e){super(e,Oc.ImplementationRequest.type)}fillClientCapabilities(e){let t=qh(qh(e,&quot;textDocument&quot;),&quot;implementation&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=&gt;{if(xc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Oc.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Oc.ImplementationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideImplementation?h.provideImplementation(i,o,s,u):u(i,o,s)}};return[gD.languages.registerImplementationProvider(xc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};fo.ImplementationFeature=Nc});var kh=q(po=&gt;{&quot;use strict&quot;;Object.defineProperty(po,&quot;__esModule&quot;,{value:!0});po.TypeDefinitionFeature=void 0;var mD=require(&quot;vscode&quot;),Ic=Ce(),Fc=it();function ho(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Lc=class extends Fc.TextDocumentFeature{constructor(e){super(e,Ic.TypeDefinitionRequest.type)}fillClientCapabilities(e){ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;).dynamicRegistration=!0;let t=ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=&gt;{if(Fc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Ic.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Ic.TypeDefinitionRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,o,s,u):u(i,o,s)}};return[mD.languages.registerTypeDefinitionProvider(Fc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};po.TypeDefinitionFeature=Lc});var Oh=q(xr=&gt;{&quot;use strict&quot;;Object.defineProperty(xr,&quot;__esModule&quot;,{value:!0});xr.WorkspaceFoldersFeature=xr.arrayDiff=void 0;var vD=Or(),go=require(&quot;vscode&quot;),vi=Ce();function Ac(n,e){if(n!==void 0)return n[e]}function Mc(n,e){return n.filter(t=&gt;e.indexOf(t)&lt;0)}xr.arrayDiff=Mc;var jc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return vi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=go.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=&gt;this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(vi.WorkspaceFoldersRequest.type,o=&gt;{let s=()=&gt;{let u=go.workspace.workspaceFolders;return u===void 0?null:u.map(g=&gt;this.asProtocol(g))},a=t.clientOptions.middleware.workspace;return a&amp;&amp;a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Ac(Ac(Ac(e,&quot;workspace&quot;),&quot;workspaceFolders&quot;),&quot;changeNotifications&quot;),i;typeof r==&quot;string&quot;?i=r:r===!0&amp;&amp;(i=vD.generateUuid()),i&amp;&amp;this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&amp;&amp;e){let r=Mc(this._initialFolders,e),i=Mc(e,this._initialFolders);(i.length&gt;0||r.length&gt;0)&amp;&amp;(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&amp;&amp;(t=this.doSendEvent(e,[]));t!==void 0&amp;&amp;t.catch(r=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=&gt;this.asProtocol(i)),removed:t.map(i=&gt;this.asProtocol(i))}};return this._client.sendNotification(vi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=go.workspace.onDidChangeWorkspaceFolders(o=&gt;{let s=h=&gt;this.doSendEvent(h.added,h.removed),a=r.clientOptions.middleware.workspace;(a&amp;&amp;a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(h=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(go.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&amp;&amp;(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};xr.WorkspaceFoldersFeature=jc});var Nh=q(mo=&gt;{&quot;use strict&quot;;Object.defineProperty(mo,&quot;__esModule&quot;,{value:!0});mo.FoldingRangeFeature=void 0;var yi=require(&quot;vscode&quot;),Nr=Ce(),$c=it();function xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Ir=class extends $c.TextDocumentFeature{constructor(e){super(e,Nr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=xh(xh(e,&quot;textDocument&quot;),&quot;foldingRange&quot;);t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=&gt;{if($c.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g)};return a.sendRequest(Nr.FoldingRangeRequest.type,R,C).then(Ir.asFoldingRanges,E=&gt;a.handleFailedRequest(Nr.FoldingRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,o,s,u):u(i,o,s)}};return[yi.languages.registerFoldingRangeProvider($c.$DocumentSelector.asTextDocumentFilters(t),r),r]}static asFoldingRangeKind(e){if(e)switch(e){case Nr.FoldingRangeKind.Comment:return yi.FoldingRangeKind.Comment;case Nr.FoldingRangeKind.Imports:return yi.FoldingRangeKind.Imports;case Nr.FoldingRangeKind.Region:return yi.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=&gt;new yi.FoldingRange(t.startLine,t.endLine,Ir.asFoldingRangeKind(t.kind))):[]}};mo.FoldingRangeFeature=Ir});var Fh=q(vo=&gt;{&quot;use strict&quot;;Object.defineProperty(vo,&quot;__esModule&quot;,{value:!0});vo.DeclarationFeature=void 0;var yD=require(&quot;vscode&quot;),Hc=Ce(),Wc=it();function Ih(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Kc=class extends Wc.TextDocumentFeature{constructor(e){super(e,Hc.DeclarationRequest.type)}fillClientCapabilities(e){let t=Ih(Ih(e,&quot;textDocument&quot;),&quot;declaration&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=&gt;{if(Wc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Hc.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDeclarationResult,R=&gt;a.handleFailedRequest(Hc.DeclarationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDeclaration?h.provideDeclaration(i,o,s,u):u(i,o,s)}};return[yD.languages.registerDeclarationProvider(Wc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};vo.DeclarationFeature=Kc});var Ah=q(yo=&gt;{&quot;use strict&quot;;Object.defineProperty(yo,&quot;__esModule&quot;,{value:!0});yo.SelectionRangeFeature=void 0;var CD=require(&quot;vscode&quot;),Uc=Ce(),zc=it();function Lh(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Vc=class extends zc.TextDocumentFeature{constructor(e){super(e,Uc.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Lh(Lh(e,&quot;textDocument&quot;),&quot;selectionRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=&gt;{if(zc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositions(p)};return a.sendRequest(Uc.SelectionRangeRequest.type,R,C).then(E=&gt;a.protocol2CodeConverter.asSelectionRanges(E),E=&gt;a.handleFailedRequest(Uc.SelectionRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,o,s,u):u(i,o,s)}};return[CD.languages.registerSelectionRangeProvider(zc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};yo.SelectionRangeFeature=Vc});var Mh=q(Co=&gt;{&quot;use strict&quot;;Object.defineProperty(Co,&quot;__esModule&quot;,{value:!0});Co.ProgressFeature=void 0;var RD=Ce(),DD=ec();function SD(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Gc=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){SD(e,&quot;window&quot;).workDoneProgress=!0}initialize(){let e=this._client,t=i=&gt;{this.activeParts.delete(i)},r=i=&gt;{this.activeParts.add(new DD.ProgressPart(this._client,i.token,t))};e.onRequest(RD.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Co.ProgressFeature=Gc});var $h=q(Ro=&gt;{&quot;use strict&quot;;Object.defineProperty(Ro,&quot;__esModule&quot;,{value:!0});Ro.CallHierarchyFeature=void 0;var wD=require(&quot;vscode&quot;),cr=Ce(),Bc=it();function jh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Xc=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{if(Bc.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,a))return;let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(cr.CallHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asCallHierarchyItems(p),p=&gt;i.handleFailedRequest(cr.CallHierarchyPrepareRequest.type,h,p,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},Jc=class extends Bc.TextDocumentFeature{constructor(e){super(e,cr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=jh(jh(e,&quot;textDocument&quot;),&quot;callHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Xc(t,e);return[wD.languages.registerCallHierarchyProvider(Bc.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};Ro.CallHierarchyFeature=Jc});var Hh=q(bo=&gt;{&quot;use strict&quot;;Object.defineProperty(bo,&quot;__esModule&quot;,{value:!0});bo.SemanticTokensFeature=void 0;var Do=require(&quot;vscode&quot;),ee=Ce(),So=it(),bD=yn();function wo(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Qc=class extends So.TextDocumentFeature{constructor(e){super(e,ee.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=wo(wo(e,&quot;textDocument&quot;),&quot;semanticTokens&quot;);t.dynamicRegistration=!0,t.tokenTypes=[ee.SemanticTokenTypes.namespace,ee.SemanticTokenTypes.type,ee.SemanticTokenTypes.class,ee.SemanticTokenTypes.enum,ee.SemanticTokenTypes.interface,ee.SemanticTokenTypes.struct,ee.SemanticTokenTypes.typeParameter,ee.SemanticTokenTypes.parameter,ee.SemanticTokenTypes.variable,ee.SemanticTokenTypes.property,ee.SemanticTokenTypes.enumMember,ee.SemanticTokenTypes.event,ee.SemanticTokenTypes.function,ee.SemanticTokenTypes.method,ee.SemanticTokenTypes.macro,ee.SemanticTokenTypes.keyword,ee.SemanticTokenTypes.modifier,ee.SemanticTokenTypes.comment,ee.SemanticTokenTypes.string,ee.SemanticTokenTypes.number,ee.SemanticTokenTypes.regexp,ee.SemanticTokenTypes.operator,ee.SemanticTokenTypes.decorator],t.tokenModifiers=[ee.SemanticTokenModifiers.declaration,ee.SemanticTokenModifiers.definition,ee.SemanticTokenModifiers.readonly,ee.SemanticTokenModifiers.static,ee.SemanticTokenModifiers.deprecated,ee.SemanticTokenModifiers.abstract,ee.SemanticTokenModifiers.async,ee.SemanticTokenModifiers.modification,ee.SemanticTokenModifiers.documentation,ee.SemanticTokenModifiers.defaultLibrary],t.formats=[ee.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,wo(wo(e,&quot;workspace&quot;),&quot;semanticTokens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(ee.SemanticTokensRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=bD.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&amp;&amp;typeof e.full!=&quot;boolean&quot;&amp;&amp;e.full.delta===!0,o=new Do.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(R,E)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let I=this._client,F=I.clientOptions.middleware,A=(N,L)=&gt;{let j={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(N)};return I.sendRequest(ee.SemanticTokensRequest.type,j,L).then(X=&gt;I.protocol2CodeConverter.asSemanticTokens(X),X=&gt;I.handleFailedRequest(ee.SemanticTokensRequest.type,L,X,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(R,E,A):A(R,E)},provideDocumentSemanticTokensEdits:i?(R,E,I)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),previousResultId:j};return F.sendRequest(ee.SemanticTokensDeltaRequest.type,Re,X).then(ne=&gt;ee.SemanticTokens.is(ne)?F.protocol2CodeConverter.asSemanticTokens(ne):F.protocol2CodeConverter.asSemanticTokensEdits(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensDeltaRequest.type,X,ne,null))};return A.provideDocumentSemanticTokensEdits?A.provideDocumentSemanticTokensEdits(R,E,I,N):N(R,E,I)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(R,E,I)=&gt;{let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),range:F.code2ProtocolConverter.asRange(j)};return F.sendRequest(ee.SemanticTokensRangeRequest.type,Re,X).then(ne=&gt;F.protocol2CodeConverter.asSemanticTokens(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensRangeRequest.type,X,ne,null))};return A.provideDocumentRangeSemanticTokens?A.provideDocumentRangeSemanticTokens(R,E,I,N):N(R,E,I)}}:void 0,h=[],p=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend),C=So.$DocumentSelector.asTextDocumentFilters(t);return s!==void 0&amp;&amp;h.push(Do.languages.registerDocumentSemanticTokensProvider(C,s,p)),u!==void 0&amp;&amp;h.push(Do.languages.registerDocumentRangeSemanticTokensProvider(C,u,p)),[new Do.Disposable(()=&gt;h.forEach(R=&gt;R.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}};bo.SemanticTokensFeature=Qc});var Uh=q(St=&gt;{&quot;use strict&quot;;Object.defineProperty(St,&quot;__esModule&quot;,{value:!0});St.WillDeleteFilesFeature=St.WillRenameFilesFeature=St.WillCreateFilesFeature=St.DidDeleteFilesFeature=St.DidRenameFilesFeature=St.DidCreateFilesFeature=void 0;var Wt=require(&quot;vscode&quot;),_D=Mi(),wn=Ce(),TD=Or();function Wh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}function PD(n,e){return n[e]}function Kh(n,e,t){n[e]=t}var bn=class{constructor(e,t,r,i,o){this._filters=new Map,this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Wh(Wh(e,&quot;workspace&quot;),&quot;fileOperations&quot;);Kh(t,&quot;dynamicRegistration&quot;,!0),Kh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?PD(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:TD.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=&gt;{let i=new _D.Minimatch(r.pattern.glob,bn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}getFileType(e){return bn.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=&gt;{let s=t(o),a=s.fsPath.replace(/\\/g,&quot;/&quot;);for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&amp;&amp;h.scheme!==s.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let g=await this.getFileType(s);if(g===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(g===Wt.FileType.File&amp;&amp;h.kind===wn.FileOperationPatternKind.file||g===Wt.FileType.Directory&amp;&amp;h.kind===wn.FileOperationPatternKind.folder)return!0}else if(h.kind===wn.FileOperationPatternKind.folder&amp;&amp;await bn.getFileType(s)===Wt.FileType.Directory&amp;&amp;h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=&gt;r[s]);return{...e,files:i}}static async getFileType(e){try{return(await Wt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&amp;&amp;e.ignoreCase===!0)return{nocase:!0}}},_o=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=&gt;this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},To=class extends _o{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await bn.getFileType(e);return r&amp;&amp;this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&amp;&amp;this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}},Yc=class extends _o{constructor(e){super(e,Wt.workspace.onDidCreateFiles,wn.DidCreateFilesNotification.type,&quot;didCreate&quot;,&quot;didCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};St.DidCreateFilesFeature=Yc;var Zc=class extends To{constructor(e){super(e,Wt.workspace.onDidRenameFiles,wn.DidRenameFilesNotification.type,&quot;didRename&quot;,&quot;didRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};St.DidRenameFilesFeature=Zc;var eu=class extends To{constructor(e){super(e,Wt.workspace.onDidDeleteFiles,wn.DidDeleteFilesNotification.type,&quot;didDelete&quot;,&quot;didDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};St.DidDeleteFilesFeature=eu;var Ci=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=&gt;this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},tu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillCreateFiles,wn.WillCreateFilesRequest.type,&quot;willCreate&quot;,&quot;willCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};St.WillCreateFilesFeature=tu;var nu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillRenameFiles,wn.WillRenameFilesRequest.type,&quot;willRename&quot;,&quot;willRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};St.WillRenameFilesFeature=nu;var ru=class extends Ci{constructor(e){super(e,Wt.workspace.onWillDeleteFiles,wn.WillDeleteFilesRequest.type,&quot;willDelete&quot;,&quot;willDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};St.WillDeleteFilesFeature=ru});var Vh=q(Po=&gt;{&quot;use strict&quot;;Object.defineProperty(Po,&quot;__esModule&quot;,{value:!0});Po.LinkedEditingFeature=void 0;var qD=require(&quot;vscode&quot;),iu=Ce(),ou=it();function zh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var su=class extends ou.TextDocumentFeature{constructor(e){super(e,iu.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=zh(zh(e,&quot;textDocument&quot;),&quot;linkedEditingRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=&gt;{if(ou.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(iu.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asLinkedEditingRanges,R=&gt;a.handleFailedRequest(iu.LinkedEditingRangeRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,o,s,u):u(i,o,s)}};return[qD.languages.registerLinkedEditingRangeProvider(ou.$DocumentSelector.asTextDocumentFilters(t),r),r]}};Po.LinkedEditingFeature=su});var Bh=q(ur=&gt;{&quot;use strict&quot;;Object.defineProperty(ur,&quot;__esModule&quot;,{value:!0});ur.DiagnosticFeature=ur.vsdiag=void 0;var He=require(&quot;vscode&quot;),$e=Ce(),ED=Or(),Fr=it();function Gh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var un;(function(n){let e;(function(t){t.full=&quot;full&quot;,t.unChanged=&quot;unChanged&quot;})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(un=ur.vsdiag||(ur.vsdiag={}));var ft;(function(n){n.active=&quot;open&quot;,n.reschedule=&quot;reschedule&quot;,n.outDated=&quot;drop&quot;})(ft||(ft={}));var au=class{constructor(){this.open=new Set;let e=()=&gt;{if(this.open.clear(),He.window.tabs!==void 0)for(let t of He.window.tabs)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString());else if(He.window.openEditors!==void 0)for(let t of He.window.openEditors)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString())};e(),He.window.onDidChangeTabs!==void 0?this.disposable=He.window.onDidChangeTabs(e):He.window.onDidChangeOpenEditors!==void 0?this.disposable=He.window.onDidChangeOpenEditors(e):this.disposable={dispose:()=&gt;{}}}dispose(){this.disposable.dispose()}isActive(e){return He.window.activeTextEditor?.document===e}isVisible(e){return this.open.has(e.uri.toString())}},Et;(function(n){n[n.document=1]=&quot;document&quot;,n[n.workspace=2]=&quot;workspace&quot;})(Et||(Et={}));var cu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===Et.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r]:[t.uri.toString(),t.uri,t.version],u=i.get(o);return u===void 0&amp;&amp;(u={document:s,pulledVersion:a,resultId:void 0},i.set(o,u)),u}update(e,t,r,i){let o=e===Et.document?this.documentPullStates:this.workspacePullStates,[s,a,u,h]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r,i]:[t.uri.toString(),t.uri,t.version,r],g=o.get(s);g===void 0?(g={document:a,pulledVersion:u,resultId:h},o.set(s,g)):(g.pulledVersion=u,g.resultId=h)}unTrack(e,t){(e===Et.document?this.documentPullStates:this.workspacePullStates).delete(t.uri.toString())}tracks(e,t){let r=typeof t==&quot;string&quot;?t:t.uri.toString();return(e===Et.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){return(e===Et.document?this.documentPullStates:this.workspacePullStates).get(t.uri.toString())?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&amp;&amp;(r=this.documentPullStates.get(t)),r.resultId!==void 0&amp;&amp;e.push({uri:t,value:r.resultId});return e}},uu=class{constructor(e,t,r){this.client=e,this.editorTracker=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new He.EventEmitter,this.provider=this.createProvider(),this.diagnostics=He.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new cu,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){this.pullAsync(e).then(()=&gt;{t&amp;&amp;t()},r=&gt;{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,r,!1)})}async pullAsync(e){let t=e.uri.toString(),r=e.version,i=this.openRequests.get(t),o=this.documentStates.track(Et.document,e);if(i===void 0){let s=new He.CancellationTokenSource;this.openRequests.set(t,{state:ft.active,version:r,textDocument:e,tokenSource:s});let a,u;try{a=await this.provider.provideDiagnostics(e,o.resultId,s.token)??{kind:un.DocumentDiagnosticReportKind.full,items:[]}}catch(h){if(h instanceof Fr.LSPCancellationError&amp;&amp;$e.Proposed.DiagnosticServerCancellationData.is(h.data)&amp;&amp;h.data.retriggerRequest===!1&amp;&amp;(u={state:ft.outDated,textDocument:e}),u===void 0&amp;&amp;h instanceof He.CancellationError)u={state:ft.reschedule,textDocument:e};else throw h}if(u=u??this.openRequests.get(t),u===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${t}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(t),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(Et.document,e);return}if(u.state===ft.outDated)return;a!==void 0&amp;&amp;(a.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;this.diagnostics.set(e.uri,a.items),o.pulledVersion=r,o.resultId=a.resultId),u.state===ft.reschedule&amp;&amp;this.pull(e)}else i.state===ft.active?(i.tokenSource.cancel(),this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})):i.state===ft.outDated&amp;&amp;this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})}cleanupPull(e){let t=e.uri.toString(),r=this.openRequests.get(t);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(t,{state:ft.reschedule,textDocument:e}):this.pull(e):(r!==void 0&amp;&amp;(r.state===ft.active&amp;&amp;r.tokenSource.cancel(),this.openRequests.set(t,{state:ft.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=&gt;{this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3)},e=&gt;{!(e instanceof Fr.LSPCancellationError)&amp;&amp;!$e.Proposed.DiagnosticServerCancellationData.is(e.data)&amp;&amp;(this.client.error(&quot;Workspace diagnostic pull failed.&quot;,e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter&lt;=5&amp;&amp;(this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&amp;&amp;(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new He.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=&gt;({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=&gt;{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;(this.documentStates.tracks(Et.document,r.uri.toString())||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(Et.workspace,r.uri.toString(),r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=&gt;{let o=(a,u,h)=&gt;{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a.uri)},previousResultId:u};return this.client.sendRequest($e.Proposed.DocumentDiagnosticRequest.type,g,h).then(p=&gt;p==null||this.isDisposed?{kind:un.DocumentDiagnosticReportKind.full,items:[]}:p.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,resultId:p.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(p.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,resultId:p.resultId},p=&gt;this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,h,p,{kind:un.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.clientOptions.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&amp;&amp;(e.provideWorkspaceDiagnostics=(t,r,i)=&gt;{let o=h=&gt;h.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:this.client.protocol2CodeConverter.asDiagnostics(h.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},s=h=&gt;{let g=[];for(let p of h)g.push({uri:this.client.code2ProtocolConverter.asUri(p.uri),value:p.value});return g},a=(h,g)=&gt;{let p=(0,ED.generateUuid)(),C=this.client.onProgress($e.Proposed.WorkspaceDiagnosticRequest.partialResult,p,E=&gt;{if(E==null){i(null);return}let I={items:[]};for(let F of E.items)I.items.push(o(F));i(I)}),R={identifier:this.options.identifier,previousResultIds:s(h),partialResultToken:p};return this.client.sendRequest($e.Proposed.WorkspaceDiagnosticRequest.type,R,g).then(E=&gt;{let I={items:[]};for(let F of E.items)I.items.push(o(F));return C.dispose(),i(I),{items:[]}},E=&gt;(C.dispose(),this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,g,E,{items:[]})))},u=this.client.clientOptions.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===ft.active&amp;&amp;t.tokenSource.cancel(),this.openRequests.set(e,{state:ft.outDated,textDocument:t.textDocument})}},lu=class{constructor(e){this.diagnosticRequestor=e,this.documents=new $e.LinkedMap}add(e){let t=e.uri.toString();this.documents.has(t)||(this.documents.set(e.uri.toString(),e,$e.Touch.Last),this.trigger())}remove(e){let t=e.uri.toString();this.documents.has(t)&amp;&amp;(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&amp;&amp;(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,$e.RAL)().timer.setInterval(()=&gt;{let e=this.documents.first;e!==void 0&amp;&amp;(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,$e.Touch.Last),e===this.endDocument&amp;&amp;this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},du=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=r.documentSelector,s=[],a=p=&gt;Fr.$DocumentSelector.matchForProvider(o,p)&amp;&amp;t.isVisible(p);this.diagnosticRequestor=new uu(e,t,r),this.backgroundScheduler=new lu(this.diagnosticRequestor);let u=p=&gt;{!a(p)||!r.interFileDependencies||this.activeTextDocument===p||this.backgroundScheduler.add(p)};this.activeTextDocument=He.window.activeTextEditor?.document,He.window.onDidChangeActiveTextEditor(p=&gt;{let C=this.activeTextDocument;this.activeTextDocument=p?.document,C!==void 0&amp;&amp;u(C),this.activeTextDocument!==void 0&amp;&amp;this.backgroundScheduler.remove(this.activeTextDocument)});let h=e.getFeature($e.DidOpenTextDocumentNotification.method);s.push(h.onNotificationSent(p=&gt;{let C=p.original;a(C)&amp;&amp;this.diagnosticRequestor.pull(C,()=&gt;{u(C)})}));for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p,()=&gt;{u(p)});if(i.onChange){let p=e.getFeature($e.DidChangeTextDocumentNotification.method);s.push(p.onNotificationSent(async C=&gt;{let R=C.original.document;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onType))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;C.original.contentChanges.length&gt;0&amp;&amp;this.diagnosticRequestor.pull(R,()=&gt;{this.backgroundScheduler.trigger()})}))}if(i.onSave){let p=e.getFeature($e.DidSaveTextDocumentNotification.method);s.push(p.onNotificationSent(C=&gt;{let R=C.original;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onSave))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;this.diagnosticRequestor.pull(C.original,()=&gt;{this.backgroundScheduler.trigger()})}))}let g=e.getFeature($e.DidCloseTextDocumentNotification.method);s.push(g.onNotificationSent(p=&gt;{let C=p.original;this.diagnosticRequestor.cleanupPull(C),this.backgroundScheduler.remove(C)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=&gt;{for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p)}),r.workspaceDiagnostics===!0&amp;&amp;r.identifier!==&quot;da348dc5-c30a-4515-9d98-31ff3be38d14&quot;&amp;&amp;this.diagnosticRequestor.pullWorkspace(),this.disposable=He.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},fu=class extends Fr.TextDocumentFeature{constructor(e){super(e,$e.Proposed.DocumentDiagnosticRequest.type),this.editorTracker=new au}fillClientCapabilities(e){let t=Gh(Gh(e,&quot;textDocument&quot;),&quot;diagnostic&quot;);t.dynamicRegistration=!0,t.relatedDocumentSupport=!1}initialize(e,t){this._client.onRequest($e.Proposed.DiagnosticRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let t=new du(this._client,this.editorTracker,e);return[t.disposable,t]}};ur.DiagnosticFeature=fu});var Jh=q(qo=&gt;{&quot;use strict&quot;;Object.defineProperty(qo,&quot;__esModule&quot;,{value:!0});qo.TypeHierarchyFeature=void 0;var kD=require(&quot;vscode&quot;),lr=Ce(),hu=it();function Xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var pu=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareTypeHierarchy(e,t,r){if(hu.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,e))return;let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asTypeHierarchyItems(p),p=&gt;i.handleFailedRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,h,p,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},gu=class extends hu.TextDocumentFeature{constructor(e){super(e,lr.Proposed.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=Xh(Xh(e,&quot;textDocument&quot;),&quot;typeHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new pu(t,e);return[kD.languages.registerTypeHierarchyProvider(hu.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};qo.TypeHierarchyFeature=gu});var Yh=q(Oo=&gt;{&quot;use strict&quot;;Object.defineProperty(Oo,&quot;__esModule&quot;,{value:!0});Oo.InlineValueFeature=void 0;var Qh=require(&quot;vscode&quot;),Eo=Ce(),mu=it();function ko(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var vu=class extends mu.TextDocumentFeature{constructor(e){super(e,Eo.Proposed.InlineValuesRequest.type)}fillClientCapabilities(e){ko(ko(e,&quot;textDocument&quot;),&quot;inlineValues&quot;).dynamicRegistration=!0,ko(ko(e,&quot;workspace&quot;),&quot;codeLens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(Eo.Proposed.InlineValuesRefreshRequest.type,async()=&gt;{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValuesProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Qh.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,u)=&gt;{if(mu.$DocumentSelector.skipCellTextDocument(t,o))return;let h=this._client,g=(C,R,E,I)=&gt;{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(C),viewPort:h.code2ProtocolConverter.asRange(R),context:h.code2ProtocolConverter.asInlineValuesContext(E)};return h.sendRequest(Eo.Proposed.InlineValuesRequest.type,F,I).then(A=&gt;h.protocol2CodeConverter.asInlineValues(A),A=&gt;h.handleFailedRequest(Eo.Proposed.InlineValuesRequest.type,I,A,null))},p=h.clientOptions.middleware;return p.provideInlineValues?p.provideInlineValues(o,s,a,u,g):g(o,s,a,u)}};return[Qh.languages.registerInlineValuesProvider(mu.$DocumentSelector.asTextDocumentFilters(t),i),{provider:i,onDidChangeInlineValues:r}]}};Oo.InlineValueFeature=vu});var tp=q(Lo=&gt;{&quot;use strict&quot;;Object.defineProperty(Lo,&quot;__esModule&quot;,{value:!0});Lo.NotebookDocumentSyncFeature=void 0;var ht=require(&quot;vscode&quot;),OD=Mi(),Kt=Ce(),ln=Ce(),yu=it(),xo=Or(),Zh=yn();function ep(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kt;(function(n){let e;(function(t){function r(p,C){return{version:p.version,uri:C.asUri(p.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(p,C,R){let E=Kt.Proposed.NotebookDocument.create(R.asUri(p.uri),p.notebookType,p.version,o(C,R));return Object.keys(p.metadata).length&gt;0&amp;&amp;(E.metadata=s(p.metadata)),E}t.asNotebookDocument=i;function o(p,C){return p.map(R=&gt;a(R,C))}t.asNotebookCells=o;function s(p){return h(new Set,p)}t.asMetadata=s;function a(p,C){let R=Kt.Proposed.NotebookCell.create(u(p.kind),C.asUri(p.document.uri));return Object.keys(p.metadata).length&gt;0&amp;&amp;(R.metadata=s(p.metadata)),p.executionSummary!==void 0&amp;&amp;Zh.number(p.executionSummary.executionOrder)&amp;&amp;Zh.boolean(p.executionSummary.success)&amp;&amp;(R.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),R}t.asNotebookCell=a;function u(p){switch(p){case ht.NotebookCellKind.Markup:return Kt.Proposed.NotebookCellKind.Markup;case ht.NotebookCellKind.Code:return Kt.Proposed.NotebookCellKind.Code}}function h(p,C){if(p.has(C))throw new Error(&quot;Can't deep copy cyclic structures.&quot;);if(Array.isArray(C)){let R=[];for(let E of C)if(E!==null&amp;&amp;typeof E==&quot;object&quot;||Array.isArray(E))R.push(h(p,E));else{if(E instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);R.push(E)}return R}else{let R=Object.keys(C),E=Object.create(null);for(let I of R){let F=C[I];if(F!==null&amp;&amp;typeof F==&quot;object&quot;||Array.isArray(F))E[I]=h(p,F);else{if(F instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);E[I]=F}}return E}}function g(p,C){let R=C.asChangeTextDocumentParams(p);return{document:R.textDocument,changes:R.contentChanges}}t.asTextContentChange=g})(e=n.c2p||(n.c2p={}))})(kt||(kt={}));var Cu;(function(n){function e(t,r,i){let o=t.length,s=r.length,a=0;for(;a&lt;s&amp;&amp;a&lt;o&amp;&amp;Kt.Proposed.NotebookCell.equals(t[a],r[a],i);)a++;if(a&lt;s&amp;&amp;a&lt;o){let u=o-1,h=s-1;for(;u&gt;=0&amp;&amp;h&gt;=0&amp;&amp;Kt.Proposed.NotebookCell.equals(t[u],r[h],i);)u--,h--;let g=u+1-a,p=a===h+1?void 0:r.slice(a,h+1);return p!==void 0?{start:a,deleteCount:g,cells:p}:{start:a,deleteCount:g}}else return a&lt;s?{start:a,deleteCount:0,cells:r.slice(a)}:a&lt;o?{start:a,deleteCount:o-a}:void 0}n.computeDiff=e})(Cu||(Cu={}));var No;(function(n){function e(t,r){if(t.notebookType!==void 0&amp;&amp;r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&amp;&amp;i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new OD.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(No||(No={}));var Io;(function(n){function e(t,r,i){if(i===&quot;cellContent&quot;&amp;&amp;!yu.$DocumentSelector.matchForDocumentSync(t.cellDocumentSelector,r.document)||i===&quot;notebook&quot;&amp;&amp;!yu.$DocumentSelector.matchForProvider(t.cellDocumentSelector,r.document))return!1;let o=r.notebook;for(let s of t.notebookDocumentSelector)if(s.notebookDocumentFilter!==void 0&amp;&amp;No.matchNotebook(s.notebookDocumentFilter,o))return!0;return!1}n.match=e})(Io||(Io={}));var Fo;(function(n){function e(t,r){return{cells:t,uris:new Set(r.map(i=&gt;i.document.uri.toString()))}}n.create=e})(Fo||(Fo={}));var Ri=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.cellExecutionState=new Map,this.notebookDidOpen=new Set,this.disposables=[],ht.workspace.onDidOpenNotebookDocument(r=&gt;{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ht.notebooks.onDidChangeNotebookDocumentMetadata(r=&gt;this.notebookDocumentMetadataChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCells(r=&gt;this.cellStructureChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeCellMetadata(r=&gt;this.cellMetaDataChanged(r.cell.notebook,r.cell),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCellExecutionState(r=&gt;this.cellExecutionStateChanged(r),void 0,this.disposables),this.options.save===!0&amp;&amp;ht.notebooks.onDidSaveNotebookDocument(r=&gt;this.didSave(r),void 0,this.disposables),ht.workspace.onDidCloseNotebookDocument(r=&gt;{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}get mode(){return&quot;notebook&quot;}handles(e){return Io.match(this.options,e,this.mode)}didOpenNotebookCellDocument(e,t){if(!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.getMatchingCells(e,[t]),o=i!==void 0&amp;&amp;i[0]===t;if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(o&amp;&amp;s)return;this.cellStructureChanged(e,r)}else{if(!o)return;this.cellStructureChanged(e,r)}}didChangeCellTextDocument(e,t){!yu.$DocumentSelector.matchForProvider(this.options.cellDocumentSelector,t.document)||this.doSendChange(e,{cells:{textContent:[kt.c2p.asTextContentChange(t,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=null,r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)this.cellStructureChanged(e,r);else{let i=t??this.getMatchingCells(e);if(i===void 0)return;this.doSendOpen(e,i,o=&gt;{this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o.cells,i))}).catch(()=&gt;{})}}notebookDocumentMetadataChanged(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendChange(e,{metadata:kt.c2p.asMetadata(e.metadata)}).catch(()=&gt;{})}cellStructureChanged(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0){let r=this.getMatchingCells(e);if(r===void 0)return;this.didOpen(e,r,t)}else{let r=this.getMatchingCells(e);if(r===void 0){this.didClose(e,t);return}let i=t.cells,o=kt.c2p.asNotebookCells(r,this.client.code2ProtocolConverter),s=Cu.computeDiff(t.cells,o,!1);if(s===void 0)return;let a=s.deleteCount===0?new Set:new Set(i.slice(s.start,s.start+s.deleteCount).map(p=&gt;p.document)),u=s.cells===void 0?new Set:new Set(s.cells.map(p=&gt;p.document));for(let p of Array.from(a.values()))u.has(p)&amp;&amp;(a.delete(p),u.delete(p));let h=[],g=[];if(a.size&gt;0||u.size&gt;0){let p=new Map(r.map(C=&gt;[this.client.code2ProtocolConverter.asUri(C.document.uri),C]));for(let C of u.values()){let R=p.get(C);R!==void 0&amp;&amp;h.push(this.client.code2ProtocolConverter.asTextDocumentItem(R.document))}for(let C of a.values())g.push({uri:C})}this.doSendChange(e,{cells:{structure:{array:s,didClose:g.length&gt;0?g:void 0,didOpen:h.length&gt;0?h:void 0}}}).catch(()=&gt;{}),this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o,r))}}cellMetaDataChanged(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0||!r.uris.has(t.document.uri.toString()))return;let i=kt.c2p.asNotebookCell(t,this.client.code2ProtocolConverter);this.doSendChange(e,{cells:{data:[i]}}).catch(()=&gt;{})}cellExecutionStateChanged(e){if(e.state===ht.NotebookCellExecutionState.Pending)return;let t=e.cell.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0)return;let i=e.cell.document.uri.toString();!r.uris.has(i)||(e.state===ht.NotebookCellExecutionState.Executing&amp;&amp;this.cellExecutionState.set(e.cell.document.uri.toString(),e.state),e.state===ht.NotebookCellExecutionState.Idle&amp;&amp;this.cellExecutionState.has(i)&amp;&amp;(this.cellExecutionState.delete(i),this.doSendChange(t,{cells:{data:[kt.c2p.asNotebookCell(e.cell,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})))}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendSave(e).catch(()=&gt;{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=&gt;t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=&gt;{}),this.notebookSyncInfo.delete(e.uri.toString())}getMatchingCells(e,t=e.getCells()){if(this.options.notebookDocumentSelector!==void 0){for(let r of this.options.notebookDocumentSelector)if(r.notebookDocumentFilter===void 0){if(r.cellSelector===void 0)return;let i=this.filterCells(t,r.cellSelector);return i.length===0?void 0:i}else if(No.matchNotebook(r.notebookDocumentFilter,e))return r.cellSelector===void 0?t:this.filterCells(t,r.cellSelector)}}filterCells(e,t){return e.filter(r=&gt;{let i=r.document.languageId;return t.some(o=&gt;i===o.language)})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t,r){let i=(s,a)=&gt;{let u=kt.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),h=a.map(p=&gt;this.client.code2ProtocolConverter.asTextDocumentItem(p.document)),g=this.client.sendNotification(Kt.Proposed.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:h}).catch(p=&gt;{throw this.client.error(&quot;Sending DidOpenNotebookDocumentNotification failed&quot;,p),p});return r&amp;&amp;r(u),g},o=this.client.clientOptions.middleware?.notebooks;return o?.didOpen!==void 0?o.didOpen(e,t,i):i(e,t)}async sendDidChangeNotebookDocument(e,t){let r=Object.create(null);if(t.metadata&amp;&amp;(r.metadata=kt.c2p.asMetadata(e.metadata)),t.cells!==void 0){let i=Object.create(null),o=t.cells;o.structure&amp;&amp;(i.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:o.structure.array.cells!==void 0?o.structure.array.cells.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter)):void 0},didOpen:o.structure.didOpen!==void 0?o.structure.didOpen.map(s=&gt;this.client.code2ProtocolConverter.asOpenTextDocumentParams(s.document).textDocument):void 0,didClose:o.structure.didClose!==void 0?o.structure.didClose.map(s=&gt;this.client.code2ProtocolConverter.asCloseTextDocumentParams(s.document).textDocument):void 0}),o.data!==void 0&amp;&amp;(i.data=o.data.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter))),o.textContent!==void 0&amp;&amp;(i.textContent=o.textContent.map(s=&gt;kt.c2p.asTextContentChange(s,this.client.code2ProtocolConverter))),Object.keys(i).length&gt;0&amp;&amp;(r.cells=i)}if(Object.keys(r).length&gt;0)return this.doSendChange(e,r)}async doSendChange(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidChangeNotebookDocumentNotification.type,{notebookDocument:kt.c2p.asVersionedNotebookDocumentIdentifier(o,this.client.code2ProtocolConverter),change:s}).catch(a=&gt;{this.client.error(&quot;Sending DidChangeNotebookDocumentNotification failed&quot;,a)}),i=this.client.clientOptions.middleware?.notebooks;return i?.didChange!==void 0?i?.didChange(e,t,r):r(e,t)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=i=&gt;this.client.sendNotification(Kt.Proposed.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}}).catch(o=&gt;{throw this.client.error(&quot;Sending DidSaveNotebookDocumentNotification failed&quot;,o),o}),r=this.client.clientOptions.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidSelectNotebookController(e,t,r){let i=(s,a,u)=&gt;this.client.sendNotification(Kt.Proposed.DidSelectNotebookControllerNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},controller:a,selected:u}).catch(h=&gt;{throw this.client.error(&quot;Sending DidSelectNotebookControllerNotification failed&quot;,h),h}),o=this.client.clientOptions.middleware?.notebooks;return o?.didSelectNotebookController!==void 0?o.didSelectNotebookController(e,t,r,i):i(e,t,r)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=&gt;this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))}).catch(a=&gt;{throw this.client.error(&quot;Sending DidCloseNotebookDocumentNotification failed&quot;,a),a}),i=this.client.clientOptions.middleware?.notebooks;return i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}},Ru=class{constructor(e,t){if(this.client=e,this.options=t,t.cellDocumentSelector.length&gt;0){let r=xo.generateUuid();this.client.getFeature(ln.DidOpenTextDocumentNotification.method).register({id:r,registerOptions:{documentSelector:t.cellDocumentSelector}});let i=xo.generateUuid();this.client.getFeature(ln.DidChangeTextDocumentNotification.method).register({id:i,registerOptions:{documentSelector:t.cellDocumentSelector,syncKind:ln.TextDocumentSyncKind.Incremental}});let o=xo.generateUuid();this.client.getFeature(ln.DidCloseTextDocumentNotification.method).register({id:o,registerOptions:{documentSelector:t.cellDocumentSelector}}),this.registrations={open:r,change:i,close:o}}}get mode(){return&quot;cellContent&quot;}handles(e){return Io.match(this.options,e,this.mode)}dispose(){this.registrations!==void 0&amp;&amp;(this.client.getFeature(ln.DidOpenTextDocumentNotification.method).unregister(this.registrations.open),this.client.getFeature(ln.DidChangeTextDocumentNotification.method).unregister(this.registrations.change),this.client.getFeature(ln.DidCloseTextDocumentNotification.method).unregister(this.registrations.close))}async sendDidOpenTextDocument(e){let t=this.client.getFeature(ln.DidOpenTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No open provider found for notebook cell document ${e.uri.toString()}`))}async sendDidChangeTextDocument(e){let t=this.client.getFeature(ln.DidChangeTextDocumentNotification.method).getProvider(e.document);return t!==void 0?t.send(e):Promise.reject(new Error(`No change provider found for notebook cell document ${e.document.uri.toString()}`))}async sendDidCloseTextDocument(e){let t=this.client.getFeature(ln.DidCloseTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No close provider found for notebook cell document ${e.uri.toString()}`))}},dr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Kt.Proposed.NotebookDocumentSyncRegistrationType.type,ht.workspace.onDidOpenTextDocument(t=&gt;{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.getNotebookDocument(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didOpenNotebookCellDocument(r,i)}),ht.workspace.onDidChangeTextDocument(t=&gt;{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==dr.CellScheme)return;let[i]=this.getNotebookDocument(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didChangeCellTextDocument(i,t)})}fillClientCapabilities(e){let t=ep(ep(e,&quot;notebookDocument&quot;),&quot;synchronization&quot;);t.dynamicRegistration=!0}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??xo.generateUuid();this.register({id:r,registerOptions:t})}register(e){if(e.registerOptions.mode===&quot;cellContent&quot;){let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions,!0)}),r=new Ru(this.client,t);this.registrations.set(e.id,r)}else{let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions)}),r=new Ri(this.client,t);this.registrations.set(e.id,r)}}unregister(e){let t=this.registrations.get(e);t&amp;&amp;t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}getProvider(e){for(let t of this.registrations.values())if(t.handles(e))return t}getNotebookDocument(e){let t=e.uri.toString();for(let r of ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}getNotebookCellTextDocumentFilter(e,t){let r=[];for(let i of e.notebookDocumentSelector){let o;if(i.notebookDocumentFilter!==void 0&amp;&amp;(o=t===!0?{notebookDocument:Object.assign({},i.notebookDocumentFilter,{sync:!0})}:{notebookDocument:Object.assign({},i.notebookDocumentFilter)}),i.cellSelector!==void 0){for(let s of i.cellSelector)o===void 0?r.push(t===!0?{cellLanguage:s.language,sync:!0}:{cellLanguage:s.language}):r.push(Object.assign({},o,{cellLanguage:s.language}));o=void 0}else o!==void 0&amp;&amp;r.push(o)}return r}};Lo.NotebookDocumentSyncFeature=dr;dr.CellScheme=&quot;vscode-notebook-cell&quot;});var Su=q(fr=&gt;{&quot;use strict&quot;;Object.defineProperty(fr,&quot;__esModule&quot;,{value:!0});fr.ProposedFeatures=fr.CommonLanguageClient=void 0;var xD=it(),ND=Ph(),ID=_a(),FD=Eh(),LD=kh(),AD=Oh(),MD=Nh(),jD=Fh(),$D=Ah(),HD=Mh(),WD=$h(),KD=Hh(),Lr=Uh(),UD=Vh(),Du=class extends xD.BaseLanguageClient{constructor(e,t,r){super(e,t,r)}registerProposedFeatures(){this.registerFeatures(sp.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new ID.ConfigurationFeature(this)),this.registerFeature(new LD.TypeDefinitionFeature(this)),this.registerFeature(new FD.ImplementationFeature(this)),this.registerFeature(new ND.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&amp;&amp;this.registerFeature(new AD.WorkspaceFoldersFeature(this)),this.registerFeature(new MD.FoldingRangeFeature(this)),this.registerFeature(new jD.DeclarationFeature(this)),this.registerFeature(new $D.SelectionRangeFeature(this)),this.registerFeature(new HD.ProgressFeature(this)),this.registerFeature(new WD.CallHierarchyFeature(this)),this.registerFeature(new KD.SemanticTokensFeature(this)),this.registerFeature(new UD.LinkedEditingFeature(this)),this.registerFeature(new Lr.DidCreateFilesFeature(this)),this.registerFeature(new Lr.DidRenameFilesFeature(this)),this.registerFeature(new Lr.DidDeleteFilesFeature(this)),this.registerFeature(new Lr.WillCreateFilesFeature(this)),this.registerFeature(new Lr.WillRenameFilesFeature(this)),this.registerFeature(new Lr.WillDeleteFilesFeature(this))}};fr.CommonLanguageClient=Du;var np=Bh(),rp=Jh(),ip=Yh(),op=tp(),sp;(function(n){function e(s){return[new np.DiagnosticFeature(s),new rp.TypeHierarchyFeature(s),new ip.InlineValueFeature(s),new op.NotebookDocumentSyncFeature(s)]}n.createAll=e;function t(s){return new np.DiagnosticFeature(s)}n.createDiagnosticFeature=t;function r(s){return new rp.TypeHierarchyFeature(s)}n.createTypeHierarchyFeature=r;function i(s){return new ip.InlineValueFeature(s)}n.createInlineValueFeature=i;function o(s){return new op.NotebookDocumentSyncFeature(s)}n.createNotebookDocumentSyncFeature=o})(sp=fr.ProposedFeatures||(fr.ProposedFeatures={}))});var cp=q(Ao=&gt;{&quot;use strict&quot;;Object.defineProperty(Ao,&quot;__esModule&quot;,{value:!0});Ao.terminate=void 0;var ap=require(&quot;child_process&quot;),zD=require(&quot;path&quot;),VD=process.platform===&quot;win32&quot;,GD=process.platform===&quot;darwin&quot;,BD=process.platform===&quot;linux&quot;;function XD(n,e){if(VD)try{let i={stdio:[&quot;pipe&quot;,&quot;pipe&quot;,&quot;ignore&quot;]};return e&amp;&amp;(i.cwd=e),ap.execFileSync(&quot;taskkill&quot;,[&quot;/T&quot;,&quot;/F&quot;,&quot;/PID&quot;,n.pid.toString()],i),!0}catch{return!1}else if(BD||GD)try{var t=(0,zD.join)(__dirname,&quot;terminateProcess.sh&quot;),r=ap.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill(&quot;SIGKILL&quot;),!0}Ao.terminate=XD});var wu=q((Sb,up)=&gt;{&quot;use strict&quot;;up.exports=Ce()});var lp=q(_n=&gt;{&quot;use strict&quot;;var JD=_n&amp;&amp;_n.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),bu=_n&amp;&amp;_n.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;JD(e,n,t)};Object.defineProperty(_n,&quot;__esModule&quot;,{value:!0});bu(Ce(),_n);bu(it(),_n);bu(Su(),_n)});var pp=q(vt=&gt;{&quot;use strict&quot;;var QD=vt&amp;&amp;vt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),hp=vt&amp;&amp;vt.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;QD(e,n,t)};Object.defineProperty(vt,&quot;__esModule&quot;,{value:!0});vt.SettingMonitor=vt.LanguageClient=vt.TransportKind=void 0;var Tn=require(&quot;child_process&quot;),_u=require(&quot;fs&quot;),Tu=require(&quot;path&quot;),dp=Ed(),jn=require(&quot;vscode&quot;),Ee=yn(),YD=Su(),ZD=it(),eS=cp(),xe=wu();hp(wu(),vt);hp(lp(),vt);var fp=&quot;^1.63.0&quot;,Le;(function(n){n[n.stdio=0]=&quot;stdio&quot;,n[n.ipc=1]=&quot;ipc&quot;,n[n.pipe=2]=&quot;pipe&quot;,n[n.socket=3]=&quot;socket&quot;})(Le=vt.TransportKind||(vt.TransportKind={}));var Mn;(function(n){function e(t){let r=t;return r&amp;&amp;r.kind===Le.socket&amp;&amp;Ee.number(r.port)}n.isSocket=e})(Mn||(Mn={}));var Pu;(function(n){function e(t){return Ee.string(t.command)}n.is=e})(Pu||(Pu={}));var qu;(function(n){function e(t){return Ee.string(t.module)}n.is=e})(qu||(qu={}));var Eu;(function(n){function e(t){let r=t;return r&amp;&amp;r.writer!==void 0&amp;&amp;r.reader!==void 0}n.is=e})(Eu||(Eu={}));var ku;(function(n){function e(t){let r=t;return r&amp;&amp;r.process!==void 0&amp;&amp;typeof r.detached==&quot;boolean&quot;}n.is=e})(ku||(ku={}));var Ou=class extends YD.CommonLanguageClient{constructor(e,t,r,i,o){let s,a,u,h,g;Ee.string(t)?(s=e,a=t,u=r,h=i,g=!!o):(s=e.toLowerCase(),a=e,u=t,h=r,g=i),g===void 0&amp;&amp;(g=!1),super(s,a,h),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(p){throw Ee.string(p.message)&amp;&amp;this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=dp.parse(jn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jn.version}`);if(e.prerelease&amp;&amp;e.prerelease.length&gt;0&amp;&amp;(e.prerelease=[]),!dp.satisfies(e,fp))throw new Error(`The language client requires VS Code version ${fp} but received version ${jn.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=&gt;setTimeout(e,1e3)),this.start()):this.start()}stop(e=2e3){return super.stop(e).finally(()=&gt;{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&amp;&amp;this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=&gt;{try{process.kill(e.pid,0),(0,eS.terminate)(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&amp;&amp;(e.processId=process.pid)}createMessageTransports(e){function t(g,p){if(!g&amp;&amp;!p)return;let C=Object.create(null);return Object.keys(process.env).forEach(R=&gt;C[R]=process.env[R]),p&amp;&amp;(C.ELECTRON_RUN_AS_NODE=&quot;1&quot;,C.ELECTRON_NO_ASAR=&quot;1&quot;),g&amp;&amp;Object.keys(g).forEach(R=&gt;C[R]=g[R]),C}let r=[&quot;--debug=&quot;,&quot;--debug-brk=&quot;,&quot;--inspect=&quot;,&quot;--inspect-brk=&quot;],i=[&quot;--debug&quot;,&quot;--debug-brk&quot;,&quot;--inspect&quot;,&quot;--inspect-brk&quot;];function o(){let g=process.execArgv;return g?g.some(p=&gt;r.some(C=&gt;p.startsWith(C))||i.some(C=&gt;p===C)):!1}function s(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error(&quot;Process created without stdio streams&quot;)}let a=this._serverOptions;if(Ee.func(a))return a().then(g=&gt;{if(ZD.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Eu.is(g))return this._isDetached=!!g.detached,{reader:new xe.StreamMessageReader(g.reader),writer:new xe.StreamMessageWriter(g.writer)};{let p;return ku.is(g)?(p=g.process,this._isDetached=g.detached):(p=g,this._isDetached=!1),p.stderr.on(&quot;data&quot;,C=&gt;this.outputChannel.append(Ee.string(C)?C:C.toString(e))),{reader:new xe.StreamMessageReader(p.stdout),writer:new xe.StreamMessageWriter(p.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||o()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(g=&gt;{if(qu.is(u)&amp;&amp;u.module){let p=u,C=p.transport||Le.stdio;if(p.runtime){let R=[],E=p.options??Object.create(null);E.execArgv&amp;&amp;E.execArgv.forEach(N=&gt;R.push(N)),R.push(p.module),p.args&amp;&amp;p.args.forEach(N=&gt;R.push(N));let I=Object.create(null);I.cwd=g,I.env=t(E.env,!1);let F=this._getRuntimePath(p.runtime,g),A;if(C===Le.ipc?(I.stdio=[null,null,null,&quot;ipc&quot;],R.push(&quot;--node-ipc&quot;)):C===Le.stdio?R.push(&quot;--stdio&quot;):C===Le.pipe?(A=(0,xe.generateRandomPipeName)(),R.push(`--pipe=${A}`)):Mn.isSocket(C)&amp;&amp;R.push(`--socket=${C.port}`),R.push(`--clientProcessId=${process.pid.toString()}`),C===Le.ipc||C===Le.stdio){let N=Tn.spawn(F,R,I);return!N||!N.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(N),writer:new xe.IPCMessageWriter(N)})):Promise.resolve({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)}))}else{if(C===Le.pipe)return(0,xe.createClientPipeTransport)(A).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))});if(Mn.isSocket(C))return(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))})}}else{let R;return new Promise((E,I)=&gt;{let F=(p.args&amp;&amp;p.args.slice())??[];C===Le.ipc?F.push(&quot;--node-ipc&quot;):C===Le.stdio?F.push(&quot;--stdio&quot;):C===Le.pipe?(R=(0,xe.generateRandomPipeName)(),F.push(`--pipe=${R}`)):Mn.isSocket(C)&amp;&amp;F.push(`--socket=${C.port}`),F.push(`--clientProcessId=${process.pid.toString()}`);let A=p.options??Object.create(null);if(A.env=t(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=g,A.silent=!0,C===Le.ipc||C===Le.stdio){let N=Tn.fork(p.module,F||[],A);s(N),this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),E({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):E({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)})}else C===Le.pipe?(0,xe.createClientPipeTransport)(R).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I):Mn.isSocket(C)&amp;&amp;(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I)})}}else if(Pu.is(u)&amp;&amp;u.command){let p=u,C=u.args!==void 0?u.args.slice(0):[],R,E=u.transport;if(E===Le.stdio)C.push(&quot;--stdio&quot;);else if(E===Le.pipe)R=(0,xe.generateRandomPipeName)(),C.push(`--pipe=${R}`);else if(Mn.isSocket(E))C.push(`--socket=${E.port}`);else if(E===Le.ipc)throw new Error(&quot;Transport kind ipc is not support for command executable&quot;);let I=Object.assign({},p.options);if(I.cwd=I.cwd||g,E===void 0||E===Le.stdio){let F=Tn.spawn(p.command,C,I);return!F||!F.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(F.stderr.on(&quot;data&quot;,A=&gt;this.outputChannel.append(Ee.string(A)?A:A.toString(e))),this._serverProcess=F,this._isDetached=!!I.detached,Promise.resolve({reader:new xe.StreamMessageReader(F.stdout),writer:new xe.StreamMessageWriter(F.stdin)}))}else{if(E===Le.pipe)return(0,xe.createClientPipeTransport)(R).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))});if(Mn.isSocket(E))return(0,xe.createClientSocketTransport)(E.port).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))})}}return Promise.reject(new Error(&quot;Unsupported server configuration &quot;+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Tu.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Tu.join(r,e);if(_u.existsSync(i))return i}if(t!==void 0){let i=Tu.join(t,e);if(_u.existsSync(i))return i}return e}_mainGetRootPath(){let e=jn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}_getServerWorkingDir(e){let t=e&amp;&amp;e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=&gt;{_u.lstat(t,(i,o)=&gt;{r(!i&amp;&amp;o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return&quot;en&quot;;let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!=&quot;string&quot;?&quot;en&quot;:t.locale}};vt.LanguageClient=Ou;var xu=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jn.Disposable(()=&gt;{this._client.needsStop()&amp;&amp;this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf(&quot;.&quot;),t=e&gt;=0?this._setting.substr(0,e):this._setting,r=e&gt;=0?this._setting.substr(e+1):void 0,i=r?jn.workspace.getConfiguration(t).get(r,!1):jn.workspace.getConfiguration(t);i&amp;&amp;this._client.needsStart()?this._client.start():!i&amp;&amp;this._client.needsStop()&amp;&amp;this._client.stop()}};vt.SettingMonitor=xu});var mp=q((_b,gp)=&gt;{&quot;use strict&quot;;gp.exports=pp()});var rS={};_p(rS,{activate:()=&gt;tS,activateInlayHints:()=&gt;yp,deactivate:()=&gt;nS});module.exports=Pp(rS);var Ut=require(&quot;vscode&quot;),vp=Tp(mp()),Di;async function tS(n){let e=Ut.window.createOutputChannel(&quot;Hexpat Language Server trace&quot;),r={command:process.env.HEXPAT_SERVER_PATH||&quot;hexpat-language-server&quot;,options:{env:{...process.env,RUST_LOG:&quot;debug&quot;}}},i={run:r,debug:r},o={documentSelector:[{scheme:&quot;file&quot;,language:&quot;hexpat&quot;}],synchronize:{fileEvents:Ut.workspace.createFileSystemWatcher(&quot;**/.clientrc&quot;)},traceOutputChannel:e};Di=new vp.LanguageClient(&quot;hexpat-language-server&quot;,&quot;hexpat language server&quot;,i,o),yp(n),Di.start()}function nS(){if(!!Di)return Di.stop()}function yp(n){let e={hintsProvider:null,updateHintsEventEmitter:new Ut.EventEmitter,async onConfigChange(){this.dispose();let t=this.updateHintsEventEmitter.event;this.hintsProvider=Ut.languages.registerInlayHintsProvider({scheme:&quot;file&quot;,language:&quot;hexpat&quot;},new class{constructor(){this.onDidChangeInlayHints=t}resolveInlayHint(r,i){return{label:r.label,...r}}async provideInlayHints(r,i,o){let s=await Di.sendRequest(&quot;custom/inlay_hint&quot;,{path:r.uri.toString()}).catch(a=&gt;null);return s==null?[]:s.map(a=&gt;{let[u,h,g]=a,p=r.positionAt(u);return{position:r.positionAt(h),paddingLeft:!0,label:[{value:g,location:new Ut.Location(r.uri,p)}]}})}})},onDidChangeTextDocument({contentChanges:t,document:r}){},dispose(){var t;(t=this.hintsProvider)==null||t.dispose(),this.hintsProvider=null,this.updateHintsEventEmitter.dispose()}};Ut.workspace.onDidChangeConfiguration(e.onConfigChange,e,n.subscriptions),Ut.workspace.onDidChangeTextDocument(e.onDidChangeTextDocument,e,n.subscriptions),e.onConfigChange().catch(console.error)}0&amp;&amp;(module.exports={activate,activateInlayHints,deactivate});
</failure>
		</testcase>
		<testcase name="javascript.lang.security.detect-child-process.detect-child-process" classname="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" file="/Users/zta/Docs/EC521/EC521/src/unzipped/calcoph-hexpat-language-server-0.2.0/extension/client/out/extension.js" line="39">
			<failure type="ERROR" message="Detected calls to child_process from a function argument `g`. This could lead to a command injection if the input is user controllable. Try to avoid calls to child_process, and if it is needed ensure user input is correctly sanitized or sandboxed. ">`+t.data.toString():&quot;&quot;}`}return e instanceof Error?De.string(e.stack)?e.stack:e.message:De.string(e)?e:e.toString()}info(e,t,r=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Info&amp;&amp;this.showNotificationMessage(y.MessageType.Info,e)}warn(e,t,r=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Warn&amp;&amp;this.showNotificationMessage(y.MessageType.Warning,e)}error(e,t,r=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${e}`),t!=null&amp;&amp;this.outputChannel.appendLine(this.data2String(t)),(r===&quot;force&quot;||r&amp;&amp;this._clientOptions.revealOutputChannelOn&lt;=pi.Error)&amp;&amp;this.showNotificationMessage(y.MessageType.Error,e)}showNotificationMessage(e,t){t=t??&quot;A request has failed. See the output for more information.&quot;,(e===y.MessageType.Error?K.window.showErrorMessage:e===y.MessageType.Warning?K.window.showWarningMessage:K.window.showInformationMessage)(t,&quot;Go to output&quot;).then(i=&gt;{i!==void 0&amp;&amp;this.outputChannel.show(!0)})}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),t&amp;&amp;this.traceOutputChannel.appendLine(this.data2String(t))}logObjectTrace(e){e.isLSPMessage&amp;&amp;e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&amp;&amp;this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.state===qe.Initial||this.state===qe.Stopping||this.state===qe.Stopped}needsStop(){return this.state===qe.Starting||this.state===qe.Running}onReady(){return this._onReady}isConnectionActive(){return this.state===qe.Running&amp;&amp;!!this._resolvedConnection}start(){return this._onReadyCallbacks.isUsed&amp;&amp;(this._onReady=new Promise((e,t)=&gt;{this._onReadyCallbacks=new ao(e,t)})),this._listeners=[],this._providers=[],this._diagnostics||(this._diagnostics=this._clientOptions.diagnosticCollectionName?K.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):K.languages.createDiagnosticCollection()),this.state=qe.Starting,this.resolveConnection().then(e=&gt;(e.onLogMessage(t=&gt;{switch(t.type){case y.MessageType.Error:this.error(t.message,void 0,!1);break;case y.MessageType.Warning:this.warn(t.message,void 0,!1);break;case y.MessageType.Info:this.info(t.message,void 0,!1);break;default:this.outputChannel.appendLine(t.message)}}),e.onShowMessage(t=&gt;{switch(t.type){case y.MessageType.Error:K.window.showErrorMessage(t.message);break;case y.MessageType.Warning:K.window.showWarningMessage(t.message);break;case y.MessageType.Info:K.window.showInformationMessage(t.message);break;default:K.window.showInformationMessage(t.message)}}),e.onRequest(y.ShowMessageRequest.type,t=&gt;{let r;switch(t.type){case y.MessageType.Error:r=K.window.showErrorMessage;break;case y.MessageType.Warning:r=K.window.showWarningMessage;break;case y.MessageType.Info:r=K.window.showInformationMessage;break;default:r=K.window.showInformationMessage}let i=t.actions||[];return r(t.message,...i)}),e.onTelemetry(t=&gt;{this._telemetryEmitter.fire(t)}),e.onRequest(y.ShowDocumentRequest.type,async t=&gt;{let r=async o=&gt;{let s=this.protocol2CodeConverter.asUri(o.uri);try{if(o.external===!0)return{success:await K.env.openExternal(s)};{let a={};return o.selection!==void 0&amp;&amp;(a.selection=this.protocol2CodeConverter.asRange(o.selection)),o.takeFocus===void 0||o.takeFocus===!1?a.preserveFocus=!0:o.takeFocus===!0&amp;&amp;(a.preserveFocus=!1),await K.window.showTextDocument(s,a),{success:!0}}}catch{return{success:!0}}},i=this._clientOptions.middleware.window?.showDocument;return i!==void 0?i(t,r):r(t)}),e.listen(),this.initialize(e))).catch(e=&gt;{this.state=qe.StartFailed,this._onReadyCallbacks.reject(e),this.error(`${this._name} client: couldn't create connection to server`,e,&quot;force&quot;)}),new K.Disposable(()=&gt;{this.needsStop()&amp;&amp;this.stop().catch(e=&gt;{this.error(&quot;Stopping server failed.&quot;,e,!1)})})}resolveConnection(){return this._connectionPromise||(this._connectionPromise=this.createConnection()),this._connectionPromise}initialize(e){this.refreshTrace(e,!1);let t=this._clientOptions.initializationOptions,[r,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:K.env.appName,version:K.version},locale:this.getLocale(),rootPath:r||null,rootUri:r?this._c2p.asUri(K.Uri.file(r)):null,capabilities:this.computeClientCapabilities(),initializationOptions:De.func(t)?t():t,trace:y.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let s=Se.generateUuid(),a=new lD.ProgressPart(e,s);return o.workDoneToken=s,this.doInitialize(e,o).then(u=&gt;(a.done(),u),u=&gt;{throw a.cancel(),u})}else return this.doInitialize(e,o)}doInitialize(e,t){return e.initialize(t).then(r=&gt;{this._resolvedConnection=e,this._initializeResult=r,this.state=qe.Running;let i;return De.number(r.capabilities.textDocumentSync)?r.capabilities.textDocumentSync===y.TextDocumentSyncKind.None?i={openClose:!1,change:y.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:r.capabilities.textDocumentSync,save:{includeText:!1}}:r.capabilities.textDocumentSync!==void 0&amp;&amp;r.capabilities.textDocumentSync!==null&amp;&amp;(i=r.capabilities.textDocumentSync),this._capabilities=Object.assign({},r.capabilities,{resolvedTextDocumentSync:i}),e.onDiagnostics(o=&gt;this.handleDiagnostics(o)),e.onRequest(y.RegistrationRequest.type,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(&quot;client/registerFeature&quot;,o=&gt;this.handleRegistrationRequest(o)),e.onRequest(y.UnregistrationRequest.type,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(&quot;client/unregisterFeature&quot;,o=&gt;this.handleUnregistrationRequest(o)),e.onRequest(y.ApplyWorkspaceEditRequest.type,o=&gt;this.handleApplyWorkspaceEdit(o)),e.sendNotification(y.InitializedNotification.type,{}).then(()=&gt;(this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),this._onReadyCallbacks.resolve(),r))}).then(void 0,r=&gt;{throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(r)?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r)):r instanceof y.ResponseError&amp;&amp;r.data&amp;&amp;r.data.retry?K.window.showErrorMessage(r.message,{title:&quot;Retry&quot;,id:&quot;retry&quot;}).then(i=&gt;{i&amp;&amp;i.id===&quot;retry&quot;?this.initialize(e):(this.stop(),this._onReadyCallbacks.reject(r))}):(r&amp;&amp;r.message&amp;&amp;K.window.showErrorMessage(r.message),this.error(&quot;Server initialization failed.&quot;,r),this.stop(),this._onReadyCallbacks.reject(r)),r})}_clientGetRootPath(){let e=K.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}async stop(e=2e3){if(await this.onReady(),this._initializeResult=void 0,!this._connectionPromise)return this.state=qe.Stopped,Promise.resolve();if(this.state===qe.Stopping&amp;&amp;this._onStop)return this._onStop;this.state=qe.Stopping,this.cleanUp(!1);let t=new Promise(i=&gt;{(0,y.RAL)().timer.setTimeout(i,e)}),r=this.resolveConnection().then(i=&gt;i.shutdown().then(()=&gt;i.exit().then(()=&gt;i)));return this._onStop=Promise.race([t,r]).then(i=&gt;{if(i!==void 0)i.end(),i.dispose();else throw this.error(&quot;Stopping server timed out&quot;,void 0,!1),new Error(&quot;Stopping the server timed out&quot;)},i=&gt;{throw this.error(&quot;Stopping server failed&quot;,i,!1),i}).finally(()=&gt;{this.state=qe.Stopped,this.cleanUpChannel(),this._onStop=void 0,this._connectionPromise=void 0,this._resolvedConnection=void 0})}cleanUp(e=!0,t=!0){this._fileEvents=[],this._fileEventDelayer.cancel(),this._listeners&amp;&amp;(this._listeners.forEach(r=&gt;r.dispose()),this._listeners=void 0),this._providers&amp;&amp;(this._providers.forEach(r=&gt;r.dispose()),this._providers=void 0),this._syncedDocuments&amp;&amp;this._syncedDocuments.clear();for(let r of Array.from(this._features.entries()).map(i=&gt;i[1]).reverse())r.dispose();e&amp;&amp;this.cleanUpChannel(),t&amp;&amp;this._diagnostics&amp;&amp;(this._diagnostics.dispose(),this._diagnostics=void 0)}cleanUpChannel(){this._outputChannel&amp;&amp;this._disposeOutputChannel&amp;&amp;(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let t=this;async function r(o){return t._fileEvents.push(o),t._fileEventDelayer.trigger(async()=&gt;{await t.onReady();let s=await t.resolveConnection(),a=Promise.resolve();return t.isConnectionActive()&amp;&amp;(t.forceDocumentSync(),a=s.didChangeWatchedFiles({changes:t._fileEvents})),t._fileEvents=[],a})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,r):r(e)).catch(o=&gt;{t.error(&quot;Notify file events failed.&quot;,o)})}forceDocumentSync(){this._didChangeTextDocumentFeature===void 0&amp;&amp;(this._didChangeTextDocumentFeature=this._dynamicFeatures.get(y.DidChangeTextDocumentNotification.type.method)),this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics)return;let t=this._p2c.asUri(e.uri),r=this._p2c.asDiagnostics(e.diagnostics),i=this.clientOptions.middleware;i.handleDiagnostics?i.handleDiagnostics(t,r,(o,s)=&gt;this.setDiagnostics(o,s)):this.setDiagnostics(t,r)}setDiagnostics(e,t){!this._diagnostics||this._diagnostics.set(e,t)}createConnection(){let e=(r,i,o)=&gt;{this.handleConnectionError(r,i,o)},t=()=&gt;{this.handleConnectionClosed()};return this.createMessageTransports(this._clientOptions.stdioEncoding||&quot;utf8&quot;).then(r=&gt;dD(r.reader,r.writer,e,t,this._clientOptions.connectionOptions))}handleConnectionClosed(){if(this.state===qe.Stopped)return;try{this._resolvedConnection&amp;&amp;this._resolvedConnection.dispose()}catch{}let e={action:sr.DoNotRestart};if(this.state!==qe.Stopping)try{e=this._clientOptions.errorHandler.closed()}catch{}this._connectionPromise=void 0,this._resolvedConnection=void 0,e.action===sr.DoNotRestart?(this.error(e.message??&quot;Connection to server got closed. Server will not be restarted.&quot;,void 0,&quot;force&quot;),this.state===qe.Starting?(this._onReadyCallbacks.reject(new Error(&quot;Connection to server got closed. Server will not be restarted.&quot;)),this.state=qe.StartFailed):this.state=qe.Stopped,this.cleanUp(!1,!0)):e.action===sr.Restart&amp;&amp;(this.info(e.message??&quot;Connection to server got closed. Server will restart.&quot;),this.cleanUp(!1,!1),this.state=qe.Initial,this.start())}handleConnectionError(e,t,r){let i=this._clientOptions.errorHandler.error(e,t,r);i.action===so.Shutdown&amp;&amp;(this.error(i.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,&quot;force&quot;),this.stop().catch(o=&gt;{this.error(&quot;Stopping server failed&quot;,o,!1)}))}hookConfigurationChanged(e){K.workspace.onDidChangeConfiguration(()=&gt;{this.refreshTrace(e,!0)})}refreshTrace(e,t=!1){let r=K.workspace.getConfiguration(this._id),i=y.Trace.Off,o=y.TraceFormat.Text;if(r){let s=r.get(&quot;trace.server&quot;,&quot;off&quot;);typeof s==&quot;string&quot;?i=y.Trace.fromString(s):(i=y.Trace.fromString(r.get(&quot;trace.server.verbosity&quot;,&quot;off&quot;)),o=y.TraceFormat.fromString(r.get(&quot;trace.server.format&quot;,&quot;text&quot;)))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat})}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t)return;let r;De.array(t)?r=t:r=[t],r&amp;&amp;this._dynamicFeatures.get(y.DidChangeWatchedFilesNotification.type.method).registerRaw(Se.generateUuid(),r)}registerFeatures(e){for(let t of e)this.registerFeature(t)}registerFeature(e){if(this._features.push(e),rc.is(e)){let t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}registerBuiltinFeatures(){this.registerFeature(new Pc(this)),this.registerFeature(new ic(this,this._syncedDocuments)),this.registerFeature(new sc(this)),this.registerFeature(new ac(this)),this.registerFeature(new cc(this)),this.registerFeature(new uc(this)),this.registerFeature(new oc(this,this._syncedDocuments)),this.registerFeature(new lc(this,e=&gt;this.notifyFileEvent(e))),this.registerFeature(new fc(this)),this.registerFeature(new hc(this)),this.registerFeature(new pc(this)),this.registerFeature(new gc(this)),this.registerFeature(new mc(this)),this.registerFeature(new vc(this)),this.registerFeature(new yc(this)),this.registerFeature(new Cc(this)),this.registerFeature(new Rc(this)),this.registerFeature(new Dc(this)),this.registerFeature(new Sc(this)),this.registerFeature(new wc(this)),this.registerFeature(new bc(this)),this.registerFeature(new _c(this)),this.registerFeature(new Tc(this)),this.registerFeature(new qc(this))}fillInitializeParams(e){for(let t of this._features)De.func(t.fillInitializeParams)&amp;&amp;t.fillInitializeParams(e)}computeClientCapabilities(){let e={};V(e,&quot;workspace&quot;).applyEdit=!0;let t=V(V(e,&quot;workspace&quot;),&quot;workspaceEdit&quot;);t.documentChanges=!0,t.resourceOperations=[y.ResourceOperationKind.Create,y.ResourceOperationKind.Rename,y.ResourceOperationKind.Delete],t.failureHandling=y.FailureHandlingKind.TextOnlyTransactional,t.normalizesLineEndings=!0,t.changeAnnotationSupport={groupsOnLabel:!0};let r=V(V(e,&quot;textDocument&quot;),&quot;publishDiagnostics&quot;);r.relatedInformation=!0,r.versionSupport=!1,r.tagSupport={valueSet:[y.DiagnosticTag.Unnecessary,y.DiagnosticTag.Deprecated]},r.codeDescriptionSupport=!0,r.dataSupport=!0;let i=V(e,&quot;window&quot;),o=V(i,&quot;showMessage&quot;);o.messageActionItem={additionalPropertiesSupport:!0};let s=V(i,&quot;showDocument&quot;);s.support=!0;let a=V(e,&quot;general&quot;);a.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(ar.RequestsToCancelOnContentModified)},a.regularExpressions={engine:&quot;ECMAScript&quot;,version:&quot;ES2020&quot;},a.markdown={parser:&quot;marked&quot;,version:&quot;1.1.0&quot;},this._clientOptions.markdown.supportHtml&amp;&amp;(a.markdown.allowedTags=[&quot;ul&quot;,&quot;li&quot;,&quot;p&quot;,&quot;code&quot;,&quot;blockquote&quot;,&quot;ol&quot;,&quot;h1&quot;,&quot;h2&quot;,&quot;h3&quot;,&quot;h4&quot;,&quot;h5&quot;,&quot;h6&quot;,&quot;hr&quot;,&quot;em&quot;,&quot;pre&quot;,&quot;table&quot;,&quot;thead&quot;,&quot;tbody&quot;,&quot;tr&quot;,&quot;th&quot;,&quot;td&quot;,&quot;div&quot;,&quot;del&quot;,&quot;a&quot;,&quot;strong&quot;,&quot;br&quot;,&quot;img&quot;,&quot;span&quot;]);for(let u of this._features)u.fillClientCapabilities(e);return e}initializeFeatures(e){let t=this._clientOptions.documentSelector;for(let r of this._features)r.initialize(this._capabilities,t)}handleRegistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.registrations){let o=this._dynamicFeatures.get(i.method);if(o===void 0){r(new Error(`No feature implementation for ${i.method} found. Registration failed.`));return}let s=i.registerOptions??{};s.documentSelector=s.documentSelector??this._clientOptions.documentSelector;let a={id:i.id,registerOptions:s};try{o.register(a)}catch(u){r(u);return}}t()})}handleUnregistrationRequest(e){return new Promise((t,r)=&gt;{for(let i of e.unregisterations){let o=this._dynamicFeatures.get(i.method);if(!o){r(new Error(`No feature implementation for ${i.method} found. Unregistration failed.`));return}o.unregister(i.id)}t()})}handleApplyWorkspaceEdit(e){let t=e.edit,r=new Map;K.workspace.textDocuments.forEach(o=&gt;r.set(o.uri.toString(),o));let i=!1;if(t.documentChanges){for(let o of t.documentChanges)if(y.TextDocumentEdit.is(o)&amp;&amp;o.textDocument.version&amp;&amp;o.textDocument.version&gt;=0){let s=r.get(o.textDocument.uri);if(s&amp;&amp;s.version!==o.textDocument.version){i=!0;break}}}return i?Promise.resolve({applied:!1}):De.asPromise(K.workspace.applyEdit(this._p2c.asWorkspaceEdit(e.edit)).then(o=&gt;({applied:o})))}handleFailedRequest(e,t,r,i,o=!0){if(r instanceof y.ResponseError){if(r.code===y.LSPErrorCodes.RequestCancelled||r.code===y.LSPErrorCodes.ServerCancelled){if(t!==void 0&amp;&amp;t.isCancellationRequested)return i;throw r.data!==void 0?new co(r.data):new K.CancellationError}else if(r.code===y.LSPErrorCodes.ContentModified){if(ar.RequestsToCancelOnContentModified.has(e.method))throw new K.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,r,o),r}};ye.BaseLanguageClient=ar;ar.RequestsToCancelOnContentModified=new Set([y.SemanticTokensRequest.method,y.SemanticTokensRangeRequest.method,y.SemanticTokensDeltaRequest.method])});var Ph=q(lo=&gt;{&quot;use strict&quot;;Object.defineProperty(lo,&quot;__esModule&quot;,{value:!0});lo.ColorProviderFeature=void 0;var uo=require(&quot;vscode&quot;),mi=Ce(),Ec=it();function Th(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kc=class extends Ec.TextDocumentFeature{constructor(e){super(e,mi.DocumentColorRequest.type)}fillClientCapabilities(e){Th(Th(e,&quot;textDocument&quot;),&quot;colorProvider&quot;).dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.colorProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideColorPresentations:(i,o,s)=&gt;{let a=this._client,u=(g,p,C)=&gt;{let R={color:g,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p.document),range:a.code2ProtocolConverter.asRange(p.range)};return a.sendRequest(mi.ColorPresentationRequest.type,R,C).then(this.asColorPresentations.bind(this),E=&gt;a.handleFailedRequest(mi.ColorPresentationRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideColorPresentations?h.provideColorPresentations(i,o,s,u):u(i,o,s)},provideDocumentColors:(i,o)=&gt;{if(Ec.$DocumentSelector.skipCellTextDocument(t,i))return;let s=this._client,a=(h,g)=&gt;{let p={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(h)};return s.sendRequest(mi.DocumentColorRequest.type,p,g).then(this.asColorInformations.bind(this),C=&gt;s.handleFailedRequest(mi.ColorPresentationRequest.type,g,C,null))},u=s.clientOptions.middleware;return u.provideDocumentColors?u.provideDocumentColors(i,o,a):a(i,o)}};return[uo.languages.registerColorProvider(Ec.$DocumentSelector.asTextDocumentFilters(t),r),r]}asColor(e){return new uo.Color(e.red,e.green,e.blue,e.alpha)}asColorInformations(e){return Array.isArray(e)?e.map(t=&gt;new uo.ColorInformation(this._client.protocol2CodeConverter.asRange(t.range),this.asColor(t.color))):[]}asColorPresentations(e){return Array.isArray(e)?e.map(t=&gt;{let r=new uo.ColorPresentation(t.label);return r.additionalTextEdits=this._client.protocol2CodeConverter.asTextEdits(t.additionalTextEdits),r.textEdit=this._client.protocol2CodeConverter.asTextEdit(t.textEdit),r}):[]}};lo.ColorProviderFeature=kc});var Eh=q(fo=&gt;{&quot;use strict&quot;;Object.defineProperty(fo,&quot;__esModule&quot;,{value:!0});fo.ImplementationFeature=void 0;var gD=require(&quot;vscode&quot;),Oc=Ce(),xc=it();function qh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Nc=class extends xc.TextDocumentFeature{constructor(e){super(e,Oc.ImplementationRequest.type)}fillClientCapabilities(e){let t=qh(qh(e,&quot;textDocument&quot;),&quot;implementation&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.implementationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideImplementation:(i,o,s)=&gt;{if(xc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Oc.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Oc.ImplementationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideImplementation?h.provideImplementation(i,o,s,u):u(i,o,s)}};return[gD.languages.registerImplementationProvider(xc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};fo.ImplementationFeature=Nc});var kh=q(po=&gt;{&quot;use strict&quot;;Object.defineProperty(po,&quot;__esModule&quot;,{value:!0});po.TypeDefinitionFeature=void 0;var mD=require(&quot;vscode&quot;),Ic=Ce(),Fc=it();function ho(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Lc=class extends Fc.TextDocumentFeature{constructor(e){super(e,Ic.TypeDefinitionRequest.type)}fillClientCapabilities(e){ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;).dynamicRegistration=!0;let t=ho(ho(e,&quot;textDocument&quot;),&quot;typeDefinition&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeDefinitionProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideTypeDefinition:(i,o,s)=&gt;{if(Fc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Ic.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDefinitionResult,R=&gt;a.handleFailedRequest(Ic.TypeDefinitionRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideTypeDefinition?h.provideTypeDefinition(i,o,s,u):u(i,o,s)}};return[mD.languages.registerTypeDefinitionProvider(Fc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};po.TypeDefinitionFeature=Lc});var Oh=q(xr=&gt;{&quot;use strict&quot;;Object.defineProperty(xr,&quot;__esModule&quot;,{value:!0});xr.WorkspaceFoldersFeature=xr.arrayDiff=void 0;var vD=Or(),go=require(&quot;vscode&quot;),vi=Ce();function Ac(n,e){if(n!==void 0)return n[e]}function Mc(n,e){return n.filter(t=&gt;e.indexOf(t)&lt;0)}xr.arrayDiff=Mc;var jc=class{constructor(e){this._client=e,this._listeners=new Map}get registrationType(){return vi.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let t=go.workspace.workspaceFolders;this.initializeWithFolders(t),t===void 0?e.workspaceFolders=null:e.workspaceFolders=t.map(r=&gt;this.asProtocol(r))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let t=this._client;t.onRequest(vi.WorkspaceFoldersRequest.type,o=&gt;{let s=()=&gt;{let u=go.workspace.workspaceFolders;return u===void 0?null:u.map(g=&gt;this.asProtocol(g))},a=t.clientOptions.middleware.workspace;return a&amp;&amp;a.workspaceFolders?a.workspaceFolders(o,s):s(o)});let r=Ac(Ac(Ac(e,&quot;workspace&quot;),&quot;workspaceFolders&quot;),&quot;changeNotifications&quot;),i;typeof r==&quot;string&quot;?i=r:r===!0&amp;&amp;(i=vD.generateUuid()),i&amp;&amp;this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let t;if(this._initialFolders&amp;&amp;e){let r=Mc(this._initialFolders,e),i=Mc(e,this._initialFolders);(i.length&gt;0||r.length&gt;0)&amp;&amp;(t=this.doSendEvent(i,r))}else this._initialFolders?t=this.doSendEvent([],this._initialFolders):e&amp;&amp;(t=this.doSendEvent(e,[]));t!==void 0&amp;&amp;t.catch(r=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,r)})}doSendEvent(e,t){let r={event:{added:e.map(i=&gt;this.asProtocol(i)),removed:t.map(i=&gt;this.asProtocol(i))}};return this._client.sendNotification(vi.DidChangeWorkspaceFoldersNotification.type,r)}register(e){let t=e.id,r=this._client,i=go.workspace.onDidChangeWorkspaceFolders(o=&gt;{let s=h=&gt;this.doSendEvent(h.added,h.removed),a=r.clientOptions.middleware.workspace;(a&amp;&amp;a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(h=&gt;{this._client.error(`Sending notification ${vi.DidChangeWorkspaceFoldersNotification.type.method} failed`,h)})});this._listeners.set(t,i),this.sendInitialEvent(go.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);t!==void 0&amp;&amp;(this._listeners.delete(e),t.dispose())}dispose(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};xr.WorkspaceFoldersFeature=jc});var Nh=q(mo=&gt;{&quot;use strict&quot;;Object.defineProperty(mo,&quot;__esModule&quot;,{value:!0});mo.FoldingRangeFeature=void 0;var yi=require(&quot;vscode&quot;),Nr=Ce(),$c=it();function xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Ir=class extends $c.TextDocumentFeature{constructor(e){super(e,Nr.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=xh(xh(e,&quot;textDocument&quot;),&quot;foldingRange&quot;);t.dynamicRegistration=!0,t.rangeLimit=5e3,t.lineFoldingOnly=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.foldingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideFoldingRanges:(i,o,s)=&gt;{if($c.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g)};return a.sendRequest(Nr.FoldingRangeRequest.type,R,C).then(Ir.asFoldingRanges,E=&gt;a.handleFailedRequest(Nr.FoldingRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideFoldingRanges?h.provideFoldingRanges(i,o,s,u):u(i,o,s)}};return[yi.languages.registerFoldingRangeProvider($c.$DocumentSelector.asTextDocumentFilters(t),r),r]}static asFoldingRangeKind(e){if(e)switch(e){case Nr.FoldingRangeKind.Comment:return yi.FoldingRangeKind.Comment;case Nr.FoldingRangeKind.Imports:return yi.FoldingRangeKind.Imports;case Nr.FoldingRangeKind.Region:return yi.FoldingRangeKind.Region}}static asFoldingRanges(e){return Array.isArray(e)?e.map(t=&gt;new yi.FoldingRange(t.startLine,t.endLine,Ir.asFoldingRangeKind(t.kind))):[]}};mo.FoldingRangeFeature=Ir});var Fh=q(vo=&gt;{&quot;use strict&quot;;Object.defineProperty(vo,&quot;__esModule&quot;,{value:!0});vo.DeclarationFeature=void 0;var yD=require(&quot;vscode&quot;),Hc=Ce(),Wc=it();function Ih(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Kc=class extends Wc.TextDocumentFeature{constructor(e){super(e,Hc.DeclarationRequest.type)}fillClientCapabilities(e){let t=Ih(Ih(e,&quot;textDocument&quot;),&quot;declaration&quot;);t.dynamicRegistration=!0,t.linkSupport=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.declarationProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideDeclaration:(i,o,s)=&gt;{if(Wc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(Hc.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asDeclarationResult,R=&gt;a.handleFailedRequest(Hc.DeclarationRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideDeclaration?h.provideDeclaration(i,o,s,u):u(i,o,s)}};return[yD.languages.registerDeclarationProvider(Wc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};vo.DeclarationFeature=Kc});var Ah=q(yo=&gt;{&quot;use strict&quot;;Object.defineProperty(yo,&quot;__esModule&quot;,{value:!0});yo.SelectionRangeFeature=void 0;var CD=require(&quot;vscode&quot;),Uc=Ce(),zc=it();function Lh(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Vc=class extends zc.TextDocumentFeature{constructor(e){super(e,Uc.SelectionRangeRequest.type)}fillClientCapabilities(e){let t=Lh(Lh(e,&quot;textDocument&quot;),&quot;selectionRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.selectionRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideSelectionRanges:(i,o,s)=&gt;{if(zc.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;{let R={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(g),positions:a.code2ProtocolConverter.asPositions(p)};return a.sendRequest(Uc.SelectionRangeRequest.type,R,C).then(E=&gt;a.protocol2CodeConverter.asSelectionRanges(E),E=&gt;a.handleFailedRequest(Uc.SelectionRangeRequest.type,C,E,null))},h=a.clientOptions.middleware;return h.provideSelectionRanges?h.provideSelectionRanges(i,o,s,u):u(i,o,s)}};return[CD.languages.registerSelectionRangeProvider(zc.$DocumentSelector.asTextDocumentFilters(t),r),r]}};yo.SelectionRangeFeature=Vc});var Mh=q(Co=&gt;{&quot;use strict&quot;;Object.defineProperty(Co,&quot;__esModule&quot;,{value:!0});Co.ProgressFeature=void 0;var RD=Ce(),DD=ec();function SD(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var Gc=class{constructor(e){this._client=e,this.activeParts=new Set}fillClientCapabilities(e){SD(e,&quot;window&quot;).workDoneProgress=!0}initialize(){let e=this._client,t=i=&gt;{this.activeParts.delete(i)},r=i=&gt;{this.activeParts.add(new DD.ProgressPart(this._client,i.token,t))};e.onRequest(RD.WorkDoneProgressCreateRequest.type,r)}dispose(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};Co.ProgressFeature=Gc});var $h=q(Ro=&gt;{&quot;use strict&quot;;Object.defineProperty(Ro,&quot;__esModule&quot;,{value:!0});Ro.CallHierarchyFeature=void 0;var wD=require(&quot;vscode&quot;),cr=Ce(),Bc=it();function jh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Xc=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareCallHierarchy(e,t,r){let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{if(Bc.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,a))return;let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(cr.CallHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asCallHierarchyItems(p),p=&gt;i.handleFailedRequest(cr.CallHierarchyPrepareRequest.type,h,p,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,t,r,s):s(e,t,r)}provideCallHierarchyIncomingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyIncomingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyIncomingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyIncomingCallsRequest.type,a,h,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,t,o):o(e,t)}provideCallHierarchyOutgoingCalls(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asCallHierarchyItem(s)};return r.sendRequest(cr.CallHierarchyOutgoingCallsRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asCallHierarchyOutgoingCalls(h),h=&gt;r.handleFailedRequest(cr.CallHierarchyOutgoingCallsRequest.type,a,h,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,t,o):o(e,t)}},Jc=class extends Bc.TextDocumentFeature{constructor(e){super(e,cr.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=jh(jh(e,&quot;textDocument&quot;),&quot;callHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.callHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new Xc(t,e);return[wD.languages.registerCallHierarchyProvider(Bc.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};Ro.CallHierarchyFeature=Jc});var Hh=q(bo=&gt;{&quot;use strict&quot;;Object.defineProperty(bo,&quot;__esModule&quot;,{value:!0});bo.SemanticTokensFeature=void 0;var Do=require(&quot;vscode&quot;),ee=Ce(),So=it(),bD=yn();function wo(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var Qc=class extends So.TextDocumentFeature{constructor(e){super(e,ee.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let t=wo(wo(e,&quot;textDocument&quot;),&quot;semanticTokens&quot;);t.dynamicRegistration=!0,t.tokenTypes=[ee.SemanticTokenTypes.namespace,ee.SemanticTokenTypes.type,ee.SemanticTokenTypes.class,ee.SemanticTokenTypes.enum,ee.SemanticTokenTypes.interface,ee.SemanticTokenTypes.struct,ee.SemanticTokenTypes.typeParameter,ee.SemanticTokenTypes.parameter,ee.SemanticTokenTypes.variable,ee.SemanticTokenTypes.property,ee.SemanticTokenTypes.enumMember,ee.SemanticTokenTypes.event,ee.SemanticTokenTypes.function,ee.SemanticTokenTypes.method,ee.SemanticTokenTypes.macro,ee.SemanticTokenTypes.keyword,ee.SemanticTokenTypes.modifier,ee.SemanticTokenTypes.comment,ee.SemanticTokenTypes.string,ee.SemanticTokenTypes.number,ee.SemanticTokenTypes.regexp,ee.SemanticTokenTypes.operator,ee.SemanticTokenTypes.decorator],t.tokenModifiers=[ee.SemanticTokenModifiers.declaration,ee.SemanticTokenModifiers.definition,ee.SemanticTokenModifiers.readonly,ee.SemanticTokenModifiers.static,ee.SemanticTokenModifiers.deprecated,ee.SemanticTokenModifiers.abstract,ee.SemanticTokenModifiers.async,ee.SemanticTokenModifiers.modification,ee.SemanticTokenModifiers.documentation,ee.SemanticTokenModifiers.defaultLibrary],t.formats=[ee.TokenFormat.Relative],t.requests={range:!0,full:{delta:!0}},t.multilineTokenSupport=!1,t.overlappingTokenSupport=!1,t.serverCancelSupport=!0,t.augmentsSyntaxTokens=!0,wo(wo(e,&quot;workspace&quot;),&quot;semanticTokens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(ee.SemanticTokensRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(t,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let t=e.documentSelector,r=bD.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&amp;&amp;typeof e.full!=&quot;boolean&quot;&amp;&amp;e.full.delta===!0,o=new Do.EventEmitter,s=r?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(R,E)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let I=this._client,F=I.clientOptions.middleware,A=(N,L)=&gt;{let j={textDocument:I.code2ProtocolConverter.asTextDocumentIdentifier(N)};return I.sendRequest(ee.SemanticTokensRequest.type,j,L).then(X=&gt;I.protocol2CodeConverter.asSemanticTokens(X),X=&gt;I.handleFailedRequest(ee.SemanticTokensRequest.type,L,X,null))};return F.provideDocumentSemanticTokens?F.provideDocumentSemanticTokens(R,E,A):A(R,E)},provideDocumentSemanticTokensEdits:i?(R,E,I)=&gt;{if(So.$DocumentSelector.skipCellTextDocument(t,R))return;let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),previousResultId:j};return F.sendRequest(ee.SemanticTokensDeltaRequest.type,Re,X).then(ne=&gt;ee.SemanticTokens.is(ne)?F.protocol2CodeConverter.asSemanticTokens(ne):F.protocol2CodeConverter.asSemanticTokensEdits(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensDeltaRequest.type,X,ne,null))};return A.provideDocumentSemanticTokensEdits?A.provideDocumentSemanticTokensEdits(R,E,I,N):N(R,E,I)}:void 0}:void 0,u=e.range===!0?{provideDocumentRangeSemanticTokens:(R,E,I)=&gt;{let F=this._client,A=F.clientOptions.middleware,N=(L,j,X)=&gt;{let Re={textDocument:F.code2ProtocolConverter.asTextDocumentIdentifier(L),range:F.code2ProtocolConverter.asRange(j)};return F.sendRequest(ee.SemanticTokensRangeRequest.type,Re,X).then(ne=&gt;F.protocol2CodeConverter.asSemanticTokens(ne),ne=&gt;F.handleFailedRequest(ee.SemanticTokensRangeRequest.type,X,ne,null))};return A.provideDocumentRangeSemanticTokens?A.provideDocumentRangeSemanticTokens(R,E,I,N):N(R,E,I)}}:void 0,h=[],p=this._client.protocol2CodeConverter.asSemanticTokensLegend(e.legend),C=So.$DocumentSelector.asTextDocumentFilters(t);return s!==void 0&amp;&amp;h.push(Do.languages.registerDocumentSemanticTokensProvider(C,s,p)),u!==void 0&amp;&amp;h.push(Do.languages.registerDocumentRangeSemanticTokensProvider(C,u,p)),[new Do.Disposable(()=&gt;h.forEach(R=&gt;R.dispose())),{range:u,full:s,onDidChangeSemanticTokensEmitter:o}]}};bo.SemanticTokensFeature=Qc});var Uh=q(St=&gt;{&quot;use strict&quot;;Object.defineProperty(St,&quot;__esModule&quot;,{value:!0});St.WillDeleteFilesFeature=St.WillRenameFilesFeature=St.WillCreateFilesFeature=St.DidDeleteFilesFeature=St.DidRenameFilesFeature=St.DidCreateFilesFeature=void 0;var Wt=require(&quot;vscode&quot;),_D=Mi(),wn=Ce(),TD=Or();function Wh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}function PD(n,e){return n[e]}function Kh(n,e,t){n[e]=t}var bn=class{constructor(e,t,r,i,o){this._filters=new Map,this._client=e,this._event=t,this._registrationType=r,this._clientCapability=i,this._serverCapability=o}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let t=Wh(Wh(e,&quot;workspace&quot;),&quot;fileOperations&quot;);Kh(t,&quot;dynamicRegistration&quot;,!0),Kh(t,this._clientCapability,!0)}initialize(e){let t=e.workspace?.fileOperations,r=t!==void 0?PD(t,this._serverCapability):void 0;if(r?.filters!==void 0)try{this.register({id:TD.generateUuid(),registerOptions:{filters:r.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let t=e.registerOptions.filters.map(r=&gt;{let i=new _D.Minimatch(r.pattern.glob,bn.asMinimatchOptions(r.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${r.pattern.glob}!`);return{scheme:r.scheme,matcher:i,kind:r.pattern.matches}});this._filters.set(e.id,t)}unregister(e){this._filters.delete(e),this._filters.size===0&amp;&amp;this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&amp;&amp;(this._listener.dispose(),this._listener=void 0)}getFileType(e){return bn.getFileType(e)}async filter(e,t){let r=await Promise.all(e.files.map(async o=&gt;{let s=t(o),a=s.fsPath.replace(/\\/g,&quot;/&quot;);for(let u of this._filters.values())for(let h of u)if(!(h.scheme!==void 0&amp;&amp;h.scheme!==s.scheme)){if(h.matcher.match(a)){if(h.kind===void 0)return!0;let g=await this.getFileType(s);if(g===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(g===Wt.FileType.File&amp;&amp;h.kind===wn.FileOperationPatternKind.file||g===Wt.FileType.Directory&amp;&amp;h.kind===wn.FileOperationPatternKind.folder)return!0}else if(h.kind===wn.FileOperationPatternKind.folder&amp;&amp;await bn.getFileType(s)===Wt.FileType.Directory&amp;&amp;h.matcher.match(`${a}/`))return!0}return!1})),i=e.files.filter((o,s)=&gt;r[s]);return{...e,files:i}}static async getFileType(e){try{return(await Wt.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){if(e!==void 0&amp;&amp;e.ignoreCase===!0)return{nocase:!0}}},_o=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._notificationType=r,this._accessUri=s,this._createParams=a}async send(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=async i=&gt;this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(t,r)}}},To=class extends _o{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let t=e.fsPath;if(this._fsPathFileTypes.has(t))return this._fsPathFileTypes.get(t);let r=await bn.getFileType(e);return r&amp;&amp;this._fsPathFileTypes.set(t,r),r}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&amp;&amp;this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&amp;&amp;(this._willListener.dispose(),this._willListener=void 0)}},Yc=class extends _o{constructor(e){super(e,Wt.workspace.onDidCreateFiles,wn.DidCreateFilesNotification.type,&quot;didCreate&quot;,&quot;didCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.didCreateFiles?r.didCreateFiles(e,t):t(e)}};St.DidCreateFilesFeature=Yc;var Zc=class extends To{constructor(e){super(e,Wt.workspace.onDidRenameFiles,wn.DidRenameFilesNotification.type,&quot;didRename&quot;,&quot;didRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t.oldUri))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didRenameFiles?r.didRenameFiles(e,t):t(e)}};St.DidRenameFilesFeature=Zc;var eu=class extends To{constructor(e){super(e,Wt.workspace.onDidDeleteFiles,wn.DidDeleteFilesNotification.type,&quot;didDelete&quot;,&quot;didDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=Wt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,t=&gt;t))}doSend(e,t){this.clearFileTypeCache();let r=this._client.clientOptions.middleware?.workspace;return r?.didDeleteFiles?r.didDeleteFiles(e,t):t(e)}};St.DidDeleteFilesFeature=eu;var Ci=class extends bn{constructor(e,t,r,i,o,s,a){super(e,t,r,i,o),this._requestType=r,this._accessUri=s,this._createParams=a}async send(e){let t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){let t=await this.filter(e,this._accessUri);if(t.files.length){let r=i=&gt;this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,r)}else return}},tu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillCreateFiles,wn.WillCreateFilesRequest.type,&quot;willCreate&quot;,&quot;willCreate&quot;,t=&gt;t,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willCreateFiles?r.willCreateFiles(e,t):t(e)}};St.WillCreateFilesFeature=tu;var nu=class extends Ci{constructor(e){super(e,Wt.workspace.onWillRenameFiles,wn.WillRenameFilesRequest.type,&quot;willRename&quot;,&quot;willRename&quot;,t=&gt;t.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willRenameFiles?r.willRenameFiles(e,t):t(e)}};St.WillRenameFilesFeature=nu;var ru=class extends Ci{constructor(e){super(e,Wt.workspace.onWillDeleteFiles,wn.WillDeleteFilesRequest.type,&quot;willDelete&quot;,&quot;willDelete&quot;,t=&gt;t,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){let r=this._client.clientOptions.middleware?.workspace;return r?.willDeleteFiles?r.willDeleteFiles(e,t):t(e)}};St.WillDeleteFilesFeature=ru});var Vh=q(Po=&gt;{&quot;use strict&quot;;Object.defineProperty(Po,&quot;__esModule&quot;,{value:!0});Po.LinkedEditingFeature=void 0;var qD=require(&quot;vscode&quot;),iu=Ce(),ou=it();function zh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var su=class extends ou.TextDocumentFeature{constructor(e){super(e,iu.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let t=zh(zh(e,&quot;textDocument&quot;),&quot;linkedEditingRange&quot;);t.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.linkedEditingRangeProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r={provideLinkedEditingRanges:(i,o,s)=&gt;{if(ou.$DocumentSelector.skipCellTextDocument(t,i))return;let a=this._client,u=(g,p,C)=&gt;a.sendRequest(iu.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(g,p),C).then(a.protocol2CodeConverter.asLinkedEditingRanges,R=&gt;a.handleFailedRequest(iu.LinkedEditingRangeRequest.type,C,R,null)),h=a.clientOptions.middleware;return h.provideLinkedEditingRange?h.provideLinkedEditingRange(i,o,s,u):u(i,o,s)}};return[qD.languages.registerLinkedEditingRangeProvider(ou.$DocumentSelector.asTextDocumentFilters(t),r),r]}};Po.LinkedEditingFeature=su});var Bh=q(ur=&gt;{&quot;use strict&quot;;Object.defineProperty(ur,&quot;__esModule&quot;,{value:!0});ur.DiagnosticFeature=ur.vsdiag=void 0;var He=require(&quot;vscode&quot;),$e=Ce(),ED=Or(),Fr=it();function Gh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var un;(function(n){let e;(function(t){t.full=&quot;full&quot;,t.unChanged=&quot;unChanged&quot;})(e=n.DocumentDiagnosticReportKind||(n.DocumentDiagnosticReportKind={}))})(un=ur.vsdiag||(ur.vsdiag={}));var ft;(function(n){n.active=&quot;open&quot;,n.reschedule=&quot;reschedule&quot;,n.outDated=&quot;drop&quot;})(ft||(ft={}));var au=class{constructor(){this.open=new Set;let e=()=&gt;{if(this.open.clear(),He.window.tabs!==void 0)for(let t of He.window.tabs)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString());else if(He.window.openEditors!==void 0)for(let t of He.window.openEditors)t.resource!==void 0&amp;&amp;this.open.add(t.resource.toString())};e(),He.window.onDidChangeTabs!==void 0?this.disposable=He.window.onDidChangeTabs(e):He.window.onDidChangeOpenEditors!==void 0?this.disposable=He.window.onDidChangeOpenEditors(e):this.disposable={dispose:()=&gt;{}}}dispose(){this.disposable.dispose()}isActive(e){return He.window.activeTextEditor?.document===e}isVisible(e){return this.open.has(e.uri.toString())}},Et;(function(n){n[n.document=1]=&quot;document&quot;,n[n.workspace=2]=&quot;workspace&quot;})(Et||(Et={}));var cu=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,t,r){let i=e===Et.document?this.documentPullStates:this.workspacePullStates,[o,s,a]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r]:[t.uri.toString(),t.uri,t.version],u=i.get(o);return u===void 0&amp;&amp;(u={document:s,pulledVersion:a,resultId:void 0},i.set(o,u)),u}update(e,t,r,i){let o=e===Et.document?this.documentPullStates:this.workspacePullStates,[s,a,u,h]=typeof t==&quot;string&quot;?[t,He.Uri.parse(t),r,i]:[t.uri.toString(),t.uri,t.version,r],g=o.get(s);g===void 0?(g={document:a,pulledVersion:u,resultId:h},o.set(s,g)):(g.pulledVersion=u,g.resultId=h)}unTrack(e,t){(e===Et.document?this.documentPullStates:this.workspacePullStates).delete(t.uri.toString())}tracks(e,t){let r=typeof t==&quot;string&quot;?t:t.uri.toString();return(e===Et.document?this.documentPullStates:this.workspacePullStates).has(r)}getResultId(e,t){return(e===Et.document?this.documentPullStates:this.workspacePullStates).get(t.uri.toString())?.resultId}getAllResultIds(){let e=[];for(let[t,r]of this.workspacePullStates)this.documentPullStates.has(t)&amp;&amp;(r=this.documentPullStates.get(t)),r.resultId!==void 0&amp;&amp;e.push({uri:t,value:r.resultId});return e}},uu=class{constructor(e,t,r){this.client=e,this.editorTracker=t,this.options=r,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new He.EventEmitter,this.provider=this.createProvider(),this.diagnostics=He.languages.createDiagnosticCollection(r.identifier),this.openRequests=new Map,this.documentStates=new cu,this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}pull(e,t){this.pullAsync(e).then(()=&gt;{t&amp;&amp;t()},r=&gt;{this.client.error(`Document pull failed for text document ${e.uri.toString()}`,r,!1)})}async pullAsync(e){let t=e.uri.toString(),r=e.version,i=this.openRequests.get(t),o=this.documentStates.track(Et.document,e);if(i===void 0){let s=new He.CancellationTokenSource;this.openRequests.set(t,{state:ft.active,version:r,textDocument:e,tokenSource:s});let a,u;try{a=await this.provider.provideDiagnostics(e,o.resultId,s.token)??{kind:un.DocumentDiagnosticReportKind.full,items:[]}}catch(h){if(h instanceof Fr.LSPCancellationError&amp;&amp;$e.Proposed.DiagnosticServerCancellationData.is(h.data)&amp;&amp;h.data.retriggerRequest===!1&amp;&amp;(u={state:ft.outDated,textDocument:e}),u===void 0&amp;&amp;h instanceof He.CancellationError)u={state:ft.reschedule,textDocument:e};else throw h}if(u=u??this.openRequests.get(t),u===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${t}`),this.diagnostics.delete(e.uri);return}if(this.openRequests.delete(t),!this.editorTracker.isVisible(e)){this.documentStates.unTrack(Et.document,e);return}if(u.state===ft.outDated)return;a!==void 0&amp;&amp;(a.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;this.diagnostics.set(e.uri,a.items),o.pulledVersion=r,o.resultId=a.resultId),u.state===ft.reschedule&amp;&amp;this.pull(e)}else i.state===ft.active?(i.tokenSource.cancel(),this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})):i.state===ft.outDated&amp;&amp;this.openRequests.set(t,{state:ft.reschedule,textDocument:i.textDocument})}cleanupPull(e){let t=e.uri.toString(),r=this.openRequests.get(t);this.options.workspaceDiagnostics||this.options.interFileDependencies?r!==void 0?this.openRequests.set(t,{state:ft.reschedule,textDocument:e}):this.pull(e):(r!==void 0&amp;&amp;(r.state===ft.active&amp;&amp;r.tokenSource.cancel(),this.openRequests.set(t,{state:ft.outDated,textDocument:e})),this.diagnostics.delete(e.uri))}pullWorkspace(){this.pullWorkspaceAsync().then(()=&gt;{this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3)},e=&gt;{!(e instanceof Fr.LSPCancellationError)&amp;&amp;!$e.Proposed.DiagnosticServerCancellationData.is(e.data)&amp;&amp;(this.client.error(&quot;Workspace diagnostic pull failed.&quot;,e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter&lt;=5&amp;&amp;(this.workspaceTimeout=(0,$e.RAL)().timer.setTimeout(()=&gt;{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics)return;this.workspaceCancellation!==void 0&amp;&amp;(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new He.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(t=&gt;({uri:this.client.protocol2CodeConverter.asUri(t.uri),value:t.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,t=&gt;{if(!(!t||this.isDisposed))for(let r of t.items)r.kind===un.DocumentDiagnosticReportKind.full&amp;&amp;(this.documentStates.tracks(Et.document,r.uri.toString())||this.diagnostics.set(r.uri,r.items)),this.documentStates.update(Et.workspace,r.uri.toString(),r.version??void 0,r.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(t,r,i)=&gt;{let o=(a,u,h)=&gt;{let g={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(a.uri)},previousResultId:u};return this.client.sendRequest($e.Proposed.DocumentDiagnosticRequest.type,g,h).then(p=&gt;p==null||this.isDisposed?{kind:un.DocumentDiagnosticReportKind.full,items:[]}:p.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,resultId:p.resultId,items:this.client.protocol2CodeConverter.asDiagnostics(p.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,resultId:p.resultId},p=&gt;this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,h,p,{kind:un.DocumentDiagnosticReportKind.full,items:[]}))},s=this.client.clientOptions.middleware;return s.provideDiagnostics?s.provideDiagnostics(t,r,i,o):o(t,r,i)}};return this.options.workspaceDiagnostics&amp;&amp;(e.provideWorkspaceDiagnostics=(t,r,i)=&gt;{let o=h=&gt;h.kind===$e.Proposed.DocumentDiagnosticReportKind.full?{kind:un.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version,items:this.client.protocol2CodeConverter.asDiagnostics(h.items)}:{kind:un.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(h.uri),resultId:h.resultId,version:h.version},s=h=&gt;{let g=[];for(let p of h)g.push({uri:this.client.code2ProtocolConverter.asUri(p.uri),value:p.value});return g},a=(h,g)=&gt;{let p=(0,ED.generateUuid)(),C=this.client.onProgress($e.Proposed.WorkspaceDiagnosticRequest.partialResult,p,E=&gt;{if(E==null){i(null);return}let I={items:[]};for(let F of E.items)I.items.push(o(F));i(I)}),R={identifier:this.options.identifier,previousResultIds:s(h),partialResultToken:p};return this.client.sendRequest($e.Proposed.WorkspaceDiagnosticRequest.type,R,g).then(E=&gt;{let I={items:[]};for(let F of E.items)I.items.push(o(F));return C.dispose(),i(I),{items:[]}},E=&gt;(C.dispose(),this.client.handleFailedRequest($e.Proposed.DocumentDiagnosticRequest.type,g,E,{items:[]})))},u=this.client.clientOptions.middleware;return u.provideWorkspaceDiagnostics?u.provideWorkspaceDiagnostics(t,r,i,a):a(t,r,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,t]of this.openRequests)t.state===ft.active&amp;&amp;t.tokenSource.cancel(),this.openRequests.set(e,{state:ft.outDated,textDocument:t.textDocument})}},lu=class{constructor(e){this.diagnosticRequestor=e,this.documents=new $e.LinkedMap}add(e){let t=e.uri.toString();this.documents.has(t)||(this.documents.set(e.uri.toString(),e,$e.Touch.Last),this.trigger())}remove(e){let t=e.uri.toString();this.documents.has(t)&amp;&amp;(this.documents.delete(t),this.diagnosticRequestor.pull(e)),this.documents.size===0?this.stop():e===this.endDocument&amp;&amp;(this.endDocument=this.documents.last)}trigger(){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,$e.RAL)().timer.setInterval(()=&gt;{let e=this.documents.first;e!==void 0&amp;&amp;(this.diagnosticRequestor.pull(e),this.documents.set(e.uri.toString(),e,$e.Touch.Last),e===this.endDocument&amp;&amp;this.stop())},200)}dispose(){this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}},du=class{constructor(e,t,r){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=r.documentSelector,s=[],a=p=&gt;Fr.$DocumentSelector.matchForProvider(o,p)&amp;&amp;t.isVisible(p);this.diagnosticRequestor=new uu(e,t,r),this.backgroundScheduler=new lu(this.diagnosticRequestor);let u=p=&gt;{!a(p)||!r.interFileDependencies||this.activeTextDocument===p||this.backgroundScheduler.add(p)};this.activeTextDocument=He.window.activeTextEditor?.document,He.window.onDidChangeActiveTextEditor(p=&gt;{let C=this.activeTextDocument;this.activeTextDocument=p?.document,C!==void 0&amp;&amp;u(C),this.activeTextDocument!==void 0&amp;&amp;this.backgroundScheduler.remove(this.activeTextDocument)});let h=e.getFeature($e.DidOpenTextDocumentNotification.method);s.push(h.onNotificationSent(p=&gt;{let C=p.original;a(C)&amp;&amp;this.diagnosticRequestor.pull(C,()=&gt;{u(C)})}));for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p,()=&gt;{u(p)});if(i.onChange){let p=e.getFeature($e.DidChangeTextDocumentNotification.method);s.push(p.onNotificationSent(async C=&gt;{let R=C.original.document;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onType))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;C.original.contentChanges.length&gt;0&amp;&amp;this.diagnosticRequestor.pull(R,()=&gt;{this.backgroundScheduler.trigger()})}))}if(i.onSave){let p=e.getFeature($e.DidSaveTextDocumentNotification.method);s.push(p.onNotificationSent(C=&gt;{let R=C.original;(i.filter===void 0||!i.filter(R,Fr.DiagnosticPullMode.onSave))&amp;&amp;this.diagnosticRequestor.knows(Et.document,R)&amp;&amp;this.diagnosticRequestor.pull(C.original,()=&gt;{this.backgroundScheduler.trigger()})}))}let g=e.getFeature($e.DidCloseTextDocumentNotification.method);s.push(g.onNotificationSent(p=&gt;{let C=p.original;this.diagnosticRequestor.cleanupPull(C),this.backgroundScheduler.remove(C)})),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=&gt;{for(let p of He.workspace.textDocuments)a(p)&amp;&amp;this.diagnosticRequestor.pull(p)}),r.workspaceDiagnostics===!0&amp;&amp;r.identifier!==&quot;da348dc5-c30a-4515-9d98-31ff3be38d14&quot;&amp;&amp;this.diagnosticRequestor.pullWorkspace(),this.disposable=He.Disposable.from(...s,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}},fu=class extends Fr.TextDocumentFeature{constructor(e){super(e,$e.Proposed.DocumentDiagnosticRequest.type),this.editorTracker=new au}fillClientCapabilities(e){let t=Gh(Gh(e,&quot;textDocument&quot;),&quot;diagnostic&quot;);t.dynamicRegistration=!0,t.relatedDocumentSupport=!1}initialize(e,t){this._client.onRequest($e.Proposed.DiagnosticRefreshRequest.type,async()=&gt;{for(let s of this.getAllProviders())s.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(t,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}dispose(){this.editorTracker.dispose(),super.dispose()}registerLanguageProvider(e){let t=new du(this._client,this.editorTracker,e);return[t.disposable,t]}};ur.DiagnosticFeature=fu});var Jh=q(qo=&gt;{&quot;use strict&quot;;Object.defineProperty(qo,&quot;__esModule&quot;,{value:!0});qo.TypeHierarchyFeature=void 0;var kD=require(&quot;vscode&quot;),lr=Ce(),hu=it();function Xh(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var pu=class{constructor(e,t){this.client=e,this.options=t,this.middleware=e.clientOptions.middleware}prepareTypeHierarchy(e,t,r){if(hu.$DocumentSelector.skipCellTextDocument(this.options.documentSelector,e))return;let i=this.client,o=this.middleware,s=(a,u,h)=&gt;{let g=i.code2ProtocolConverter.asTextDocumentPositionParams(a,u);return i.sendRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,g,h).then(p=&gt;i.protocol2CodeConverter.asTypeHierarchyItems(p),p=&gt;i.handleFailedRequest(lr.Proposed.TypeHierarchyPrepareRequest.type,h,p,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,t,r,s):s(e,t,r)}provideTypeHierarchySupertypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySupertypesRequest.type,a,h,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,t,o):o(e,t)}provideTypeHierarchySubtypes(e,t){let r=this.client,i=this.middleware,o=(s,a)=&gt;{let u={item:r.code2ProtocolConverter.asTypeHierarchyItem(s)};return r.sendRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,u,a).then(h=&gt;r.protocol2CodeConverter.asTypeHierarchyItems(h),h=&gt;r.handleFailedRequest(lr.Proposed.TypeHierarchySubtypesRequest.type,a,h,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,t,o):o(e,t)}},gu=class extends hu.TextDocumentFeature{constructor(e){super(e,lr.Proposed.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=Xh(Xh(e,&quot;textDocument&quot;),&quot;typeHierarchy&quot;);r.dynamicRegistration=!0}initialize(e,t){let[r,i]=this.getRegistration(t,e.typeHierarchyProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=this._client,r=new pu(t,e);return[kD.languages.registerTypeHierarchyProvider(hu.$DocumentSelector.asTextDocumentFilters(e.documentSelector),r),r]}};qo.TypeHierarchyFeature=gu});var Yh=q(Oo=&gt;{&quot;use strict&quot;;Object.defineProperty(Oo,&quot;__esModule&quot;,{value:!0});Oo.InlineValueFeature=void 0;var Qh=require(&quot;vscode&quot;),Eo=Ce(),mu=it();function ko(n,e){return n[e]===void 0&amp;&amp;(n[e]=Object.create(null)),n[e]}var vu=class extends mu.TextDocumentFeature{constructor(e){super(e,Eo.Proposed.InlineValuesRequest.type)}fillClientCapabilities(e){ko(ko(e,&quot;textDocument&quot;),&quot;inlineValues&quot;).dynamicRegistration=!0,ko(ko(e,&quot;workspace&quot;),&quot;codeLens&quot;).refreshSupport=!0}initialize(e,t){this._client.onRequest(Eo.Proposed.InlineValuesRefreshRequest.type,async()=&gt;{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[r,i]=this.getRegistration(t,e.inlineValuesProvider);!r||!i||this.register({id:r,registerOptions:i})}registerLanguageProvider(e){let t=e.documentSelector,r=new Qh.EventEmitter,i={onDidChangeInlineValues:r.event,provideInlineValues:(o,s,a,u)=&gt;{if(mu.$DocumentSelector.skipCellTextDocument(t,o))return;let h=this._client,g=(C,R,E,I)=&gt;{let F={textDocument:h.code2ProtocolConverter.asTextDocumentIdentifier(C),viewPort:h.code2ProtocolConverter.asRange(R),context:h.code2ProtocolConverter.asInlineValuesContext(E)};return h.sendRequest(Eo.Proposed.InlineValuesRequest.type,F,I).then(A=&gt;h.protocol2CodeConverter.asInlineValues(A),A=&gt;h.handleFailedRequest(Eo.Proposed.InlineValuesRequest.type,I,A,null))},p=h.clientOptions.middleware;return p.provideInlineValues?p.provideInlineValues(o,s,a,u,g):g(o,s,a,u)}};return[Qh.languages.registerInlineValuesProvider(mu.$DocumentSelector.asTextDocumentFilters(t),i),{provider:i,onDidChangeInlineValues:r}]}};Oo.InlineValueFeature=vu});var tp=q(Lo=&gt;{&quot;use strict&quot;;Object.defineProperty(Lo,&quot;__esModule&quot;,{value:!0});Lo.NotebookDocumentSyncFeature=void 0;var ht=require(&quot;vscode&quot;),OD=Mi(),Kt=Ce(),ln=Ce(),yu=it(),xo=Or(),Zh=yn();function ep(n,e){return n[e]===void 0&amp;&amp;(n[e]={}),n[e]}var kt;(function(n){let e;(function(t){function r(p,C){return{version:p.version,uri:C.asUri(p.uri)}}t.asVersionedNotebookDocumentIdentifier=r;function i(p,C,R){let E=Kt.Proposed.NotebookDocument.create(R.asUri(p.uri),p.notebookType,p.version,o(C,R));return Object.keys(p.metadata).length&gt;0&amp;&amp;(E.metadata=s(p.metadata)),E}t.asNotebookDocument=i;function o(p,C){return p.map(R=&gt;a(R,C))}t.asNotebookCells=o;function s(p){return h(new Set,p)}t.asMetadata=s;function a(p,C){let R=Kt.Proposed.NotebookCell.create(u(p.kind),C.asUri(p.document.uri));return Object.keys(p.metadata).length&gt;0&amp;&amp;(R.metadata=s(p.metadata)),p.executionSummary!==void 0&amp;&amp;Zh.number(p.executionSummary.executionOrder)&amp;&amp;Zh.boolean(p.executionSummary.success)&amp;&amp;(R.executionSummary={executionOrder:p.executionSummary.executionOrder,success:p.executionSummary.success}),R}t.asNotebookCell=a;function u(p){switch(p){case ht.NotebookCellKind.Markup:return Kt.Proposed.NotebookCellKind.Markup;case ht.NotebookCellKind.Code:return Kt.Proposed.NotebookCellKind.Code}}function h(p,C){if(p.has(C))throw new Error(&quot;Can't deep copy cyclic structures.&quot;);if(Array.isArray(C)){let R=[];for(let E of C)if(E!==null&amp;&amp;typeof E==&quot;object&quot;||Array.isArray(E))R.push(h(p,E));else{if(E instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);R.push(E)}return R}else{let R=Object.keys(C),E=Object.create(null);for(let I of R){let F=C[I];if(F!==null&amp;&amp;typeof F==&quot;object&quot;||Array.isArray(F))E[I]=h(p,F);else{if(F instanceof RegExp)throw new Error(&quot;Can't transfer regular expressions to the server&quot;);E[I]=F}}return E}}function g(p,C){let R=C.asChangeTextDocumentParams(p);return{document:R.textDocument,changes:R.contentChanges}}t.asTextContentChange=g})(e=n.c2p||(n.c2p={}))})(kt||(kt={}));var Cu;(function(n){function e(t,r,i){let o=t.length,s=r.length,a=0;for(;a&lt;s&amp;&amp;a&lt;o&amp;&amp;Kt.Proposed.NotebookCell.equals(t[a],r[a],i);)a++;if(a&lt;s&amp;&amp;a&lt;o){let u=o-1,h=s-1;for(;u&gt;=0&amp;&amp;h&gt;=0&amp;&amp;Kt.Proposed.NotebookCell.equals(t[u],r[h],i);)u--,h--;let g=u+1-a,p=a===h+1?void 0:r.slice(a,h+1);return p!==void 0?{start:a,deleteCount:g,cells:p}:{start:a,deleteCount:g}}else return a&lt;s?{start:a,deleteCount:0,cells:r.slice(a)}:a&lt;o?{start:a,deleteCount:o-a}:void 0}n.computeDiff=e})(Cu||(Cu={}));var No;(function(n){function e(t,r){if(t.notebookType!==void 0&amp;&amp;r.notebookType!==t.notebookType)return!1;let i=r.uri;if(t.scheme!==void 0&amp;&amp;i.scheme!==t.scheme)return!1;if(t.pattern!==void 0){let o=new OD.Minimatch(t.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}n.matchNotebook=e})(No||(No={}));var Io;(function(n){function e(t,r,i){if(i===&quot;cellContent&quot;&amp;&amp;!yu.$DocumentSelector.matchForDocumentSync(t.cellDocumentSelector,r.document)||i===&quot;notebook&quot;&amp;&amp;!yu.$DocumentSelector.matchForProvider(t.cellDocumentSelector,r.document))return!1;let o=r.notebook;for(let s of t.notebookDocumentSelector)if(s.notebookDocumentFilter!==void 0&amp;&amp;No.matchNotebook(s.notebookDocumentFilter,o))return!0;return!1}n.match=e})(Io||(Io={}));var Fo;(function(n){function e(t,r){return{cells:t,uris:new Set(r.map(i=&gt;i.document.uri.toString()))}}n.create=e})(Fo||(Fo={}));var Ri=class{constructor(e,t){this.client=e,this.options=t,this.notebookSyncInfo=new Map,this.cellExecutionState=new Map,this.notebookDidOpen=new Set,this.disposables=[],ht.workspace.onDidOpenNotebookDocument(r=&gt;{this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r)},void 0,this.disposables);for(let r of ht.workspace.notebookDocuments)this.notebookDidOpen.add(r.uri.toString()),this.didOpen(r);ht.notebooks.onDidChangeNotebookDocumentMetadata(r=&gt;this.notebookDocumentMetadataChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCells(r=&gt;this.cellStructureChanged(r.document),void 0,this.disposables),ht.notebooks.onDidChangeCellMetadata(r=&gt;this.cellMetaDataChanged(r.cell.notebook,r.cell),void 0,this.disposables),ht.notebooks.onDidChangeNotebookCellExecutionState(r=&gt;this.cellExecutionStateChanged(r),void 0,this.disposables),this.options.save===!0&amp;&amp;ht.notebooks.onDidSaveNotebookDocument(r=&gt;this.didSave(r),void 0,this.disposables),ht.workspace.onDidCloseNotebookDocument(r=&gt;{this.didClose(r),this.notebookDidOpen.delete(r.uri.toString())},void 0,this.disposables)}get mode(){return&quot;notebook&quot;}handles(e){return Io.match(this.options,e,this.mode)}didOpenNotebookCellDocument(e,t){if(!this.notebookDidOpen.has(e.uri.toString()))return;let r=this.notebookSyncInfo.get(e.uri.toString()),i=this.getMatchingCells(e,[t]),o=i!==void 0&amp;&amp;i[0]===t;if(r!==void 0){let s=r.uris.has(t.document.uri.toString());if(o&amp;&amp;s)return;this.cellStructureChanged(e,r)}else{if(!o)return;this.cellStructureChanged(e,r)}}didChangeCellTextDocument(e,t){!yu.$DocumentSelector.matchForProvider(this.options.cellDocumentSelector,t.document)||this.doSendChange(e,{cells:{textContent:[kt.c2p.asTextContentChange(t,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,t=null,r=this.notebookSyncInfo.get(e.uri.toString())){if(r!==void 0)this.cellStructureChanged(e,r);else{let i=t??this.getMatchingCells(e);if(i===void 0)return;this.doSendOpen(e,i,o=&gt;{this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o.cells,i))}).catch(()=&gt;{})}}notebookDocumentMetadataChanged(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendChange(e,{metadata:kt.c2p.asMetadata(e.metadata)}).catch(()=&gt;{})}cellStructureChanged(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0){let r=this.getMatchingCells(e);if(r===void 0)return;this.didOpen(e,r,t)}else{let r=this.getMatchingCells(e);if(r===void 0){this.didClose(e,t);return}let i=t.cells,o=kt.c2p.asNotebookCells(r,this.client.code2ProtocolConverter),s=Cu.computeDiff(t.cells,o,!1);if(s===void 0)return;let a=s.deleteCount===0?new Set:new Set(i.slice(s.start,s.start+s.deleteCount).map(p=&gt;p.document)),u=s.cells===void 0?new Set:new Set(s.cells.map(p=&gt;p.document));for(let p of Array.from(a.values()))u.has(p)&amp;&amp;(a.delete(p),u.delete(p));let h=[],g=[];if(a.size&gt;0||u.size&gt;0){let p=new Map(r.map(C=&gt;[this.client.code2ProtocolConverter.asUri(C.document.uri),C]));for(let C of u.values()){let R=p.get(C);R!==void 0&amp;&amp;h.push(this.client.code2ProtocolConverter.asTextDocumentItem(R.document))}for(let C of a.values())g.push({uri:C})}this.doSendChange(e,{cells:{structure:{array:s,didClose:g.length&gt;0?g:void 0,didOpen:h.length&gt;0?h:void 0}}}).catch(()=&gt;{}),this.notebookSyncInfo.set(e.uri.toString(),Fo.create(o,r))}}cellMetaDataChanged(e,t){let r=this.notebookSyncInfo.get(e.uri.toString());if(r===void 0||!r.uris.has(t.document.uri.toString()))return;let i=kt.c2p.asNotebookCell(t,this.client.code2ProtocolConverter);this.doSendChange(e,{cells:{data:[i]}}).catch(()=&gt;{})}cellExecutionStateChanged(e){if(e.state===ht.NotebookCellExecutionState.Pending)return;let t=e.cell.notebook,r=this.notebookSyncInfo.get(t.uri.toString());if(r===void 0)return;let i=e.cell.document.uri.toString();!r.uris.has(i)||(e.state===ht.NotebookCellExecutionState.Executing&amp;&amp;this.cellExecutionState.set(e.cell.document.uri.toString(),e.state),e.state===ht.NotebookCellExecutionState.Idle&amp;&amp;this.cellExecutionState.has(i)&amp;&amp;(this.cellExecutionState.delete(i),this.doSendChange(t,{cells:{data:[kt.c2p.asNotebookCell(e.cell,this.client.code2ProtocolConverter)]}}).catch(()=&gt;{})))}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&amp;&amp;this.doSendSave(e).catch(()=&gt;{})}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===void 0)return;let r=e.getCells().filter(i=&gt;t.uris.has(i.document.uri.toString()));this.doSendClose(e,r).catch(()=&gt;{}),this.notebookSyncInfo.delete(e.uri.toString())}getMatchingCells(e,t=e.getCells()){if(this.options.notebookDocumentSelector!==void 0){for(let r of this.options.notebookDocumentSelector)if(r.notebookDocumentFilter===void 0){if(r.cellSelector===void 0)return;let i=this.filterCells(t,r.cellSelector);return i.length===0?void 0:i}else if(No.matchNotebook(r.notebookDocumentFilter,e))return r.cellSelector===void 0?t:this.filterCells(t,r.cellSelector)}}filterCells(e,t){return e.filter(r=&gt;{let i=r.document.languageId;return t.some(o=&gt;i===o.language)})}async sendDidOpenNotebookDocument(e){let t=this.getMatchingCells(e);if(t!==void 0)return this.doSendOpen(e,t)}async doSendOpen(e,t,r){let i=(s,a)=&gt;{let u=kt.c2p.asNotebookDocument(s,a,this.client.code2ProtocolConverter),h=a.map(p=&gt;this.client.code2ProtocolConverter.asTextDocumentItem(p.document)),g=this.client.sendNotification(Kt.Proposed.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:h}).catch(p=&gt;{throw this.client.error(&quot;Sending DidOpenNotebookDocumentNotification failed&quot;,p),p});return r&amp;&amp;r(u),g},o=this.client.clientOptions.middleware?.notebooks;return o?.didOpen!==void 0?o.didOpen(e,t,i):i(e,t)}async sendDidChangeNotebookDocument(e,t){let r=Object.create(null);if(t.metadata&amp;&amp;(r.metadata=kt.c2p.asMetadata(e.metadata)),t.cells!==void 0){let i=Object.create(null),o=t.cells;o.structure&amp;&amp;(i.structure={array:{start:o.structure.array.start,deleteCount:o.structure.array.deleteCount,cells:o.structure.array.cells!==void 0?o.structure.array.cells.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter)):void 0},didOpen:o.structure.didOpen!==void 0?o.structure.didOpen.map(s=&gt;this.client.code2ProtocolConverter.asOpenTextDocumentParams(s.document).textDocument):void 0,didClose:o.structure.didClose!==void 0?o.structure.didClose.map(s=&gt;this.client.code2ProtocolConverter.asCloseTextDocumentParams(s.document).textDocument):void 0}),o.data!==void 0&amp;&amp;(i.data=o.data.map(s=&gt;kt.c2p.asNotebookCell(s,this.client.code2ProtocolConverter))),o.textContent!==void 0&amp;&amp;(i.textContent=o.textContent.map(s=&gt;kt.c2p.asTextContentChange(s,this.client.code2ProtocolConverter))),Object.keys(i).length&gt;0&amp;&amp;(r.cells=i)}if(Object.keys(r).length&gt;0)return this.doSendChange(e,r)}async doSendChange(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidChangeNotebookDocumentNotification.type,{notebookDocument:kt.c2p.asVersionedNotebookDocumentIdentifier(o,this.client.code2ProtocolConverter),change:s}).catch(a=&gt;{this.client.error(&quot;Sending DidChangeNotebookDocumentNotification failed&quot;,a)}),i=this.client.clientOptions.middleware?.notebooks;return i?.didChange!==void 0?i?.didChange(e,t,r):r(e,t)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let t=i=&gt;this.client.sendNotification(Kt.Proposed.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}}).catch(o=&gt;{throw this.client.error(&quot;Sending DidSaveNotebookDocumentNotification failed&quot;,o),o}),r=this.client.clientOptions.middleware?.notebooks;return r?.didSave!==void 0?r.didSave(e,t):t(e)}async sendDidSelectNotebookController(e,t,r){let i=(s,a,u)=&gt;this.client.sendNotification(Kt.Proposed.DidSelectNotebookControllerNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(s.uri)},controller:a,selected:u}).catch(h=&gt;{throw this.client.error(&quot;Sending DidSelectNotebookControllerNotification failed&quot;,h),h}),o=this.client.clientOptions.middleware?.notebooks;return o?.didSelectNotebookController!==void 0?o.didSelectNotebookController(e,t,r,i):i(e,t,r)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){let r=(o,s)=&gt;this.client.sendNotification(Kt.Proposed.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=&gt;this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))}).catch(a=&gt;{throw this.client.error(&quot;Sending DidCloseNotebookDocumentNotification failed&quot;,a),a}),i=this.client.clientOptions.middleware?.notebooks;return i?.didClose!==void 0?i.didClose(e,t,r):r(e,t)}},Ru=class{constructor(e,t){if(this.client=e,this.options=t,t.cellDocumentSelector.length&gt;0){let r=xo.generateUuid();this.client.getFeature(ln.DidOpenTextDocumentNotification.method).register({id:r,registerOptions:{documentSelector:t.cellDocumentSelector}});let i=xo.generateUuid();this.client.getFeature(ln.DidChangeTextDocumentNotification.method).register({id:i,registerOptions:{documentSelector:t.cellDocumentSelector,syncKind:ln.TextDocumentSyncKind.Incremental}});let o=xo.generateUuid();this.client.getFeature(ln.DidCloseTextDocumentNotification.method).register({id:o,registerOptions:{documentSelector:t.cellDocumentSelector}}),this.registrations={open:r,change:i,close:o}}}get mode(){return&quot;cellContent&quot;}handles(e){return Io.match(this.options,e,this.mode)}dispose(){this.registrations!==void 0&amp;&amp;(this.client.getFeature(ln.DidOpenTextDocumentNotification.method).unregister(this.registrations.open),this.client.getFeature(ln.DidChangeTextDocumentNotification.method).unregister(this.registrations.change),this.client.getFeature(ln.DidCloseTextDocumentNotification.method).unregister(this.registrations.close))}async sendDidOpenTextDocument(e){let t=this.client.getFeature(ln.DidOpenTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No open provider found for notebook cell document ${e.uri.toString()}`))}async sendDidChangeTextDocument(e){let t=this.client.getFeature(ln.DidChangeTextDocumentNotification.method).getProvider(e.document);return t!==void 0?t.send(e):Promise.reject(new Error(`No change provider found for notebook cell document ${e.document.uri.toString()}`))}async sendDidCloseTextDocument(e){let t=this.client.getFeature(ln.DidCloseTextDocumentNotification.method).getProvider(e);return t!==void 0?t.send(e):Promise.reject(new Error(`No close provider found for notebook cell document ${e.uri.toString()}`))}},dr=class{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Kt.Proposed.NotebookDocumentSyncRegistrationType.type,ht.workspace.onDidOpenTextDocument(t=&gt;{if(t.uri.scheme!==dr.CellScheme)return;let[r,i]=this.getNotebookDocument(t);if(!(r===void 0||i===void 0))for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didOpenNotebookCellDocument(r,i)}),ht.workspace.onDidChangeTextDocument(t=&gt;{if(t.contentChanges.length===0)return;let r=t.document;if(r.uri.scheme!==dr.CellScheme)return;let[i]=this.getNotebookDocument(r);if(i!==void 0)for(let o of this.registrations.values())o instanceof Ri&amp;&amp;o.didChangeCellTextDocument(i,t)})}fillClientCapabilities(e){let t=ep(ep(e,&quot;notebookDocument&quot;),&quot;synchronization&quot;);t.dynamicRegistration=!0}initialize(e){let t=e.notebookDocumentSync;if(t===void 0)return;let r=t.id??xo.generateUuid();this.register({id:r,registerOptions:t})}register(e){if(e.registerOptions.mode===&quot;cellContent&quot;){let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions,!0)}),r=new Ru(this.client,t);this.registrations.set(e.id,r)}else{let t=Object.assign({},e.registerOptions,{cellDocumentSelector:this.getNotebookCellTextDocumentFilter(e.registerOptions)}),r=new Ri(this.client,t);this.registrations.set(e.id,r)}}unregister(e){let t=this.registrations.get(e);t&amp;&amp;t.dispose()}dispose(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}getProvider(e){for(let t of this.registrations.values())if(t.handles(e))return t}getNotebookDocument(e){let t=e.uri.toString();for(let r of ht.workspace.notebookDocuments)for(let i of r.getCells())if(i.document.uri.toString()===t)return[r,i];return[void 0,void 0]}getNotebookCellTextDocumentFilter(e,t){let r=[];for(let i of e.notebookDocumentSelector){let o;if(i.notebookDocumentFilter!==void 0&amp;&amp;(o=t===!0?{notebookDocument:Object.assign({},i.notebookDocumentFilter,{sync:!0})}:{notebookDocument:Object.assign({},i.notebookDocumentFilter)}),i.cellSelector!==void 0){for(let s of i.cellSelector)o===void 0?r.push(t===!0?{cellLanguage:s.language,sync:!0}:{cellLanguage:s.language}):r.push(Object.assign({},o,{cellLanguage:s.language}));o=void 0}else o!==void 0&amp;&amp;r.push(o)}return r}};Lo.NotebookDocumentSyncFeature=dr;dr.CellScheme=&quot;vscode-notebook-cell&quot;});var Su=q(fr=&gt;{&quot;use strict&quot;;Object.defineProperty(fr,&quot;__esModule&quot;,{value:!0});fr.ProposedFeatures=fr.CommonLanguageClient=void 0;var xD=it(),ND=Ph(),ID=_a(),FD=Eh(),LD=kh(),AD=Oh(),MD=Nh(),jD=Fh(),$D=Ah(),HD=Mh(),WD=$h(),KD=Hh(),Lr=Uh(),UD=Vh(),Du=class extends xD.BaseLanguageClient{constructor(e,t,r){super(e,t,r)}registerProposedFeatures(){this.registerFeatures(sp.createAll(this))}registerBuiltinFeatures(){super.registerBuiltinFeatures(),this.registerFeature(new ID.ConfigurationFeature(this)),this.registerFeature(new LD.TypeDefinitionFeature(this)),this.registerFeature(new FD.ImplementationFeature(this)),this.registerFeature(new ND.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&amp;&amp;this.registerFeature(new AD.WorkspaceFoldersFeature(this)),this.registerFeature(new MD.FoldingRangeFeature(this)),this.registerFeature(new jD.DeclarationFeature(this)),this.registerFeature(new $D.SelectionRangeFeature(this)),this.registerFeature(new HD.ProgressFeature(this)),this.registerFeature(new WD.CallHierarchyFeature(this)),this.registerFeature(new KD.SemanticTokensFeature(this)),this.registerFeature(new UD.LinkedEditingFeature(this)),this.registerFeature(new Lr.DidCreateFilesFeature(this)),this.registerFeature(new Lr.DidRenameFilesFeature(this)),this.registerFeature(new Lr.DidDeleteFilesFeature(this)),this.registerFeature(new Lr.WillCreateFilesFeature(this)),this.registerFeature(new Lr.WillRenameFilesFeature(this)),this.registerFeature(new Lr.WillDeleteFilesFeature(this))}};fr.CommonLanguageClient=Du;var np=Bh(),rp=Jh(),ip=Yh(),op=tp(),sp;(function(n){function e(s){return[new np.DiagnosticFeature(s),new rp.TypeHierarchyFeature(s),new ip.InlineValueFeature(s),new op.NotebookDocumentSyncFeature(s)]}n.createAll=e;function t(s){return new np.DiagnosticFeature(s)}n.createDiagnosticFeature=t;function r(s){return new rp.TypeHierarchyFeature(s)}n.createTypeHierarchyFeature=r;function i(s){return new ip.InlineValueFeature(s)}n.createInlineValueFeature=i;function o(s){return new op.NotebookDocumentSyncFeature(s)}n.createNotebookDocumentSyncFeature=o})(sp=fr.ProposedFeatures||(fr.ProposedFeatures={}))});var cp=q(Ao=&gt;{&quot;use strict&quot;;Object.defineProperty(Ao,&quot;__esModule&quot;,{value:!0});Ao.terminate=void 0;var ap=require(&quot;child_process&quot;),zD=require(&quot;path&quot;),VD=process.platform===&quot;win32&quot;,GD=process.platform===&quot;darwin&quot;,BD=process.platform===&quot;linux&quot;;function XD(n,e){if(VD)try{let i={stdio:[&quot;pipe&quot;,&quot;pipe&quot;,&quot;ignore&quot;]};return e&amp;&amp;(i.cwd=e),ap.execFileSync(&quot;taskkill&quot;,[&quot;/T&quot;,&quot;/F&quot;,&quot;/PID&quot;,n.pid.toString()],i),!0}catch{return!1}else if(BD||GD)try{var t=(0,zD.join)(__dirname,&quot;terminateProcess.sh&quot;),r=ap.spawnSync(t,[n.pid.toString()]);return!r.error}catch{return!1}else return n.kill(&quot;SIGKILL&quot;),!0}Ao.terminate=XD});var wu=q((Sb,up)=&gt;{&quot;use strict&quot;;up.exports=Ce()});var lp=q(_n=&gt;{&quot;use strict&quot;;var JD=_n&amp;&amp;_n.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),bu=_n&amp;&amp;_n.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;JD(e,n,t)};Object.defineProperty(_n,&quot;__esModule&quot;,{value:!0});bu(Ce(),_n);bu(it(),_n);bu(Su(),_n)});var pp=q(vt=&gt;{&quot;use strict&quot;;var QD=vt&amp;&amp;vt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&amp;&amp;(r=t),Object.defineProperty(n,r,{enumerable:!0,get:function(){return e[t]}})}:function(n,e,t,r){r===void 0&amp;&amp;(r=t),n[r]=e[t]}),hp=vt&amp;&amp;vt.__exportStar||function(n,e){for(var t in n)t!==&quot;default&quot;&amp;&amp;!Object.prototype.hasOwnProperty.call(e,t)&amp;&amp;QD(e,n,t)};Object.defineProperty(vt,&quot;__esModule&quot;,{value:!0});vt.SettingMonitor=vt.LanguageClient=vt.TransportKind=void 0;var Tn=require(&quot;child_process&quot;),_u=require(&quot;fs&quot;),Tu=require(&quot;path&quot;),dp=Ed(),jn=require(&quot;vscode&quot;),Ee=yn(),YD=Su(),ZD=it(),eS=cp(),xe=wu();hp(wu(),vt);hp(lp(),vt);var fp=&quot;^1.63.0&quot;,Le;(function(n){n[n.stdio=0]=&quot;stdio&quot;,n[n.ipc=1]=&quot;ipc&quot;,n[n.pipe=2]=&quot;pipe&quot;,n[n.socket=3]=&quot;socket&quot;})(Le=vt.TransportKind||(vt.TransportKind={}));var Mn;(function(n){function e(t){let r=t;return r&amp;&amp;r.kind===Le.socket&amp;&amp;Ee.number(r.port)}n.isSocket=e})(Mn||(Mn={}));var Pu;(function(n){function e(t){return Ee.string(t.command)}n.is=e})(Pu||(Pu={}));var qu;(function(n){function e(t){return Ee.string(t.module)}n.is=e})(qu||(qu={}));var Eu;(function(n){function e(t){let r=t;return r&amp;&amp;r.writer!==void 0&amp;&amp;r.reader!==void 0}n.is=e})(Eu||(Eu={}));var ku;(function(n){function e(t){let r=t;return r&amp;&amp;r.process!==void 0&amp;&amp;typeof r.detached==&quot;boolean&quot;}n.is=e})(ku||(ku={}));var Ou=class extends YD.CommonLanguageClient{constructor(e,t,r,i,o){let s,a,u,h,g;Ee.string(t)?(s=e,a=t,u=r,h=i,g=!!o):(s=e.toLowerCase(),a=e,u=t,h=r,g=i),g===void 0&amp;&amp;(g=!1),super(s,a,h),this._serverOptions=u,this._forceDebug=g,this._isInDebugMode=g;try{this.checkVersion()}catch(p){throw Ee.string(p.message)&amp;&amp;this.outputChannel.appendLine(p.message),p}}checkVersion(){let e=dp.parse(jn.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${jn.version}`);if(e.prerelease&amp;&amp;e.prerelease.length&gt;0&amp;&amp;(e.prerelease=[]),!dp.satisfies(e,fp))throw new Error(`The language client requires VS Code version ${fp} but received version ${jn.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=&gt;setTimeout(e,1e3)),this.start()):this.start()}stop(e=2e3){return super.stop(e).finally(()=&gt;{if(this._serverProcess){let t=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&amp;&amp;this.checkProcessDied(t),this._isDetached=void 0}})}checkProcessDied(e){!e||setTimeout(()=&gt;{try{process.kill(e.pid,0),(0,eS.terminate)(e)}catch{}},2e3)}handleConnectionClosed(){this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&amp;&amp;(e.processId=process.pid)}createMessageTransports(e){function t(g,p){if(!g&amp;&amp;!p)return;let C=Object.create(null);return Object.keys(process.env).forEach(R=&gt;C[R]=process.env[R]),p&amp;&amp;(C.ELECTRON_RUN_AS_NODE=&quot;1&quot;,C.ELECTRON_NO_ASAR=&quot;1&quot;),g&amp;&amp;Object.keys(g).forEach(R=&gt;C[R]=g[R]),C}let r=[&quot;--debug=&quot;,&quot;--debug-brk=&quot;,&quot;--inspect=&quot;,&quot;--inspect-brk=&quot;],i=[&quot;--debug&quot;,&quot;--debug-brk&quot;,&quot;--inspect&quot;,&quot;--inspect-brk&quot;];function o(){let g=process.execArgv;return g?g.some(p=&gt;r.some(C=&gt;p.startsWith(C))||i.some(C=&gt;p===C)):!1}function s(g){if(g.stdin===null||g.stdout===null||g.stderr===null)throw new Error(&quot;Process created without stdio streams&quot;)}let a=this._serverOptions;if(Ee.func(a))return a().then(g=&gt;{if(ZD.MessageTransports.is(g))return this._isDetached=!!g.detached,g;if(Eu.is(g))return this._isDetached=!!g.detached,{reader:new xe.StreamMessageReader(g.reader),writer:new xe.StreamMessageWriter(g.writer)};{let p;return ku.is(g)?(p=g.process,this._isDetached=g.detached):(p=g,this._isDetached=!1),p.stderr.on(&quot;data&quot;,C=&gt;this.outputChannel.append(Ee.string(C)?C:C.toString(e))),{reader:new xe.StreamMessageReader(p.stdout),writer:new xe.StreamMessageWriter(p.stdin)}}});let u,h=a;return h.run||h.debug?this._forceDebug||o()?(u=h.debug,this._isInDebugMode=!0):(u=h.run,this._isInDebugMode=!1):u=a,this._getServerWorkingDir(u.options).then(g=&gt;{if(qu.is(u)&amp;&amp;u.module){let p=u,C=p.transport||Le.stdio;if(p.runtime){let R=[],E=p.options??Object.create(null);E.execArgv&amp;&amp;E.execArgv.forEach(N=&gt;R.push(N)),R.push(p.module),p.args&amp;&amp;p.args.forEach(N=&gt;R.push(N));let I=Object.create(null);I.cwd=g,I.env=t(E.env,!1);let F=this._getRuntimePath(p.runtime,g),A;if(C===Le.ipc?(I.stdio=[null,null,null,&quot;ipc&quot;],R.push(&quot;--node-ipc&quot;)):C===Le.stdio?R.push(&quot;--stdio&quot;):C===Le.pipe?(A=(0,xe.generateRandomPipeName)(),R.push(`--pipe=${A}`)):Mn.isSocket(C)&amp;&amp;R.push(`--socket=${C.port}`),R.push(`--clientProcessId=${process.pid.toString()}`),C===Le.ipc||C===Le.stdio){let N=Tn.spawn(F,R,I);return!N||!N.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),Promise.resolve({reader:new xe.IPCMessageReader(N),writer:new xe.IPCMessageWriter(N)})):Promise.resolve({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)}))}else{if(C===Le.pipe)return(0,xe.createClientPipeTransport)(A).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))});if(Mn.isSocket(C))return(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.spawn(F,R,I);return!L||!L.pid?Promise.reject(`Launching server using runtime ${F} failed.`):(this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;({reader:j[0],writer:j[1]})))})}}else{let R;return new Promise((E,I)=&gt;{let F=(p.args&amp;&amp;p.args.slice())??[];C===Le.ipc?F.push(&quot;--node-ipc&quot;):C===Le.stdio?F.push(&quot;--stdio&quot;):C===Le.pipe?(R=(0,xe.generateRandomPipeName)(),F.push(`--pipe=${R}`)):Mn.isSocket(C)&amp;&amp;F.push(`--socket=${C.port}`),F.push(`--clientProcessId=${process.pid.toString()}`);let A=p.options??Object.create(null);if(A.env=t(A.env,!0),A.execArgv=A.execArgv||[],A.cwd=g,A.silent=!0,C===Le.ipc||C===Le.stdio){let N=Tn.fork(p.module,F||[],A);s(N),this._serverProcess=N,N.stderr.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),C===Le.ipc?(N.stdout.on(&quot;data&quot;,L=&gt;this.outputChannel.append(Ee.string(L)?L:L.toString(e))),E({reader:new xe.IPCMessageReader(this._serverProcess),writer:new xe.IPCMessageWriter(this._serverProcess)})):E({reader:new xe.StreamMessageReader(N.stdout),writer:new xe.StreamMessageWriter(N.stdin)})}else C===Le.pipe?(0,xe.createClientPipeTransport)(R).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I):Mn.isSocket(C)&amp;&amp;(0,xe.createClientSocketTransport)(C.port).then(N=&gt;{let L=Tn.fork(p.module,F||[],A);s(L),this._serverProcess=L,L.stderr.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),L.stdout.on(&quot;data&quot;,j=&gt;this.outputChannel.append(Ee.string(j)?j:j.toString(e))),N.onConnected().then(j=&gt;{E({reader:j[0],writer:j[1]})},I)},I)})}}else if(Pu.is(u)&amp;&amp;u.command){let p=u,C=u.args!==void 0?u.args.slice(0):[],R,E=u.transport;if(E===Le.stdio)C.push(&quot;--stdio&quot;);else if(E===Le.pipe)R=(0,xe.generateRandomPipeName)(),C.push(`--pipe=${R}`);else if(Mn.isSocket(E))C.push(`--socket=${E.port}`);else if(E===Le.ipc)throw new Error(&quot;Transport kind ipc is not support for command executable&quot;);let I=Object.assign({},p.options);if(I.cwd=I.cwd||g,E===void 0||E===Le.stdio){let F=Tn.spawn(p.command,C,I);return!F||!F.pid?Promise.reject(`Launching server using command ${p.command} failed.`):(F.stderr.on(&quot;data&quot;,A=&gt;this.outputChannel.append(Ee.string(A)?A:A.toString(e))),this._serverProcess=F,this._isDetached=!!I.detached,Promise.resolve({reader:new xe.StreamMessageReader(F.stdout),writer:new xe.StreamMessageWriter(F.stdin)}))}else{if(E===Le.pipe)return(0,xe.createClientPipeTransport)(R).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))});if(Mn.isSocket(E))return(0,xe.createClientSocketTransport)(E.port).then(F=&gt;{let A=Tn.spawn(p.command,C,I);if(!A||!A.pid)throw new Error(`Launching server using command ${p.command} failed.`);return this._serverProcess=A,this._isDetached=!!I.detached,A.stderr.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),A.stdout.on(&quot;data&quot;,N=&gt;this.outputChannel.append(Ee.string(N)?N:N.toString(e))),F.onConnected().then(N=&gt;({reader:N[0],writer:N[1]}))})}}return Promise.reject(new Error(&quot;Unsupported server configuration &quot;+JSON.stringify(a,null,4)))})}_getRuntimePath(e,t){if(Tu.isAbsolute(e))return e;let r=this._mainGetRootPath();if(r!==void 0){let i=Tu.join(r,e);if(_u.existsSync(i))return i}if(t!==void 0){let i=Tu.join(t,e);if(_u.existsSync(i))return i}return e}_mainGetRootPath(){let e=jn.workspace.workspaceFolders;if(!e||e.length===0)return;let t=e[0];if(t.uri.scheme===&quot;file&quot;)return t.uri.fsPath}_getServerWorkingDir(e){let t=e&amp;&amp;e.cwd;return t||(t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),t?new Promise(r=&gt;{_u.lstat(t,(i,o)=&gt;{r(!i&amp;&amp;o.isDirectory()?t:void 0)})}):Promise.resolve(void 0)}getLocale(){let e=process.env.VSCODE_NLS_CONFIG;if(e===void 0)return&quot;en&quot;;let t;try{t=JSON.parse(e)}catch{}return t===void 0||typeof t.locale!=&quot;string&quot;?&quot;en&quot;:t.locale}};vt.LanguageClient=Ou;var xu=class{constructor(e,t){this._client=e,this._setting=t,this._listeners=[]}start(){return jn.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new jn.Disposable(()=&gt;{this._client.needsStop()&amp;&amp;this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf(&quot;.&quot;),t=e&gt;=0?this._setting.substr(0,e):this._setting,r=e&gt;=0?this._setting.substr(e+1):void 0,i=r?jn.workspace.getConfiguration(t).get(r,!1):jn.workspace.getConfiguration(t);i&amp;&amp;this._client.needsStart()?this._client.start():!i&amp;&amp;this._client.needsStop()&amp;&amp;this._client.stop()}};vt.SettingMonitor=xu});var mp=q((_b,gp)=&gt;{&quot;use strict&quot;;gp.exports=pp()});var rS={};_p(rS,{activate:()=&gt;tS,activateInlayHints:()=&gt;yp,deactivate:()=&gt;nS});module.exports=Pp(rS);var Ut=require(&quot;vscode&quot;),vp=Tp(mp()),Di;async function tS(n){let e=Ut.window.createOutputChannel(&quot;Hexpat Language Server trace&quot;),r={command:process.env.HEXPAT_SERVER_PATH||&quot;hexpat-language-server&quot;,options:{env:{...process.env,RUST_LOG:&quot;debug&quot;}}},i={run:r,debug:r},o={documentSelector:[{scheme:&quot;file&quot;,language:&quot;hexpat&quot;}],synchronize:{fileEvents:Ut.workspace.createFileSystemWatcher(&quot;**/.clientrc&quot;)},traceOutputChannel:e};Di=new vp.LanguageClient(&quot;hexpat-language-server&quot;,&quot;hexpat language server&quot;,i,o),yp(n),Di.start()}function nS(){if(!!Di)return Di.stop()}function yp(n){let e={hintsProvider:null,updateHintsEventEmitter:new Ut.EventEmitter,async onConfigChange(){this.dispose();let t=this.updateHintsEventEmitter.event;this.hintsProvider=Ut.languages.registerInlayHintsProvider({scheme:&quot;file&quot;,language:&quot;hexpat&quot;},new class{constructor(){this.onDidChangeInlayHints=t}resolveInlayHint(r,i){return{label:r.label,...r}}async provideInlayHints(r,i,o){let s=await Di.sendRequest(&quot;custom/inlay_hint&quot;,{path:r.uri.toString()}).catch(a=&gt;null);return s==null?[]:s.map(a=&gt;{let[u,h,g]=a,p=r.positionAt(u);return{position:r.positionAt(h),paddingLeft:!0,label:[{value:g,location:new Ut.Location(r.uri,p)}]}})}})},onDidChangeTextDocument({contentChanges:t,document:r}){},dispose(){var t;(t=this.hintsProvider)==null||t.dispose(),this.hintsProvider=null,this.updateHintsEventEmitter.dispose()}};Ut.workspace.onDidChangeConfiguration(e.onConfigChange,e,n.subscriptions),Ut.workspace.onDidChangeTextDocument(e.onDidChangeTextDocument,e,n.subscriptions),e.onConfigChange().catch(console.error)}0&amp;&amp;(module.exports={activate,activateInlayHints,deactivate});
</failure>
		</testcase>
	</testsuite>
</testsuites>

